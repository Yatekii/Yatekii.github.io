{"version":3,"file":"bundle.js","sources":["../../node_modules/mithril/mithril.js","../../node_modules/jsplumb/dist/js/jsplumb.js","../../src/js/helpers.js","../../src/js/marker.js","../../src/js/oscilloscope.js","../../src/js/source.js","../../src/js/trace.js","../../src/js/conf.js","../../src/js/nodes/app.js","../../src/js/main.js"],"sourcesContent":["new function() {\n\nfunction Vnode(tag, key, attrs0, children, text, dom) {\n\treturn {tag: tag, key: key, attrs: attrs0, children: children, text: text, dom: dom, domSize: undefined, state: {}, events: undefined, instance: undefined, skip: false}\n}\nVnode.normalize = function(node) {\n\tif (Array.isArray(node)) return Vnode(\"[\", undefined, undefined, Vnode.normalizeChildren(node), undefined, undefined)\n\tif (node != null && typeof node !== \"object\") return Vnode(\"#\", undefined, undefined, node === false ? \"\" : node, undefined, undefined)\n\treturn node\n}\nVnode.normalizeChildren = function normalizeChildren(children) {\n\tfor (var i = 0; i < children.length; i++) {\n\t\tchildren[i] = Vnode.normalize(children[i])\n\t}\n\treturn children\n}\nvar selectorParser = /(?:(^|#|\\.)([^#\\.\\[\\]]+))|(\\[(.+?)(?:\\s*=\\s*(\"|'|)((?:\\\\[\"'\\]]|.)*?)\\5)?\\])/g\nvar selectorCache = {}\nfunction hyperscript(selector) {\n\tif (selector == null || typeof selector !== \"string\" && typeof selector.view !== \"function\") {\n\t\tthrow Error(\"The selector must be either a string or a component.\");\n\t}\n\tif (typeof selector === \"string\" && selectorCache[selector] === undefined) {\n\t\tvar match, tag, classes = [], attributes = {}\n\t\twhile (match = selectorParser.exec(selector)) {\n\t\t\tvar type = match[1], value = match[2]\n\t\t\tif (type === \"\" && value !== \"\") tag = value\n\t\t\telse if (type === \"#\") attributes.id = value\n\t\t\telse if (type === \".\") classes.push(value)\n\t\t\telse if (match[3][0] === \"[\") {\n\t\t\t\tvar attrValue = match[6]\n\t\t\t\tif (attrValue) attrValue = attrValue.replace(/\\\\([\"'])/g, \"$1\").replace(/\\\\\\\\/g, \"\\\\\")\n\t\t\t\tif (match[4] === \"class\") classes.push(attrValue)\n\t\t\t\telse attributes[match[4]] = attrValue || true\n\t\t\t}\n\t\t}\n\t\tif (classes.length > 0) attributes.className = classes.join(\" \")\n\t\tselectorCache[selector] = function(attrs, children) {\n\t\t\tvar hasAttrs = false, childList, text\n\t\t\tvar className = attrs.className || attrs.class\n\t\t\tfor (var key in attributes) attrs[key] = attributes[key]\n\t\t\tif (className !== undefined) {\n\t\t\t\tif (attrs.class !== undefined) {\n\t\t\t\t\tattrs.class = undefined\n\t\t\t\t\tattrs.className = className\n\t\t\t\t}\n\t\t\t\tif (attributes.className !== undefined) attrs.className = attributes.className + \" \" + className\n\t\t\t}\n\t\t\tfor (var key in attrs) {\n\t\t\t\tif (key !== \"key\") {\n\t\t\t\t\thasAttrs = true\n\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (Array.isArray(children) && children.length == 1 && children[0] != null && children[0].tag === \"#\") text = children[0].children\n\t\t\telse childList = children\n\t\t\treturn Vnode(tag || \"div\", attrs.key, hasAttrs ? attrs : undefined, childList, text, undefined)\n\t\t}\n\t}\n\tvar attrs, children, childrenIndex\n\tif (arguments[1] == null || typeof arguments[1] === \"object\" && arguments[1].tag === undefined && !Array.isArray(arguments[1])) {\n\t\tattrs = arguments[1]\n\t\tchildrenIndex = 2\n\t}\n\telse childrenIndex = 1\n\tif (arguments.length === childrenIndex + 1) {\n\t\tchildren = Array.isArray(arguments[childrenIndex]) ? arguments[childrenIndex] : [arguments[childrenIndex]]\n\t}\n\telse {\n\t\tchildren = []\n\t\tfor (var i = childrenIndex; i < arguments.length; i++) children.push(arguments[i])\n\t}\n\tif (typeof selector === \"string\") return selectorCache[selector](attrs || {}, Vnode.normalizeChildren(children))\n\treturn Vnode(selector, attrs && attrs.key, attrs || {}, Vnode.normalizeChildren(children), undefined, undefined)\n}\nhyperscript.trust = function(html) {\n\tif (html == null) html = \"\"\n\treturn Vnode(\"<\", undefined, undefined, html, undefined, undefined)\n}\nhyperscript.fragment = function(attrs1, children) {\n\treturn Vnode(\"[\", attrs1.key, attrs1, Vnode.normalizeChildren(children), undefined, undefined)\n}\nvar m = hyperscript\n/** @constructor */\nvar PromisePolyfill = function(executor) {\n\tif (!(this instanceof PromisePolyfill)) throw new Error(\"Promise must be called with `new`\")\n\tif (typeof executor !== \"function\") throw new TypeError(\"executor must be a function\")\n\tvar self = this, resolvers = [], rejectors = [], resolveCurrent = handler(resolvers, true), rejectCurrent = handler(rejectors, false)\n\tvar instance = self._instance = {resolvers: resolvers, rejectors: rejectors}\n\tvar callAsync = typeof setImmediate === \"function\" ? setImmediate : setTimeout\n\tfunction handler(list, shouldAbsorb) {\n\t\treturn function execute(value) {\n\t\t\tvar then\n\t\t\ttry {\n\t\t\t\tif (shouldAbsorb && value != null && (typeof value === \"object\" || typeof value === \"function\") && typeof (then = value.then) === \"function\") {\n\t\t\t\t\tif (value === self) throw new TypeError(\"Promise can't be resolved w/ itself\")\n\t\t\t\t\texecuteOnce(then.bind(value))\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tcallAsync(function() {\n\t\t\t\t\t\tif (!shouldAbsorb && list.length === 0) console.error(\"Possible unhandled promise rejection:\", value)\n\t\t\t\t\t\tfor (var i = 0; i < list.length; i++) list[i](value)\n\t\t\t\t\t\tresolvers.length = 0, rejectors.length = 0\n\t\t\t\t\t\tinstance.state = shouldAbsorb\n\t\t\t\t\t\tinstance.retry = function() {execute(value)}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t\tcatch (e) {\n\t\t\t\trejectCurrent(e)\n\t\t\t}\n\t\t}\n\t}\n\tfunction executeOnce(then) {\n\t\tvar runs = 0\n\t\tfunction run(fn) {\n\t\t\treturn function(value) {\n\t\t\t\tif (runs++ > 0) return\n\t\t\t\tfn(value)\n\t\t\t}\n\t\t}\n\t\tvar onerror = run(rejectCurrent)\n\t\ttry {then(run(resolveCurrent), onerror)} catch (e) {onerror(e)}\n\t}\n\texecuteOnce(executor)\n}\nPromisePolyfill.prototype.then = function(onFulfilled, onRejection) {\n\tvar self = this, instance = self._instance\n\tfunction handle(callback, list, next, state) {\n\t\tlist.push(function(value) {\n\t\t\tif (typeof callback !== \"function\") next(value)\n\t\t\telse try {resolveNext(callback(value))} catch (e) {if (rejectNext) rejectNext(e)}\n\t\t})\n\t\tif (typeof instance.retry === \"function\" && state === instance.state) instance.retry()\n\t}\n\tvar resolveNext, rejectNext\n\tvar promise = new PromisePolyfill(function(resolve, reject) {resolveNext = resolve, rejectNext = reject})\n\thandle(onFulfilled, instance.resolvers, resolveNext, true), handle(onRejection, instance.rejectors, rejectNext, false)\n\treturn promise\n}\nPromisePolyfill.prototype.catch = function(onRejection) {\n\treturn this.then(null, onRejection)\n}\nPromisePolyfill.resolve = function(value) {\n\tif (value instanceof PromisePolyfill) return value\n\treturn new PromisePolyfill(function(resolve) {resolve(value)})\n}\nPromisePolyfill.reject = function(value) {\n\treturn new PromisePolyfill(function(resolve, reject) {reject(value)})\n}\nPromisePolyfill.all = function(list) {\n\treturn new PromisePolyfill(function(resolve, reject) {\n\t\tvar total = list.length, count = 0, values = []\n\t\tif (list.length === 0) resolve([])\n\t\telse for (var i = 0; i < list.length; i++) {\n\t\t\t(function(i) {\n\t\t\t\tfunction consume(value) {\n\t\t\t\t\tcount++\n\t\t\t\t\tvalues[i] = value\n\t\t\t\t\tif (count === total) resolve(values)\n\t\t\t\t}\n\t\t\t\tif (list[i] != null && (typeof list[i] === \"object\" || typeof list[i] === \"function\") && typeof list[i].then === \"function\") {\n\t\t\t\t\tlist[i].then(consume, reject)\n\t\t\t\t}\n\t\t\t\telse consume(list[i])\n\t\t\t})(i)\n\t\t}\n\t})\n}\nPromisePolyfill.race = function(list) {\n\treturn new PromisePolyfill(function(resolve, reject) {\n\t\tfor (var i = 0; i < list.length; i++) {\n\t\t\tlist[i].then(resolve, reject)\n\t\t}\n\t})\n}\nif (typeof window !== \"undefined\") {\n\tif (typeof window.Promise === \"undefined\") window.Promise = PromisePolyfill\n\tvar PromisePolyfill = window.Promise\n} else if (typeof global !== \"undefined\") {\n\tif (typeof global.Promise === \"undefined\") global.Promise = PromisePolyfill\n\tvar PromisePolyfill = global.Promise\n} else {\n}\nvar buildQueryString = function(object) {\n\tif (Object.prototype.toString.call(object) !== \"[object Object]\") return \"\"\n\tvar args = []\n\tfor (var key0 in object) {\n\t\tdestructure(key0, object[key0])\n\t}\n\treturn args.join(\"&\")\n\tfunction destructure(key0, value) {\n\t\tif (Array.isArray(value)) {\n\t\t\tfor (var i = 0; i < value.length; i++) {\n\t\t\t\tdestructure(key0 + \"[\" + i + \"]\", value[i])\n\t\t\t}\n\t\t}\n\t\telse if (Object.prototype.toString.call(value) === \"[object Object]\") {\n\t\t\tfor (var i in value) {\n\t\t\t\tdestructure(key0 + \"[\" + i + \"]\", value[i])\n\t\t\t}\n\t\t}\n\t\telse args.push(encodeURIComponent(key0) + (value != null && value !== \"\" ? \"=\" + encodeURIComponent(value) : \"\"))\n\t}\n}\nvar _8 = function($window, Promise) {\n\tvar callbackCount = 0\n\tvar oncompletion\n\tfunction setCompletionCallback(callback) {oncompletion = callback}\n\tfunction finalizer() {\n\t\tvar count = 0\n\t\tfunction complete() {if (--count === 0 && typeof oncompletion === \"function\") oncompletion()}\n\t\treturn function finalize(promise0) {\n\t\t\tvar then0 = promise0.then\n\t\t\tpromise0.then = function() {\n\t\t\t\tcount++\n\t\t\t\tvar next = then0.apply(promise0, arguments)\n\t\t\t\tnext.then(complete, function(e) {\n\t\t\t\t\tcomplete()\n\t\t\t\t\tif (count === 0) throw e\n\t\t\t\t})\n\t\t\t\treturn finalize(next)\n\t\t\t}\n\t\t\treturn promise0\n\t\t}\n\t}\n\tfunction normalize(args, extra) {\n\t\tif (typeof args === \"string\") {\n\t\t\tvar url = args\n\t\t\targs = extra || {}\n\t\t\tif (args.url == null) args.url = url\n\t\t}\n\t\treturn args\n\t}\n\tfunction request(args, extra) {\n\t\tvar finalize = finalizer()\n\t\targs = normalize(args, extra)\n\t\tvar promise0 = new Promise(function(resolve, reject) {\n\t\t\tif (args.method == null) args.method = \"GET\"\n\t\t\targs.method = args.method.toUpperCase()\n\t\t\tvar useBody = typeof args.useBody === \"boolean\" ? args.useBody : args.method !== \"GET\" && args.method !== \"TRACE\"\n\t\t\tif (typeof args.serialize !== \"function\") args.serialize = typeof FormData !== \"undefined\" && args.data instanceof FormData ? function(value) {return value} : JSON.stringify\n\t\t\tif (typeof args.deserialize !== \"function\") args.deserialize = deserialize\n\t\t\tif (typeof args.extract !== \"function\") args.extract = extract\n\t\t\targs.url = interpolate(args.url, args.data)\n\t\t\tif (useBody) args.data = args.serialize(args.data)\n\t\t\telse args.url = assemble(args.url, args.data)\n\t\t\tvar xhr = new $window.XMLHttpRequest()\n\t\t\txhr.open(args.method, args.url, typeof args.async === \"boolean\" ? args.async : true, typeof args.user === \"string\" ? args.user : undefined, typeof args.password === \"string\" ? args.password : undefined)\n\t\t\tif (args.serialize === JSON.stringify && useBody) {\n\t\t\t\txhr.setRequestHeader(\"Content-Type\", \"application/json; charset=utf-8\")\n\t\t\t}\n\t\t\tif (args.deserialize === deserialize) {\n\t\t\t\txhr.setRequestHeader(\"Accept\", \"application/json, text/*\")\n\t\t\t}\n\t\t\tif (args.withCredentials) xhr.withCredentials = args.withCredentials\n\t\t\tfor (var key in args.headers) if ({}.hasOwnProperty.call(args.headers, key)) {\n\t\t\t\txhr.setRequestHeader(key, args.headers[key])\n\t\t\t}\n\t\t\tif (typeof args.config === \"function\") xhr = args.config(xhr, args) || xhr\n\t\t\txhr.onreadystatechange = function() {\n\t\t\t\t// Don't throw errors on xhr.abort(). XMLHttpRequests ends up in a state of\n\t\t\t\t// xhr.status == 0 and xhr.readyState == 4 if aborted after open, but before completion.\n\t\t\t\tif (xhr.status && xhr.readyState === 4) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tvar response = (args.extract !== extract) ? args.extract(xhr, args) : args.deserialize(args.extract(xhr, args))\n\t\t\t\t\t\tif ((xhr.status >= 200 && xhr.status < 300) || xhr.status === 304) {\n\t\t\t\t\t\t\tresolve(cast(args.type, response))\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tvar error = new Error(xhr.responseText)\n\t\t\t\t\t\t\tfor (var key in response) error[key] = response[key]\n\t\t\t\t\t\t\treject(error)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tcatch (e) {\n\t\t\t\t\t\treject(e)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (useBody && (args.data != null)) xhr.send(args.data)\n\t\t\telse xhr.send()\n\t\t})\n\t\treturn args.background === true ? promise0 : finalize(promise0)\n\t}\n\tfunction jsonp(args, extra) {\n\t\tvar finalize = finalizer()\n\t\targs = normalize(args, extra)\n\t\tvar promise0 = new Promise(function(resolve, reject) {\n\t\t\tvar callbackName = args.callbackName || \"_mithril_\" + Math.round(Math.random() * 1e16) + \"_\" + callbackCount++\n\t\t\tvar script = $window.document.createElement(\"script\")\n\t\t\t$window[callbackName] = function(data) {\n\t\t\t\tscript.parentNode.removeChild(script)\n\t\t\t\tresolve(cast(args.type, data))\n\t\t\t\tdelete $window[callbackName]\n\t\t\t}\n\t\t\tscript.onerror = function() {\n\t\t\t\tscript.parentNode.removeChild(script)\n\t\t\t\treject(new Error(\"JSONP request failed\"))\n\t\t\t\tdelete $window[callbackName]\n\t\t\t}\n\t\t\tif (args.data == null) args.data = {}\n\t\t\targs.url = interpolate(args.url, args.data)\n\t\t\targs.data[args.callbackKey || \"callback\"] = callbackName\n\t\t\tscript.src = assemble(args.url, args.data)\n\t\t\t$window.document.documentElement.appendChild(script)\n\t\t})\n\t\treturn args.background === true? promise0 : finalize(promise0)\n\t}\n\tfunction interpolate(url, data) {\n\t\tif (data == null) return url\n\t\tvar tokens = url.match(/:[^\\/]+/gi) || []\n\t\tfor (var i = 0; i < tokens.length; i++) {\n\t\t\tvar key = tokens[i].slice(1)\n\t\t\tif (data[key] != null) {\n\t\t\t\turl = url.replace(tokens[i], data[key])\n\t\t\t}\n\t\t}\n\t\treturn url\n\t}\n\tfunction assemble(url, data) {\n\t\tvar querystring = buildQueryString(data)\n\t\tif (querystring !== \"\") {\n\t\t\tvar prefix = url.indexOf(\"?\") < 0 ? \"?\" : \"&\"\n\t\t\turl += prefix + querystring\n\t\t}\n\t\treturn url\n\t}\n\tfunction deserialize(data) {\n\t\ttry {return data !== \"\" ? JSON.parse(data) : null}\n\t\tcatch (e) {throw new Error(data)}\n\t}\n\tfunction extract(xhr) {return xhr.responseText}\n\tfunction cast(type0, data) {\n\t\tif (typeof type0 === \"function\") {\n\t\t\tif (Array.isArray(data)) {\n\t\t\t\tfor (var i = 0; i < data.length; i++) {\n\t\t\t\t\tdata[i] = new type0(data[i])\n\t\t\t\t}\n\t\t\t}\n\t\t\telse return new type0(data)\n\t\t}\n\t\treturn data\n\t}\n\treturn {request: request, jsonp: jsonp, setCompletionCallback: setCompletionCallback}\n}\nvar requestService = _8(window, PromisePolyfill)\nvar coreRenderer = function($window) {\n\tvar $doc = $window.document\n\tvar $emptyFragment = $doc.createDocumentFragment()\n\tvar onevent\n\tfunction setEventCallback(callback) {return onevent = callback}\n\t//create\n\tfunction createNodes(parent, vnodes, start, end, hooks, nextSibling, ns) {\n\t\tfor (var i = start; i < end; i++) {\n\t\t\tvar vnode = vnodes[i]\n\t\t\tif (vnode != null) {\n\t\t\t\tcreateNode(parent, vnode, hooks, ns, nextSibling)\n\t\t\t}\n\t\t}\n\t}\n\tfunction createNode(parent, vnode, hooks, ns, nextSibling) {\n\t\tvar tag = vnode.tag\n\t\tif (vnode.attrs != null) initLifecycle(vnode.attrs, vnode, hooks)\n\t\tif (typeof tag === \"string\") {\n\t\t\tswitch (tag) {\n\t\t\t\tcase \"#\": return createText(parent, vnode, nextSibling)\n\t\t\t\tcase \"<\": return createHTML(parent, vnode, nextSibling)\n\t\t\t\tcase \"[\": return createFragment(parent, vnode, hooks, ns, nextSibling)\n\t\t\t\tdefault: return createElement(parent, vnode, hooks, ns, nextSibling)\n\t\t\t}\n\t\t}\n\t\telse return createComponent(parent, vnode, hooks, ns, nextSibling)\n\t}\n\tfunction createText(parent, vnode, nextSibling) {\n\t\tvnode.dom = $doc.createTextNode(vnode.children)\n\t\tinsertNode(parent, vnode.dom, nextSibling)\n\t\treturn vnode.dom\n\t}\n\tfunction createHTML(parent, vnode, nextSibling) {\n\t\tvar match1 = vnode.children.match(/^\\s*?<(\\w+)/im) || []\n\t\tvar parent1 = {caption: \"table\", thead: \"table\", tbody: \"table\", tfoot: \"table\", tr: \"tbody\", th: \"tr\", td: \"tr\", colgroup: \"table\", col: \"colgroup\"}[match1[1]] || \"div\"\n\t\tvar temp = $doc.createElement(parent1)\n\t\ttemp.innerHTML = vnode.children\n\t\tvnode.dom = temp.firstChild\n\t\tvnode.domSize = temp.childNodes.length\n\t\tvar fragment = $doc.createDocumentFragment()\n\t\tvar child\n\t\twhile (child = temp.firstChild) {\n\t\t\tfragment.appendChild(child)\n\t\t}\n\t\tinsertNode(parent, fragment, nextSibling)\n\t\treturn fragment\n\t}\n\tfunction createFragment(parent, vnode, hooks, ns, nextSibling) {\n\t\tvar fragment = $doc.createDocumentFragment()\n\t\tif (vnode.children != null) {\n\t\t\tvar children = vnode.children\n\t\t\tcreateNodes(fragment, children, 0, children.length, hooks, null, ns)\n\t\t}\n\t\tvnode.dom = fragment.firstChild\n\t\tvnode.domSize = fragment.childNodes.length\n\t\tinsertNode(parent, fragment, nextSibling)\n\t\treturn fragment\n\t}\n\tfunction createElement(parent, vnode, hooks, ns, nextSibling) {\n\t\tvar tag = vnode.tag\n\t\tswitch (vnode.tag) {\n\t\t\tcase \"svg\": ns = \"http://www.w3.org/2000/svg\"; break\n\t\t\tcase \"math\": ns = \"http://www.w3.org/1998/Math/MathML\"; break\n\t\t}\n\t\tvar attrs2 = vnode.attrs\n\t\tvar is = attrs2 && attrs2.is\n\t\tvar element = ns ?\n\t\t\tis ? $doc.createElementNS(ns, tag, {is: is}) : $doc.createElementNS(ns, tag) :\n\t\t\tis ? $doc.createElement(tag, {is: is}) : $doc.createElement(tag)\n\t\tvnode.dom = element\n\t\tif (attrs2 != null) {\n\t\t\tsetAttrs(vnode, attrs2, ns)\n\t\t}\n\t\tinsertNode(parent, element, nextSibling)\n\t\tif (vnode.attrs != null && vnode.attrs.contenteditable != null) {\n\t\t\tsetContentEditable(vnode)\n\t\t}\n\t\telse {\n\t\t\tif (vnode.text != null) {\n\t\t\t\tif (vnode.text !== \"\") element.textContent = vnode.text\n\t\t\t\telse vnode.children = [Vnode(\"#\", undefined, undefined, vnode.text, undefined, undefined)]\n\t\t\t}\n\t\t\tif (vnode.children != null) {\n\t\t\t\tvar children = vnode.children\n\t\t\t\tcreateNodes(element, children, 0, children.length, hooks, null, ns)\n\t\t\t\tsetLateAttrs(vnode)\n\t\t\t}\n\t\t}\n\t\treturn element\n\t}\n\tfunction createComponent(parent, vnode, hooks, ns, nextSibling) {\n\t\tvnode.state = Object.create(vnode.tag)\n\t\tvar view = vnode.tag.view\n\t\tif (view.reentrantLock != null) return $emptyFragment\n\t\tview.reentrantLock = true\n\t\tinitLifecycle(vnode.tag, vnode, hooks)\n\t\tvnode.instance = Vnode.normalize(view.call(vnode.state, vnode))\n\t\tview.reentrantLock = null\n\t\tif (vnode.instance != null) {\n\t\t\tif (vnode.instance === vnode) throw Error(\"A view cannot return the vnode it received as arguments\")\n\t\t\tvar element = createNode(parent, vnode.instance, hooks, ns, nextSibling)\n\t\t\tvnode.dom = vnode.instance.dom\n\t\t\tvnode.domSize = vnode.dom != null ? vnode.instance.domSize : 0\n\t\t\tinsertNode(parent, element, nextSibling)\n\t\t\treturn element\n\t\t}\n\t\telse {\n\t\t\tvnode.domSize = 0\n\t\t\treturn $emptyFragment\n\t\t}\n\t}\n\t//update\n\tfunction updateNodes(parent, old, vnodes, recycling, hooks, nextSibling, ns) {\n\t\tif (old === vnodes || old == null && vnodes == null) return\n\t\telse if (old == null) createNodes(parent, vnodes, 0, vnodes.length, hooks, nextSibling, undefined)\n\t\telse if (vnodes == null) removeNodes(old, 0, old.length, vnodes)\n\t\telse {\n\t\t\tif (old.length === vnodes.length) {\n\t\t\t\tvar isUnkeyed = false\n\t\t\t\tfor (var i = 0; i < vnodes.length; i++) {\n\t\t\t\t\tif (vnodes[i] != null && old[i] != null) {\n\t\t\t\t\t\tisUnkeyed = vnodes[i].key == null && old[i].key == null\n\t\t\t\t\t\tbreak\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (isUnkeyed) {\n\t\t\t\t\tfor (var i = 0; i < old.length; i++) {\n\t\t\t\t\t\tif (old[i] === vnodes[i]) continue\n\t\t\t\t\t\telse if (old[i] == null && vnodes[i] != null) createNode(parent, vnodes[i], hooks, ns, getNextSibling(old, i + 1, nextSibling))\n\t\t\t\t\t\telse if (vnodes[i] == null) removeNodes(old, i, i + 1, vnodes)\n\t\t\t\t\t\telse updateNode(parent, old[i], vnodes[i], hooks, getNextSibling(old, i + 1, nextSibling), false, ns)\n\t\t\t\t\t}\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t}\n\t\t\trecycling = recycling || isRecyclable(old, vnodes)\n\t\t\tif (recycling) old = old.concat(old.pool)\n\t\t\t\n\t\t\tvar oldStart = 0, start = 0, oldEnd = old.length - 1, end = vnodes.length - 1, map\n\t\t\twhile (oldEnd >= oldStart && end >= start) {\n\t\t\t\tvar o = old[oldStart], v = vnodes[start]\n\t\t\t\tif (o === v && !recycling) oldStart++, start++\n\t\t\t\telse if (o == null) oldStart++\n\t\t\t\telse if (v == null) start++\n\t\t\t\telse if (o.key === v.key) {\n\t\t\t\t\toldStart++, start++\n\t\t\t\t\tupdateNode(parent, o, v, hooks, getNextSibling(old, oldStart, nextSibling), recycling, ns)\n\t\t\t\t\tif (recycling && o.tag === v.tag) insertNode(parent, toFragment(o), nextSibling)\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tvar o = old[oldEnd]\n\t\t\t\t\tif (o === v && !recycling) oldEnd--, start++\n\t\t\t\t\telse if (o == null) oldEnd--\n\t\t\t\t\telse if (v == null) start++\n\t\t\t\t\telse if (o.key === v.key) {\n\t\t\t\t\t\tupdateNode(parent, o, v, hooks, getNextSibling(old, oldEnd + 1, nextSibling), recycling, ns)\n\t\t\t\t\t\tif (recycling || start < end) insertNode(parent, toFragment(o), getNextSibling(old, oldStart, nextSibling))\n\t\t\t\t\t\toldEnd--, start++\n\t\t\t\t\t}\n\t\t\t\t\telse break\n\t\t\t\t}\n\t\t\t}\n\t\t\twhile (oldEnd >= oldStart && end >= start) {\n\t\t\t\tvar o = old[oldEnd], v = vnodes[end]\n\t\t\t\tif (o === v && !recycling) oldEnd--, end--\n\t\t\t\telse if (o == null) oldEnd--\n\t\t\t\telse if (v == null) end--\n\t\t\t\telse if (o.key === v.key) {\n\t\t\t\t\tupdateNode(parent, o, v, hooks, getNextSibling(old, oldEnd + 1, nextSibling), recycling, ns)\n\t\t\t\t\tif (recycling && o.tag === v.tag) insertNode(parent, toFragment(o), nextSibling)\n\t\t\t\t\tif (o.dom != null) nextSibling = o.dom\n\t\t\t\t\toldEnd--, end--\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tif (!map) map = getKeyMap(old, oldEnd)\n\t\t\t\t\tif (v != null) {\n\t\t\t\t\t\tvar oldIndex = map[v.key]\n\t\t\t\t\t\tif (oldIndex != null) {\n\t\t\t\t\t\t\tvar movable = old[oldIndex]\n\t\t\t\t\t\t\tupdateNode(parent, movable, v, hooks, getNextSibling(old, oldEnd + 1, nextSibling), recycling, ns)\n\t\t\t\t\t\t\tinsertNode(parent, toFragment(movable), nextSibling)\n\t\t\t\t\t\t\told[oldIndex].skip = true\n\t\t\t\t\t\t\tif (movable.dom != null) nextSibling = movable.dom\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tvar dom = createNode(parent, v, hooks, undefined, nextSibling)\n\t\t\t\t\t\t\tnextSibling = dom\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tend--\n\t\t\t\t}\n\t\t\t\tif (end < start) break\n\t\t\t}\n\t\t\tcreateNodes(parent, vnodes, start, end + 1, hooks, nextSibling, ns)\n\t\t\tremoveNodes(old, oldStart, oldEnd + 1, vnodes)\n\t\t}\n\t}\n\tfunction updateNode(parent, old, vnode, hooks, nextSibling, recycling, ns) {\n\t\tvar oldTag = old.tag, tag = vnode.tag\n\t\tif (oldTag === tag) {\n\t\t\tvnode.state = old.state\n\t\t\tvnode.events = old.events\n\t\t\tif (shouldUpdate(vnode, old)) return\n\t\t\tif (vnode.attrs != null) {\n\t\t\t\tupdateLifecycle(vnode.attrs, vnode, hooks, recycling)\n\t\t\t}\n\t\t\tif (typeof oldTag === \"string\") {\n\t\t\t\tswitch (oldTag) {\n\t\t\t\t\tcase \"#\": updateText(old, vnode); break\n\t\t\t\t\tcase \"<\": updateHTML(parent, old, vnode, nextSibling); break\n\t\t\t\t\tcase \"[\": updateFragment(parent, old, vnode, recycling, hooks, nextSibling, ns); break\n\t\t\t\t\tdefault: updateElement(old, vnode, recycling, hooks, ns)\n\t\t\t\t}\n\t\t\t}\n\t\t\telse updateComponent(parent, old, vnode, hooks, nextSibling, recycling, ns)\n\t\t}\n\t\telse {\n\t\t\tremoveNode(old, null)\n\t\t\tcreateNode(parent, vnode, hooks, ns, nextSibling)\n\t\t}\n\t}\n\tfunction updateText(old, vnode) {\n\t\tif (old.children.toString() !== vnode.children.toString()) {\n\t\t\told.dom.nodeValue = vnode.children\n\t\t}\n\t\tvnode.dom = old.dom\n\t}\n\tfunction updateHTML(parent, old, vnode, nextSibling) {\n\t\tif (old.children !== vnode.children) {\n\t\t\ttoFragment(old)\n\t\t\tcreateHTML(parent, vnode, nextSibling)\n\t\t}\n\t\telse vnode.dom = old.dom, vnode.domSize = old.domSize\n\t}\n\tfunction updateFragment(parent, old, vnode, recycling, hooks, nextSibling, ns) {\n\t\tupdateNodes(parent, old.children, vnode.children, recycling, hooks, nextSibling, ns)\n\t\tvar domSize = 0, children = vnode.children\n\t\tvnode.dom = null\n\t\tif (children != null) {\n\t\t\tfor (var i = 0; i < children.length; i++) {\n\t\t\t\tvar child = children[i]\n\t\t\t\tif (child != null && child.dom != null) {\n\t\t\t\t\tif (vnode.dom == null) vnode.dom = child.dom\n\t\t\t\t\tdomSize += child.domSize || 1\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (domSize !== 1) vnode.domSize = domSize\n\t\t}\n\t}\n\tfunction updateElement(old, vnode, recycling, hooks, ns) {\n\t\tvar element = vnode.dom = old.dom\n\t\tswitch (vnode.tag) {\n\t\t\tcase \"svg\": ns = \"http://www.w3.org/2000/svg\"; break\n\t\t\tcase \"math\": ns = \"http://www.w3.org/1998/Math/MathML\"; break\n\t\t}\n\t\tif (vnode.tag === \"textarea\") {\n\t\t\tif (vnode.attrs == null) vnode.attrs = {}\n\t\t\tif (vnode.text != null) {\n\t\t\t\tvnode.attrs.value = vnode.text //FIXME handle0 multiple children\n\t\t\t\tvnode.text = undefined\n\t\t\t}\n\t\t}\n\t\tupdateAttrs(vnode, old.attrs, vnode.attrs, ns)\n\t\tif (vnode.attrs != null && vnode.attrs.contenteditable != null) {\n\t\t\tsetContentEditable(vnode)\n\t\t}\n\t\telse if (old.text != null && vnode.text != null && vnode.text !== \"\") {\n\t\t\tif (old.text.toString() !== vnode.text.toString()) old.dom.firstChild.nodeValue = vnode.text\n\t\t}\n\t\telse {\n\t\t\tif (old.text != null) old.children = [Vnode(\"#\", undefined, undefined, old.text, undefined, old.dom.firstChild)]\n\t\t\tif (vnode.text != null) vnode.children = [Vnode(\"#\", undefined, undefined, vnode.text, undefined, undefined)]\n\t\t\tupdateNodes(element, old.children, vnode.children, recycling, hooks, null, ns)\n\t\t}\n\t}\n\tfunction updateComponent(parent, old, vnode, hooks, nextSibling, recycling, ns) {\n\t\tvnode.instance = Vnode.normalize(vnode.tag.view.call(vnode.state, vnode))\n\t\tupdateLifecycle(vnode.tag, vnode, hooks, recycling)\n\t\tif (vnode.instance != null) {\n\t\t\tif (old.instance == null) createNode(parent, vnode.instance, hooks, ns, nextSibling)\n\t\t\telse updateNode(parent, old.instance, vnode.instance, hooks, nextSibling, recycling, ns)\n\t\t\tvnode.dom = vnode.instance.dom\n\t\t\tvnode.domSize = vnode.instance.domSize\n\t\t}\n\t\telse if (old.instance != null) {\n\t\t\tremoveNode(old.instance, null)\n\t\t\tvnode.dom = undefined\n\t\t\tvnode.domSize = 0\n\t\t}\n\t\telse {\n\t\t\tvnode.dom = old.dom\n\t\t\tvnode.domSize = old.domSize\n\t\t}\n\t}\n\tfunction isRecyclable(old, vnodes) {\n\t\tif (old.pool != null && Math.abs(old.pool.length - vnodes.length) <= Math.abs(old.length - vnodes.length)) {\n\t\t\tvar oldChildrenLength = old[0] && old[0].children && old[0].children.length || 0\n\t\t\tvar poolChildrenLength = old.pool[0] && old.pool[0].children && old.pool[0].children.length || 0\n\t\t\tvar vnodesChildrenLength = vnodes[0] && vnodes[0].children && vnodes[0].children.length || 0\n\t\t\tif (Math.abs(poolChildrenLength - vnodesChildrenLength) <= Math.abs(oldChildrenLength - vnodesChildrenLength)) {\n\t\t\t\treturn true\n\t\t\t}\n\t\t}\n\t\treturn false\n\t}\n\tfunction getKeyMap(vnodes, end) {\n\t\tvar map = {}, i = 0\n\t\tfor (var i = 0; i < end; i++) {\n\t\t\tvar vnode = vnodes[i]\n\t\t\tif (vnode != null) {\n\t\t\t\tvar key2 = vnode.key\n\t\t\t\tif (key2 != null) map[key2] = i\n\t\t\t}\n\t\t}\n\t\treturn map\n\t}\n\tfunction toFragment(vnode) {\n\t\tvar count0 = vnode.domSize\n\t\tif (count0 != null || vnode.dom == null) {\n\t\t\tvar fragment = $doc.createDocumentFragment()\n\t\t\tif (count0 > 0) {\n\t\t\t\tvar dom = vnode.dom\n\t\t\t\twhile (--count0) fragment.appendChild(dom.nextSibling)\n\t\t\t\tfragment.insertBefore(dom, fragment.firstChild)\n\t\t\t}\n\t\t\treturn fragment\n\t\t}\n\t\telse return vnode.dom\n\t}\n\tfunction getNextSibling(vnodes, i, nextSibling) {\n\t\tfor (; i < vnodes.length; i++) {\n\t\t\tif (vnodes[i] != null && vnodes[i].dom != null) return vnodes[i].dom\n\t\t}\n\t\treturn nextSibling\n\t}\n\tfunction insertNode(parent, dom, nextSibling) {\n\t\tif (nextSibling && nextSibling.parentNode) parent.insertBefore(dom, nextSibling)\n\t\telse parent.appendChild(dom)\n\t}\n\tfunction setContentEditable(vnode) {\n\t\tvar children = vnode.children\n\t\tif (children != null && children.length === 1 && children[0].tag === \"<\") {\n\t\t\tvar content = children[0].children\n\t\t\tif (vnode.dom.innerHTML !== content) vnode.dom.innerHTML = content\n\t\t}\n\t\telse if (vnode.text != null || children != null && children.length !== 0) throw new Error(\"Child node of a contenteditable must be trusted\")\n\t}\n\t//remove\n\tfunction removeNodes(vnodes, start, end, context) {\n\t\tfor (var i = start; i < end; i++) {\n\t\t\tvar vnode = vnodes[i]\n\t\t\tif (vnode != null) {\n\t\t\t\tif (vnode.skip) vnode.skip = false\n\t\t\t\telse removeNode(vnode, context)\n\t\t\t}\n\t\t}\n\t}\n\tfunction removeNode(vnode, context) {\n\t\tvar expected = 1, called = 0\n\t\tif (vnode.attrs && vnode.attrs.onbeforeremove) {\n\t\t\tvar result = vnode.attrs.onbeforeremove.call(vnode.state, vnode)\n\t\t\tif (result != null && typeof result.then === \"function\") {\n\t\t\t\texpected++\n\t\t\t\tresult.then(continuation, continuation)\n\t\t\t}\n\t\t}\n\t\tif (typeof vnode.tag !== \"string\" && vnode.tag.onbeforeremove) {\n\t\t\tvar result = vnode.tag.onbeforeremove.call(vnode.state, vnode)\n\t\t\tif (result != null && typeof result.then === \"function\") {\n\t\t\t\texpected++\n\t\t\t\tresult.then(continuation, continuation)\n\t\t\t}\n\t\t}\n\t\tcontinuation()\n\t\tfunction continuation() {\n\t\t\tif (++called === expected) {\n\t\t\t\tonremove(vnode)\n\t\t\t\tif (vnode.dom) {\n\t\t\t\t\tvar count0 = vnode.domSize || 1\n\t\t\t\t\tif (count0 > 1) {\n\t\t\t\t\t\tvar dom = vnode.dom\n\t\t\t\t\t\twhile (--count0) {\n\t\t\t\t\t\t\tremoveNodeFromDOM(dom.nextSibling)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tremoveNodeFromDOM(vnode.dom)\n\t\t\t\t\tif (context != null && vnode.domSize == null && !hasIntegrationMethods(vnode.attrs) && typeof vnode.tag === \"string\") { //TODO test custom elements\n\t\t\t\t\t\tif (!context.pool) context.pool = [vnode]\n\t\t\t\t\t\telse context.pool.push(vnode)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tfunction removeNodeFromDOM(node) {\n\t\tvar parent = node.parentNode\n\t\tif (parent != null) parent.removeChild(node)\n\t}\n\tfunction onremove(vnode) {\n\t\tif (vnode.attrs && vnode.attrs.onremove) vnode.attrs.onremove.call(vnode.state, vnode)\n\t\tif (typeof vnode.tag !== \"string\" && vnode.tag.onremove) vnode.tag.onremove.call(vnode.state, vnode)\n\t\tif (vnode.instance != null) onremove(vnode.instance)\n\t\telse {\n\t\t\tvar children = vnode.children\n\t\t\tif (Array.isArray(children)) {\n\t\t\t\tfor (var i = 0; i < children.length; i++) {\n\t\t\t\t\tvar child = children[i]\n\t\t\t\t\tif (child != null) onremove(child)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t//attrs2\n\tfunction setAttrs(vnode, attrs2, ns) {\n\t\tfor (var key2 in attrs2) {\n\t\t\tsetAttr(vnode, key2, null, attrs2[key2], ns)\n\t\t}\n\t}\n\tfunction setAttr(vnode, key2, old, value, ns) {\n\t\tvar element = vnode.dom\n\t\tif (key2 === \"key\" || key2 === \"is\" || (old === value && !isFormAttribute(vnode, key2)) && typeof value !== \"object\" || typeof value === \"undefined\" || isLifecycleMethod(key2)) return\n\t\tvar nsLastIndex = key2.indexOf(\":\")\n\t\tif (nsLastIndex > -1 && key2.substr(0, nsLastIndex) === \"xlink\") {\n\t\t\telement.setAttributeNS(\"http://www.w3.org/1999/xlink\", key2.slice(nsLastIndex + 1), value)\n\t\t}\n\t\telse if (key2[0] === \"o\" && key2[1] === \"n\" && typeof value === \"function\") updateEvent(vnode, key2, value)\n\t\telse if (key2 === \"style\") updateStyle(element, old, value)\n\t\telse if (key2 in element && !isAttribute(key2) && ns === undefined && !isCustomElement(vnode)) {\n\t\t\t//setting input[value] to same value by typing on focused element moves cursor to end in Chrome\n\t\t\tif (vnode.tag === \"input\" && key2 === \"value\" && vnode.dom.value === value && vnode.dom === $doc.activeElement) return\n\t\t\t//setting select[value] to same value while having select open blinks select dropdown in Chrome\n\t\t\tif (vnode.tag === \"select\" && key2 === \"value\" && vnode.dom.value === value && vnode.dom === $doc.activeElement) return\n\t\t\t//setting option[value] to same value while having select open blinks select dropdown in Chrome\n\t\t\tif (vnode.tag === \"option\" && key2 === \"value\" && vnode.dom.value === value) return\n\t\t\telement[key2] = value\n\t\t}\n\t\telse {\n\t\t\tif (typeof value === \"boolean\") {\n\t\t\t\tif (value) element.setAttribute(key2, \"\")\n\t\t\t\telse element.removeAttribute(key2)\n\t\t\t}\n\t\t\telse element.setAttribute(key2 === \"className\" ? \"class\" : key2, value)\n\t\t}\n\t}\n\tfunction setLateAttrs(vnode) {\n\t\tvar attrs2 = vnode.attrs\n\t\tif (vnode.tag === \"select\" && attrs2 != null) {\n\t\t\tif (\"value\" in attrs2) setAttr(vnode, \"value\", null, attrs2.value, undefined)\n\t\t\tif (\"selectedIndex\" in attrs2) setAttr(vnode, \"selectedIndex\", null, attrs2.selectedIndex, undefined)\n\t\t}\n\t}\n\tfunction updateAttrs(vnode, old, attrs2, ns) {\n\t\tif (attrs2 != null) {\n\t\t\tfor (var key2 in attrs2) {\n\t\t\t\tsetAttr(vnode, key2, old && old[key2], attrs2[key2], ns)\n\t\t\t}\n\t\t}\n\t\tif (old != null) {\n\t\t\tfor (var key2 in old) {\n\t\t\t\tif (attrs2 == null || !(key2 in attrs2)) {\n\t\t\t\t\tif (key2 === \"className\") key2 = \"class\"\n\t\t\t\t\tif (key2[0] === \"o\" && key2[1] === \"n\" && !isLifecycleMethod(key2)) updateEvent(vnode, key2, undefined)\n\t\t\t\t\telse if (key2 !== \"key\") vnode.dom.removeAttribute(key2)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tfunction isFormAttribute(vnode, attr) {\n\t\treturn attr === \"value\" || attr === \"checked\" || attr === \"selectedIndex\" || attr === \"selected\" && vnode.dom === $doc.activeElement\n\t}\n\tfunction isLifecycleMethod(attr) {\n\t\treturn attr === \"oninit\" || attr === \"oncreate\" || attr === \"onupdate\" || attr === \"onremove\" || attr === \"onbeforeremove\" || attr === \"onbeforeupdate\"\n\t}\n\tfunction isAttribute(attr) {\n\t\treturn attr === \"href\" || attr === \"list\" || attr === \"form\" || attr === \"width\" || attr === \"height\"// || attr === \"type\"\n\t}\n\tfunction isCustomElement(vnode){\n\t\treturn vnode.attrs.is || vnode.tag.indexOf(\"-\") > -1\n\t}\n\tfunction hasIntegrationMethods(source) {\n\t\treturn source != null && (source.oncreate || source.onupdate || source.onbeforeremove || source.onremove)\n\t}\n\t//style\n\tfunction updateStyle(element, old, style) {\n\t\tif (old === style) element.style.cssText = \"\", old = null\n\t\tif (style == null) element.style.cssText = \"\"\n\t\telse if (typeof style === \"string\") element.style.cssText = style\n\t\telse {\n\t\t\tif (typeof old === \"string\") element.style.cssText = \"\"\n\t\t\tfor (var key2 in style) {\n\t\t\t\telement.style[key2] = style[key2]\n\t\t\t}\n\t\t\tif (old != null && typeof old !== \"string\") {\n\t\t\t\tfor (var key2 in old) {\n\t\t\t\t\tif (!(key2 in style)) element.style[key2] = \"\"\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t//event\n\tfunction updateEvent(vnode, key2, value) {\n\t\tvar element = vnode.dom\n\t\tvar callback = typeof onevent !== \"function\" ? value : function(e) {\n\t\t\tvar result = value.call(element, e)\n\t\t\tonevent.call(element, e)\n\t\t\treturn result\n\t\t}\n\t\tif (key2 in element) element[key2] = typeof value === \"function\" ? callback : null\n\t\telse {\n\t\t\tvar eventName = key2.slice(2)\n\t\t\tif (vnode.events === undefined) vnode.events = {}\n\t\t\tif (vnode.events[key2] === callback) return\n\t\t\tif (vnode.events[key2] != null) element.removeEventListener(eventName, vnode.events[key2], false)\n\t\t\tif (typeof value === \"function\") {\n\t\t\t\tvnode.events[key2] = callback\n\t\t\t\telement.addEventListener(eventName, vnode.events[key2], false)\n\t\t\t}\n\t\t}\n\t}\n\t//lifecycle\n\tfunction initLifecycle(source, vnode, hooks) {\n\t\tif (typeof source.oninit === \"function\") source.oninit.call(vnode.state, vnode)\n\t\tif (typeof source.oncreate === \"function\") hooks.push(source.oncreate.bind(vnode.state, vnode))\n\t}\n\tfunction updateLifecycle(source, vnode, hooks, recycling) {\n\t\tif (recycling) initLifecycle(source, vnode, hooks)\n\t\telse if (typeof source.onupdate === \"function\") hooks.push(source.onupdate.bind(vnode.state, vnode))\n\t}\n\tfunction shouldUpdate(vnode, old) {\n\t\tvar forceVnodeUpdate, forceComponentUpdate\n\t\tif (vnode.attrs != null && typeof vnode.attrs.onbeforeupdate === \"function\") forceVnodeUpdate = vnode.attrs.onbeforeupdate.call(vnode.state, vnode, old)\n\t\tif (typeof vnode.tag !== \"string\" && typeof vnode.tag.onbeforeupdate === \"function\") forceComponentUpdate = vnode.tag.onbeforeupdate.call(vnode.state, vnode, old)\n\t\tif (!(forceVnodeUpdate === undefined && forceComponentUpdate === undefined) && !forceVnodeUpdate && !forceComponentUpdate) {\n\t\t\tvnode.dom = old.dom\n\t\t\tvnode.domSize = old.domSize\n\t\t\tvnode.instance = old.instance\n\t\t\treturn true\n\t\t}\n\t\treturn false\n\t}\n\tfunction render(dom, vnodes) {\n\t\tif (!dom) throw new Error(\"Ensure the DOM element being passed to m.route/m.mount/m.render is not undefined.\")\n\t\tvar hooks = []\n\t\tvar active = $doc.activeElement\n\t\t// First time0 rendering into a node clears it out\n\t\tif (dom.vnodes == null) dom.textContent = \"\"\n\t\tif (!Array.isArray(vnodes)) vnodes = [vnodes]\n\t\tupdateNodes(dom, dom.vnodes, Vnode.normalizeChildren(vnodes), false, hooks, null, undefined)\n\t\tdom.vnodes = vnodes\n\t\tfor (var i = 0; i < hooks.length; i++) hooks[i]()\n\t\tif ($doc.activeElement !== active) active.focus()\n\t}\n\treturn {render: render, setEventCallback: setEventCallback}\n}\nfunction throttle(callback) {\n\t//60fps translates to 16.6ms, round it down since setTimeout requires int\n\tvar time = 16\n\tvar last = 0, pending = null\n\tvar timeout = typeof requestAnimationFrame === \"function\" ? requestAnimationFrame : setTimeout\n\treturn function() {\n\t\tvar now = Date.now()\n\t\tif (last === 0 || now - last >= time) {\n\t\t\tlast = now\n\t\t\tcallback()\n\t\t}\n\t\telse if (pending === null) {\n\t\t\tpending = timeout(function() {\n\t\t\t\tpending = null\n\t\t\t\tcallback()\n\t\t\t\tlast = Date.now()\n\t\t\t}, time - (now - last))\n\t\t}\n\t}\n}\nvar _11 = function($window) {\n\tvar renderService = coreRenderer($window)\n\trenderService.setEventCallback(function(e) {\n\t\tif (e.redraw !== false) redraw()\n\t})\n\tvar callbacks = []\n\tfunction subscribe(key1, callback) {\n\t\tunsubscribe(key1)\n\t\tcallbacks.push(key1, throttle(callback))\n\t}\n\tfunction unsubscribe(key1) {\n\t\tvar index = callbacks.indexOf(key1)\n\t\tif (index > -1) callbacks.splice(index, 2)\n\t}\n    function redraw() {\n        for (var i = 1; i < callbacks.length; i += 2) {\n            callbacks[i]()\n        }\n    }\n\treturn {subscribe: subscribe, unsubscribe: unsubscribe, redraw: redraw, render: renderService.render}\n}\nvar redrawService = _11(window)\nrequestService.setCompletionCallback(redrawService.redraw)\nvar _16 = function(redrawService0) {\n\treturn function(root, component) {\n\t\tif (component === null) {\n\t\t\tredrawService0.render(root, [])\n\t\t\tredrawService0.unsubscribe(root)\n\t\t\treturn\n\t\t}\n\t\t\n\t\tif (component.view == null) throw new Error(\"m.mount(element, component) expects a component, not a vnode\")\n\t\t\n\t\tvar run0 = function() {\n\t\t\tredrawService0.render(root, Vnode(component))\n\t\t}\n\t\tredrawService0.subscribe(root, run0)\n\t\tredrawService0.redraw()\n\t}\n}\nm.mount = _16(redrawService)\nvar Promise = PromisePolyfill\nvar parseQueryString = function(string) {\n\tif (string === \"\" || string == null) return {}\n\tif (string.charAt(0) === \"?\") string = string.slice(1)\n\tvar entries = string.split(\"&\"), data0 = {}, counters = {}\n\tfor (var i = 0; i < entries.length; i++) {\n\t\tvar entry = entries[i].split(\"=\")\n\t\tvar key5 = decodeURIComponent(entry[0])\n\t\tvar value = entry.length === 2 ? decodeURIComponent(entry[1]) : \"\"\n\t\tif (value === \"true\") value = true\n\t\telse if (value === \"false\") value = false\n\t\tvar levels = key5.split(/\\]\\[?|\\[/)\n\t\tvar cursor = data0\n\t\tif (key5.indexOf(\"[\") > -1) levels.pop()\n\t\tfor (var j = 0; j < levels.length; j++) {\n\t\t\tvar level = levels[j], nextLevel = levels[j + 1]\n\t\t\tvar isNumber = nextLevel == \"\" || !isNaN(parseInt(nextLevel, 10))\n\t\t\tvar isValue = j === levels.length - 1\n\t\t\tif (level === \"\") {\n\t\t\t\tvar key5 = levels.slice(0, j).join()\n\t\t\t\tif (counters[key5] == null) counters[key5] = 0\n\t\t\t\tlevel = counters[key5]++\n\t\t\t}\n\t\t\tif (cursor[level] == null) {\n\t\t\t\tcursor[level] = isValue ? value : isNumber ? [] : {}\n\t\t\t}\n\t\t\tcursor = cursor[level]\n\t\t}\n\t}\n\treturn data0\n}\nvar coreRouter = function($window) {\n\tvar supportsPushState = typeof $window.history.pushState === \"function\"\n\tvar callAsync0 = typeof setImmediate === \"function\" ? setImmediate : setTimeout\n\tfunction normalize1(fragment0) {\n\t\tvar data = $window.location[fragment0].replace(/(?:%[a-f89][a-f0-9])+/gim, decodeURIComponent)\n\t\tif (fragment0 === \"pathname\" && data[0] !== \"/\") data = \"/\" + data\n\t\treturn data\n\t}\n\tvar asyncId\n\tfunction debounceAsync(callback0) {\n\t\treturn function() {\n\t\t\tif (asyncId != null) return\n\t\t\tasyncId = callAsync0(function() {\n\t\t\t\tasyncId = null\n\t\t\t\tcallback0()\n\t\t\t})\n\t\t}\n\t}\n\tfunction parsePath(path, queryData, hashData) {\n\t\tvar queryIndex = path.indexOf(\"?\")\n\t\tvar hashIndex = path.indexOf(\"#\")\n\t\tvar pathEnd = queryIndex > -1 ? queryIndex : hashIndex > -1 ? hashIndex : path.length\n\t\tif (queryIndex > -1) {\n\t\t\tvar queryEnd = hashIndex > -1 ? hashIndex : path.length\n\t\t\tvar queryParams = parseQueryString(path.slice(queryIndex + 1, queryEnd))\n\t\t\tfor (var key4 in queryParams) queryData[key4] = queryParams[key4]\n\t\t}\n\t\tif (hashIndex > -1) {\n\t\t\tvar hashParams = parseQueryString(path.slice(hashIndex + 1))\n\t\t\tfor (var key4 in hashParams) hashData[key4] = hashParams[key4]\n\t\t}\n\t\treturn path.slice(0, pathEnd)\n\t}\n\tvar router = {prefix: \"#!\"}\n\trouter.getPath = function() {\n\t\tvar type2 = router.prefix.charAt(0)\n\t\tswitch (type2) {\n\t\t\tcase \"#\": return normalize1(\"hash\").slice(router.prefix.length)\n\t\t\tcase \"?\": return normalize1(\"search\").slice(router.prefix.length) + normalize1(\"hash\")\n\t\t\tdefault: return normalize1(\"pathname\").slice(router.prefix.length) + normalize1(\"search\") + normalize1(\"hash\")\n\t\t}\n\t}\n\trouter.setPath = function(path, data, options) {\n\t\tvar queryData = {}, hashData = {}\n\t\tpath = parsePath(path, queryData, hashData)\n\t\tif (data != null) {\n\t\t\tfor (var key4 in data) queryData[key4] = data[key4]\n\t\t\tpath = path.replace(/:([^\\/]+)/g, function(match2, token) {\n\t\t\t\tdelete queryData[token]\n\t\t\t\treturn data[token]\n\t\t\t})\n\t\t}\n\t\tvar query = buildQueryString(queryData)\n\t\tif (query) path += \"?\" + query\n\t\tvar hash = buildQueryString(hashData)\n\t\tif (hash) path += \"#\" + hash\n\t\tif (supportsPushState) {\n\t\t\tvar state = options ? options.state : null\n\t\t\tvar title = options ? options.title : null\n\t\t\t$window.onpopstate()\n\t\t\tif (options && options.replace) $window.history.replaceState(state, title, router.prefix + path)\n\t\t\telse $window.history.pushState(state, title, router.prefix + path)\n\t\t}\n\t\telse $window.location.href = router.prefix + path\n\t}\n\trouter.defineRoutes = function(routes, resolve, reject) {\n\t\tfunction resolveRoute() {\n\t\t\tvar path = router.getPath()\n\t\t\tvar params = {}\n\t\t\tvar pathname = parsePath(path, params, params)\n\t\t\tvar state = $window.history.state\n\t\t\tif (state != null) {\n\t\t\t\tfor (var k in state) params[k] = state[k]\n\t\t\t}\n\t\t\tfor (var route0 in routes) {\n\t\t\t\tvar matcher = new RegExp(\"^\" + route0.replace(/:[^\\/]+?\\.{3}/g, \"(.*?)\").replace(/:[^\\/]+/g, \"([^\\\\/]+)\") + \"\\/?$\")\n\t\t\t\tif (matcher.test(pathname)) {\n\t\t\t\t\tpathname.replace(matcher, function() {\n\t\t\t\t\t\tvar keys = route0.match(/:[^\\/]+/g) || []\n\t\t\t\t\t\tvar values = [].slice.call(arguments, 1, -2)\n\t\t\t\t\t\tfor (var i = 0; i < keys.length; i++) {\n\t\t\t\t\t\t\tparams[keys[i].replace(/:|\\./g, \"\")] = decodeURIComponent(values[i])\n\t\t\t\t\t\t}\n\t\t\t\t\t\tresolve(routes[route0], params, path, route0)\n\t\t\t\t\t})\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t}\n\t\t\treject(path, params)\n\t\t}\n\t\tif (supportsPushState) $window.onpopstate = debounceAsync(resolveRoute)\n\t\telse if (router.prefix.charAt(0) === \"#\") $window.onhashchange = resolveRoute\n\t\tresolveRoute()\n\t}\n\treturn router\n}\nvar _20 = function($window, redrawService0) {\n\tvar routeService = coreRouter($window)\n\tvar identity = function(v) {return v}\n\tvar render1, component, attrs3, currentPath, lastUpdate\n\tvar route = function(root, defaultRoute, routes) {\n\t\tif (root == null) throw new Error(\"Ensure the DOM element that was passed to `m.route` is not undefined\")\n\t\tvar run1 = function() {\n\t\t\tif (render1 != null) redrawService0.render(root, render1(Vnode(component, attrs3.key, attrs3)))\n\t\t}\n\t\tvar bail = function(path) {\n\t\t\tif (path !== defaultRoute) routeService.setPath(defaultRoute, null, {replace: true})\n\t\t\telse throw new Error(\"Could not resolve default route \" + defaultRoute)\n\t\t}\n\t\trouteService.defineRoutes(routes, function(payload, params, path) {\n\t\t\tvar update = lastUpdate = function(routeResolver, comp) {\n\t\t\t\tif (update !== lastUpdate) return\n\t\t\t\tcomponent = comp != null && typeof comp.view === \"function\" ? comp : \"div\", attrs3 = params, currentPath = path, lastUpdate = null\n\t\t\t\trender1 = (routeResolver.render || identity).bind(routeResolver)\n\t\t\t\trun1()\n\t\t\t}\n\t\t\tif (payload.view) update({}, payload)\n\t\t\telse {\n\t\t\t\tif (payload.onmatch) {\n\t\t\t\t\tPromise.resolve(payload.onmatch(params, path)).then(function(resolved) {\n\t\t\t\t\t\tupdate(payload, resolved)\n\t\t\t\t\t}, bail)\n\t\t\t\t}\n\t\t\t\telse update(payload, \"div\")\n\t\t\t}\n\t\t}, bail)\n\t\tredrawService0.subscribe(root, run1)\n\t}\n\troute.set = function(path, data, options) {\n\t\tif (lastUpdate != null) options = {replace: true}\n\t\tlastUpdate = null\n\t\trouteService.setPath(path, data, options)\n\t}\n\troute.get = function() {return currentPath}\n\troute.prefix = function(prefix0) {routeService.prefix = prefix0}\n\troute.link = function(vnode1) {\n\t\tvnode1.dom.setAttribute(\"href\", routeService.prefix + vnode1.attrs.href)\n\t\tvnode1.dom.onclick = function(e) {\n\t\t\tif (e.ctrlKey || e.metaKey || e.shiftKey || e.which === 2) return\n\t\t\te.preventDefault()\n\t\t\te.redraw = false\n\t\t\tvar href = this.getAttribute(\"href\")\n\t\t\tif (href.indexOf(routeService.prefix) === 0) href = href.slice(routeService.prefix.length)\n\t\t\troute.set(href, undefined, undefined)\n\t\t}\n\t}\n\troute.param = function(key3) {\n\t\tif(typeof attrs3 !== \"undefined\" && typeof key3 !== \"undefined\") return attrs3[key3]\n\t\treturn attrs3\n\t}\n\treturn route\n}\nm.route = _20(window, redrawService)\nm.withAttr = function(attrName, callback1, context) {\n\treturn function(e) {\n\t\tcallback1.call(context || this, attrName in e.currentTarget ? e.currentTarget[attrName] : e.currentTarget.getAttribute(attrName))\n\t}\n}\nvar _28 = coreRenderer(window)\nm.render = _28.render\nm.redraw = redrawService.redraw\nm.request = requestService.request\nm.jsonp = requestService.jsonp\nm.parseQueryString = parseQueryString\nm.buildQueryString = buildQueryString\nm.version = \"1.0.1\"\nm.vnode = Vnode\nif (typeof module !== \"undefined\") module[\"exports\"] = m\nelse window.m = m\n}","/**\n * jsBezier\n *\n * Copyright (c) 2010 - 2017 jsPlumb (hello@jsplumbtoolkit.com)\n *\n * licensed under the MIT license.\n *\n * a set of Bezier curve functions that deal with Beziers, used by jsPlumb, and perhaps useful for other people.  These functions work with Bezier\n * curves of arbitrary degree.\n *\n * - functions are all in the 'jsBezier' namespace.\n *\n * - all input points should be in the format {x:.., y:..}. all output points are in this format too.\n *\n * - all input curves should be in the format [ {x:.., y:..}, {x:.., y:..}, {x:.., y:..}, {x:.., y:..} ]\n *\n * - 'location' as used as an input here refers to a decimal in the range 0-1 inclusive, which indicates a point some proportion along the length\n * of the curve.  location as output has the same format and meaning.\n *\n *\n * Function List:\n * --------------\n *\n * distanceFromCurve(point, curve)\n *\n * \tCalculates the distance that the given point lies from the given Bezier.  Note that it is computed relative to the center of the Bezier,\n * so if you have stroked the curve with a wide pen you may wish to take that into account!  The distance returned is relative to the values\n * of the curve and the point - it will most likely be pixels.\n *\n * gradientAtPoint(curve, location)\n *\n * \tCalculates the gradient to the curve at the given location, as a decimal between 0 and 1 inclusive.\n *\n * gradientAtPointAlongCurveFrom (curve, location)\n *\n *\tCalculates the gradient at the point on the given curve that is 'distance' units from location.\n *\n * nearestPointOnCurve(point, curve)\n *\n *\tCalculates the nearest point to the given point on the given curve.  The return value of this is a JS object literal, containing both the\n *point's coordinates and also the 'location' of the point (see above), for example:  { point:{x:551,y:150}, location:0.263365 }.\n *\n * pointOnCurve(curve, location)\n *\n * \tCalculates the coordinates of the point on the given Bezier curve at the given location.\n *\n * pointAlongCurveFrom(curve, location, distance)\n *\n * \tCalculates the coordinates of the point on the given curve that is 'distance' units from location.  'distance' should be in the same coordinate\n * space as that used to construct the Bezier curve.  For an HTML Canvas usage, for example, distance would be a measure of pixels.\n *\n * locationAlongCurveFrom(curve, location, distance)\n *\n * \tCalculates the location on the given curve that is 'distance' units from location.  'distance' should be in the same coordinate\n * space as that used to construct the Bezier curve.  For an HTML Canvas usage, for example, distance would be a measure of pixels.\n *\n * perpendicularToCurveAt(curve, location, length, distance)\n *\n * \tCalculates the perpendicular to the given curve at the given location.  length is the length of the line you wish for (it will be centered\n * on the point at 'location'). distance is optional, and allows you to specify a point along the path from the given location as the center of\n * the perpendicular returned.  The return value of this is an array of two points: [ {x:...,y:...}, {x:...,y:...} ].\n *\n *\n */\n\n(function() {\n\n    var root = this;\n\n    if(typeof Math.sgn == \"undefined\") {\n        Math.sgn = function(x) { return x == 0 ? 0 : x > 0 ? 1 :-1; };\n    }\n\n    var Vectors = {\n            subtract \t: \tfunction(v1, v2) { return {x:v1.x - v2.x, y:v1.y - v2.y }; },\n            dotProduct\t: \tfunction(v1, v2) { return (v1.x * v2.x)  + (v1.y * v2.y); },\n            square\t\t:\tfunction(v) { return Math.sqrt((v.x * v.x) + (v.y * v.y)); },\n            scale\t\t:\tfunction(v, s) { return {x:v.x * s, y:v.y * s }; }\n        },\n\n        maxRecursion = 64,\n        flatnessTolerance = Math.pow(2.0,-maxRecursion-1);\n\n    /**\n     * Calculates the distance that the point lies from the curve.\n     *\n     * @param point a point in the form {x:567, y:3342}\n     * @param curve a Bezier curve in the form [{x:..., y:...}, {x:..., y:...}, {x:..., y:...}, {x:..., y:...}].  note that this is currently\n     * hardcoded to assume cubiz beziers, but would be better off supporting any degree.\n     * @return a JS object literal containing location and distance, for example: {location:0.35, distance:10}.  Location is analogous to the location\n     * argument you pass to the pointOnPath function: it is a ratio of distance travelled along the curve.  Distance is the distance in pixels from\n     * the point to the curve.\n     */\n    var _distanceFromCurve = function(point, curve) {\n        var candidates = [],\n            w = _convertToBezier(point, curve),\n            degree = curve.length - 1, higherDegree = (2 * degree) - 1,\n            numSolutions = _findRoots(w, higherDegree, candidates, 0),\n            v = Vectors.subtract(point, curve[0]), dist = Vectors.square(v), t = 0.0;\n\n        for (var i = 0; i < numSolutions; i++) {\n            v = Vectors.subtract(point, _bezier(curve, degree, candidates[i], null, null));\n            var newDist = Vectors.square(v);\n            if (newDist < dist) {\n                dist = newDist;\n                t = candidates[i];\n            }\n        }\n        v = Vectors.subtract(point, curve[degree]);\n        newDist = Vectors.square(v);\n        if (newDist < dist) {\n            dist = newDist;\n            t = 1.0;\n        }\n        return {location:t, distance:dist};\n    };\n    /**\n     * finds the nearest point on the curve to the given point.\n     */\n    var _nearestPointOnCurve = function(point, curve) {\n        var td = _distanceFromCurve(point, curve);\n        return {point:_bezier(curve, curve.length - 1, td.location, null, null), location:td.location};\n    };\n    var _convertToBezier = function(point, curve) {\n        var degree = curve.length - 1, higherDegree = (2 * degree) - 1,\n            c = [], d = [], cdTable = [], w = [],\n            z = [ [1.0, 0.6, 0.3, 0.1], [0.4, 0.6, 0.6, 0.4], [0.1, 0.3, 0.6, 1.0] ];\n\n        for (var i = 0; i <= degree; i++) c[i] = Vectors.subtract(curve[i], point);\n        for (var i = 0; i <= degree - 1; i++) {\n            d[i] = Vectors.subtract(curve[i+1], curve[i]);\n            d[i] = Vectors.scale(d[i], 3.0);\n        }\n        for (var row = 0; row <= degree - 1; row++) {\n            for (var column = 0; column <= degree; column++) {\n                if (!cdTable[row]) cdTable[row] = [];\n                cdTable[row][column] = Vectors.dotProduct(d[row], c[column]);\n            }\n        }\n        for (i = 0; i <= higherDegree; i++) {\n            if (!w[i]) w[i] = [];\n            w[i].y = 0.0;\n            w[i].x = parseFloat(i) / higherDegree;\n        }\n        var n = degree, m = degree-1;\n        for (var k = 0; k <= n + m; k++) {\n            var lb = Math.max(0, k - m),\n                ub = Math.min(k, n);\n            for (i = lb; i <= ub; i++) {\n                j = k - i;\n                w[i+j].y += cdTable[j][i] * z[j][i];\n            }\n        }\n        return w;\n    };\n    /**\n     * counts how many roots there are.\n     */\n    var _findRoots = function(w, degree, t, depth) {\n        var left = [], right = [],\n            left_count, right_count,\n            left_t = [], right_t = [];\n\n        switch (_getCrossingCount(w, degree)) {\n            case 0 : {\n                return 0;\n            }\n            case 1 : {\n                if (depth >= maxRecursion) {\n                    t[0] = (w[0].x + w[degree].x) / 2.0;\n                    return 1;\n                }\n                if (_isFlatEnough(w, degree)) {\n                    t[0] = _computeXIntercept(w, degree);\n                    return 1;\n                }\n                break;\n            }\n        }\n        _bezier(w, degree, 0.5, left, right);\n        left_count  = _findRoots(left,  degree, left_t, depth+1);\n        right_count = _findRoots(right, degree, right_t, depth+1);\n        for (var i = 0; i < left_count; i++) t[i] = left_t[i];\n        for (var i = 0; i < right_count; i++) t[i+left_count] = right_t[i];\n        return (left_count+right_count);\n    };\n    var _getCrossingCount = function(curve, degree) {\n        var n_crossings = 0, sign, old_sign;\n        sign = old_sign = Math.sgn(curve[0].y);\n        for (var i = 1; i <= degree; i++) {\n            sign = Math.sgn(curve[i].y);\n            if (sign != old_sign) n_crossings++;\n            old_sign = sign;\n        }\n        return n_crossings;\n    };\n    var _isFlatEnough = function(curve, degree) {\n        var  error,\n            intercept_1, intercept_2, left_intercept, right_intercept,\n            a, b, c, det, dInv, a1, b1, c1, a2, b2, c2;\n        a = curve[0].y - curve[degree].y;\n        b = curve[degree].x - curve[0].x;\n        c = curve[0].x * curve[degree].y - curve[degree].x * curve[0].y;\n\n        var max_distance_above = max_distance_below = 0.0;\n\n        for (var i = 1; i < degree; i++) {\n            var value = a * curve[i].x + b * curve[i].y + c;\n            if (value > max_distance_above)\n                max_distance_above = value;\n            else if (value < max_distance_below)\n                max_distance_below = value;\n        }\n\n        a1 = 0.0; b1 = 1.0; c1 = 0.0; a2 = a; b2 = b;\n        c2 = c - max_distance_above;\n        det = a1 * b2 - a2 * b1;\n        dInv = 1.0/det;\n        intercept_1 = (b1 * c2 - b2 * c1) * dInv;\n        a2 = a; b2 = b; c2 = c - max_distance_below;\n        det = a1 * b2 - a2 * b1;\n        dInv = 1.0/det;\n        intercept_2 = (b1 * c2 - b2 * c1) * dInv;\n        left_intercept = Math.min(intercept_1, intercept_2);\n        right_intercept = Math.max(intercept_1, intercept_2);\n        error = right_intercept - left_intercept;\n        return (error < flatnessTolerance)? 1 : 0;\n    };\n    var _computeXIntercept = function(curve, degree) {\n        var XLK = 1.0, YLK = 0.0,\n            XNM = curve[degree].x - curve[0].x, YNM = curve[degree].y - curve[0].y,\n            XMK = curve[0].x - 0.0, YMK = curve[0].y - 0.0,\n            det = XNM*YLK - YNM*XLK, detInv = 1.0/det,\n            S = (XNM*YMK - YNM*XMK) * detInv;\n        return 0.0 + XLK * S;\n    };\n    var _bezier = function(curve, degree, t, left, right) {\n        var temp = [[]];\n        for (var j =0; j <= degree; j++) temp[0][j] = curve[j];\n        for (var i = 1; i <= degree; i++) {\n            for (var j =0 ; j <= degree - i; j++) {\n                if (!temp[i]) temp[i] = [];\n                if (!temp[i][j]) temp[i][j] = {};\n                temp[i][j].x = (1.0 - t) * temp[i-1][j].x + t * temp[i-1][j+1].x;\n                temp[i][j].y = (1.0 - t) * temp[i-1][j].y + t * temp[i-1][j+1].y;\n            }\n        }\n        if (left != null)\n            for (j = 0; j <= degree; j++) left[j]  = temp[j][0];\n        if (right != null)\n            for (j = 0; j <= degree; j++) right[j] = temp[degree-j][j];\n\n        return (temp[degree][0]);\n    };\n\n    var _curveFunctionCache = {};\n    var _getCurveFunctions = function(order) {\n        var fns = _curveFunctionCache[order];\n        if (!fns) {\n            fns = [];\n            var f_term = function() { return function(t) { return Math.pow(t, order); }; },\n                l_term = function() { return function(t) { return Math.pow((1-t), order); }; },\n                c_term = function(c) { return function(t) { return c; }; },\n                t_term = function() { return function(t) { return t; }; },\n                one_minus_t_term = function() { return function(t) { return 1-t; }; },\n                _termFunc = function(terms) {\n                    return function(t) {\n                        var p = 1;\n                        for (var i = 0; i < terms.length; i++) p = p * terms[i](t);\n                        return p;\n                    };\n                };\n\n            fns.push(new f_term());  // first is t to the power of the curve order\n            for (var i = 1; i < order; i++) {\n                var terms = [new c_term(order)];\n                for (var j = 0 ; j < (order - i); j++) terms.push(new t_term());\n                for (var j = 0 ; j < i; j++) terms.push(new one_minus_t_term());\n                fns.push(new _termFunc(terms));\n            }\n            fns.push(new l_term());  // last is (1-t) to the power of the curve order\n\n            _curveFunctionCache[order] = fns;\n        }\n\n        return fns;\n    };\n\n\n    /**\n     * calculates a point on the curve, for a Bezier of arbitrary order.\n     * @param curve an array of control points, eg [{x:10,y:20}, {x:50,y:50}, {x:100,y:100}, {x:120,y:100}].  For a cubic bezier this should have four points.\n     * @param location a decimal indicating the distance along the curve the point should be located at.  this is the distance along the curve as it travels, taking the way it bends into account.  should be a number from 0 to 1, inclusive.\n     */\n    var _pointOnPath = function(curve, location) {\n        var cc = _getCurveFunctions(curve.length - 1),\n            _x = 0, _y = 0;\n        for (var i = 0; i < curve.length ; i++) {\n            _x = _x + (curve[i].x * cc[i](location));\n            _y = _y + (curve[i].y * cc[i](location));\n        }\n\n        return {x:_x, y:_y};\n    };\n\n    var _dist = function(p1,p2) {\n        return Math.sqrt(Math.pow(p1.x - p2.x, 2) + Math.pow(p1.y - p2.y, 2));\n    };\n\n    var _isPoint = function(curve) {\n        return curve[0].x == curve[1].x && curve[0].y == curve[1].y;\n    };\n\n    /**\n     * finds the point that is 'distance' along the path from 'location'.  this method returns both the x,y location of the point and also\n     * its 'location' (proportion of travel along the path); the method below - _pointAlongPathFrom - calls this method and just returns the\n     * point.\n     */\n    var _pointAlongPath = function(curve, location, distance) {\n\n        if (_isPoint(curve)) {\n            return {\n                point:curve[0],\n                location:location\n            };\n        }\n\n        var prev = _pointOnPath(curve, location),\n            tally = 0,\n            curLoc = location,\n            direction = distance > 0 ? 1 : -1,\n            cur = null;\n\n        while (tally < Math.abs(distance)) {\n            curLoc += (0.005 * direction);\n            cur = _pointOnPath(curve, curLoc);\n            tally += _dist(cur, prev);\n            prev = cur;\n        }\n        return {point:cur, location:curLoc};\n    };\n\n    var _length = function(curve) {\n        if (_isPoint(curve)) return 0;\n\n        var prev = _pointOnPath(curve, 0),\n            tally = 0,\n            curLoc = 0,\n            direction = 1,\n            cur = null;\n\n        while (curLoc < 1) {\n            curLoc += (0.005 * direction);\n            cur = _pointOnPath(curve, curLoc);\n            tally += _dist(cur, prev);\n            prev = cur;\n        }\n        return tally;\n    };\n\n    /**\n     * finds the point that is 'distance' along the path from 'location'.\n     */\n    var _pointAlongPathFrom = function(curve, location, distance) {\n        return _pointAlongPath(curve, location, distance).point;\n    };\n\n    /**\n     * finds the location that is 'distance' along the path from 'location'.\n     */\n    var _locationAlongPathFrom = function(curve, location, distance) {\n        return _pointAlongPath(curve, location, distance).location;\n    };\n\n    /**\n     * returns the gradient of the curve at the given location, which is a decimal between 0 and 1 inclusive.\n     *\n     * thanks // http://bimixual.org/AnimationLibrary/beziertangents.html\n     */\n    var _gradientAtPoint = function(curve, location) {\n        var p1 = _pointOnPath(curve, location),\n            p2 = _pointOnPath(curve.slice(0, curve.length - 1), location),\n            dy = p2.y - p1.y, dx = p2.x - p1.x;\n        return dy == 0 ? Infinity : Math.atan(dy / dx);\n    };\n\n    /**\n     returns the gradient of the curve at the point which is 'distance' from the given location.\n     if this point is greater than location 1, the gradient at location 1 is returned.\n     if this point is less than location 0, the gradient at location 0 is returned.\n     */\n    var _gradientAtPointAlongPathFrom = function(curve, location, distance) {\n        var p = _pointAlongPath(curve, location, distance);\n        if (p.location > 1) p.location = 1;\n        if (p.location < 0) p.location = 0;\n        return _gradientAtPoint(curve, p.location);\n    };\n\n    /**\n     * calculates a line that is 'length' pixels long, perpendicular to, and centered on, the path at 'distance' pixels from the given location.\n     * if distance is not supplied, the perpendicular for the given location is computed (ie. we set distance to zero).\n     */\n    var _perpendicularToPathAt = function(curve, location, length, distance) {\n        distance = distance == null ? 0 : distance;\n        var p = _pointAlongPath(curve, location, distance),\n            m = _gradientAtPoint(curve, p.location),\n            _theta2 = Math.atan(-1 / m),\n            y =  length / 2 * Math.sin(_theta2),\n            x =  length / 2 * Math.cos(_theta2);\n        return [{x:p.point.x + x, y:p.point.y + y}, {x:p.point.x - x, y:p.point.y - y}];\n    };\n\n    var jsBezier = this.jsBezier = {\n        distanceFromCurve : _distanceFromCurve,\n        gradientAtPoint : _gradientAtPoint,\n        gradientAtPointAlongCurveFrom : _gradientAtPointAlongPathFrom,\n        nearestPointOnCurve : _nearestPointOnCurve,\n        pointOnCurve : _pointOnPath,\n        pointAlongCurveFrom : _pointAlongPathFrom,\n        perpendicularToCurveAt : _perpendicularToPathAt,\n        locationAlongCurveFrom:_locationAlongPathFrom,\n        getLength:_length,\n        version:\"0.9.0\"\n    };\n\n    if (typeof exports !== \"undefined\") {\n        exports.jsBezier = jsBezier;\n    }\n\n}).call(typeof window !== 'undefined' ? window : this);\n\n/**\n * Biltong v0.4.0\n *\n * Various geometry functions written as part of jsPlumb and perhaps useful for others.\n *\n * Copyright (c) 2017 jsPlumb\n * https://jsplumbtoolkit.com\n *\n * Permission is hereby granted, free of charge, to any person\n * obtaining a copy of this software and associated documentation\n * files (the \"Software\"), to deal in the Software without\n * restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following\n * conditions:\n *\n * The above copyright notice and this permission notice shall be\n * included in all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\n * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n * OTHER DEALINGS IN THE SOFTWARE.\n */\n;(function() {\n\n    \"use strict\";\n    var root = this;\n\n    var Biltong = root.Biltong = {\n        version:\"0.4.0\"\n    };\n\n    if (typeof exports !== \"undefined\") {\n        exports.Biltong = Biltong;\n    }\n\n    var _isa = function(a) { return Object.prototype.toString.call(a) === \"[object Array]\"; },\n        _pointHelper = function(p1, p2, fn) {\n            p1 = _isa(p1) ? p1 : [p1.x, p1.y];\n            p2 = _isa(p2) ? p2 : [p2.x, p2.y];\n            return fn(p1, p2);\n        },\n        /**\n         * @name Biltong.gradient\n         * @function\n         * @desc Calculates the gradient of a line between the two points.\n         * @param {Point} p1 First point, either as a 2 entry array or object with `left` and `top` properties.\n         * @param {Point} p2 Second point, either as a 2 entry array or object with `left` and `top` properties.\n         * @return {Float} The gradient of a line between the two points.\n         */\n        _gradient = Biltong.gradient = function(p1, p2) {\n            return _pointHelper(p1, p2, function(_p1, _p2) {\n                if (_p2[0] == _p1[0])\n                    return _p2[1] > _p1[1] ? Infinity : -Infinity;\n                else if (_p2[1] == _p1[1])\n                    return _p2[0] > _p1[0] ? 0 : -0;\n                else\n                    return (_p2[1] - _p1[1]) / (_p2[0] - _p1[0]);\n            });\n        },\n        /**\n         * @name Biltong.normal\n         * @function\n         * @desc Calculates the gradient of a normal to a line between the two points.\n         * @param {Point} p1 First point, either as a 2 entry array or object with `left` and `top` properties.\n         * @param {Point} p2 Second point, either as a 2 entry array or object with `left` and `top` properties.\n         * @return {Float} The gradient of a normal to a line between the two points.\n         */\n        _normal = Biltong.normal = function(p1, p2) {\n            return -1 / _gradient(p1, p2);\n        },\n        /**\n         * @name Biltong.lineLength\n         * @function\n         * @desc Calculates the length of a line between the two points.\n         * @param {Point} p1 First point, either as a 2 entry array or object with `left` and `top` properties.\n         * @param {Point} p2 Second point, either as a 2 entry array or object with `left` and `top` properties.\n         * @return {Float} The length of a line between the two points.\n         */\n        _lineLength = Biltong.lineLength = function(p1, p2) {\n            return _pointHelper(p1, p2, function(_p1, _p2) {\n                return Math.sqrt(Math.pow(_p2[1] - _p1[1], 2) + Math.pow(_p2[0] - _p1[0], 2));\n            });\n        },\n        /**\n         * @name Biltong.quadrant\n         * @function\n         * @desc Calculates the quadrant in which the angle between the two points lies.\n         * @param {Point} p1 First point, either as a 2 entry array or object with `left` and `top` properties.\n         * @param {Point} p2 Second point, either as a 2 entry array or object with `left` and `top` properties.\n         * @return {Integer} The quadrant - 1 for upper right, 2 for lower right, 3 for lower left, 4 for upper left.\n         */\n        _quadrant = Biltong.quadrant = function(p1, p2) {\n            return _pointHelper(p1, p2, function(_p1, _p2) {\n                if (_p2[0] > _p1[0]) {\n                    return (_p2[1] > _p1[1]) ? 2 : 1;\n                }\n                else if (_p2[0] == _p1[0]) {\n                    return _p2[1] > _p1[1] ? 2 : 1;\n                }\n                else {\n                    return (_p2[1] > _p1[1]) ? 3 : 4;\n                }\n            });\n        },\n        /**\n         * @name Biltong.theta\n         * @function\n         * @desc Calculates the angle between the two points.\n         * @param {Point} p1 First point, either as a 2 entry array or object with `left` and `top` properties.\n         * @param {Point} p2 Second point, either as a 2 entry array or object with `left` and `top` properties.\n         * @return {Float} The angle between the two points.\n         */\n        _theta = Biltong.theta = function(p1, p2) {\n            return _pointHelper(p1, p2, function(_p1, _p2) {\n                var m = _gradient(_p1, _p2),\n                    t = Math.atan(m),\n                    s = _quadrant(_p1, _p2);\n                if ((s == 4 || s== 3)) t += Math.PI;\n                if (t < 0) t += (2 * Math.PI);\n\n                return t;\n            });\n        },\n        /**\n         * @name Biltong.intersects\n         * @function\n         * @desc Calculates whether or not the two rectangles intersect.\n         * @param {Rectangle} r1 First rectangle, as a js object in the form `{x:.., y:.., w:.., h:..}`\n         * @param {Rectangle} r2 Second rectangle, as a js object in the form `{x:.., y:.., w:.., h:..}`\n         * @return {Boolean} True if the rectangles intersect, false otherwise.\n         */\n        _intersects = Biltong.intersects = function(r1, r2) {\n            var x1 = r1.x, x2 = r1.x + r1.w, y1 = r1.y, y2 = r1.y + r1.h,\n                a1 = r2.x, a2 = r2.x + r2.w, b1 = r2.y, b2 = r2.y + r2.h;\n\n            return  ( (x1 <= a1 && a1 <= x2) && (y1 <= b1 && b1 <= y2) ) ||\n                ( (x1 <= a2 && a2 <= x2) && (y1 <= b1 && b1 <= y2) ) ||\n                ( (x1 <= a1 && a1 <= x2) && (y1 <= b2 && b2 <= y2) ) ||\n                ( (x1 <= a2 && a1 <= x2) && (y1 <= b2 && b2 <= y2) ) ||\n                ( (a1 <= x1 && x1 <= a2) && (b1 <= y1 && y1 <= b2) ) ||\n                ( (a1 <= x2 && x2 <= a2) && (b1 <= y1 && y1 <= b2) ) ||\n                ( (a1 <= x1 && x1 <= a2) && (b1 <= y2 && y2 <= b2) ) ||\n                ( (a1 <= x2 && x1 <= a2) && (b1 <= y2 && y2 <= b2) );\n        },\n        /**\n         * @name Biltong.encloses\n         * @function\n         * @desc Calculates whether or not r2 is completely enclosed by r1.\n         * @param {Rectangle} r1 First rectangle, as a js object in the form `{x:.., y:.., w:.., h:..}`\n         * @param {Rectangle} r2 Second rectangle, as a js object in the form `{x:.., y:.., w:.., h:..}`\n         * @param {Boolean} [allowSharedEdges=false] If true, the concept of enclosure allows for one or more edges to be shared by the two rectangles.\n         * @return {Boolean} True if r1 encloses r2, false otherwise.\n         */\n        _encloses = Biltong.encloses = function(r1, r2, allowSharedEdges) {\n            var x1 = r1.x, x2 = r1.x + r1.w, y1 = r1.y, y2 = r1.y + r1.h,\n                a1 = r2.x, a2 = r2.x + r2.w, b1 = r2.y, b2 = r2.y + r2.h,\n                c = function(v1, v2, v3, v4) { return allowSharedEdges ? v1 <= v2 && v3>= v4 : v1 < v2 && v3 > v4; };\n\n            return c(x1,a1,x2,a2) && c(y1,b1,y2,b2);\n        },\n        _segmentMultipliers = [null, [1, -1], [1, 1], [-1, 1], [-1, -1] ],\n        _inverseSegmentMultipliers = [null, [-1, -1], [-1, 1], [1, 1], [1, -1] ],\n        /**\n         * @name Biltong.pointOnLine\n         * @function\n         * @desc Calculates a point on the line from `fromPoint` to `toPoint` that is `distance` units along the length of the line.\n         * @param {Point} p1 First point, either as a 2 entry array or object with `left` and `top` properties.\n         * @param {Point} p2 Second point, either as a 2 entry array or object with `left` and `top` properties.\n         * @return {Point} Point on the line, in the form `{ x:..., y:... }`.\n         */\n        _pointOnLine = Biltong.pointOnLine = function(fromPoint, toPoint, distance) {\n            var m = _gradient(fromPoint, toPoint),\n                s = _quadrant(fromPoint, toPoint),\n                segmentMultiplier = distance > 0 ? _segmentMultipliers[s] : _inverseSegmentMultipliers[s],\n                theta = Math.atan(m),\n                y = Math.abs(distance * Math.sin(theta)) * segmentMultiplier[1],\n                x =  Math.abs(distance * Math.cos(theta)) * segmentMultiplier[0];\n            return { x:fromPoint.x + x, y:fromPoint.y + y };\n        },\n        /**\n         * @name Biltong.perpendicularLineTo\n         * @function\n         * @desc Calculates a line of length `length` that is perpendicular to the line from `fromPoint` to `toPoint` and passes through `toPoint`.\n         * @param {Point} p1 First point, either as a 2 entry array or object with `left` and `top` properties.\n         * @param {Point} p2 Second point, either as a 2 entry array or object with `left` and `top` properties.\n         * @return {Line} Perpendicular line, in the form `[ { x:..., y:... }, { x:..., y:... } ]`.\n         */\n        _perpendicularLineTo = Biltong.perpendicularLineTo = function(fromPoint, toPoint, length) {\n            var m = _gradient(fromPoint, toPoint),\n                theta2 = Math.atan(-1 / m),\n                y =  length / 2 * Math.sin(theta2),\n                x =  length / 2 * Math.cos(theta2);\n            return [{x:toPoint.x + x, y:toPoint.y + y}, {x:toPoint.x - x, y:toPoint.y - y}];\n        };\n}).call(typeof window !== 'undefined' ? window : this);\n;\n(function () {\n\n    \"use strict\";\n\n    var root = this,\n        Sniff = {\n            android: navigator.userAgent.toLowerCase().indexOf(\"android\") > -1\n        },\n        matchesSelector = function (el, selector, ctx) {\n            ctx = ctx || el.parentNode;\n            var possibles = ctx.querySelectorAll(selector);\n            for (var i = 0; i < possibles.length; i++) {\n                if (possibles[i] === el) {\n                    return true;\n                }\n            }\n            return false;\n        },\n        _gel = function (el) {\n            return (typeof el == \"string\" || el.constructor === String) ? document.getElementById(el) : el;\n        },\n        _t = function (e) {\n            return e.srcElement || e.target;\n        },\n    //\n    // gets path info for the given event - the path from target to obj, in the event's bubble chain. if doCompute\n    // is false we just return target for the path.\n    //\n        _pi = function(e, target, obj, doCompute) {\n            if (!doCompute) return { path:[target], end:1 };\n            else if (typeof e.path !== \"undefined\" && e.path.indexOf) {\n                return { path: e.path, end: e.path.indexOf(obj) };\n            } else {\n                var out = { path:[], end:-1 }, _one = function(el) {\n                    out.path.push(el);\n                    if (el === obj) {\n                        out.end = out.path.length - 1;\n                    }\n                    else if (el.parentNode != null) {\n                        _one(el.parentNode)\n                    }\n                };\n                _one(target);\n                return out;\n            }\n        },\n        _d = function (l, fn) {\n            for (var i = 0, j = l.length; i < j; i++) {\n                if (l[i] == fn) break;\n            }\n            if (i < l.length) l.splice(i, 1);\n        },\n        guid = 1,\n    //\n    // this function generates a guid for every handler, sets it on the handler, then adds\n    // it to the associated object's map of handlers for the given event. this is what enables us\n    // to unbind all events of some type, or all events (the second of which can be requested by the user,\n    // but it also used by Mottle when an element is removed.)\n        _store = function (obj, event, fn) {\n            var g = guid++;\n            obj.__ta = obj.__ta || {};\n            obj.__ta[event] = obj.__ta[event] || {};\n            // store each handler with a unique guid.\n            obj.__ta[event][g] = fn;\n            // set the guid on the handler.\n            fn.__tauid = g;\n            return g;\n        },\n        _unstore = function (obj, event, fn) {\n            obj.__ta && obj.__ta[event] && delete obj.__ta[event][fn.__tauid];\n            // a handler might have attached extra functions, so we unbind those too.\n            if (fn.__taExtra) {\n                for (var i = 0; i < fn.__taExtra.length; i++) {\n                    _unbind(obj, fn.__taExtra[i][0], fn.__taExtra[i][1]);\n                }\n                fn.__taExtra.length = 0;\n            }\n            // a handler might have attached an unstore callback\n            fn.__taUnstore && fn.__taUnstore();\n        },\n        _curryChildFilter = function (children, obj, fn, evt) {\n            if (children == null) return fn;\n            else {\n                var c = children.split(\",\"),\n                    _fn = function (e) {\n                        _fn.__tauid = fn.__tauid;\n                        var t = _t(e), target = t;  // t is the target element on which the event occurred. it is the\n                        // element we will wish to pass to any callbacks.\n                        var pathInfo = _pi(e, t, obj, children != null)\n                        if (pathInfo.end != -1) {\n                            for (var p = 0; p < pathInfo.end; p++) {\n                                target = pathInfo.path[p];\n                                for (var i = 0; i < c.length; i++) {\n                                    if (matchesSelector(target, c[i], obj)) {\n                                        fn.apply(target, arguments);\n                                    }\n                                }\n                            }\n                        }\n                    };\n                registerExtraFunction(fn, evt, _fn);\n                return _fn;\n            }\n        },\n    //\n    // registers an 'extra' function on some event listener function we were given - a function that we\n    // created and bound to the element as part of our housekeeping, and which we want to unbind and remove\n    // whenever the given function is unbound.\n        registerExtraFunction = function (fn, evt, newFn) {\n            fn.__taExtra = fn.__taExtra || [];\n            fn.__taExtra.push([evt, newFn]);\n        },\n        DefaultHandler = function (obj, evt, fn, children) {\n            if (isTouchDevice && touchMap[evt]) {\n                var tfn = _curryChildFilter(children, obj, fn, touchMap[evt]);\n                _bind(obj, touchMap[evt], tfn , fn);\n            }\n            if (evt === \"focus\" && obj.getAttribute(\"tabindex\") == null) {\n                obj.setAttribute(\"tabindex\", \"1\");\n            }\n            _bind(obj, evt, _curryChildFilter(children, obj, fn, evt), fn);\n        },\n        SmartClickHandler = function (obj, evt, fn, children) {\n            if (obj.__taSmartClicks == null) {\n                var down = function (e) {\n                        obj.__tad = _pageLocation(e);\n                    },\n                    up = function (e) {\n                        obj.__tau = _pageLocation(e);\n                    },\n                    click = function (e) {\n                        if (obj.__tad && obj.__tau && obj.__tad[0] === obj.__tau[0] && obj.__tad[1] === obj.__tau[1]) {\n                            for (var i = 0; i < obj.__taSmartClicks.length; i++)\n                                obj.__taSmartClicks[i].apply(_t(e), [ e ]);\n                        }\n                    };\n                DefaultHandler(obj, \"mousedown\", down, children);\n                DefaultHandler(obj, \"mouseup\", up, children);\n                DefaultHandler(obj, \"click\", click, children);\n                obj.__taSmartClicks = [];\n            }\n\n            // store in the list of callbacks\n            obj.__taSmartClicks.push(fn);\n            // the unstore function removes this function from the object's listener list for this type.\n            fn.__taUnstore = function () {\n                _d(obj.__taSmartClicks, fn);\n            };\n        },\n        _tapProfiles = {\n            \"tap\": {touches: 1, taps: 1},\n            \"dbltap\": {touches: 1, taps: 2},\n            \"contextmenu\": {touches: 2, taps: 1}\n        },\n        TapHandler = function (clickThreshold, dblClickThreshold) {\n            return function (obj, evt, fn, children) {\n                // if event is contextmenu, for devices which are mouse only, we want to\n                // use the default bind.\n                if (evt == \"contextmenu\" && isMouseDevice)\n                    DefaultHandler(obj, evt, fn, children);\n                else {\n                    // the issue here is that this down handler gets registered only for the\n                    // child nodes in the first registration. in fact it should be registered with\n                    // no child selector and then on down we should cycle through the registered\n                    // functions to see if one of them matches. on mouseup we should execute ALL of\n                    // the functions whose children are either null or match the element.\n                    if (obj.__taTapHandler == null) {\n                        var tt = obj.__taTapHandler = {\n                            tap: [],\n                            dbltap: [],\n                            contextmenu: [],\n                            down: false,\n                            taps: 0,\n                            downSelectors: []\n                        };\n                        var down = function (e) {\n                                var target = _t(e), pathInfo = _pi(e, target, obj, children != null), finished = false;\n                                for (var p = 0; p < pathInfo.end; p++) {\n                                    if (finished) return;\n                                    target = pathInfo.path[p];\n                                    for (var i = 0; i < tt.downSelectors.length; i++) {\n                                        if (tt.downSelectors[i] == null || matchesSelector(target, tt.downSelectors[i], obj)) {\n                                            tt.down = true;\n                                            setTimeout(clearSingle, clickThreshold);\n                                            setTimeout(clearDouble, dblClickThreshold);\n                                            finished = true;\n                                            break; // we only need one match on mousedown\n                                        }\n                                    }\n                                }\n                            },\n                            up = function (e) {\n                                if (tt.down) {\n                                    var target = _t(e), currentTarget, pathInfo;\n                                    tt.taps++;\n                                    var tc = _touchCount(e);\n                                    for (var eventId in _tapProfiles) {\n                                        if (_tapProfiles.hasOwnProperty(eventId)) {\n                                            var p = _tapProfiles[eventId];\n                                            if (p.touches === tc && (p.taps === 1 || p.taps === tt.taps)) {\n                                                for (var i = 0; i < tt[eventId].length; i++) {\n                                                    pathInfo = _pi(e, target, obj, tt[eventId][i][1] != null);\n                                                    for (var pLoop = 0; pLoop < pathInfo.end; pLoop++) {\n                                                        currentTarget = pathInfo.path[pLoop];\n                                                        // this is a single event registration handler.\n                                                        if (tt[eventId][i][1] == null || matchesSelector(currentTarget, tt[eventId][i][1], obj)) {\n                                                            tt[eventId][i][0].apply(currentTarget, [ e ]);\n                                                            break;\n                                                        }\n                                                    }\n                                                }\n                                            }\n                                        }\n                                    }\n                                }\n                            },\n                            clearSingle = function () {\n                                tt.down = false;\n                            },\n                            clearDouble = function () {\n                                tt.taps = 0;\n                            };\n\n                        DefaultHandler(obj, \"mousedown\", down);\n                        DefaultHandler(obj, \"mouseup\", up);\n                    }\n                    // add this child selector (it can be null, that's fine).\n                    obj.__taTapHandler.downSelectors.push(children);\n\n                    obj.__taTapHandler[evt].push([fn, children]);\n                    // the unstore function removes this function from the object's listener list for this type.\n                    fn.__taUnstore = function () {\n                        _d(obj.__taTapHandler[evt], fn);\n                    };\n                }\n            };\n        },\n        meeHelper = function (type, evt, obj, target) {\n            for (var i in obj.__tamee[type]) {\n                if (obj.__tamee[type].hasOwnProperty(i)) {\n                    obj.__tamee[type][i].apply(target, [ evt ]);\n                }\n            }\n        },\n        MouseEnterExitHandler = function () {\n            var activeElements = [];\n            return function (obj, evt, fn, children) {\n                if (!obj.__tamee) {\n                    // __tamee holds a flag saying whether the mouse is currently \"in\" the element, and a list of\n                    // both mouseenter and mouseexit functions.\n                    obj.__tamee = { over: false, mouseenter: [], mouseexit: [] };\n                    // register over and out functions\n                    var over = function (e) {\n                            var t = _t(e);\n                            if ((children == null && (t == obj && !obj.__tamee.over)) || (matchesSelector(t, children, obj) && (t.__tamee == null || !t.__tamee.over))) {\n                                meeHelper(\"mouseenter\", e, obj, t);\n                                t.__tamee = t.__tamee || {};\n                                t.__tamee.over = true;\n                                activeElements.push(t);\n                            }\n                        },\n                        out = function (e) {\n                            var t = _t(e);\n                            // is the current target one of the activeElements? and is the\n                            // related target NOT a descendant of it?\n                            for (var i = 0; i < activeElements.length; i++) {\n                                if (t == activeElements[i] && !matchesSelector((e.relatedTarget || e.toElement), \"*\", t)) {\n                                    t.__tamee.over = false;\n                                    activeElements.splice(i, 1);\n                                    meeHelper(\"mouseexit\", e, obj, t);\n                                }\n                            }\n                        };\n\n                    _bind(obj, \"mouseover\", _curryChildFilter(children, obj, over, \"mouseover\"), over);\n                    _bind(obj, \"mouseout\", _curryChildFilter(children, obj, out, \"mouseout\"), out);\n                }\n\n                fn.__taUnstore = function () {\n                    delete obj.__tamee[evt][fn.__tauid];\n                };\n\n                _store(obj, evt, fn);\n                obj.__tamee[evt][fn.__tauid] = fn;\n            };\n        },\n        isTouchDevice = \"ontouchstart\" in document.documentElement,\n        isMouseDevice = \"onmousedown\" in document.documentElement,\n        touchMap = { \"mousedown\": \"touchstart\", \"mouseup\": \"touchend\", \"mousemove\": \"touchmove\" },\n        touchstart = \"touchstart\", touchend = \"touchend\", touchmove = \"touchmove\",\n        iev = (function () {\n            var rv = -1;\n            if (navigator.appName == 'Microsoft Internet Explorer') {\n                var ua = navigator.userAgent,\n                    re = new RegExp(\"MSIE ([0-9]{1,}[\\.0-9]{0,})\");\n                if (re.exec(ua) != null)\n                    rv = parseFloat(RegExp.$1);\n            }\n            return rv;\n        })(),\n        isIELT9 = iev > -1 && iev < 9,\n        _genLoc = function (e, prefix) {\n            if (e == null) return [ 0, 0 ];\n            var ts = _touches(e), t = _getTouch(ts, 0);\n            return [t[prefix + \"X\"], t[prefix + \"Y\"]];\n        },\n        _pageLocation = function (e) {\n            if (e == null) return [ 0, 0 ];\n            if (isIELT9) {\n                return [ e.clientX + document.documentElement.scrollLeft, e.clientY + document.documentElement.scrollTop ];\n            }\n            else {\n                return _genLoc(e, \"page\");\n            }\n        },\n        _screenLocation = function (e) {\n            return _genLoc(e, \"screen\");\n        },\n        _clientLocation = function (e) {\n            return _genLoc(e, \"client\");\n        },\n        _getTouch = function (touches, idx) {\n            return touches.item ? touches.item(idx) : touches[idx];\n        },\n        _touches = function (e) {\n            return e.touches && e.touches.length > 0 ? e.touches :\n                    e.changedTouches && e.changedTouches.length > 0 ? e.changedTouches :\n                    e.targetTouches && e.targetTouches.length > 0 ? e.targetTouches :\n                [ e ];\n        },\n        _touchCount = function (e) {\n            return _touches(e).length;\n        },\n    //http://www.quirksmode.org/blog/archives/2005/10/_and_the_winner_1.html\n        _bind = function (obj, type, fn, originalFn) {\n            _store(obj, type, fn);\n            originalFn.__tauid = fn.__tauid;\n            if (obj.addEventListener)\n                obj.addEventListener(type, fn, false);\n            else if (obj.attachEvent) {\n                var key = type + fn.__tauid;\n                obj[\"e\" + key] = fn;\n                // TODO look at replacing with .call(..)\n                obj[key] = function () {\n                    obj[\"e\" + key] && obj[\"e\" + key](window.event);\n                };\n                obj.attachEvent(\"on\" + type, obj[key]);\n            }\n        },\n        _unbind = function (obj, type, fn) {\n            if (fn == null) return;\n            _each(obj, function () {\n                var _el = _gel(this);\n                _unstore(_el, type, fn);\n                // it has been bound if there is a tauid. otherwise it was not bound and we can ignore it.\n                if (fn.__tauid != null) {\n                    if (_el.removeEventListener) {\n                        _el.removeEventListener(type, fn, false);\n                        if (isTouchDevice && touchMap[type]) _el.removeEventListener(touchMap[type], fn, false);\n                    }\n                    else if (this.detachEvent) {\n                        var key = type + fn.__tauid;\n                        _el[key] && _el.detachEvent(\"on\" + type, _el[key]);\n                        _el[key] = null;\n                        _el[\"e\" + key] = null;\n                    }\n                }\n\n                // if a touch event was also registered, deregister now.\n                if (fn.__taTouchProxy) {\n                    _unbind(obj, fn.__taTouchProxy[1], fn.__taTouchProxy[0]);\n                }\n            });\n        },\n        _each = function (obj, fn) {\n            if (obj == null) return;\n            // if a list (or list-like), use it. if a string, get a list\n            // by running the string through querySelectorAll. else, assume\n            // it's an Element.\n            // obj.top is \"unknown\" in IE8.\n            obj = (typeof Window !== \"undefined\" && (typeof obj.top !== \"unknown\" && obj == obj.top)) ? [ obj ] :\n                    (typeof obj !== \"string\") && (obj.tagName == null && obj.length != null) ? obj :\n                    typeof obj === \"string\" ? document.querySelectorAll(obj)\n                : [ obj ];\n\n            for (var i = 0; i < obj.length; i++)\n                fn.apply(obj[i]);\n        };\n\n    /**\n     * Mottle offers support for abstracting out the differences\n     * between touch and mouse devices, plus \"smart click\" functionality\n     * (don't fire click if the mouse has moved between mousedown and mouseup),\n     * and synthesized click/tap events.\n     * @class Mottle\n     * @constructor\n     * @param {Object} params Constructor params\n     * @param {Number} [params.clickThreshold=250] Threshold, in milliseconds beyond which a touchstart followed by a touchend is not considered to be a click.\n     * @param {Number} [params.dblClickThreshold=450] Threshold, in milliseconds beyond which two successive tap events are not considered to be a click.\n     * @param {Boolean} [params.smartClicks=false] If true, won't fire click events if the mouse has moved between mousedown and mouseup. Note that this functionality\n     * requires that Mottle consume the mousedown event, and so may not be viable in all use cases.\n     */\n    root.Mottle = function (params) {\n        params = params || {};\n        var clickThreshold = params.clickThreshold || 250,\n            dblClickThreshold = params.dblClickThreshold || 450,\n            mouseEnterExitHandler = new MouseEnterExitHandler(),\n            tapHandler = new TapHandler(clickThreshold, dblClickThreshold),\n            _smartClicks = params.smartClicks,\n            _doBind = function (obj, evt, fn, children) {\n                if (fn == null) return;\n                _each(obj, function () {\n                    var _el = _gel(this);\n                    if (_smartClicks && evt === \"click\")\n                        SmartClickHandler(_el, evt, fn, children);\n                    else if (evt === \"tap\" || evt === \"dbltap\" || evt === \"contextmenu\") {\n                        tapHandler(_el, evt, fn, children);\n                    }\n                    else if (evt === \"mouseenter\" || evt == \"mouseexit\")\n                        mouseEnterExitHandler(_el, evt, fn, children);\n                    else\n                        DefaultHandler(_el, evt, fn, children);\n                });\n            };\n\n        /**\n         * Removes an element from the DOM, and deregisters all event handlers for it. You should use this\n         * to ensure you don't leak memory.\n         * @method remove\n         * @param {String|Element} el Element, or id of the element, to remove.\n         * @return {Mottle} The current Mottle instance; you can chain this method.\n         */\n        this.remove = function (el) {\n            _each(el, function () {\n                var _el = _gel(this);\n                if (_el.__ta) {\n                    for (var evt in _el.__ta) {\n                        if (_el.__ta.hasOwnProperty(evt)) {\n                            for (var h in _el.__ta[evt]) {\n                                if (_el.__ta[evt].hasOwnProperty(h))\n                                    _unbind(_el, evt, _el.__ta[evt][h]);\n                            }\n                        }\n                    }\n                }\n                _el.parentNode && _el.parentNode.removeChild(_el);\n            });\n            return this;\n        };\n\n        /**\n         * Register an event handler, optionally as a delegate for some set of descendant elements. Note\n         * that this method takes either 3 or 4 arguments - if you supply 3 arguments it is assumed you have\n         * omitted the `children` parameter, and that the event handler should be bound directly to the given element.\n         * @method on\n         * @param {Element[]|Element|String} el Either an Element, or a CSS spec for a list of elements, or an array of Elements.\n         * @param {String} [children] Comma-delimited list of selectors identifying allowed children.\n         * @param {String} event Event ID.\n         * @param {Function} fn Event handler function.\n         * @return {Mottle} The current Mottle instance; you can chain this method.\n         */\n        this.on = function (el, event, children, fn) {\n            var _el = arguments[0],\n                _c = arguments.length == 4 ? arguments[2] : null,\n                _e = arguments[1],\n                _f = arguments[arguments.length - 1];\n\n            _doBind(_el, _e, _f, _c);\n            return this;\n        };\n\n        /**\n         * Cancel delegate event handling for the given function. Note that unlike with 'on' you do not supply\n         * a list of child selectors here: it removes event delegation from all of the child selectors for which the\n         * given function was registered (if any).\n         * @method off\n         * @param {Element[]|Element|String} el Element - or ID of element - from which to remove event listener.\n         * @param {String} event Event ID.\n         * @param {Function} fn Event handler function.\n         * @return {Mottle} The current Mottle instance; you can chain this method.\n         */\n        this.off = function (el, event, fn) {\n            _unbind(el, event, fn);\n            return this;\n        };\n\n        /**\n         * Triggers some event for a given element.\n         * @method trigger\n         * @param {Element} el Element for which to trigger the event.\n         * @param {String} event Event ID.\n         * @param {Event} originalEvent The original event. Should be optional of course, but currently is not, due\n         * to the jsPlumb use case that caused this method to be added.\n         * @param {Object} [payload] Optional object to set as `payload` on the generated event; useful for message passing.\n         * @return {Mottle} The current Mottle instance; you can chain this method.\n         */\n        this.trigger = function (el, event, originalEvent, payload) {\n            // MouseEvent undefined in old IE; that's how we know it's a mouse event.  A fine Microsoft paradox.\n            var originalIsMouse = isMouseDevice && (typeof MouseEvent === \"undefined\" || originalEvent == null || originalEvent.constructor === MouseEvent);\n\n            var eventToBind = (isTouchDevice && !isMouseDevice && touchMap[event]) ? touchMap[event] : event,\n                bindingAMouseEvent = !(isTouchDevice && !isMouseDevice && touchMap[event]);\n\n            var pl = _pageLocation(originalEvent), sl = _screenLocation(originalEvent), cl = _clientLocation(originalEvent);\n            _each(el, function () {\n                var _el = _gel(this), evt;\n                originalEvent = originalEvent || {\n                    screenX: sl[0],\n                    screenY: sl[1],\n                    clientX: cl[0],\n                    clientY: cl[1]\n                };\n\n                var _decorate = function (_evt) {\n                    if (payload) _evt.payload = payload;\n                };\n\n                var eventGenerators = {\n                    \"TouchEvent\": function (evt) {\n                        var touch = document.createTouch(window, _el, 0, pl[0], pl[1],\n                            sl[0], sl[1],\n                            cl[0], cl[1],\n                            0, 0, 0, 0);\n\n                        // https://gist.github.com/sstephenson/448808\n                        var touches = document.createTouchList(touch);\n                        var targetTouches = document.createTouchList(touch);\n                        var changedTouches = document.createTouchList(touch);\n                        evt.initTouchEvent(eventToBind, true, true, window, null, sl[0], sl[1],\n                            cl[0], cl[1], false, false, false, false,\n                            touches, targetTouches, changedTouches, 1, 0);\n                    },\n                    \"MouseEvents\": function (evt) {\n                        evt.initMouseEvent(eventToBind, true, true, window, 0,\n                            sl[0], sl[1],\n                            cl[0], cl[1],\n                            false, false, false, false, 1, _el);\n\n                        if (Sniff.android) {\n                            // Android's touch events are not standard.\n                            var t = document.createTouch(window, _el, 0, pl[0], pl[1],\n                                sl[0], sl[1],\n                                cl[0], cl[1],\n                                0, 0, 0, 0);\n\n                            evt.touches = evt.targetTouches = evt.changedTouches = document.createTouchList(t);\n                        }\n                    }\n                };\n\n                if (document.createEvent) {\n\n                    var ite = !bindingAMouseEvent && !originalIsMouse && (isTouchDevice && touchMap[event] && !Sniff.android),\n                        evtName = ite ? \"TouchEvent\" : \"MouseEvents\";\n\n                    evt = document.createEvent(evtName);\n                    eventGenerators[evtName](evt);\n                    _decorate(evt);\n                    _el.dispatchEvent(evt);\n                }\n                else if (document.createEventObject) {\n                    evt = document.createEventObject();\n                    evt.eventType = evt.eventName = eventToBind;\n                    evt.screenX = sl[0];\n                    evt.screenY = sl[1];\n                    evt.clientX = cl[0];\n                    evt.clientY = cl[1];\n                    _decorate(evt);\n                    _el.fireEvent('on' + eventToBind, evt);\n                }\n            });\n            return this;\n        }\n    };\n\n    /**\n     * Static method to assist in 'consuming' an element: uses `stopPropagation` where available, or sets\n     * `e.returnValue=false` where it is not.\n     * @method Mottle.consume\n     * @param {Event} e Event to consume\n     * @param {Boolean} [doNotPreventDefault=false] If true, does not call `preventDefault()` on the event.\n     */\n    root.Mottle.consume = function (e, doNotPreventDefault) {\n        if (e.stopPropagation)\n            e.stopPropagation();\n        else\n            e.returnValue = false;\n\n        if (!doNotPreventDefault && e.preventDefault)\n            e.preventDefault();\n    };\n\n    /**\n     * Gets the page location corresponding to the given event. For touch events this means get the page location of the first touch.\n     * @method Mottle.pageLocation\n     * @param {Event} e Event to get page location for.\n     * @return {Number[]} [left, top] for the given event.\n     */\n    root.Mottle.pageLocation = _pageLocation;\n\n    /**\n     * Forces touch events to be turned \"on\". Useful for testing: even if you don't have a touch device, you can still\n     * trigger a touch event when this is switched on and it will be captured and acted on.\n     * @method setForceTouchEvents\n     * @param {Boolean} value If true, force touch events to be on.\n     */\n    root.Mottle.setForceTouchEvents = function (value) {\n        isTouchDevice = value;\n    };\n\n    /**\n     * Forces mouse events to be turned \"on\". Useful for testing: even if you don't have a mouse, you can still\n     * trigger a mouse event when this is switched on and it will be captured and acted on.\n     * @method setForceMouseEvents\n     * @param {Boolean} value If true, force mouse events to be on.\n     */\n    root.Mottle.setForceMouseEvents = function (value) {\n        isMouseDevice = value;\n    };\n\n    root.Mottle.version = \"0.8.0\";\n\n    if (typeof exports !== \"undefined\") {\n        exports.Mottle = root.Mottle;\n    }\n\n}).call(typeof window === \"undefined\" ? this : window);\n\n/**\n drag/drop functionality for use with jsPlumb but with\n no knowledge of jsPlumb. supports multiple scopes (separated by whitespace), dragging\n multiple elements, constrain to parent, drop filters, drag start filters, custom\n css classes.\n\n a lot of the functionality of this script is expected to be plugged in:\n\n addClass\n removeClass\n\n addEvent\n removeEvent\n\n getPosition\n setPosition\n getSize\n\n indexOf\n intersects\n\n the name came from here:\n\n http://mrsharpoblunto.github.io/foswig.js/\n\n copyright 2016 jsPlumb\n */\n\n;(function() {\n\n    \"use strict\";\n    var root = this;\n\n    var _suggest = function(list, item, head) {\n        if (list.indexOf(item) === -1) {\n            head ? list.unshift(item) : list.push(item);\n            return true;\n        }\n        return false;\n    };\n\n    var _vanquish = function(list, item) {\n        var idx = list.indexOf(item);\n        if (idx != -1) list.splice(idx, 1);\n    };\n\n    var _difference = function(l1, l2) {\n        var d = [];\n        for (var i = 0; i < l1.length; i++) {\n            if (l2.indexOf(l1[i]) == -1)\n                d.push(l1[i]);\n        }\n        return d;\n    };\n\n    var _isString = function(f) {\n        return f == null ? false : (typeof f === \"string\" || f.constructor == String);\n    };\n\n    var getOffsetRect = function (elem) {\n        // (1)\n        var box = elem.getBoundingClientRect(),\n            body = document.body,\n            docElem = document.documentElement,\n        // (2)\n            scrollTop = window.pageYOffset || docElem.scrollTop || body.scrollTop,\n            scrollLeft = window.pageXOffset || docElem.scrollLeft || body.scrollLeft,\n        // (3)\n            clientTop = docElem.clientTop || body.clientTop || 0,\n            clientLeft = docElem.clientLeft || body.clientLeft || 0,\n        // (4)\n            top  = box.top +  scrollTop - clientTop,\n            left = box.left + scrollLeft - clientLeft;\n\n        return { top: Math.round(top), left: Math.round(left) };\n    };\n\n    var matchesSelector = function(el, selector, ctx) {\n        ctx = ctx || el.parentNode;\n        var possibles = ctx.querySelectorAll(selector);\n        for (var i = 0; i < possibles.length; i++) {\n            if (possibles[i] === el)\n                return true;\n        }\n        return false;\n    };\n\n    var iev = (function() {\n            var rv = -1;\n            if (navigator.appName == 'Microsoft Internet Explorer') {\n                var ua = navigator.userAgent,\n                    re = new RegExp(\"MSIE ([0-9]{1,}[\\.0-9]{0,})\");\n                if (re.exec(ua) != null)\n                    rv = parseFloat(RegExp.$1);\n            }\n            return rv;\n        })(),\n        DEFAULT_GRID_X = 50,\n        DEFAULT_GRID_Y = 50,\n        isIELT9 = iev > -1 && iev < 9,\n        isIE9 = iev == 9,\n        _pl = function(e) {\n            if (isIELT9) {\n                return [ e.clientX + document.documentElement.scrollLeft, e.clientY + document.documentElement.scrollTop ];\n            }\n            else {\n                var ts = _touches(e), t = _getTouch(ts, 0);\n                // for IE9 pageX might be null if the event was synthesized. We try for pageX/pageY first,\n                // falling back to clientX/clientY if necessary. In every other browser we want to use pageX/pageY.\n                return isIE9 ? [t.pageX || t.clientX, t.pageY || t.clientY] : [t.pageX, t.pageY];\n            }\n        },\n        _getTouch = function(touches, idx) { return touches.item ? touches.item(idx) : touches[idx]; },\n        _touches = function(e) {\n            return e.touches && e.touches.length > 0 ? e.touches :\n                    e.changedTouches && e.changedTouches.length > 0 ? e.changedTouches :\n                    e.targetTouches && e.targetTouches.length > 0 ? e.targetTouches :\n                [ e ];\n        },\n        _classes = {\n            draggable:\"katavorio-draggable\",    // draggable elements\n            droppable:\"katavorio-droppable\",    // droppable elements\n            drag : \"katavorio-drag\",            // elements currently being dragged\n            selected:\"katavorio-drag-selected\", // elements in current drag selection\n            active : \"katavorio-drag-active\",   // droppables that are targets of a currently dragged element\n            hover : \"katavorio-drag-hover\",     // droppables over which a matching drag element is hovering\n            noSelect : \"katavorio-drag-no-select\", // added to the body to provide a hook to suppress text selection\n            ghostProxy:\"katavorio-ghost-proxy\"  // added to a ghost proxy element in use when a drag has exited the bounds of its parent.\n        },\n        _defaultScope = \"katavorio-drag-scope\",\n        _events = [ \"stop\", \"start\", \"drag\", \"drop\", \"over\", \"out\", \"beforeStart\" ],\n        _devNull = function() {},\n        _true = function() { return true; },\n        _foreach = function(l, fn, from) {\n            for (var i = 0; i < l.length; i++) {\n                if (l[i] != from)\n                    fn(l[i]);\n            }\n        },\n        _setDroppablesActive = function(dd, val, andHover, drag) {\n            _foreach(dd, function(e) {\n                e.setActive(val);\n                if (val) e.updatePosition();\n                if (andHover) e.setHover(drag, val);\n            });\n        },\n        _each = function(obj, fn) {\n            if (obj == null) return;\n            obj = !_isString(obj) && (obj.tagName == null && obj.length != null) ? obj : [ obj ];\n            for (var i = 0; i < obj.length; i++)\n                fn.apply(obj[i], [ obj[i] ]);\n        },\n        _consume = function(e) {\n            if (e.stopPropagation) {\n                e.stopPropagation();\n                e.preventDefault();\n            }\n            else {\n                e.returnValue = false;\n            }\n        },\n        _defaultInputFilterSelector = \"input,textarea,select,button,option\",\n    //\n    // filters out events on all input elements, like textarea, checkbox, input, select.\n        _inputFilter = function(e, el, _katavorio) {\n            var t = e.srcElement || e.target;\n            return !matchesSelector(t, _katavorio.getInputFilterSelector(), el);\n        };\n\n    var Super = function(el, params, css, scope) {\n        this.params = params || {};\n        this.el = el;\n        this.params.addClass(this.el, this._class);\n        this.uuid = _uuid();\n        var enabled = true;\n        this.setEnabled = function(e) { enabled = e; };\n        this.isEnabled = function() { return enabled; };\n        this.toggleEnabled = function() { enabled = !enabled; };\n        this.setScope = function(scopes) {\n            this.scopes = scopes ? scopes.split(/\\s+/) : [ scope ];\n        };\n        this.addScope = function(scopes) {\n            var m = {};\n            _each(this.scopes, function(s) { m[s] = true;});\n            _each(scopes ? scopes.split(/\\s+/) : [], function(s) { m[s] = true;});\n            this.scopes = [];\n            for (var i in m) this.scopes.push(i);\n        };\n        this.removeScope = function(scopes) {\n            var m = {};\n            _each(this.scopes, function(s) { m[s] = true;});\n            _each(scopes ? scopes.split(/\\s+/) : [], function(s) { delete m[s];});\n            this.scopes = [];\n            for (var i in m) this.scopes.push(i);\n        };\n        this.toggleScope = function(scopes) {\n            var m = {};\n            _each(this.scopes, function(s) { m[s] = true;});\n            _each(scopes ? scopes.split(/\\s+/) : [], function(s) {\n                if (m[s]) delete m[s];\n                else m[s] = true;\n            });\n            this.scopes = [];\n            for (var i in m) this.scopes.push(i);\n        };\n        this.setScope(params.scope);\n        this.k = params.katavorio;\n        return params.katavorio;\n    };\n\n    var TRUE = function() { return true; };\n    var FALSE = function() { return false; };\n\n    var Drag = function(el, params, css, scope) {\n        this._class = css.draggable;\n        var k = Super.apply(this, arguments);\n        this.rightButtonCanDrag = this.params.rightButtonCanDrag;\n        var downAt = [0,0], posAtDown = null, pagePosAtDown = null, pageDelta = [0,0], moving = false,\n            consumeStartEvent = this.params.consumeStartEvent !== false,\n            dragEl = this.el,\n            clone = this.params.clone,\n            scroll = this.params.scroll,\n            _multipleDrop = params.multipleDrop !== false,\n            isConstrained = false,\n            useGhostProxy = params.ghostProxy === true ? TRUE : params.ghostProxy && typeof params.ghostProxy === \"function\" ? params.ghostProxy : FALSE,\n            ghostProxy = function(el) { return el.cloneNode(true); };\n\n        var snapThreshold = params.snapThreshold || 5,\n            _snap = function(pos, x, y, thresholdX, thresholdY) {\n                thresholdX = thresholdX || snapThreshold;\n                thresholdY = thresholdY || snapThreshold;\n                var _dx = Math.floor(pos[0] / x),\n                    _dxl = x * _dx,\n                    _dxt = _dxl + x,\n                    _x = Math.abs(pos[0] - _dxl) <= thresholdX ? _dxl : Math.abs(_dxt - pos[0]) <= thresholdX ? _dxt : pos[0];\n\n                var _dy = Math.floor(pos[1] / y),\n                    _dyl = y * _dy,\n                    _dyt = _dyl + y,\n                    _y = Math.abs(pos[1] - _dyl) <= thresholdY ? _dyl : Math.abs(_dyt - pos[1]) <= thresholdY ? _dyt : pos[1];\n\n                return [ _x, _y];\n            };\n\n        this.posses = [];\n        this.posseRoles = {};\n\n        this.toGrid = function(pos) {\n            if (this.params.grid == null) {\n                return pos;\n            }\n            else {\n                return _snap(pos, this.params.grid[0], this.params.grid[1]);\n            }\n        };\n\n        this.snap = function(x, y) {\n            if (dragEl == null) return;\n            x = x || (this.params.grid ? this.params.grid[0] : DEFAULT_GRID_X);\n            y = y || (this.params.grid ? this.params.grid[1] : DEFAULT_GRID_Y);\n            var p = this.params.getPosition(dragEl);\n            this.params.setPosition(dragEl, _snap(p, x, y, x, y));\n        };\n\n        this.setUseGhostProxy = function(val) {\n            useGhostProxy = val ? TRUE : FALSE;\n        };\n\n        var constrain;\n        var negativeFilter = function(pos) {\n            return (params.allowNegative === false) ? [ Math.max (0, pos[0]), Math.max(0, pos[1]) ] : pos;\n        };\n\n        var _setConstrain = function(value) {\n            constrain = typeof value === \"function\" ? value : value ? function(pos) {\n                return negativeFilter([\n                    Math.max(0, Math.min(constrainRect.w - this.size[0], pos[0])),\n                    Math.max(0, Math.min(constrainRect.h - this.size[1], pos[1]))\n                ]);\n            }.bind(this) : function(pos) { return negativeFilter(pos); };\n        }.bind(this);\n\n        _setConstrain(typeof this.params.constrain === \"function\" ? this.params.constrain  : (this.params.constrain || this.params.containment));\n\n\n        /**\n         * Sets whether or not the Drag is constrained. A value of 'true' means constrain to parent bounds; a function\n         * will be executed and returns true if the position is allowed.\n         * @param value\n         */\n        this.setConstrain = function(value) {\n            _setConstrain(value);\n        };\n\n        var revertFunction;\n        /**\n         * Sets a function to call on drag stop, which, if it returns true, indicates that the given element should\n         * revert to its position before the previous drag.\n         * @param fn\n         */\n        this.setRevert = function(fn) {\n            revertFunction = fn;\n        };\n\n        var _assignId = function(obj) {\n                if (typeof obj == \"function\") {\n                    obj._katavorioId = _uuid();\n                    return obj._katavorioId;\n                } else {\n                    return obj;\n                }\n            },\n        // a map of { spec -> [ fn, exclusion ] } entries.\n            _filters = {},\n            _testFilter = function(e) {\n                for (var key in _filters) {\n                    var f = _filters[key];\n                    var rv = f[0](e);\n                    if (f[1]) rv = !rv;\n                    if (!rv) return false;\n                }\n                return true;\n            },\n            _setFilter = this.setFilter = function(f, _exclude) {\n                if (f) {\n                    var key = _assignId(f);\n                    _filters[key] = [\n                        function(e) {\n                            var t = e.srcElement || e.target, m;\n                            if (_isString(f)) {\n                                m = matchesSelector(t, f, el);\n                            }\n                            else if (typeof f === \"function\") {\n                                m = f(e, el);\n                            }\n                            return m;\n                        },\n                            _exclude !== false\n                    ];\n\n                }\n            },\n            _addFilter = this.addFilter = _setFilter,\n            _removeFilter = this.removeFilter = function(f) {\n                var key = typeof f == \"function\" ? f._katavorioId : f;\n                delete _filters[key];\n            };\n\n        this.clearAllFilters = function() {\n            _filters = {};\n        };\n\n        this.canDrag = this.params.canDrag || _true;\n\n        var constrainRect,\n            matchingDroppables = [], intersectingDroppables = [];\n\n        this.downListener = function(e) {\n            var isNotRightClick = this.rightButtonCanDrag || (e.which !== 3 && e.button !== 2);\n            if (isNotRightClick && this.isEnabled() && this.canDrag()) {\n                var _f =  _testFilter(e) && _inputFilter(e, this.el, this.k);\n                if (_f) {\n                    if (!clone)\n                        dragEl = this.el;\n                    else {\n                        dragEl = this.el.cloneNode(true);\n                        dragEl.setAttribute(\"id\", null);\n                        dragEl.style.position = \"absolute\";\n                        // the clone node is added to the body; getOffsetRect gives us a value\n                        // relative to the body.\n                        var b = getOffsetRect(this.el);\n                        dragEl.style.left = b.left + \"px\";\n                        dragEl.style.top = b.top + \"px\";\n                        document.body.appendChild(dragEl);\n                    }\n                    consumeStartEvent && _consume(e);\n                    downAt = _pl(e);\n                    //\n                    this.params.bind(document, \"mousemove\", this.moveListener);\n                    this.params.bind(document, \"mouseup\", this.upListener);\n                    k.markSelection(this);\n                    k.markPosses(this);\n                    this.params.addClass(document.body, css.noSelect);\n                    _dispatch(\"beforeStart\", {el:this.el, pos:posAtDown, e:e, drag:this});\n                }\n                else if (this.params.consumeFilteredEvents) {\n                    _consume(e);\n                }\n            }\n        }.bind(this);\n\n        this.moveListener = function(e) {\n            if (downAt) {\n                if (!moving) {\n                    var _continue = _dispatch(\"start\", {el:this.el, pos:posAtDown, e:e, drag:this});\n                    if (_continue !== false) {\n                        if (!downAt) return;\n                        this.mark(true);\n                        moving = true;\n                    }\n                }\n\n                // it is possible that the start event caused the drag to be aborted. So we check\n                // again that we are currently dragging.\n                if (downAt) {\n                    intersectingDroppables.length = 0;\n                    var pos = _pl(e), dx = pos[0] - downAt[0], dy = pos[1] - downAt[1],\n                        z = this.params.ignoreZoom ? 1 : k.getZoom();\n                    dx /= z;\n                    dy /= z;\n                    this.moveBy(dx, dy, e);\n                    k.updateSelection(dx, dy, this);\n                    k.updatePosses(dx, dy, this);\n                }\n            }\n        }.bind(this);\n\n        this.upListener = function(e) {\n            if (downAt) {\n                downAt = null;\n                this.params.unbind(document, \"mousemove\", this.moveListener);\n                this.params.unbind(document, \"mouseup\", this.upListener);\n                this.params.removeClass(document.body, css.noSelect);\n                this.unmark(e);\n                k.unmarkSelection(this, e);\n                k.unmarkPosses(this, e);\n                this.stop(e);\n                k.notifySelectionDragStop(this, e);\n                k.notifyPosseDragStop(this, e);\n                moving = false;\n                if (clone) {\n                    dragEl && dragEl.parentNode && dragEl.parentNode.removeChild(dragEl);\n                    dragEl = null;\n                }\n\n                if (revertFunction && revertFunction(this.el, this.params.getPosition(this.el)) === true) {\n                    this.params.setPosition(this.el, posAtDown);\n                    _dispatch(\"revert\", this.el);\n                }\n            }\n        }.bind(this);\n\n        this.getFilters = function() { return _filters; };\n\n        this.abort = function() {\n            if (downAt != null)\n                this.upListener();\n        };\n\n        this.getDragElement = function() {\n            return dragEl || this.el;\n        };\n\n        var listeners = {\"start\":[], \"drag\":[], \"stop\":[], \"over\":[], \"out\":[], \"beforeStart\":[], \"revert\":[] };\n        if (params.events.start) listeners.start.push(params.events.start);\n        if (params.events.beforeStart) listeners.beforeStart.push(params.events.beforeStart);\n        if (params.events.stop) listeners.stop.push(params.events.stop);\n        if (params.events.drag) listeners.drag.push(params.events.drag);\n        if (params.events.revert) listeners.revert.push(params.events.revert);\n\n        this.on = function(evt, fn) {\n            if (listeners[evt]) listeners[evt].push(fn);\n        };\n\n        this.off = function(evt, fn) {\n            if (listeners[evt]) {\n                var l = [];\n                for (var i = 0; i < listeners[evt].length; i++) {\n                    if (listeners[evt][i] !== fn) l.push(listeners[evt][i]);\n                }\n                listeners[evt] = l;\n            }\n        };\n\n        var _dispatch = function(evt, value) {\n            if (listeners[evt]) {\n                for (var i = 0; i < listeners[evt].length; i++) {\n                    try {\n                        listeners[evt][i](value);\n                    }\n                    catch (e) { }\n                }\n            }\n        };\n\n        this.notifyStart = function(e) {\n            _dispatch(\"start\", {el:this.el, pos:this.params.getPosition(dragEl), e:e, drag:this});\n        };\n\n        this.stop = function(e, force) {\n            if (force || moving) {\n                var positions = [],\n                    sel = k.getSelection(),\n                    dPos = this.params.getPosition(dragEl);\n\n                if (sel.length > 1) {\n                    for (var i = 0; i < sel.length; i++) {\n                        var p = this.params.getPosition(sel[i].el);\n                        positions.push([ sel[i].el, { left: p[0], top: p[1] }, sel[i] ]);\n                    }\n                }\n                else {\n                    positions.push([ dragEl, {left:dPos[0], top:dPos[1]}, this ]);\n                }\n\n                _dispatch(\"stop\", {\n                    el: dragEl,\n                    pos: ghostProxyOffsets || dPos,\n                    finalPos:dPos,\n                    e: e,\n                    drag: this,\n                    selection:positions\n                });\n            }\n        };\n\n        this.mark = function(andNotify) {\n            posAtDown = this.params.getPosition(dragEl);\n            pagePosAtDown = this.params.getPosition(dragEl, true);\n            pageDelta = [pagePosAtDown[0] - posAtDown[0], pagePosAtDown[1] - posAtDown[1]];\n            this.size = this.params.getSize(dragEl);\n            matchingDroppables = k.getMatchingDroppables(this);\n            _setDroppablesActive(matchingDroppables, true, false, this);\n            this.params.addClass(dragEl, this.params.dragClass || css.drag);\n            //if (this.params.constrain || this.params.containment) {\n            var cs = this.params.getSize(dragEl.parentNode);\n            constrainRect = { w:cs[0], h:cs[1] };\n            //}\n            if (andNotify) {\n                k.notifySelectionDragStart(this);\n            }\n        };\n        var ghostProxyOffsets;\n        this.unmark = function(e, doNotCheckDroppables) {\n            _setDroppablesActive(matchingDroppables, false, true, this);\n\n\n            if (isConstrained && useGhostProxy(this.el)) {\n                ghostProxyOffsets = [dragEl.offsetLeft, dragEl.offsetTop];\n                this.el.parentNode.removeChild(dragEl);\n                dragEl = this.el;\n            }\n            else {\n                ghostProxyOffsets = null;\n            }\n\n            this.params.removeClass(dragEl, this.params.dragClass || css.drag);\n            matchingDroppables.length = 0;\n            isConstrained = false;\n            if (!doNotCheckDroppables) {\n                if (intersectingDroppables.length > 0 && ghostProxyOffsets) {\n                    params.setPosition(this.el, ghostProxyOffsets);\n                }\n                intersectingDroppables.sort(_rankSort);\n                for (var i = 0; i < intersectingDroppables.length; i++) {\n                    var retVal = intersectingDroppables[i].drop(this, e);\n                    if (retVal === true) break;\n                }\n            }\n        };\n        this.moveBy = function(dx, dy, e) {\n            intersectingDroppables.length = 0;\n            var desiredLoc = this.toGrid([posAtDown[0] + dx, posAtDown[1] + dy]),\n                cPos = constrain(desiredLoc, dragEl);\n\n            if (useGhostProxy(this.el)) {\n                if (desiredLoc[0] != cPos[0] || desiredLoc[1] != cPos[1]) {\n                    if (!isConstrained) {\n                        var gp = ghostProxy(this.el);\n                        params.addClass(gp, _classes.ghostProxy);\n                        this.el.parentNode.appendChild(gp);\n                        dragEl = gp;\n                        isConstrained = true;\n                    }\n                    cPos = desiredLoc;\n                }\n                else {\n                    if (isConstrained) {\n                        this.el.parentNode.removeChild(dragEl);\n                        dragEl = this.el;\n                        isConstrained = false;\n                    }\n                }\n            }\n\n            var rect = { x:cPos[0], y:cPos[1], w:this.size[0], h:this.size[1]},\n                pageRect = { x:rect.x + pageDelta[0], y:rect.y + pageDelta[1], w:rect.w, h:rect.h},\n                focusDropElement = null;\n\n\n\n            this.params.setPosition(dragEl, cPos);\n            for (var i = 0; i < matchingDroppables.length; i++) {\n                var r2 = { x:matchingDroppables[i].pagePosition[0], y:matchingDroppables[i].pagePosition[1], w:matchingDroppables[i].size[0], h:matchingDroppables[i].size[1]};\n                if (this.params.intersects(pageRect, r2) && (_multipleDrop || focusDropElement == null || focusDropElement == matchingDroppables[i].el) && matchingDroppables[i].canDrop(this)) {\n                    if (!focusDropElement) focusDropElement = matchingDroppables[i].el;\n                    intersectingDroppables.push(matchingDroppables[i]);\n                    matchingDroppables[i].setHover(this, true, e);\n                }\n                else if (matchingDroppables[i].isHover()) {\n                    matchingDroppables[i].setHover(this, false, e);\n                }\n            }\n\n            _dispatch(\"drag\", {el:this.el, pos:cPos, e:e, drag:this});\n\n            /* test to see if the parent needs to be scrolled (future)\n             if (scroll) {\n             var pnsl = dragEl.parentNode.scrollLeft, pnst = dragEl.parentNode.scrollTop;\n             console.log(\"scroll!\", pnsl, pnst);\n             }*/\n        };\n        this.destroy = function() {\n            this.params.unbind(this.el, \"mousedown\", this.downListener);\n            this.params.unbind(document, \"mousemove\", this.moveListener);\n            this.params.unbind(document, \"mouseup\", this.upListener);\n            this.downListener = null;\n            this.upListener = null;\n            this.moveListener = null;\n        };\n\n        // init:register mousedown, and perhaps set a filter\n        this.params.bind(this.el, \"mousedown\", this.downListener);\n\n        // if handle provded, use that.  otherwise, try to set a filter.\n        // note that a `handle` selector always results in filterExclude being set to false, ie.\n        // the selector defines the handle element(s).\n        if (this.params.handle)\n            _setFilter(this.params.handle, false);\n        else\n            _setFilter(this.params.filter, this.params.filterExclude);\n    };\n\n    var Drop = function(el, params, css, scope) {\n        this._class = css.droppable;\n        this.params = params || {};\n        this.rank = params.rank || 0;\n        this._activeClass = this.params.activeClass || css.active;\n        this._hoverClass = this.params.hoverClass || css.hover;\n        Super.apply(this, arguments);\n        var hover = false;\n        this.allowLoopback = this.params.allowLoopback !== false;\n\n        this.setActive = function(val) {\n            this.params[val ? \"addClass\" : \"removeClass\"](this.el, this._activeClass);\n        };\n\n        this.updatePosition = function() {\n            this.position = this.params.getPosition(this.el);\n            this.pagePosition = this.params.getPosition(this.el, true);\n            this.size = this.params.getSize(this.el);\n        };\n\n        this.canDrop = this.params.canDrop || function(drag) {\n            return true;\n        };\n\n        this.isHover = function() { return hover; };\n\n        this.setHover = function(drag, val, e) {\n            // if turning off hover but this was not the drag that caused the hover, ignore.\n            if (val || this.el._katavorioDragHover == null || this.el._katavorioDragHover == drag.el._katavorio) {\n                this.params[val ? \"addClass\" : \"removeClass\"](this.el, this._hoverClass);\n                //this.el._katavorioDragHover = val ? drag.el._katavorio : null;\n                this.el._katavorioDragHover = val ? drag.el._katavorio : null;\n                if (hover !== val)\n                    this.params.events[val ? \"over\" : \"out\"]({el:this.el, e:e, drag:drag, drop:this});\n                hover = val;\n            }\n        };\n\n        this.drop = function(drag, event) {\n            return this.params.events[\"drop\"]({ drag:drag, e:event, drop:this });\n        };\n\n        this.destroy = function() {\n            this._class = null;\n            this._activeClass = null;\n            this._hoverClass = null;\n            //this.params = null;\n            hover = null;\n            //this.el = null;\n        };\n    };\n\n    var _uuid = function() {\n        return ('xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n            var r = Math.random()*16|0, v = c == 'x' ? r : (r&0x3|0x8);\n            return v.toString(16);\n        }));\n    };\n\n    var _rankSort = function(a,b) {\n        return a.rank < b.rank ? 1 : a.rank > b.rank ? -1 : 0;\n    };\n\n    var _gel = function(el) {\n        if (el == null) return null;\n        el = (typeof el === \"string\" || el.constructor == String)  ? document.getElementById(el) : el;\n        if (el == null) return null;\n        el._katavorio = el._katavorio || _uuid();\n        return el;\n    };\n\n    root.Katavorio = function(katavorioParams) {\n\n        var _selection = [],\n            _selectionMap = {};\n\n        this._dragsByScope = {};\n        this._dropsByScope = {};\n        var _zoom = 1,\n            _reg = function(obj, map) {\n                _each(obj, function(_obj) {\n                    for(var i = 0; i < _obj.scopes.length; i++) {\n                        map[_obj.scopes[i]] = map[_obj.scopes[i]] || [];\n                        map[_obj.scopes[i]].push(_obj);\n                    }\n                });\n            },\n            _unreg = function(obj, map) {\n                var c = 0;\n                _each(obj, function(_obj) {\n                    for(var i = 0; i < _obj.scopes.length; i++) {\n                        if (map[_obj.scopes[i]]) {\n                            var idx = katavorioParams.indexOf(map[_obj.scopes[i]], _obj);\n                            if (idx != -1) {\n                                map[_obj.scopes[i]].splice(idx, 1);\n                                c++;\n                            }\n                        }\n                    }\n                });\n\n                return c > 0 ;\n            },\n            _getMatchingDroppables = this.getMatchingDroppables = function(drag) {\n                var dd = [], _m = {};\n                for (var i = 0; i < drag.scopes.length; i++) {\n                    var _dd = this._dropsByScope[drag.scopes[i]];\n                    if (_dd) {\n                        for (var j = 0; j < _dd.length; j++) {\n                            if (_dd[j].canDrop(drag) &&  !_m[_dd[j].uuid] && (_dd[j].allowLoopback || _dd[j].el !== drag.el)) {\n                                _m[_dd[j].uuid] = true;\n                                dd.push(_dd[j]);\n                            }\n                        }\n                    }\n                }\n                dd.sort(_rankSort);\n                return dd;\n            },\n            _prepareParams = function(p) {\n                p = p || {};\n                var _p = {\n                    events:{}\n                }, i;\n                for (i in katavorioParams) _p[i] = katavorioParams[i];\n                for (i in p) _p[i] = p[i];\n                // events\n\n                for (i = 0; i < _events.length; i++) {\n                    _p.events[_events[i]] = p[_events[i]] || _devNull;\n                }\n                _p.katavorio = this;\n                return _p;\n            }.bind(this),\n            _mistletoe = function(existingDrag, params) {\n                for (var i = 0; i < _events.length; i++) {\n                    if (params[_events[i]]) {\n                        existingDrag.on(_events[i], params[_events[i]]);\n                    }\n                }\n            }.bind(this),\n            _css = {},\n            overrideCss = katavorioParams.css || {},\n            _scope = katavorioParams.scope || _defaultScope;\n\n        // prepare map of css classes based on defaults frst, then optional overrides\n        for (var i in _classes) _css[i] = _classes[i];\n        for (var i in overrideCss) _css[i] = overrideCss[i];\n\n        var inputFilterSelector = katavorioParams.inputFilterSelector || _defaultInputFilterSelector;\n        /**\n         * Gets the selector identifying which input elements to filter from drag events.\n         * @method getInputFilterSelector\n         * @return {String} Current input filter selector.\n         */\n        this.getInputFilterSelector = function() { return inputFilterSelector; };\n\n        /**\n         * Sets the selector identifying which input elements to filter from drag events.\n         * @method setInputFilterSelector\n         * @param {String} selector Input filter selector to set.\n         * @return {Katavorio} Current instance; method may be chained.\n         */\n        this.setInputFilterSelector = function(selector) {\n            inputFilterSelector = selector;\n            return this;\n        };\n\n        this.draggable = function(el, params) {\n            var o = [];\n            _each(el, function(_el) {\n                _el = _gel(_el);\n                if (_el != null) {\n                    if (_el._katavorioDrag == null) {\n                        var p = _prepareParams(params);\n                        _el._katavorioDrag = new Drag(_el, p, _css, _scope);\n                        _reg(_el._katavorioDrag, this._dragsByScope);\n                        o.push(_el._katavorioDrag);\n                        katavorioParams.addClass(_el, _css.draggable);\n                    }\n                    else {\n                        _mistletoe(_el._katavorioDrag, params);\n                    }\n                }\n            }.bind(this));\n            return o;\n\n        };\n\n        this.droppable = function(el, params) {\n            var o = [];\n            _each(el, function(_el) {\n                _el = _gel(_el);\n                if (_el != null) {\n                    var drop = new Drop(_el, _prepareParams(params), _css, _scope);\n                    _el._katavorioDrop = _el._katavorioDrop || [];\n                    _el._katavorioDrop.push(drop);\n                    _reg(drop, this._dropsByScope);\n                    o.push(drop);\n                    katavorioParams.addClass(_el, _css.droppable);\n                }\n            }.bind(this));\n            return o;\n        };\n\n        /**\n         * @name Katavorio#select\n         * @function\n         * @desc Adds an element to the current selection (for multiple node drag)\n         * @param {Element|String} DOM element - or id of the element - to add.\n         */\n        this.select = function(el) {\n            _each(el, function() {\n                var _el = _gel(this);\n                if (_el && _el._katavorioDrag) {\n                    if (!_selectionMap[_el._katavorio]) {\n                        _selection.push(_el._katavorioDrag);\n                        _selectionMap[_el._katavorio] = [ _el, _selection.length - 1 ];\n                        katavorioParams.addClass(_el, _css.selected);\n                    }\n                }\n            });\n            return this;\n        };\n\n        /**\n         * @name Katavorio#deselect\n         * @function\n         * @desc Removes an element from the current selection (for multiple node drag)\n         * @param {Element|String} DOM element - or id of the element - to remove.\n         */\n        this.deselect = function(el) {\n            _each(el, function() {\n                var _el = _gel(this);\n                if (_el && _el._katavorio) {\n                    var e = _selectionMap[_el._katavorio];\n                    if (e) {\n                        var _s = [];\n                        for (var i = 0; i < _selection.length; i++)\n                            if (_selection[i].el !== _el) _s.push(_selection[i]);\n                        _selection = _s;\n                        delete _selectionMap[_el._katavorio];\n                        katavorioParams.removeClass(_el, _css.selected);\n                    }\n                }\n            });\n            return this;\n        };\n\n        this.deselectAll = function() {\n            for (var i in _selectionMap) {\n                var d = _selectionMap[i];\n                katavorioParams.removeClass(d[0], _css.selected);\n            }\n\n            _selection.length = 0;\n            _selectionMap = {};\n        };\n\n        this.markSelection = function(drag) {\n            _foreach(_selection, function(e) { e.mark(); }, drag);\n        };\n\n        this.markPosses = function(drag) {\n            if (drag.posses) {\n                _each(drag.posses, function(p) {\n                    if (drag.posseRoles[p] && _posses[p]) {\n                        _foreach(_posses[p].members, function (d) {\n                            d.mark();\n                        }, drag);\n                    }\n                })\n            }\n        };\n\n        this.unmarkSelection = function(drag, event) {\n            _foreach(_selection, function(e) { e.unmark(event); }, drag);\n        };\n\n        this.unmarkPosses = function(drag, event) {\n            if (drag.posses) {\n                _each(drag.posses, function(p) {\n                    if (drag.posseRoles[p] && _posses[p]) {\n                        _foreach(_posses[p].members, function (d) {\n                            d.unmark(event, true);\n                        }, drag);\n                    }\n                });\n            }\n        };\n\n        this.getSelection = function() { return _selection.slice(0); };\n\n        this.updateSelection = function(dx, dy, drag) {\n            _foreach(_selection, function(e) { e.moveBy(dx, dy); }, drag);\n        };\n\n        var _posseAction = function(fn, drag) {\n            if (drag.posses) {\n                _each(drag.posses, function(p) {\n                    if (drag.posseRoles[p] && _posses[p]) {\n                        _foreach(_posses[p].members, function (e) {\n                            fn(e);\n                        }, drag);\n                    }\n                });\n            }\n        };\n\n        this.updatePosses = function(dx, dy, drag) {\n            _posseAction(function(e) { e.moveBy(dx, dy); }, drag);\n        };\n\n        this.notifyPosseDragStop = function(drag, evt) {\n            _posseAction(function(e) { e.stop(evt, true); }, drag);\n        };\n\n        this.notifySelectionDragStop = function(drag, evt) {\n            _foreach(_selection, function(e) { e.stop(evt, true); }, drag);\n        };\n\n        this.notifySelectionDragStart = function(drag, evt) {\n            _foreach(_selection, function(e) { e.notifyStart(evt);}, drag);\n        };\n\n        this.setZoom = function(z) { _zoom = z; };\n        this.getZoom = function() { return _zoom; };\n\n        // does the work of changing scopes\n        var _scopeManip = function(kObj, scopes, map, fn) {\n            _each(kObj, function(_kObj) {\n                _unreg(_kObj, map);  // deregister existing scopes\n                _kObj[fn](scopes); // set scopes\n                _reg(_kObj, map); // register new ones\n            });\n        };\n\n        _each([ \"set\", \"add\", \"remove\", \"toggle\"], function(v) {\n            this[v + \"Scope\"] = function(el, scopes) {\n                _scopeManip(el._katavorioDrag, scopes, this._dragsByScope, v + \"Scope\");\n                _scopeManip(el._katavorioDrop, scopes, this._dropsByScope, v + \"Scope\");\n            }.bind(this);\n            this[v + \"DragScope\"] = function(el, scopes) {\n                _scopeManip(el.constructor === Drag ? el : el._katavorioDrag, scopes, this._dragsByScope, v + \"Scope\");\n            }.bind(this);\n            this[v + \"DropScope\"] = function(el, scopes) {\n                _scopeManip(el.constructor === Drop ? el : el._katavorioDrop, scopes, this._dropsByScope, v + \"Scope\");\n            }.bind(this);\n        }.bind(this));\n\n        this.snapToGrid = function(x, y) {\n            for (var s in this._dragsByScope) {\n                _foreach(this._dragsByScope[s], function(d) { d.snap(x, y); });\n            }\n        };\n\n        this.getDragsForScope = function(s) { return this._dragsByScope[s]; };\n        this.getDropsForScope = function(s) { return this._dropsByScope[s]; };\n\n        var _destroy = function(el, type, map) {\n            el = _gel(el);\n            if (el[type]) {\n\n                // remove from selection, if present.\n                var selIdx = _selection.indexOf(el[type]);\n                if (selIdx >= 0) {\n                    _selection.splice(selIdx, 1);\n                }\n\n                if (_unreg(el[type], map)) {\n                    _each(el[type], function(kObj) { kObj.destroy() });\n                }\n\n                delete el[type];\n            }\n        };\n\n        this.elementRemoved = function(el) {\n            this.destroyDraggable(el);\n            this.destroyDroppable(el);\n        };\n\n        this.destroyDraggable = function(el) {\n            _destroy(el, \"_katavorioDrag\", this._dragsByScope);\n        };\n\n        this.destroyDroppable = function(el) {\n            _destroy(el, \"_katavorioDrop\", this._dropsByScope);\n        };\n\n        this.reset = function() {\n            this._dragsByScope = {};\n            this._dropsByScope = {};\n            _selection = [];\n            _selectionMap = {};\n            _posses = {};\n        };\n\n        // ----- groups\n        var _posses = {};\n\n        var _processOneSpec = function(el, _spec, dontAddExisting) {\n            var posseId = _isString(_spec) ? _spec : _spec.id;\n            var active = _isString(_spec) ? true : _spec.active !== false;\n            var posse = _posses[posseId] || (function() {\n                var g = {name:posseId, members:[]};\n                _posses[posseId] = g;\n                return g;\n            })();\n            _each(el, function(_el) {\n                if (_el._katavorioDrag) {\n\n                    if (dontAddExisting && _el._katavorioDrag.posseRoles[posse.name] != null) return;\n\n                    _suggest(posse.members, _el._katavorioDrag);\n                    _suggest(_el._katavorioDrag.posses, posse.name);\n                    _el._katavorioDrag.posseRoles[posse.name] = active;\n                }\n            });\n            return posse;\n        };\n\n        /**\n         * Add the given element to the posse with the given id, creating the group if it at first does not exist.\n         * @method addToPosse\n         * @param {Element} el Element to add.\n         * @param {String...|Object...} spec Variable args parameters. Each argument can be a either a String, indicating\n         * the ID of a Posse to which the element should be added as an active participant, or an Object containing\n         * `{ id:\"posseId\", active:false/true}`. In the latter case, if `active` is not provided it is assumed to be\n         * true.\n         * @returns {Posse|Posse[]} The Posse(s) to which the element(s) was/were added.\n         */\n        this.addToPosse = function(el, spec) {\n\n            var posses = [];\n\n            for (var i = 1; i < arguments.length; i++) {\n                posses.push(_processOneSpec(el, arguments[i]));\n            }\n\n            return posses.length == 1 ? posses[0] : posses;\n        };\n\n        /**\n         * Sets the posse(s) for the element with the given id, creating those that do not yet exist, and removing from\n         * the element any current Posses that are not specified by this method call. This method will not change the\n         * active/passive state if it is given a posse in which the element is already a member.\n         * @method setPosse\n         * @param {Element} el Element to set posse(s) on.\n         * @param {String...|Object...} spec Variable args parameters. Each argument can be a either a String, indicating\n         * the ID of a Posse to which the element should be added as an active participant, or an Object containing\n         * `{ id:\"posseId\", active:false/true}`. In the latter case, if `active` is not provided it is assumed to be\n         * true.\n         * @returns {Posse|Posse[]} The Posse(s) to which the element(s) now belongs.\n         */\n        this.setPosse = function(el, spec) {\n\n            var posses = [];\n\n            for (var i = 1; i < arguments.length; i++) {\n                posses.push(_processOneSpec(el, arguments[i], true).name);\n            }\n\n            _each(el, function(_el) {\n                if (_el._katavorioDrag) {\n                    var diff = _difference(_el._katavorioDrag.posses, posses);\n                    var p = [];\n                    Array.prototype.push.apply(p, _el._katavorioDrag.posses);\n                    for (var i = 0; i < diff.length; i++) {\n                        this.removeFromPosse(_el, diff[i]);\n                    }\n                }\n            }.bind(this));\n\n            return posses.length == 1 ? posses[0] : posses;\n        };\n\n        /**\n         * Remove the given element from the given posse(s).\n         * @method removeFromPosse\n         * @param {Element} el Element to remove.\n         * @param {String...} posseId Varargs parameter: one value for each posse to remove the element from.\n         */\n        this.removeFromPosse = function(el, posseId) {\n            if (arguments.length < 2) throw new TypeError(\"No posse id provided for remove operation\");\n            for(var i = 1; i < arguments.length; i++) {\n                posseId = arguments[i];\n                _each(el, function (_el) {\n                    if (_el._katavorioDrag && _el._katavorioDrag.posses) {\n                        var d = _el._katavorioDrag;\n                        _each(posseId, function (p) {\n                            _vanquish(_posses[p].members, d);\n                            _vanquish(d.posses, p);\n                            delete d.posseRoles[p];\n                        });\n                    }\n                });\n            }\n        };\n\n        /**\n         * Remove the given element from all Posses to which it belongs.\n         * @method removeFromAllPosses\n         * @param {Element|Element[]} el Element to remove from Posses.\n         */\n        this.removeFromAllPosses = function(el) {\n            _each(el, function(_el) {\n                if (_el._katavorioDrag && _el._katavorioDrag.posses) {\n                    var d = _el._katavorioDrag;\n                    _each(d.posses, function(p) {\n                        _vanquish(_posses[p].members, d);\n                    });\n                    d.posses.length = 0;\n                    d.posseRoles = {};\n                }\n            });\n        };\n\n        /**\n         * Changes the participation state for the element in the Posse with the given ID.\n         * @param {Element|Element[]} el Element(s) to change state for.\n         * @param {String} posseId ID of the Posse to change element state for.\n         * @param {Boolean} state True to make active, false to make passive.\n         */\n        this.setPosseState = function(el, posseId, state) {\n            var posse = _posses[posseId];\n            if (posse) {\n                _each(el, function(_el) {\n                    if (_el._katavorioDrag && _el._katavorioDrag.posses) {\n                        _el._katavorioDrag.posseRoles[posse.name] = state;\n                    }\n                });\n            }\n        };\n\n    };\n\n    root.Katavorio.version = \"0.19.1\";\n\n    if (typeof exports !== \"undefined\") {\n        exports.Katavorio = root.Katavorio;\n    }\n\n}).call(typeof window !== 'undefined' ? window : this);\n\n/*\n * jsPlumb\n *\n * Title:jsPlumb 2.3.0\n *\n * Provides a way to visually connect elements on an HTML page, using SVG.\n *\n * This file contains utility functions that run in both browsers and headless.\n *\n * Copyright (c) 2010 - 2017 jsPlumb (hello@jsplumbtoolkit.com)\n *\n * http://jsplumbtoolkit.com\n * http://github.com/sporritt/jsplumb\n *\n * Dual licensed under the MIT and GPL2 licenses.\n */\n\n;\n(function () {\n\n    var _isa = function (a) {\n            return Object.prototype.toString.call(a) === \"[object Array]\";\n        },\n        _isnum = function (n) {\n            return Object.prototype.toString.call(n) === \"[object Number]\";\n        },\n        _iss = function (s) {\n            return typeof s === \"string\";\n        },\n        _isb = function (s) {\n            return typeof s === \"boolean\";\n        },\n        _isnull = function (s) {\n            return s == null;\n        },\n        _iso = function (o) {\n            return o == null ? false : Object.prototype.toString.call(o) === \"[object Object]\";\n        },\n        _isd = function (o) {\n            return Object.prototype.toString.call(o) === \"[object Date]\";\n        },\n        _isf = function (o) {\n            return Object.prototype.toString.call(o) === \"[object Function]\";\n        },\n        _isNamedFunction = function(o) {\n            return _isf(o) && o.name != null && o.name.length > 0;\n        },\n        _ise = function (o) {\n            for (var i in o) {\n                if (o.hasOwnProperty(i)) return false;\n            }\n            return true;\n        };\n\n    var root = this;\n    root.jsPlumbUtil = {\n        isArray: _isa,\n        isString: _iss,\n        isBoolean: _isb,\n        isNull: _isnull,\n        isObject: _iso,\n        isDate: _isd,\n        isFunction: _isf,\n        isEmpty: _ise,\n        isNumber: _isnum,\n        clone: function (a) {\n            if (_iss(a)) return \"\" + a;\n            else if (_isb(a)) return !!a;\n            else if (_isd(a)) return new Date(a.getTime());\n            else if (_isf(a)) return a;\n            else if (_isa(a)) {\n                var b = [];\n                for (var i = 0; i < a.length; i++)\n                    b.push(this.clone(a[i]));\n                return b;\n            }\n            else if (_iso(a)) {\n                var c = {};\n                for (var j in a)\n                    c[j] = this.clone(a[j]);\n                return c;\n            }\n            else return a;\n        },\n        merge: function (a, b, collations) {\n            // first change the collations array - if present - into a lookup table, because its faster.\n            var cMap = {}, ar, i;\n            collations = collations || [];\n            for (i = 0; i < collations.length; i++)\n                cMap[collations[i]] = true;\n\n            var c = this.clone(a);\n            for (i in b) {\n                if (c[i] == null) {\n                    c[i] = b[i];\n                }\n                else if (_iss(b[i]) || _isb(b[i])) {\n                    if (!cMap[i]) {\n                        c[i] = b[i]; // if we dont want to collate, just copy it in.\n                    }\n                    else {\n                        ar = [];\n                        // if c's object is also an array we can keep its values.\n                        ar.push.apply(ar, _isa(c[i]) ? c[i] : [ c[i] ]);\n                        ar.push.apply(ar, _isa(b[i]) ? b[i] : [ b[i] ]);\n                        c[i] = ar;\n                    }\n                }\n                else {\n                    if (_isa(b[i])) {\n                        ar = [];\n                        // if c's object is also an array we can keep its values.\n                        if (_isa(c[i])) ar.push.apply(ar, c[i]);\n                        ar.push.apply(ar, b[i]);\n                        c[i] = ar;\n                    }\n                    else if (_iso(b[i])) {\n                        // overwite c's value with an object if it is not already one.\n                        if (!_iso(c[i]))\n                            c[i] = {};\n                        for (var j in b[i]) {\n                            c[i][j] = b[i][j];\n                        }\n                    }\n                }\n\n            }\n            return c;\n        },\n        replace: function (inObj, path, value) {\n            if (inObj == null) return;\n            var q = inObj, t = q;\n            path.replace(/([^\\.])+/g, function (term, lc, pos, str) {\n                var array = term.match(/([^\\[0-9]+){1}(\\[)([0-9+])/),\n                    last = pos + term.length >= str.length,\n                    _getArray = function () {\n                        return t[array[1]] || (function () {\n                            t[array[1]] = [];\n                            return t[array[1]];\n                        })();\n                    };\n\n                if (last) {\n                    // set term = value on current t, creating term as array if necessary.\n                    if (array)\n                        _getArray()[array[3]] = value;\n                    else\n                        t[term] = value;\n                }\n                else {\n                    // set to current t[term], creating t[term] if necessary.\n                    if (array) {\n                        var a = _getArray();\n                        t = a[array[3]] || (function () {\n                            a[array[3]] = {};\n                            return a[array[3]];\n                        })();\n                    }\n                    else\n                        t = t[term] || (function () {\n                            t[term] = {};\n                            return t[term];\n                        })();\n                }\n            });\n\n            return inObj;\n        },\n        //\n        // chain a list of functions, supplied by [ object, method name, args ], and return on the first\n        // one that returns the failValue. if none return the failValue, return the successValue.\n        //\n        functionChain: function (successValue, failValue, fns) {\n            for (var i = 0; i < fns.length; i++) {\n                var o = fns[i][0][fns[i][1]].apply(fns[i][0], fns[i][2]);\n                if (o === failValue) {\n                    return o;\n                }\n            }\n            return successValue;\n        },\n        // take the given model and expand out any parameters.\n        // 'functionPrefix' is optional, and if present, helps jsplumb figure out what to do if a value is a Function.\n        // if you do not provide it, jsplumb will run the given values through any functions it finds, and use the function's\n        // output as the value in the result. if you do provide the prefix, only functions that are named and have this prefix\n        // will be executed; other functions will be passed as values to the output.\n        populate: function (model, values, functionPrefix) {\n            // for a string, see if it has parameter matches, and if so, try to make the substitutions.\n            var getValue = function (fromString) {\n                    var matches = fromString.match(/(\\${.*?})/g);\n                    if (matches != null) {\n                        for (var i = 0; i < matches.length; i++) {\n                            var val = values[matches[i].substring(2, matches[i].length - 1)] || \"\";\n                            if (val != null) {\n                                fromString = fromString.replace(matches[i], val);\n                            }\n                        }\n                    }\n                    return fromString;\n                },\n            // process one entry.\n                _one = function (d) {\n                    if (d != null) {\n                        if (_iss(d)) {\n                            return getValue(d);\n                        }\n                        else if (_isf(d) && (functionPrefix == null || (d.name || \"\").indexOf(functionPrefix) === 0)) {\n                            return d(values);\n                        }\n                        else if (_isa(d)) {\n                            var r = [];\n                            for (var i = 0; i < d.length; i++)\n                                r.push(_one(d[i]));\n                            return r;\n                        }\n                        else if (_iso(d)) {\n                            var s = {};\n                            for (var j in d) {\n                                s[j] = _one(d[j]);\n                            }\n                            return s;\n                        }\n                        else {\n                            return d;\n                        }\n                    }\n                };\n\n            return _one(model);\n        },\n        findWithFunction: function (a, f) {\n            if (a)\n                for (var i = 0; i < a.length; i++) if (f(a[i])) return i;\n            return -1;\n        },\n        removeWithFunction: function (a, f) {\n            var idx = root.jsPlumbUtil.findWithFunction(a, f);\n            if (idx > -1) a.splice(idx, 1);\n            return idx != -1;\n        },\n        remove: function (l, v) {\n            var idx = l.indexOf(v);\n            if (idx > -1) l.splice(idx, 1);\n            return idx != -1;\n        },\n        // TODO support insert index\n        addWithFunction: function (list, item, hashFunction) {\n            if (root.jsPlumbUtil.findWithFunction(list, hashFunction) == -1) list.push(item);\n        },\n        addToList: function (map, key, value, insertAtStart) {\n            var l = map[key];\n            if (l == null) {\n                l = [];\n                map[key] = l;\n            }\n            l[insertAtStart ? \"unshift\" : \"push\"](value);\n            return l;\n        },\n        suggest : function(list, item, insertAtHead) {\n            if (list.indexOf(item) === -1) {\n                if (insertAtHead) {\n                    list.unshift(item);\n                } else {\n                    list.push(item);\n                }\n                return true;\n            }\n            return false;\n        },\n        //\n        // extends the given obj (which can be an array) with the given constructor function, prototype functions, and\n        // class members, any of which may be null.\n        //\n        extend: function (child, parent, _protoFn) {\n            var i;\n            parent = _isa(parent) ? parent : [ parent ];\n\n            for (i = 0; i < parent.length; i++) {\n                for (var j in parent[i].prototype) {\n                    if (parent[i].prototype.hasOwnProperty(j)) {\n                        child.prototype[j] = parent[i].prototype[j];\n                    }\n                }\n            }\n\n            var _makeFn = function (name, protoFn) {\n                return function () {\n                    for (i = 0; i < parent.length; i++) {\n                        if (parent[i].prototype[name])\n                            parent[i].prototype[name].apply(this, arguments);\n                    }\n                    return protoFn.apply(this, arguments);\n                };\n            };\n\n            var _oneSet = function (fns) {\n                for (var k in fns) {\n                    child.prototype[k] = _makeFn(k, fns[k]);\n                }\n            };\n\n            if (arguments.length > 2) {\n                for (i = 2; i < arguments.length; i++)\n                    _oneSet(arguments[i]);\n            }\n\n            return child;\n        },\n        uuid: function () {\n            return ('xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n                var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\n                return v.toString(16);\n            }));\n        },\n        logEnabled: true,\n        log: function () {\n            if (root.jsPlumbUtil.logEnabled && typeof console != \"undefined\") {\n                try {\n                    var msg = arguments[arguments.length - 1];\n                    console.log(msg);\n                }\n                catch (e) {\n                }\n            }\n        },\n\n        /**\n         * Wraps one function with another, creating a placeholder for the\n         * wrapped function if it was null. this is used to wrap the various\n         * drag/drop event functions - to allow jsPlumb to be notified of\n         * important lifecycle events without imposing itself on the user's\n         * drag/drop functionality.\n         * @method jsPlumbUtil.wrap\n         * @param {Function} wrappedFunction original function to wrap; may be null.\n         * @param {Function} newFunction function to wrap the original with.\n         * @param {Object} [returnOnThisValue] Optional. Indicates that the wrappedFunction should\n         * not be executed if the newFunction returns a value matching 'returnOnThisValue'.\n         * note that this is a simple comparison and only works for primitives right now.\n         */\n        wrap: function (wrappedFunction, newFunction, returnOnThisValue) {\n            wrappedFunction = wrappedFunction || function () {\n            };\n            newFunction = newFunction || function () {\n            };\n            return function () {\n                var r = null;\n                try {\n                    r = newFunction.apply(this, arguments);\n                } catch (e) {\n                    root.jsPlumbUtil.log(\"jsPlumb function failed : \" + e);\n                }\n                if (returnOnThisValue == null || (r !== returnOnThisValue)) {\n                    try {\n                        r = wrappedFunction.apply(this, arguments);\n                    } catch (e) {\n                        root.jsPlumbUtil.log(\"wrapped function failed : \" + e);\n                    }\n                }\n                return r;\n            };\n        }\n    };\n\n    root.jsPlumbUtil.EventGenerator = function () {\n        var _listeners = {},\n            eventsSuspended = false,\n        // this is a list of events that should re-throw any errors that occur during their dispatch. it is current private.\n            eventsToDieOn = { \"ready\": true };\n\n        this.bind = function (event, listener, insertAtStart) {\n            var _one = function(evt) {\n                root.jsPlumbUtil.addToList(_listeners, evt, listener, insertAtStart);\n                listener.__jsPlumb = listener.__jsPlumb || {};\n                listener.__jsPlumb[root.jsPlumbUtil.uuid()] = evt;\n            };\n\n            if (typeof event === \"string\") _one(event);\n            else if (event.length != null) {\n                for (var i = 0; i < event.length; i++) {\n                    _one(event[i]);\n                }\n            }\n\n            return this;\n        };\n\n        this.fire = function (event, value, originalEvent) {\n            if (!eventsSuspended && _listeners[event]) {\n                var l = _listeners[event].length, i = 0, _gone = false, ret = null;\n                if (!this.shouldFireEvent || this.shouldFireEvent(event, value, originalEvent)) {\n                    while (!_gone && i < l && ret !== false) {\n                        // doing it this way rather than catching and then possibly re-throwing means that an error propagated by this\n                        // method will have the whole call stack available in the debugger.\n                        if (eventsToDieOn[event])\n                            _listeners[event][i].apply(this, [ value, originalEvent]);\n                        else {\n                            try {\n                                ret = _listeners[event][i].apply(this, [ value, originalEvent ]);\n                            } catch (e) {\n                                root.jsPlumbUtil.log(\"jsPlumb: fire failed for event \" + event + \" : \" + e);\n                            }\n                        }\n                        i++;\n                        if (_listeners == null || _listeners[event] == null)\n                            _gone = true;\n                    }\n                }\n            }\n            return this;\n        };\n\n        this.unbind = function (eventOrListener, listener) {\n\n            if (arguments.length === 0) {\n                _listeners = {};\n            }\n            else if (arguments.length === 1) {\n                if (typeof eventOrListener === \"string\")\n                    delete _listeners[eventOrListener];\n                else if (eventOrListener.__jsPlumb) {\n                    var evt;\n                    for (var i in eventOrListener.__jsPlumb) {\n                        evt = eventOrListener.__jsPlumb[i];\n                        root.jsPlumbUtil.remove(_listeners[evt] || [], eventOrListener);\n                    }\n                }\n            }\n            else if (arguments.length === 2) {\n                root.jsPlumbUtil.remove(_listeners[eventOrListener] || [], listener);\n            }\n\n            return this;\n        };\n\n        this.getListener = function (forEvent) {\n            return _listeners[forEvent];\n        };\n        this.setSuspendEvents = function (val) {\n            eventsSuspended = val;\n        };\n        this.isSuspendEvents = function () {\n            return eventsSuspended;\n        };\n        this.silently = function(fn) {\n            this.setSuspendEvents(true);\n            try {\n                fn();\n            }\n            catch (e) {\n                root.jsPlumbUtil.log(\"Cannot execute silent function \" + e);\n            }\n            this.setSuspendEvents(false);\n        };\n        this.cleanupListeners = function () {\n            for (var i in _listeners) {\n                _listeners[i] = null;\n            }\n        };\n    };\n\n    root.jsPlumbUtil.EventGenerator.prototype = {\n        cleanup: function () {\n            this.cleanupListeners();\n        }\n    };\n\n    if (typeof exports !== \"undefined\") {\n        exports.jsPlumbUtil = root.jsPlumbUtil;\n    }\n\n}).call(typeof window !== 'undefined' ? window : this);\n\n/*\n * jsPlumb\n *\n * Title:jsPlumb 2.3.0\n *\n * Provides a way to visually connect elements on an HTML page, using SVG.\n *\n * This file contains utility functions that run in browsers only.\n *\n * Copyright (c) 2010 - 2017 jsPlumb (hello@jsplumbtoolkit.com)\n *\n * http://jsplumbtoolkit.com\n * http://github.com/sporritt/jsplumb\n *\n * Dual licensed under the MIT and GPL2 licenses.\n */\n ;(function() {\n\n  \"use strict\";\n\n   var root = this;\n\n    root.jsPlumbUtil.matchesSelector = function(el, selector, ctx) {\n       ctx = ctx || el.parentNode;\n       var possibles = ctx.querySelectorAll(selector);\n       for (var i = 0; i < possibles.length; i++) {\n           if (possibles[i] === el)\n               return true;\n       }\n       return false;\n   };\n\n    root.jsPlumbUtil.consume = function(e, doNotPreventDefault) {\n       if (e.stopPropagation)\n           e.stopPropagation();\n       else\n           e.returnValue = false;\n\n       if (!doNotPreventDefault && e.preventDefault)\n            e.preventDefault();\n   };\n\n   /*\n    * Function: sizeElement\n    * Helper to size and position an element. You would typically use\n    * this when writing your own Connector or Endpoint implementation.\n    *\n    * Parameters:\n    *  x - [int] x position for the element origin\n    *  y - [int] y position for the element origin\n    *  w - [int] width of the element\n    *  h - [int] height of the element\n    *\n    */\n    root.jsPlumbUtil.sizeElement = function(el, x, y, w, h) {\n       if (el) {\n           el.style.height = h + \"px\";\n           el.height = h;\n           el.style.width = w + \"px\";\n           el.width = w;\n           el.style.left = x + \"px\";\n           el.style.top = y + \"px\";\n       }\n   };\n\n }).call(typeof window !== 'undefined' ? window : this);\n\n/*\n * jsPlumb\n * \n * Title:jsPlumb 2.3.0\n * \n * Provides a way to visually connect elements on an HTML page, using SVG.\n * \n * This file contains the core code.\n *\n * Copyright (c) 2010 - 2017 jsPlumb (hello@jsplumbtoolkit.com)\n * \n * http://jsplumbtoolkit.com\n * http://github.com/sporritt/jsplumb\n * \n * Dual licensed under the MIT and GPL2 licenses.\n */\n(function () {\n\n    \"use strict\";\n\n    var root = this;\n    var connectorTypes = [], rendererTypes;\n\n    var _ju = root.jsPlumbUtil,\n        _getOffset = function (el, _instance, relativeToRoot) {\n            return _instance.getOffset(el, relativeToRoot);\n        },\n\n        /**\n         * creates a timestamp, using milliseconds since 1970, but as a string.\n         */\n        _timestamp = function () {\n            return \"\" + (new Date()).getTime();\n        },\n\n    // helper method to update the hover style whenever it, or paintStyle, changes.\n    // we use paintStyle as the foundation and merge hoverPaintStyle over the\n    // top.\n        _updateHoverStyle = function (component) {\n            if (component._jsPlumb.paintStyle && component._jsPlumb.hoverPaintStyle) {\n                var mergedHoverStyle = {};\n                jsPlumb.extend(mergedHoverStyle, component._jsPlumb.paintStyle);\n                jsPlumb.extend(mergedHoverStyle, component._jsPlumb.hoverPaintStyle);\n                delete component._jsPlumb.hoverPaintStyle;\n                // we want the fill of paintStyle to override a gradient, if possible.\n                if (mergedHoverStyle.gradient && component._jsPlumb.paintStyle.fill)\n                    delete mergedHoverStyle.gradient;\n                component._jsPlumb.hoverPaintStyle = mergedHoverStyle;\n            }\n        },\n        events = [\"tap\", \"dbltap\", \"click\", \"dblclick\", \"mouseover\", \"mouseout\", \"mousemove\", \"mousedown\", \"mouseup\", \"contextmenu\" ],\n        eventFilters = { \"mouseout\": \"mouseleave\", \"mouseexit\": \"mouseleave\" },\n        _updateAttachedElements = function (component, state, timestamp, sourceElement) {\n            var affectedElements = component.getAttachedElements();\n            if (affectedElements) {\n                for (var i = 0, j = affectedElements.length; i < j; i++) {\n                    if (!sourceElement || sourceElement != affectedElements[i])\n                        affectedElements[i].setHover(state, true, timestamp);\t\t\t// tell the attached elements not to inform their own attached elements.\n                }\n            }\n        },\n        _splitType = function (t) {\n            return t == null ? null : t.split(\" \");\n        },\n        _mapType = function(map, obj, typeId) {\n            for (var i in obj)\n                map[i] = typeId;\n        },\n        _each = function(fn, obj) {\n            obj = _ju.isArray(obj) || (obj.length != null && !_ju.isString(obj)) ? obj : [ obj ];\n            for (var i = 0; i < obj.length; i++) {\n                try {\n                    fn.apply(obj[i], [ obj[i] ]);\n                }\n                catch (e) {\n                    _ju.log(\".each iteration failed : \" + e);\n                }\n            }\n        },\n        _applyTypes = function (component, params, doNotRepaint) {\n            if (component.getDefaultType) {\n                var td = component.getTypeDescriptor(), map = {};\n                var defType = component.getDefaultType();\n                var o = _ju.merge({}, defType);\n                _mapType(map, defType, \"__default\");\n                for (var i = 0, j = component._jsPlumb.types.length; i < j; i++) {\n                    var tid = component._jsPlumb.types[i];\n                    if (tid !== \"__default\") {\n                        var _t = component._jsPlumb.instance.getType(tid, td);\n                        if (_t != null) {\n                            o = _ju.merge(o, _t, [ \"cssClass\" ]);\n                            _mapType(map, _t, tid);\n                        }\n                    }\n                }\n\n                if (params) {\n                    o = _ju.populate(o, params, \"_\");\n                }\n\n                component.applyType(o, doNotRepaint, map);\n                if (!doNotRepaint) component.repaint();\n            }\n        },\n\n// ------------------------------ BEGIN jsPlumbUIComponent --------------------------------------------\n\n        jsPlumbUIComponent = root.jsPlumbUIComponent = function (params) {\n\n            _ju.EventGenerator.apply(this, arguments);\n\n            var self = this,\n                a = arguments,\n                idPrefix = self.idPrefix,\n                id = idPrefix + (new Date()).getTime();\n\n            this._jsPlumb = {\n                instance: params._jsPlumb,\n                parameters: params.parameters || {},\n                paintStyle: null,\n                hoverPaintStyle: null,\n                paintStyleInUse: null,\n                hover: false,\n                beforeDetach: params.beforeDetach,\n                beforeDrop: params.beforeDrop,\n                overlayPlacements: [],\n                hoverClass: params.hoverClass || params._jsPlumb.Defaults.HoverClass,\n                types: [],\n                typeCache:{}\n            };\n\n            this.cacheTypeItem = function(key, item, typeId) {\n                this._jsPlumb.typeCache[typeId] = this._jsPlumb.typeCache[typeId] || {};\n                this._jsPlumb.typeCache[typeId][key] = item;\n            };\n            this.getCachedTypeItem = function(key, typeId) {\n                return this._jsPlumb.typeCache[typeId] ? this._jsPlumb.typeCache[typeId][key] : null;\n            };\n\n            this.getId = function () {\n                return id;\n            };\n\n// ----------------------------- default type --------------------------------------------\n\n\n            var o = params.overlays || [], oo = {};\n            if (this.defaultOverlayKeys) {\n                for (var i = 0; i < this.defaultOverlayKeys.length; i++)\n                    Array.prototype.push.apply(o, this._jsPlumb.instance.Defaults[this.defaultOverlayKeys[i]] || []);\n\n                for (i = 0; i < o.length; i++) {\n                    // if a string, convert to object representation so that we can store the typeid on it.\n                    // also assign an id.\n                    var fo = jsPlumb.convertToFullOverlaySpec(o[i]);\n                    oo[fo[1].id] = fo;\n                }\n            }\n\n            var _defaultType = {\n                overlays:oo,\n                parameters: params.parameters || {},\n                scope: params.scope || this._jsPlumb.instance.getDefaultScope()\n            };\n            this.getDefaultType = function() {\n                return _defaultType;\n            };\n            this.appendToDefaultType = function(obj) {\n                for (var i in obj) _defaultType[i] = obj[i];\n            };\n\n// ----------------------------- end default type --------------------------------------------\n\n            // all components can generate events\n\n            if (params.events) {\n                for (i in params.events)\n                    self.bind(i, params.events[i]);\n            }\n\n            // all components get this clone function.\n            // TODO issue 116 showed a problem with this - it seems 'a' that is in\n            // the clone function's scope is shared by all invocations of it, the classic\n            // JS closure problem.  for now, jsPlumb does a version of this inline where\n            // it used to call clone.  but it would be nice to find some time to look\n            // further at this.\n            this.clone = function () {\n                var o = Object.create(this.constructor.prototype);\n                this.constructor.apply(o, a);\n                return o;\n            }.bind(this);\n\n            // user can supply a beforeDetach callback, which will be executed before a detach\n            // is performed; returning false prevents the detach.\n            this.isDetachAllowed = function (connection) {\n                var r = true;\n                if (this._jsPlumb.beforeDetach) {\n                    try {\n                        r = this._jsPlumb.beforeDetach(connection);\n                    }\n                    catch (e) {\n                        _ju.log(\"jsPlumb: beforeDetach callback failed\", e);\n                    }\n                }\n                return r;\n            };\n\n            // user can supply a beforeDrop callback, which will be executed before a dropped\n            // connection is confirmed. user can return false to reject connection.\n            this.isDropAllowed = function (sourceId, targetId, scope, connection, dropEndpoint, source, target) {\n                var r = this._jsPlumb.instance.checkCondition(\"beforeDrop\", {\n                    sourceId: sourceId,\n                    targetId: targetId,\n                    scope: scope,\n                    connection: connection,\n                    dropEndpoint: dropEndpoint,\n                    source: source, target: target\n                });\n                if (this._jsPlumb.beforeDrop) {\n                    try {\n                        r = this._jsPlumb.beforeDrop({\n                            sourceId: sourceId,\n                            targetId: targetId,\n                            scope: scope,\n                            connection: connection,\n                            dropEndpoint: dropEndpoint,\n                            source: source, target: target\n                        });\n                    }\n                    catch (e) {\n                        _ju.log(\"jsPlumb: beforeDrop callback failed\", e);\n                    }\n                }\n                return r;\n            };\n\n            var boundListeners = [],\n                bindAListener = function (obj, type, fn) {\n                    boundListeners.push([obj, type, fn]);\n                    obj.bind(type, fn);\n                },\n                domListeners = [];\n\n            // sets the component associated with listener events. for instance, an overlay delegates\n            // its events back to a connector. but if the connector is swapped on the underlying connection,\n            // then this component must be changed. This is called by setConnector in the Connection class.\n            this.setListenerComponent = function (c) {\n                for (var i = 0; i < domListeners.length; i++)\n                    domListeners[i][3] = c;\n            };\n\n\n        };\n\n    var _removeTypeCssHelper = function (component, typeIndex) {\n        var typeId = component._jsPlumb.types[typeIndex],\n            type = component._jsPlumb.instance.getType(typeId, component.getTypeDescriptor());\n\n        if (type != null) {\n\n            if (type.cssClass && component.canvas)\n                component._jsPlumb.instance.removeClass(component.canvas, type.cssClass);\n        }\n    };\n\n    _ju.extend(root.jsPlumbUIComponent, _ju.EventGenerator, {\n\n        getParameter: function (name) {\n            return this._jsPlumb.parameters[name];\n        },\n\n        setParameter: function (name, value) {\n            this._jsPlumb.parameters[name] = value;\n        },\n\n        getParameters: function () {\n            return this._jsPlumb.parameters;\n        },\n\n        setParameters: function (p) {\n            this._jsPlumb.parameters = p;\n        },\n\n        getClass:function() {\n            return jsPlumb.getClass(this.canvas);\n        },\n\n        hasClass:function(clazz) {\n            return jsPlumb.hasClass(this.canvas, clazz);\n        },\n\n        addClass: function (clazz) {\n            jsPlumb.addClass(this.canvas, clazz);\n        },\n\n        removeClass: function (clazz) {\n            jsPlumb.removeClass(this.canvas, clazz);\n        },\n\n        updateClasses: function (classesToAdd, classesToRemove) {\n            jsPlumb.updateClasses(this.canvas, classesToAdd, classesToRemove);\n        },\n\n        setType: function (typeId, params, doNotRepaint) {\n            this.clearTypes();\n            this._jsPlumb.types = _splitType(typeId) || [];\n            _applyTypes(this, params, doNotRepaint);\n        },\n\n        getType: function () {\n            return this._jsPlumb.types;\n        },\n\n        reapplyTypes: function (params, doNotRepaint) {\n            _applyTypes(this, params, doNotRepaint);\n        },\n\n        hasType: function (typeId) {\n            return this._jsPlumb.types.indexOf(typeId) != -1;\n        },\n\n        addType: function (typeId, params, doNotRepaint) {\n            var t = _splitType(typeId), _cont = false;\n            if (t != null) {\n                for (var i = 0, j = t.length; i < j; i++) {\n                    if (!this.hasType(t[i])) {\n                        this._jsPlumb.types.push(t[i]);\n                        _cont = true;\n                    }\n                }\n                if (_cont) _applyTypes(this, params, doNotRepaint);\n            }\n        },\n\n        removeType: function (typeId, params, doNotRepaint) {\n            var t = _splitType(typeId), _cont = false, _one = function (tt) {\n                var idx = this._jsPlumb.types.indexOf(tt);\n                if (idx != -1) {\n                    // remove css class if necessary\n                    _removeTypeCssHelper(this, idx);\n                    this._jsPlumb.types.splice(idx, 1);\n                    return true;\n                }\n                return false;\n            }.bind(this);\n\n            if (t != null) {\n                for (var i = 0, j = t.length; i < j; i++) {\n                    _cont = _one(t[i]) || _cont;\n                }\n                if (_cont) _applyTypes(this, params, doNotRepaint);\n            }\n        },\n        clearTypes: function (params, doNotRepaint) {\n            var i = this._jsPlumb.types.length;\n            for (var j = 0; j < i; j++) {\n                _removeTypeCssHelper(this, 0);\n                this._jsPlumb.types.splice(0, 1);\n            }\n            _applyTypes(this, params, doNotRepaint);\n        },\n\n        toggleType: function (typeId, params, doNotRepaint) {\n            var t = _splitType(typeId);\n            if (t != null) {\n                for (var i = 0, j = t.length; i < j; i++) {\n                    var idx = this._jsPlumb.types.indexOf(t[i]);\n                    if (idx != -1) {\n                        _removeTypeCssHelper(this, idx);\n                        this._jsPlumb.types.splice(idx, 1);\n                    }\n                    else\n                        this._jsPlumb.types.push(t[i]);\n                }\n\n                _applyTypes(this, params, doNotRepaint);\n            }\n        },\n        applyType: function (t, doNotRepaint) {\n            this.setPaintStyle(t.paintStyle, doNotRepaint);\n            this.setHoverPaintStyle(t.hoverPaintStyle, doNotRepaint);\n            if (t.parameters) {\n                for (var i in t.parameters)\n                    this.setParameter(i, t.parameters[i]);\n            }\n            this._jsPlumb.paintStyleInUse = this.getPaintStyle();\n        },\n        setPaintStyle: function (style, doNotRepaint) {\n//\t\t    \tthis._jsPlumb.paintStyle = jsPlumb.extend({}, style);\n// TODO figure out if we want components to clone paintStyle so as not to share it.\n            this._jsPlumb.paintStyle = style;\n            this._jsPlumb.paintStyleInUse = this._jsPlumb.paintStyle;\n            _updateHoverStyle(this);\n            if (!doNotRepaint) this.repaint();\n        },\n        getPaintStyle: function () {\n            return this._jsPlumb.paintStyle;\n        },\n        setHoverPaintStyle: function (style, doNotRepaint) {\n            //this._jsPlumb.hoverPaintStyle = jsPlumb.extend({}, style);\n// TODO figure out if we want components to clone paintStyle so as not to share it.\t\t    \t\n            this._jsPlumb.hoverPaintStyle = style;\n            _updateHoverStyle(this);\n            if (!doNotRepaint) this.repaint();\n        },\n        getHoverPaintStyle: function () {\n            return this._jsPlumb.hoverPaintStyle;\n        },\n        destroy: function (force) {\n            if (force || this.typeId == null) {\n                this.cleanupListeners(); // this is on EventGenerator\n                this.clone = null;\n                this._jsPlumb = null;\n            }\n        },\n\n        isHover: function () {\n            return this._jsPlumb.hover;\n        },\n\n        setHover: function (hover, ignoreAttachedElements, timestamp) {\n            // while dragging, we ignore these events.  this keeps the UI from flashing and\n            // swishing and whatevering.\n            if (this._jsPlumb && !this._jsPlumb.instance.currentlyDragging && !this._jsPlumb.instance.isHoverSuspended()) {\n\n                this._jsPlumb.hover = hover;\n\n                if (this.canvas != null) {\n                    if (this._jsPlumb.instance.hoverClass != null) {\n                        var method = hover ? \"addClass\" : \"removeClass\";\n                        this._jsPlumb.instance[method](this.canvas, this._jsPlumb.instance.hoverClass);\n                    }\n                    if (this._jsPlumb.hoverClass != null) {\n                        this._jsPlumb.instance[method](this.canvas, this._jsPlumb.hoverClass);\n                    }\n                }\n                if (this._jsPlumb.hoverPaintStyle != null) {\n                    this._jsPlumb.paintStyleInUse = hover ? this._jsPlumb.hoverPaintStyle : this._jsPlumb.paintStyle;\n                    if (!this._jsPlumb.instance.isSuspendDrawing()) {\n                        timestamp = timestamp || _timestamp();\n                        this.repaint({timestamp: timestamp, recalc: false});\n                    }\n                }\n                // get the list of other affected elements, if supported by this component.\n                // for a connection, its the endpoints.  for an endpoint, its the connections! surprise.\n                if (this.getAttachedElements && !ignoreAttachedElements)\n                    _updateAttachedElements(this, hover, _timestamp(), this);\n            }\n        }\n    });\n\n// ------------------------------ END jsPlumbUIComponent --------------------------------------------\n\n    var _jsPlumbInstanceIndex = 0,\n        getInstanceIndex = function () {\n            var i = _jsPlumbInstanceIndex + 1;\n            _jsPlumbInstanceIndex++;\n            return i;\n        };\n\n    var jsPlumbInstance = root.jsPlumbInstance = function (_defaults) {\n\n        this.version = \"2.3.0\";\n\n        if (_defaults) jsPlumb.extend(this.Defaults, _defaults);\n\n        this.logEnabled = this.Defaults.LogEnabled;\n        this._connectionTypes = {};\n        this._endpointTypes = {};\n\n        _ju.EventGenerator.apply(this);\n\n        var _currentInstance = this,\n            _instanceIndex = getInstanceIndex(),\n            _bb = _currentInstance.bind,\n            _initialDefaults = {},\n            _zoom = 1,\n            _info = function (el) {\n                if (el == null) return null;\n                else if (el.nodeType == 3 || el.nodeType == 8) {\n                    return { el:el, text:true };\n                }\n                else {\n                    var _el = _currentInstance.getElement(el);\n                    return { el: _el, id: (_ju.isString(el) && _el == null) ? el : _getId(_el) };\n                }\n            };\n\n        this.getInstanceIndex = function () {\n            return _instanceIndex;\n        };\n\n        this.setZoom = function (z, repaintEverything) {\n            _zoom = z;\n            _currentInstance.fire(\"zoom\", _zoom);\n            if (repaintEverything) _currentInstance.repaintEverything();\n            return true;\n        };\n        this.getZoom = function () {\n            return _zoom;\n        };\n\n        for (var i in this.Defaults)\n            _initialDefaults[i] = this.Defaults[i];\n\n        var _container, _containerDelegations = [];\n        this.unbindContainer = function() {\n            if (_container != null && _containerDelegations.length > 0) {\n                for (var i = 0; i < _containerDelegations.length; i++) {\n                    _currentInstance.off(_container, _containerDelegations[i][0], _containerDelegations[i][1]);\n                }\n            }\n        };\n        this.setContainer = function (c) {\n\n            this.unbindContainer();\n\n            // get container as dom element.\n            c = this.getElement(c);\n            // move existing connections and endpoints, if any.\n            this.select().each(function (conn) {\n                conn.moveParent(c);\n            });\n            this.selectEndpoints().each(function (ep) {\n                ep.moveParent(c);\n            });\n\n            // set container.\n            var previousContainer = _container;\n            _container = c;\n            _containerDelegations.length = 0;\n            var eventAliases = {\n                \"endpointclick\":\"endpointClick\",\n                \"endpointdblclick\":\"endpointDblClick\"\n            };\n\n            var _oneDelegateHandler = function (id, e, componentType) {\n                var t = e.srcElement || e.target,\n                    jp = (t && t.parentNode ? t.parentNode._jsPlumb : null) || (t ? t._jsPlumb : null) || (t && t.parentNode && t.parentNode.parentNode ? t.parentNode.parentNode._jsPlumb : null);\n                if (jp) {\n                    jp.fire(id, jp, e);\n                    var alias = componentType ? eventAliases[componentType + id] || id : id;\n                    // jsplumb also fires every event coming from components/overlays. That's what the test for `jp.component` is for.\n                    _currentInstance.fire(alias, jp.component || jp, e);\n                }\n            };\n\n            var _addOneDelegate = function(eventId, selector, fn) {\n                _containerDelegations.push([eventId, fn]);\n                _currentInstance.on(_container, eventId, selector, fn);\n            };\n\n            // delegate one event on the container to jsplumb elements. it might be possible to\n            // abstract this out: each of endpoint, connection and overlay could register themselves with\n            // jsplumb as \"component types\" or whatever, and provide a suitable selector. this would be\n            // done by the renderer (although admittedly from 2.0 onwards we're not supporting vml anymore)\n            var _oneDelegate = function (id) {\n                // connections.\n                _addOneDelegate(id, \".jtk-connector\", function (e) {\n                    _oneDelegateHandler(id, e);\n                });\n                // endpoints. note they can have an enclosing div, or not.\n                _addOneDelegate(id, \".jtk-endpoint\", function (e) {\n                    _oneDelegateHandler(id, e, \"endpoint\");\n                });\n                // overlays\n                _addOneDelegate(id, \".jtk-overlay\", function (e) {\n                    _oneDelegateHandler(id, e);\n                });\n            };\n\n            for (var i = 0; i < events.length; i++)\n                _oneDelegate(events[i]);\n\n            // managed elements\n            for (var elId in managedElements) {\n                var el = managedElements[elId].el;\n                if (el.parentNode === previousContainer) {\n                    previousContainer.removeChild(el);\n                    _container.appendChild(el);\n                }\n            }\n\n        };\n        this.getContainer = function () {\n            return _container;\n        };\n\n        this.bind = function (event, fn) {\n            if (\"ready\" === event && initialized) fn();\n            else _bb.apply(_currentInstance, [event, fn]);\n        };\n\n        _currentInstance.importDefaults = function (d) {\n            for (var i in d) {\n                _currentInstance.Defaults[i] = d[i];\n            }\n            if (d.Container)\n                _currentInstance.setContainer(d.Container);\n\n            return _currentInstance;\n        };\n\n        _currentInstance.restoreDefaults = function () {\n            _currentInstance.Defaults = jsPlumb.extend({}, _initialDefaults);\n            return _currentInstance;\n        };\n\n        var log = null,\n            initialized = false,\n        // TODO remove from window scope\n            connections = [],\n        // map of element id -> endpoint lists. an element can have an arbitrary\n        // number of endpoints on it, and not all of them have to be connected\n        // to anything.\n            endpointsByElement = {},\n            endpointsByUUID = {},\n            managedElements = {},\n            offsets = {},\n            offsetTimestamps = {},\n            draggableStates = {},\n            connectionBeingDragged = false,\n            sizes = [],\n            _suspendDrawing = false,\n            _suspendedAt = null,\n            DEFAULT_SCOPE = this.Defaults.Scope,\n            _curIdStamp = 1,\n            _idstamp = function () {\n                return \"\" + _curIdStamp++;\n            },\n\n        //\n        // appends an element to some other element, which is calculated as follows:\n        //\n        // 1. if Container exists, use that element.\n        // 2. if the 'parent' parameter exists, use that.\n        // 3. otherwise just use the root element.\n        //\n        //\n            _appendElement = function (el, parent) {\n                if (_container)\n                    _container.appendChild(el);\n                else if (!parent)\n                    this.appendToRoot(el);\n                else\n                    this.getElement(parent).appendChild(el);\n            }.bind(this),\n\n        //\n        // Draws an endpoint and its connections. this is the main entry point into drawing connections as well\n        // as endpoints, since jsPlumb is endpoint-centric under the hood.\n        //\n        // @param element element to draw (of type library specific element object)\n        // @param ui UI object from current library's event system. optional.\n        // @param timestamp timestamp for this paint cycle. used to speed things up a little by cutting down the amount of offset calculations we do.\n        // @param clearEdits defaults to false; indicates that mouse edits for connectors should be cleared\n        ///\n            _draw = function (element, ui, timestamp, clearEdits) {\n\n                if (!_suspendDrawing) {\n                    var id = _getId(element),\n                        repaintEls,\n                        dm = _currentInstance.getDragManager();\n\n                    if (dm) repaintEls = dm.getElementsForDraggable(id);\n\n                    if (timestamp == null) timestamp = _timestamp();\n\n                    // update the offset of everything _before_ we try to draw anything.\n                    var o = _updateOffset({ elId: id, offset: ui, recalc: false, timestamp: timestamp });\n\n                    if (repaintEls && o && o.o) {\n                        for (var i in repaintEls) {\n                            _updateOffset({\n                                elId: repaintEls[i].id,\n                                offset: {\n                                    left: o.o.left + repaintEls[i].offset.left,\n                                    top: o.o.top + repaintEls[i].offset.top\n                                },\n                                recalc: false,\n                                timestamp: timestamp\n                            });\n                        }\n                    }\n\n                    _currentInstance.anchorManager.redraw(id, ui, timestamp, null, clearEdits);\n\n                    if (repaintEls) {\n                        for (var j in repaintEls) {\n                            _currentInstance.anchorManager.redraw(repaintEls[j].id, ui, timestamp, repaintEls[j].offset, clearEdits, true);\n                        }\n                    }\n                }\n            },\n\n        //\n        // gets an Endpoint by uuid.\n        //\n            _getEndpoint = function (uuid) {\n                return endpointsByUUID[uuid];\n            },\n\n            /**\n             * inits a draggable if it's not already initialised.\n             * TODO: somehow abstract this to the adapter, because the concept of \"draggable\" has no\n             * place on the server.\n             */\n            _initDraggableIfNecessary = function (element, isDraggable, dragOptions, id, fireEvent) {\n                // move to DragManager?\n                if (!jsPlumb.headless) {\n                    var _draggable = isDraggable == null ? false : isDraggable;\n                    if (_draggable) {\n                        if (jsPlumb.isDragSupported(element, _currentInstance)) {\n                            var options = dragOptions || _currentInstance.Defaults.DragOptions;\n                            options = jsPlumb.extend({}, options); // make a copy.\n                            if (!jsPlumb.isAlreadyDraggable(element, _currentInstance)) {\n                                var dragEvent = jsPlumb.dragEvents.drag,\n                                    stopEvent = jsPlumb.dragEvents.stop,\n                                    startEvent = jsPlumb.dragEvents.start,\n                                    _started = false;\n\n                                _manage(id, element);\n\n                                options[startEvent] = _ju.wrap(options[startEvent], function () {\n                                    _currentInstance.setHoverSuspended(true);\n                                    _currentInstance.select({source: element}).addClass(_currentInstance.elementDraggingClass + \" \" + _currentInstance.sourceElementDraggingClass, true);\n                                    _currentInstance.select({target: element}).addClass(_currentInstance.elementDraggingClass + \" \" + _currentInstance.targetElementDraggingClass, true);\n                                    _currentInstance.setConnectionBeingDragged(true);\n                                    if (options.canDrag) return dragOptions.canDrag();\n                                }, false);\n\n                                options[dragEvent] = _ju.wrap(options[dragEvent], function () {\n                                    // TODO: here we could actually use getDragObject, and then compute it ourselves,\n                                    // since every adapter does the same thing. but i'm not sure why YUI's getDragObject\n                                    // differs from getUIPosition so much\n                                    var ui = _currentInstance.getUIPosition(arguments, _currentInstance.getZoom());\n                                    if (ui != null) {\n                                        _draw(element, ui, null, true);\n                                        if (_started) _currentInstance.addClass(element, \"jtk-dragged\");\n                                        _started = true;\n                                    }\n                                });\n                                options[stopEvent] = _ju.wrap(options[stopEvent], function () {\n                                    var elements = arguments[0].selection, uip;\n\n                                    var _one = function (_e) {\n                                        if (_e[1] != null) {\n                                            // run the reported offset through the code that takes parent containers\n                                            // into account, to adjust if necessary (issue 554)\n                                            uip = _currentInstance.getUIPosition([{\n                                                el:_e[2].el,\n                                                pos:[_e[1].left, _e[1].top]\n                                            }]);\n                                            _draw(_e[2].el, uip);\n                                        }\n                                        _currentInstance.removeClass(_e[0], \"jtk-dragged\");\n                                        _currentInstance.select({source: _e[2].el}).removeClass(_currentInstance.elementDraggingClass + \" \" + _currentInstance.sourceElementDraggingClass, true);\n                                        _currentInstance.select({target: _e[2].el}).removeClass(_currentInstance.elementDraggingClass + \" \" + _currentInstance.targetElementDraggingClass, true);\n                                        _currentInstance.getDragManager().dragEnded(_e[2].el);\n                                    };\n\n                                    for (var i = 0; i < elements.length; i++) {\n                                        _one(elements[i]);\n                                    }\n\n                                    _started = false;\n                                    _currentInstance.setHoverSuspended(false);\n                                    _currentInstance.setConnectionBeingDragged(false);\n                                });\n                                var elId = _getId(element); // need ID\n                                draggableStates[elId] = true;\n                                var draggable = draggableStates[elId];\n                                options.disabled = draggable == null ? false : !draggable;\n                                _currentInstance.initDraggable(element, options);\n                                _currentInstance.getDragManager().register(element);\n                                if (fireEvent) _currentInstance.fire(\"elementDraggable\", {el:element, options:options});\n                            }\n                            else {\n                                // already draggable. attach any start, drag or stop listeners to the current Drag.\n                                if (dragOptions.force) {\n                                    _currentInstance.initDraggable(element, options);\n                                }\n                            }\n                        }\n                    }\n                }\n            },\n\n            _scopeMatch = function (e1, e2) {\n                var s1 = e1.scope.split(/\\s/), s2 = e2.scope.split(/\\s/);\n                for (var i = 0; i < s1.length; i++)\n                    for (var j = 0; j < s2.length; j++)\n                        if (s2[j] == s1[i]) return true;\n\n                return false;\n            },\n\n        /*\n         * prepares a final params object that can be passed to _newConnection, taking into account defaults, events, etc.\n         */\n            _prepareConnectionParams = function (params, referenceParams) {\n                var _p = jsPlumb.extend({ }, params);\n                if (referenceParams) jsPlumb.extend(_p, referenceParams);\n\n                // hotwire endpoints passed as source or target to sourceEndpoint/targetEndpoint, respectively.\n                if (_p.source) {\n                    if (_p.source.endpoint)\n                        _p.sourceEndpoint = _p.source;\n                    else\n                        _p.source = _currentInstance.getElement(_p.source);\n                }\n                if (_p.target) {\n                    if (_p.target.endpoint)\n                        _p.targetEndpoint = _p.target;\n                    else\n                        _p.target = _currentInstance.getElement(_p.target);\n                }\n\n                // test for endpoint uuids to connect\n                if (params.uuids) {\n                    _p.sourceEndpoint = _getEndpoint(params.uuids[0]);\n                    _p.targetEndpoint = _getEndpoint(params.uuids[1]);\n                }\n\n                // now ensure that if we do have Endpoints already, they're not full.\n                // source:\n                if (_p.sourceEndpoint && _p.sourceEndpoint.isFull()) {\n                    _ju.log(_currentInstance, \"could not add connection; source endpoint is full\");\n                    return;\n                }\n\n                // target:\n                if (_p.targetEndpoint && _p.targetEndpoint.isFull()) {\n                    _ju.log(_currentInstance, \"could not add connection; target endpoint is full\");\n                    return;\n                }\n\n                // if source endpoint mandates connection type and nothing specified in our params, use it.\n                if (!_p.type && _p.sourceEndpoint)\n                    _p.type = _p.sourceEndpoint.connectionType;\n\n                // copy in any connectorOverlays that were specified on the source endpoint.\n                // it doesnt copy target endpoint overlays.  i'm not sure if we want it to or not.\n                if (_p.sourceEndpoint && _p.sourceEndpoint.connectorOverlays) {\n                    _p.overlays = _p.overlays || [];\n                    for (var i = 0, j = _p.sourceEndpoint.connectorOverlays.length; i < j; i++) {\n                        _p.overlays.push(_p.sourceEndpoint.connectorOverlays[i]);\n                    }\n                }\n\n                // scope\n                if (_p.sourceEndpoint && _p.sourceEndpoint.scope) {\n                    _p.scope = _p.sourceEndpoint.scope;\n                }\n\n                // pointer events\n                if (!_p[\"pointer-events\"] && _p.sourceEndpoint && _p.sourceEndpoint.connectorPointerEvents)\n                    _p[\"pointer-events\"] = _p.sourceEndpoint.connectorPointerEvents;\n\n                var _mergeOverrides = function (def, values) {\n                    var m = jsPlumb.extend({}, def);\n                    for (var i in values) {\n                        if (values[i]) m[i] = values[i];\n                    }\n                    return m;\n                };\n\n                var _addEndpoint = function (el, def, idx) {\n                    return _currentInstance.addEndpoint(el, _mergeOverrides(def, {\n                        anchor: _p.anchors ? _p.anchors[idx] : _p.anchor,\n                        endpoint: _p.endpoints ? _p.endpoints[idx] : _p.endpoint,\n                        paintStyle: _p.endpointStyles ? _p.endpointStyles[idx] : _p.endpointStyle,\n                        hoverPaintStyle: _p.endpointHoverStyles ? _p.endpointHoverStyles[idx] : _p.endpointHoverStyle\n                    }));\n                };\n\n                // check for makeSource/makeTarget specs.\n\n                var _oneElementDef = function (type, idx, defs, matchType) {\n                    if (_p[type] && !_p[type].endpoint && !_p[type + \"Endpoint\"] && !_p.newConnection) {\n                        var tid = _getId(_p[type]), tep = defs[tid];\n\n                        tep = tep ? tep[matchType] : null;\n\n                        if (tep) {\n                            // if not enabled, return.\n                            if (!tep.enabled) return false;\n                            var newEndpoint = tep.endpoint != null && tep.endpoint._jsPlumb ? tep.endpoint : _addEndpoint(_p[type], tep.def, idx);\n                            if (newEndpoint.isFull()) return false;\n                            _p[type + \"Endpoint\"] = newEndpoint;\n                            if (!_p.scope && tep.def.scope) _p.scope = tep.def.scope; // provide scope if not already provided and endpoint def has one.\n                            newEndpoint._doNotDeleteOnDetach = false; // reset.\n                            newEndpoint._deleteOnDetach = true;\n                            if (tep.uniqueEndpoint) {\n                                if (!tep.endpoint) {\n                                    tep.endpoint = newEndpoint;\n                                    newEndpoint._deleteOnDetach = false;\n                                    newEndpoint._doNotDeleteOnDetach = true;\n                                }\n                                else\n                                    newEndpoint.finalEndpoint = tep.endpoint;\n                            }\n                        }\n                    }\n                };\n\n                if (_oneElementDef(\"source\", 0, this.sourceEndpointDefinitions, _p.type || \"default\") === false) return;\n                if (_oneElementDef(\"target\", 1, this.targetEndpointDefinitions, _p.type || \"default\") === false) return;\n\n                // last, ensure scopes match\n                if (_p.sourceEndpoint && _p.targetEndpoint)\n                    if (!_scopeMatch(_p.sourceEndpoint, _p.targetEndpoint)) _p = null;\n\n                return _p;\n            }.bind(_currentInstance),\n\n            _newConnection = function (params) {\n                var connectionFunc = _currentInstance.Defaults.ConnectionType || _currentInstance.getDefaultConnectionType();\n\n                params._jsPlumb = _currentInstance;\n                params.newConnection = _newConnection;\n                params.newEndpoint = _newEndpoint;\n                params.endpointsByUUID = endpointsByUUID;\n                params.endpointsByElement = endpointsByElement;\n                params.finaliseConnection = _finaliseConnection;\n                params.id = \"con_\" + _idstamp();\n                var con = new connectionFunc(params);\n\n                // if the connection is draggable, then maybe we need to tell the target endpoint to init the\n                // dragging code. it won't run again if it already configured to be draggable.\n                if (con.isDetachable()) {\n                    con.endpoints[0].initDraggable(\"_jsPlumbSource\");\n                    con.endpoints[1].initDraggable(\"_jsPlumbTarget\");\n                }\n\n                return con;\n            },\n\n        //\n        // adds the connection to the backing model, fires an event if necessary and then redraws\n        //\n            _finaliseConnection = _currentInstance.finaliseConnection = function (jpc, params, originalEvent, doInformAnchorManager) {\n                params = params || {};\n                // add to list of connections (by scope).\n                if (!jpc.suspendedEndpoint)\n                    connections.push(jpc);\n\n                jpc.pending = null;\n\n                // turn off isTemporarySource on the source endpoint (only viable on first draw)\n                jpc.endpoints[0].isTemporarySource = false;\n\n                // always inform the anchor manager\n                // except that if jpc has a suspended endpoint it's not true to say the\n                // connection is new; it has just (possibly) moved. the question is whether\n                // to make that call here or in the anchor manager.  i think perhaps here.\n                if (doInformAnchorManager !== false)\n                    _currentInstance.anchorManager.newConnection(jpc);\n\n                // force a paint\n                _draw(jpc.source);\n\n                // fire an event\n                if (!params.doNotFireConnectionEvent && params.fireEvent !== false) {\n\n                    var eventArgs = {\n                        connection: jpc,\n                        source: jpc.source, target: jpc.target,\n                        sourceId: jpc.sourceId, targetId: jpc.targetId,\n                        sourceEndpoint: jpc.endpoints[0], targetEndpoint: jpc.endpoints[1]\n                    };\n\n                    _currentInstance.fire(\"connection\", eventArgs, originalEvent);\n                }\n            },\n\n        /*\n         factory method to prepare a new endpoint.  this should always be used instead of creating Endpoints\n         manually, since this method attaches event listeners and an id.\n         */\n            _newEndpoint = function (params, id) {\n                var endpointFunc = _currentInstance.Defaults.EndpointType || jsPlumb.Endpoint;\n                var _p = jsPlumb.extend({}, params);\n                _p._jsPlumb = _currentInstance;\n                _p.newConnection = _newConnection;\n                _p.newEndpoint = _newEndpoint;\n                _p.endpointsByUUID = endpointsByUUID;\n                _p.endpointsByElement = endpointsByElement;\n                _p.fireDetachEvent = fireDetachEvent;\n                _p.elementId = id || _getId(_p.source);\n                var ep = new endpointFunc(_p);\n                ep.id = \"ep_\" + _idstamp();\n                _manage(_p.elementId, _p.source);\n\n                if (!jsPlumb.headless)\n                    _currentInstance.getDragManager().endpointAdded(_p.source, id);\n\n                return ep;\n            },\n\n        /*\n         * performs the given function operation on all the connections found\n         * for the given element id; this means we find all the endpoints for\n         * the given element, and then for each endpoint find the connectors\n         * connected to it. then we pass each connection in to the given\n         * function.\n         */\n            _operation = function (elId, func, endpointFunc) {\n                var endpoints = endpointsByElement[elId];\n                if (endpoints && endpoints.length) {\n                    for (var i = 0, ii = endpoints.length; i < ii; i++) {\n                        for (var j = 0, jj = endpoints[i].connections.length; j < jj; j++) {\n                            var retVal = func(endpoints[i].connections[j]);\n                            // if the function passed in returns true, we exit.\n                            // most functions return false.\n                            if (retVal) return;\n                        }\n                        if (endpointFunc) endpointFunc(endpoints[i]);\n                    }\n                }\n            },\n\n            _setDraggable = function (element, draggable) {\n                return jsPlumb.each(element, function (el) {\n                    if (_currentInstance.isDragSupported(el)) {\n                        draggableStates[_currentInstance.getAttribute(el, \"id\")] = draggable;\n                        _currentInstance.setElementDraggable(el, draggable);\n                    }\n                });\n            },\n        /*\n         * private method to do the business of hiding/showing.\n         *\n         * @param el\n         *            either Id of the element in question or a library specific\n         *            object for the element.\n         * @param state\n         *            String specifying a value for the css 'display' property\n         *            ('block' or 'none').\n         */\n            _setVisible = function (el, state, alsoChangeEndpoints) {\n                state = state === \"block\";\n                var endpointFunc = null;\n                if (alsoChangeEndpoints) {\n                    endpointFunc = function (ep) {\n                        ep.setVisible(state, true, true);\n                    };\n                }\n                var info = _info(el);\n                _operation(info.id, function (jpc) {\n                    if (state && alsoChangeEndpoints) {\n                        // this test is necessary because this functionality is new, and i wanted to maintain backwards compatibility.\n                        // this block will only set a connection to be visible if the other endpoint in the connection is also visible.\n                        var oidx = jpc.sourceId === info.id ? 1 : 0;\n                        if (jpc.endpoints[oidx].isVisible()) jpc.setVisible(true);\n                    }\n                    else  // the default behaviour for show, and what always happens for hide, is to just set the visibility without getting clever.\n                        jpc.setVisible(state);\n                }, endpointFunc);\n            },\n        /*\n         * toggles the draggable state of the given element(s).\n         * el is either an id, or an element object, or a list of ids/element objects.\n         */\n            _toggleDraggable = function (el) {\n                var state;\n                jsPlumb.each(el, function (el) {\n                    var elId = _currentInstance.getAttribute(el, \"id\");\n                    state = draggableStates[elId] == null ? false : draggableStates[elId];\n                    state = !state;\n                    draggableStates[elId] = state;\n                    _currentInstance.setDraggable(el, state);\n                    return state;\n                }.bind(this));\n                return state;\n            },\n            /**\n             * private method to do the business of toggling hiding/showing.\n             */\n            _toggleVisible = function (elId, changeEndpoints) {\n                var endpointFunc = null;\n                if (changeEndpoints) {\n                    endpointFunc = function (ep) {\n                        var state = ep.isVisible();\n                        ep.setVisible(!state);\n                    };\n                }\n                _operation(elId, function (jpc) {\n                    var state = jpc.isVisible();\n                    jpc.setVisible(!state);\n                }, endpointFunc);\n            },\n\n        // TODO comparison performance\n            _getCachedData = function (elId) {\n                var o = offsets[elId];\n                if (!o)\n                    return _updateOffset({elId: elId});\n                else\n                    return {o: o, s: sizes[elId]};\n            },\n\n            /**\n             * gets an id for the given element, creating and setting one if\n             * necessary.  the id is of the form\n             *\n             *    jsPlumb_<instance index>_<index in instance>\n             *\n             * where \"index in instance\" is a monotonically increasing integer that starts at 0,\n             * for each instance.  this method is used not only to assign ids to elements that do not\n             * have them but also to connections and endpoints.\n             */\n            _getId = function (element, uuid, doNotCreateIfNotFound) {\n                if (_ju.isString(element)) return element;\n                if (element == null) return null;\n                var id = _currentInstance.getAttribute(element, \"id\");\n                if (!id || id === \"undefined\") {\n                    // check if fixed uuid parameter is given\n                    if (arguments.length == 2 && arguments[1] !== undefined)\n                        id = uuid;\n                    else if (arguments.length == 1 || (arguments.length == 3 && !arguments[2]))\n                        id = \"jsPlumb_\" + _instanceIndex + \"_\" + _idstamp();\n\n                    if (!doNotCreateIfNotFound) _currentInstance.setAttribute(element, \"id\", id);\n                }\n                return id;\n            };\n\n        this.setConnectionBeingDragged = function (v) {\n            connectionBeingDragged = v;\n        };\n        this.isConnectionBeingDragged = function () {\n            return connectionBeingDragged;\n        };\n\n        /**\n         * Returns a map of all the elements this jsPlumbInstance is currently managing.\n         * @returns {Object} Map of [id-> {el, endpoint[], connection, position}] information.\n         */\n        this.getManagedElements = function() {\n            return managedElements;\n        };\n\n        this.connectorClass = \"jtk-connector\";\n        this.connectorOutlineClass = \"jtk-connector-outline\";\n        this.editableConnectorClass = \"jtk-connector-editable\";\n        this.connectedClass = \"jtk-connected\";\n        this.hoverClass = \"jtk-hover\";\n        this.endpointClass = \"jtk-endpoint\";\n        this.endpointConnectedClass = \"jtk-endpoint-connected\";\n        this.endpointFullClass = \"jtk-endpoint-full\";\n        this.endpointDropAllowedClass = \"jtk-endpoint-drop-allowed\";\n        this.endpointDropForbiddenClass = \"jtk-endpoint-drop-forbidden\";\n        this.overlayClass = \"jtk-overlay\";\n        this.draggingClass = \"jtk-dragging\";\n        this.elementDraggingClass = \"jtk-element-dragging\";\n        this.sourceElementDraggingClass = \"jtk-source-element-dragging\";\n        this.targetElementDraggingClass = \"jtk-target-element-dragging\";\n        this.endpointAnchorClassPrefix = \"jtk-endpoint-anchor\";\n        this.hoverSourceClass = \"jtk-source-hover\";\n        this.hoverTargetClass = \"jtk-target-hover\";\n        this.dragSelectClass = \"jtk-drag-select\";\n\n        this.Anchors = {};\n        this.Connectors = {  \"svg\": {} };\n        this.Endpoints = { \"svg\": {} };\n        this.Overlays = { \"svg\": {} } ;\n        this.ConnectorRenderers = {};\n        this.SVG = \"svg\";\n\n// --------------------------- jsPlumbInstance public API ---------------------------------------------------------\n\n\n        this.addEndpoint = function (el, params, referenceParams) {\n            referenceParams = referenceParams || {};\n            var p = jsPlumb.extend({}, referenceParams);\n            jsPlumb.extend(p, params);\n            p.endpoint = p.endpoint || _currentInstance.Defaults.Endpoint;\n            p.paintStyle = p.paintStyle || _currentInstance.Defaults.EndpointStyle;\n\n            var results = [],\n                inputs = (_ju.isArray(el) || (el.length != null && !_ju.isString(el))) ? el : [ el ];\n\n            for (var i = 0, j = inputs.length; i < j; i++) {\n                p.source = _currentInstance.getElement(inputs[i]);\n                _ensureContainer(p.source);\n\n                var id = _getId(p.source), e = _newEndpoint(p, id);\n\n                // SP new. here we have introduced a class-wide element manager, which is responsible\n                // for getting object dimensions and width/height, and for updating these values only\n                // when necessary (after a drag, or on a forced refresh call).\n                var myOffset = _manage(id, p.source).info.o;\n                _ju.addToList(endpointsByElement, id, e);\n\n                if (!_suspendDrawing) {\n                    e.paint({\n                        anchorLoc: e.anchor.compute({ xy: [ myOffset.left, myOffset.top ], wh: sizes[id], element: e, timestamp: _suspendedAt }),\n                        timestamp: _suspendedAt\n                    });\n                }\n\n                results.push(e);\n                e._doNotDeleteOnDetach = true; // mark this as being added via addEndpoint.\n            }\n\n            return results.length == 1 ? results[0] : results;\n        };\n\n        this.addEndpoints = function (el, endpoints, referenceParams) {\n            var results = [];\n            for (var i = 0, j = endpoints.length; i < j; i++) {\n                var e = _currentInstance.addEndpoint(el, endpoints[i], referenceParams);\n                if (_ju.isArray(e))\n                    Array.prototype.push.apply(results, e);\n                else results.push(e);\n            }\n            return results;\n        };\n\n        this.animate = function (el, properties, options) {\n            if (!this.animationSupported) return false;\n\n            options = options || {};\n            var del = _currentInstance.getElement(el),\n                id = _getId(del),\n                stepFunction = jsPlumb.animEvents.step,\n                completeFunction = jsPlumb.animEvents.complete;\n\n            options[stepFunction] = _ju.wrap(options[stepFunction], function () {\n                _currentInstance.revalidate(id);\n            });\n\n            // onComplete repaints, just to make sure everything looks good at the end of the animation.\n            options[completeFunction] = _ju.wrap(options[completeFunction], function () {\n                _currentInstance.revalidate(id);\n            });\n\n            _currentInstance.doAnimate(del, properties, options);\n        };\n\n        /**\n         * checks for a listener for the given condition, executing it if found, passing in the given value.\n         * condition listeners would have been attached using \"bind\" (which is, you could argue, now overloaded, since\n         * firing click events etc is a bit different to what this does).  i thought about adding a \"bindCondition\"\n         * or something, but decided against it, for the sake of simplicity. jsPlumb will never fire one of these\n         * condition events anyway.\n         */\n        this.checkCondition = function (conditionName, args) {\n            var l = _currentInstance.getListener(conditionName),\n                r = true;\n\n            if (l && l.length > 0) {\n                var values = Array.prototype.slice.call(arguments, 1);\n                try {\n                    for (var i = 0, j = l.length; i < j; i++) {\n                        r = r && l[i].apply(l[i], values);\n                    }\n                }\n                catch (e) {\n                    _ju.log(_currentInstance, \"cannot check condition [\" + conditionName + \"]\" + e);\n                }\n            }\n            return r;\n        };\n\n        this.connect = function (params, referenceParams) {\n            // prepare a final set of parameters to create connection with\n            var _p = _prepareConnectionParams(params, referenceParams), jpc;\n            // TODO probably a nicer return value if the connection was not made.  _prepareConnectionParams\n            // will return null (and log something) if either endpoint was full.  what would be nicer is to\n            // create a dedicated 'error' object.\n            if (_p) {\n                if (_p.source == null && _p.sourceEndpoint == null) {\n                    _ju.log(\"Cannot establish connection - source does not exist\");\n                    return;\n                }\n                if (_p.target == null && _p.targetEndpoint == null) {\n                    _ju.log(\"Cannot establish connection - target does not exist\");\n                    return;\n                }\n                _ensureContainer(_p.source);\n                // create the connection.  it is not yet registered\n                jpc = _newConnection(_p);\n                // now add it the model, fire an event, and redraw\n                _finaliseConnection(jpc, _p);\n            }\n            return jpc;\n        };\n\n        var stTypes = [\n            { el: \"source\", elId: \"sourceId\", epDefs: \"sourceEndpointDefinitions\" },\n            { el: \"target\", elId: \"targetId\", epDefs: \"targetEndpointDefinitions\" }\n        ];\n\n        var _set = function (c, el, idx, doNotRepaint) {\n            var ep, _st = stTypes[idx], cId = c[_st.elId], cEl = c[_st.el], sid, sep,\n                oldEndpoint = c.endpoints[idx];\n\n            var evtParams = {\n                index: idx,\n                originalSourceId: idx === 0 ? cId : c.sourceId,\n                newSourceId: c.sourceId,\n                originalTargetId: idx == 1 ? cId : c.targetId,\n                newTargetId: c.targetId,\n                connection: c\n            };\n\n            if (el.constructor == jsPlumb.Endpoint) { // TODO here match the current endpoint class; users can change it {\n                ep = el;\n                ep.addConnection(c);\n                el = ep.element;\n            }\n            else {\n                sid = _getId(el);\n                sep = this[_st.epDefs][sid];\n\n                if (sid === c[_st.elId])\n                    ep = null;  // dont change source/target if the element is already the one given.\n                else if (sep) {\n                    for (var t in sep) {\n                        if (!sep[t].enabled) return;\n                        ep = sep[t].endpoint != null && sep[t].endpoint._jsPlumb ? sep[t].endpoint : this.addEndpoint(el, sep[t].def);\n                        if (sep[t].uniqueEndpoint) sep[t].endpoint = ep;\n                        ep._doNotDeleteOnDetach = false;\n                        ep._deleteOnDetach = true;\n                        ep.addConnection(c);\n                    }\n                }\n                else {\n                    ep = c.makeEndpoint(idx === 0, el, sid);\n                    ep._doNotDeleteOnDetach = false;\n                    ep._deleteOnDetach = true;\n                }\n            }\n\n            if (ep != null) {\n                oldEndpoint.detachFromConnection(c);\n                c.endpoints[idx] = ep;\n                c[_st.el] = ep.element;\n                c[_st.elId] = ep.elementId;\n                evtParams[idx === 0 ? \"newSourceId\" : \"newTargetId\"] = ep.elementId;\n\n                fireMoveEvent(evtParams);\n\n                if (!doNotRepaint)\n                    c.repaint();\n            }\n\n            evtParams.element = el;\n            return evtParams;\n\n        }.bind(this);\n\n        this.setSource = function (connection, el, doNotRepaint) {\n            var p = _set(connection, el, 0, doNotRepaint);\n            this.anchorManager.sourceChanged(p.originalSourceId, p.newSourceId, connection, p.el);\n        };\n        this.setTarget = function (connection, el, doNotRepaint) {\n            var p = _set(connection, el, 1, doNotRepaint);\n            this.anchorManager.updateOtherEndpoint(p.originalSourceId, p.originalTargetId, p.newTargetId, connection);\n        };\n\n        this.deleteEndpoint = function (object, dontUpdateHover, deleteAttachedObjects) {\n            var endpoint = (typeof object === \"string\") ? endpointsByUUID[object] : object;\n            if (endpoint) {\n                _currentInstance.deleteObject({ endpoint: endpoint, dontUpdateHover: dontUpdateHover, deleteAttachedObjects:deleteAttachedObjects });\n            }\n            return _currentInstance;\n        };\n\n        this.deleteEveryEndpoint = function () {\n            var _is = _currentInstance.setSuspendDrawing(true);\n            for (var id in endpointsByElement) {\n                var endpoints = endpointsByElement[id];\n                if (endpoints && endpoints.length) {\n                    for (var i = 0, j = endpoints.length; i < j; i++) {\n                        _currentInstance.deleteEndpoint(endpoints[i], true);\n                    }\n                }\n            }\n            endpointsByElement = {};\n            // SP new\n            managedElements = {};\n            endpointsByUUID = {};\n            offsets = {};\n            offsetTimestamps = {};\n            _currentInstance.anchorManager.reset();\n            _currentInstance.getDragManager().reset();\n            if (!_is) _currentInstance.setSuspendDrawing(false);\n            return _currentInstance;\n        };\n\n        var fireDetachEvent = function (jpc, doFireEvent, originalEvent) {\n            // may have been given a connection, or in special cases, an object\n            var connType = _currentInstance.Defaults.ConnectionType || _currentInstance.getDefaultConnectionType(),\n                argIsConnection = jpc.constructor == connType,\n                params = argIsConnection ? {\n                    connection: jpc,\n                    source: jpc.source, target: jpc.target,\n                    sourceId: jpc.sourceId, targetId: jpc.targetId,\n                    sourceEndpoint: jpc.endpoints[0], targetEndpoint: jpc.endpoints[1]\n                } : jpc;\n\n            if (doFireEvent) {\n                _currentInstance.fire(\"connectionDetached\", params, originalEvent);\n            }\n\n            // always fire this. used by internal jsplumb stuff.\n            _currentInstance.fire(\"internal.connectionDetached\", params, originalEvent);\n\n            _currentInstance.anchorManager.connectionDetached(params);\n        };\n\n        var fireMoveEvent = _currentInstance.fireMoveEvent = function (params, evt) {\n            _currentInstance.fire(\"connectionMoved\", params, evt);\n        };\n\n        this.unregisterEndpoint = function (endpoint) {\n            //if (endpoint._jsPlumb == null) return;\n            if (endpoint._jsPlumb.uuid) endpointsByUUID[endpoint._jsPlumb.uuid] = null;\n            _currentInstance.anchorManager.deleteEndpoint(endpoint);\n            // TODO at least replace this with a removeWithFunction call.\n            for (var e in endpointsByElement) {\n                var endpoints = endpointsByElement[e];\n                if (endpoints) {\n                    var newEndpoints = [];\n                    for (var i = 0, j = endpoints.length; i < j; i++)\n                        if (endpoints[i] != endpoint) newEndpoints.push(endpoints[i]);\n\n                    endpointsByElement[e] = newEndpoints;\n                }\n                if (endpointsByElement[e].length < 1) {\n                    delete endpointsByElement[e];\n                }\n            }\n        };\n\n        this.detach = function () {\n\n            if (arguments.length === 0) return;\n            var connType = _currentInstance.Defaults.ConnectionType || _currentInstance.getDefaultConnectionType(),\n                firstArgIsConnection = arguments[0].constructor == connType,\n                params = arguments.length == 2 ? firstArgIsConnection ? (arguments[1] || {}) : arguments[0] : arguments[0],\n                fireEvent = (params.fireEvent !== false),\n                forceDetach = params.forceDetach,\n                conn = firstArgIsConnection ? arguments[0] : params.connection,\n                deleteAttachedObjects = firstArgIsConnection ? null : params.deleteAttachedObjects;\n\n            if (conn) {\n                if (forceDetach || _ju.functionChain(true, false, [\n                    [ conn.endpoints[0], \"isDetachAllowed\", [ conn ] ],\n                    [ conn.endpoints[1], \"isDetachAllowed\", [ conn ] ],\n                    [ conn, \"isDetachAllowed\", [ conn ] ],\n                    [ _currentInstance, \"checkCondition\", [ \"beforeDetach\", conn ] ]\n                ])) {\n\n                    conn.endpoints[0].detach({\n                        connection:conn,\n                        ignoreTarget:false,\n                        forceDetach:true,\n                        fireEvent:fireEvent,\n                        deleteAttachedObjects:deleteAttachedObjects\n                    });\n                }\n            }\n            else {\n                var _p = jsPlumb.extend({}, params); // a backwards compatibility hack: source should be thought of as 'params' in this case.\n                // test for endpoint uuids to detach\n                if (_p.uuids) {\n                    _getEndpoint(_p.uuids[0]).detachFrom(_getEndpoint(_p.uuids[1]), fireEvent);\n                } else if (_p.sourceEndpoint && _p.targetEndpoint) {\n                    _p.sourceEndpoint.detachFrom(_p.targetEndpoint);\n                } else {\n                    var sourceId = _getId(_currentInstance.getElement(_p.source)),\n                        targetId = _getId(_currentInstance.getElement(_p.target));\n                    _operation(sourceId, function (jpc) {\n                        if ((jpc.sourceId == sourceId && jpc.targetId == targetId) || (jpc.targetId == sourceId && jpc.sourceId == targetId)) {\n                            if (_currentInstance.checkCondition(\"beforeDetach\", jpc)) {\n                                jpc.endpoints[0].detach({\n                                    connection:jpc,\n                                    ignoreTarget:false,\n                                    forceDetach:true,\n                                    fireEvent:fireEvent\n                                });\n                            }\n                        }\n                    });\n                }\n            }\n        };\n\n        this.detachAllConnections = function (el, params) {\n            params = params || {};\n            el = _currentInstance.getElement(el);\n            var id = _getId(el),\n                endpoints = endpointsByElement[id];\n            if (endpoints && endpoints.length) {\n                for (var i = 0, j = endpoints.length; i < j; i++) {\n                    endpoints[i].detachAll(params.fireEvent !== false, params.forceDetach);\n                }\n            }\n            return _currentInstance;\n        };\n\n        this.detachEveryConnection = function (params) {\n            params = params || {};\n            _currentInstance.batch(function () {\n                for (var id in endpointsByElement) {\n                    var endpoints = endpointsByElement[id];\n                    if (endpoints && endpoints.length) {\n                        for (var i = 0, j = endpoints.length; i < j; i++) {\n                            endpoints[i].detachAll(params.fireEvent !== false, params.forceDetach);\n                        }\n                    }\n                }\n                connections.length = 0;\n            });\n            return _currentInstance;\n        };\n\n        /// not public.  but of course its exposed. how to change this.\n        this.deleteObject = function (params) {\n            var result = {\n                    endpoints: {},\n                    connections: {},\n                    endpointCount: 0,\n                    connectionCount: 0\n                },\n                fireEvent = params.fireEvent !== false,\n                deleteAttachedObjects = params.deleteAttachedObjects !== false;\n\n            var unravelConnection = function (connection) {\n                if (connection != null && result.connections[connection.id] == null) {\n                    if (!params.dontUpdateHover && connection._jsPlumb != null) connection.setHover(false);\n                    result.connections[connection.id] = connection;\n                    result.connectionCount++;\n                    if (deleteAttachedObjects) {\n                        for (var j = 0; j < connection.endpoints.length; j++) {\n                            if (connection.endpoints[j]._deleteOnDetach)\n                                unravelEndpoint(connection.endpoints[j]);\n                        }\n                    }\n                }\n            };\n            var unravelEndpoint = function (endpoint) {\n                if (endpoint != null && result.endpoints[endpoint.id] == null) {\n                    if (!params.dontUpdateHover && endpoint._jsPlumb != null) endpoint.setHover(false);\n                    result.endpoints[endpoint.id] = endpoint;\n                    result.endpointCount++;\n\n                    if (deleteAttachedObjects) {\n                        for (var i = 0; i < endpoint.connections.length; i++) {\n                            var c = endpoint.connections[i];\n                            unravelConnection(c);\n                        }\n                    }\n                }\n            };\n\n            if (params.connection)\n                unravelConnection(params.connection);\n            else unravelEndpoint(params.endpoint);\n\n            // loop through connections\n            for (var i in result.connections) {\n                var c = result.connections[i];\n                if (c._jsPlumb) {\n                    _ju.removeWithFunction(connections, function (_c) {\n                        return c.id == _c.id;\n                    });\n\n                    fireDetachEvent(c, params.fireEvent === false ? false : !c.pending, params.originalEvent);\n                    var doNotCleanup = params.deleteAttachedObjects == null ? null : !params.deleteAttachedObjects;\n\n                    c.endpoints[0].detachFromConnection(c, null, doNotCleanup);\n                    c.endpoints[1].detachFromConnection(c, null, doNotCleanup);\n\n                    c.cleanup(true);\n                    c.destroy(true);\n                }\n            }\n\n            // loop through endpoints\n            for (var j in result.endpoints) {\n                var e = result.endpoints[j];\n                if (e._jsPlumb) {\n                    _currentInstance.unregisterEndpoint(e);\n                    // FIRE some endpoint deleted event?\n                    e.cleanup(true);\n                    e.destroy(true);\n                }\n            }\n\n            return result;\n        };\n\n        this.draggable = function (el, options) {\n            var info;\n            _each(function(_el) {\n                 info = _info(_el);\n                if (info.el) _initDraggableIfNecessary(info.el, true, options, info.id, true);\n            }, el);\n            return _currentInstance;\n        };\n\n        this.droppable = function(el, options) {\n            var info;\n            options = options || {};\n            options.allowLoopback = false;\n            _each(function(_el) {\n                info = _info(_el);\n                if (info.el) _currentInstance.initDroppable(info.el, options);\n            }, el);\n            return _currentInstance;\n        };\n\n        // helpers for select/selectEndpoints\n        var _setOperation = function (list, func, args, selector) {\n                for (var i = 0, j = list.length; i < j; i++) {\n                    list[i][func].apply(list[i], args);\n                }\n                return selector(list);\n            },\n            _getOperation = function (list, func, args) {\n                var out = [];\n                for (var i = 0, j = list.length; i < j; i++) {\n                    out.push([ list[i][func].apply(list[i], args), list[i] ]);\n                }\n                return out;\n            },\n            setter = function (list, func, selector) {\n                return function () {\n                    return _setOperation(list, func, arguments, selector);\n                };\n            },\n            getter = function (list, func) {\n                return function () {\n                    return _getOperation(list, func, arguments);\n                };\n            },\n            prepareList = function (input, doNotGetIds) {\n                var r = [];\n                if (input) {\n                    if (typeof input == 'string') {\n                        if (input === \"*\") return input;\n                        r.push(input);\n                    }\n                    else {\n                        if (doNotGetIds) r = input;\n                        else {\n                            if (input.length) {\n                                for (var i = 0, j = input.length; i < j; i++)\n                                    r.push(_info(input[i]).id);\n                            }\n                            else\n                                r.push(_info(input).id);\n                        }\n                    }\n                }\n                return r;\n            },\n            filterList = function (list, value, missingIsFalse) {\n                if (list === \"*\") return true;\n                return list.length > 0 ? list.indexOf(value) != -1 : !missingIsFalse;\n            };\n\n        // get some connections, specifying source/target/scope\n        this.getConnections = function (options, flat) {\n            if (!options) {\n                options = {};\n            } else if (options.constructor == String) {\n                options = { \"scope\": options };\n            }\n            var scope = options.scope || _currentInstance.getDefaultScope(),\n                scopes = prepareList(scope, true),\n                sources = prepareList(options.source),\n                targets = prepareList(options.target),\n                results = (!flat && scopes.length > 1) ? {} : [],\n                _addOne = function (scope, obj) {\n                    if (!flat && scopes.length > 1) {\n                        var ss = results[scope];\n                        if (ss == null) {\n                            ss = results[scope] = [];\n                        }\n                        ss.push(obj);\n                    } else results.push(obj);\n                };\n\n            for (var j = 0, jj = connections.length; j < jj; j++) {\n                var c = connections[j],\n                    sourceId = c.proxies && c.proxies[0] ? c.proxies[0].originalEp.elementId : c.sourceId,\n                    targetId = c.proxies && c.proxies[1] ? c.proxies[1].originalEp.elementId : c.targetId;\n\n                if (filterList(scopes, c.scope) && filterList(sources, sourceId) && filterList(targets, targetId))\n                    _addOne(c.scope, c);\n            }\n\n            return results;\n        };\n\n        var _curryEach = function (list, executor) {\n                return function (f) {\n                    for (var i = 0, ii = list.length; i < ii; i++) {\n                        f(list[i]);\n                    }\n                    return executor(list);\n                };\n            },\n            _curryGet = function (list) {\n                return function (idx) {\n                    return list[idx];\n                };\n            };\n\n        var _makeCommonSelectHandler = function (list, executor) {\n            var out = {\n                    length: list.length,\n                    each: _curryEach(list, executor),\n                    get: _curryGet(list)\n                },\n                setters = [\"setHover\", \"removeAllOverlays\", \"setLabel\", \"addClass\", \"addOverlay\", \"removeOverlay\",\n                    \"removeOverlays\", \"showOverlay\", \"hideOverlay\", \"showOverlays\", \"hideOverlays\", \"setPaintStyle\",\n                    \"setHoverPaintStyle\", \"setSuspendEvents\", \"setParameter\", \"setParameters\", \"setVisible\",\n                    \"repaint\", \"addType\", \"toggleType\", \"removeType\", \"removeClass\", \"setType\", \"bind\", \"unbind\" ],\n\n                getters = [\"getLabel\", \"getOverlay\", \"isHover\", \"getParameter\", \"getParameters\", \"getPaintStyle\",\n                    \"getHoverPaintStyle\", \"isVisible\", \"hasType\", \"getType\", \"isSuspendEvents\" ],\n                i, ii;\n\n            for (i = 0, ii = setters.length; i < ii; i++)\n                out[setters[i]] = setter(list, setters[i], executor);\n\n            for (i = 0, ii = getters.length; i < ii; i++)\n                out[getters[i]] = getter(list, getters[i]);\n\n            return out;\n        };\n\n        var _makeConnectionSelectHandler = function (list) {\n            var common = _makeCommonSelectHandler(list, _makeConnectionSelectHandler);\n            return jsPlumb.extend(common, {\n                // setters\n                setDetachable: setter(list, \"setDetachable\", _makeConnectionSelectHandler),\n                setReattach: setter(list, \"setReattach\", _makeConnectionSelectHandler),\n                setConnector: setter(list, \"setConnector\", _makeConnectionSelectHandler),\n                detach: function () {\n                    for (var i = 0, ii = list.length; i < ii; i++)\n                        _currentInstance.detach(list[i]);\n                },\n                // getters\n                isDetachable: getter(list, \"isDetachable\"),\n                isReattach: getter(list, \"isReattach\")\n            });\n        };\n\n        var _makeEndpointSelectHandler = function (list) {\n            var common = _makeCommonSelectHandler(list, _makeEndpointSelectHandler);\n            return jsPlumb.extend(common, {\n                setEnabled: setter(list, \"setEnabled\", _makeEndpointSelectHandler),\n                setAnchor: setter(list, \"setAnchor\", _makeEndpointSelectHandler),\n                isEnabled: getter(list, \"isEnabled\"),\n                detachAll: function () {\n                    for (var i = 0, ii = list.length; i < ii; i++)\n                        list[i].detachAll();\n                },\n                \"remove\": function () {\n                    for (var i = 0, ii = list.length; i < ii; i++)\n                        _currentInstance.deleteObject({endpoint: list[i]});\n                }\n            });\n        };\n\n        this.select = function (params) {\n            params = params || {};\n            params.scope = params.scope || \"*\";\n            return _makeConnectionSelectHandler(params.connections || _currentInstance.getConnections(params, true));\n        };\n\n        this.selectEndpoints = function (params) {\n            params = params || {};\n            params.scope = params.scope || \"*\";\n            var noElementFilters = !params.element && !params.source && !params.target,\n                elements = noElementFilters ? \"*\" : prepareList(params.element),\n                sources = noElementFilters ? \"*\" : prepareList(params.source),\n                targets = noElementFilters ? \"*\" : prepareList(params.target),\n                scopes = prepareList(params.scope, true);\n\n            var ep = [];\n\n            for (var el in endpointsByElement) {\n                var either = filterList(elements, el, true),\n                    source = filterList(sources, el, true),\n                    sourceMatchExact = sources != \"*\",\n                    target = filterList(targets, el, true),\n                    targetMatchExact = targets != \"*\";\n\n                // if they requested 'either' then just match scope. otherwise if they requested 'source' (not as a wildcard) then we have to match only endpoints that have isSource set to to true, and the same thing with isTarget.\n                if (either || source || target) {\n                    inner:\n                        for (var i = 0, ii = endpointsByElement[el].length; i < ii; i++) {\n                            var _ep = endpointsByElement[el][i];\n                            if (filterList(scopes, _ep.scope, true)) {\n\n                                var noMatchSource = (sourceMatchExact && sources.length > 0 && !_ep.isSource),\n                                    noMatchTarget = (targetMatchExact && targets.length > 0 && !_ep.isTarget);\n\n                                if (noMatchSource || noMatchTarget)\n                                    continue inner;\n\n                                ep.push(_ep);\n                            }\n                        }\n                }\n            }\n\n            return _makeEndpointSelectHandler(ep);\n        };\n\n        // get all connections managed by the instance of jsplumb.\n        this.getAllConnections = function () {\n            return connections;\n        };\n        this.getDefaultScope = function () {\n            return DEFAULT_SCOPE;\n        };\n        // get an endpoint by uuid.\n        this.getEndpoint = _getEndpoint;\n        // get endpoints for some element.\n        this.getEndpoints = function (el) {\n            return endpointsByElement[_info(el).id];\n        };\n        // gets the default endpoint type. used when subclassing. see wiki.\n        this.getDefaultEndpointType = function () {\n            return jsPlumb.Endpoint;\n        };\n        // gets the default connection type. used when subclassing.  see wiki.\n        this.getDefaultConnectionType = function () {\n            return jsPlumb.Connection;\n        };\n        /*\n         * Gets an element's id, creating one if necessary. really only exposed\n         * for the lib-specific functionality to access; would be better to pass\n         * the current instance into the lib-specific code (even though this is\n         * a static call. i just don't want to expose it to the public API).\n         */\n        this.getId = _getId;\n\n        this.appendElement = _appendElement;\n\n        var _hoverSuspended = false;\n        this.isHoverSuspended = function () {\n            return _hoverSuspended;\n        };\n        this.setHoverSuspended = function (s) {\n            _hoverSuspended = s;\n        };\n\n        // set an element's connections to be hidden\n        this.hide = function (el, changeEndpoints) {\n            _setVisible(el, \"none\", changeEndpoints);\n            return _currentInstance;\n        };\n\n        // exposed for other objects to use to get a unique id.\n        this.idstamp = _idstamp;\n\n        this.connectorsInitialized = false;\n        this.registerConnectorType = function (connector, name) {\n            connectorTypes.push([connector, name]);\n        };\n\n        // ensure that, if the current container exists, it is a DOM element and not a selector.\n        // if it does not exist and `candidate` is supplied, the offset parent of that element will be set as the Container.\n        // this is used to do a better default behaviour for the case that the user has not set a container:\n        // addEndpoint, makeSource, makeTarget and connect all call this method with the offsetParent of the\n        // element in question (for connect it is the source element). So if no container is set, it is inferred\n        // to be the offsetParent of the first element the user tries to connect.\n        var _ensureContainer = function (candidate) {\n            if (!_container && candidate) {\n                var can = _currentInstance.getElement(candidate);\n                if (can.offsetParent) _currentInstance.setContainer(can.offsetParent);\n            }\n        };\n\n        var _getContainerFromDefaults = function () {\n            if (_currentInstance.Defaults.Container)\n                _currentInstance.setContainer(_currentInstance.Defaults.Container);\n        };\n\n        // check if a given element is managed or not. if not, add to our map. if drawing is not suspended then\n        // we'll also stash its dimensions; otherwise we'll do this in a lazy way through updateOffset.\n        var _manage = _currentInstance.manage = function (id, element, _transient) {\n            if (!managedElements[id]) {\n                managedElements[id] = {\n                    el: element,\n                    endpoints: [],\n                    connections: []\n                };\n\n                managedElements[id].info = _updateOffset({ elId: id, timestamp: _suspendedAt });\n                if (!_transient) {\n                    _currentInstance.fire(\"manageElement\", { id:id, info:managedElements[id].info, el:element });\n                }\n            }\n\n            return managedElements[id];\n        };\n\n        var _unmanage = function(id) {\n            if (managedElements[id]) {\n                delete managedElements[id];\n                _currentInstance.fire(\"unmanageElement\", id);\n            }\n        };\n\n        /**\n         * updates the offset and size for a given element, and stores the\n         * values. if 'offset' is not null we use that (it would have been\n         * passed in from a drag call) because it's faster; but if it is null,\n         * or if 'recalc' is true in order to force a recalculation, we get the current values.\n         */\n        var _updateOffset = this.updateOffset = function (params) {\n\n            var timestamp = params.timestamp, recalc = params.recalc, offset = params.offset, elId = params.elId, s;\n            if (_suspendDrawing && !timestamp) timestamp = _suspendedAt;\n            if (!recalc) {\n                if (timestamp && timestamp === offsetTimestamps[elId]) {\n                    return {o: params.offset || offsets[elId], s: sizes[elId]};\n                }\n            }\n            if (recalc || (!offset && offsets[elId] == null)) { // if forced repaint or no offset available, we recalculate.\n\n                // get the current size and offset, and store them\n                s = managedElements[elId] ? managedElements[elId].el : null;\n                if (s != null) {\n                    sizes[elId] = _currentInstance.getSize(s);\n                    offsets[elId] = _currentInstance.getOffset(s);\n                    offsetTimestamps[elId] = timestamp;\n                }\n            } else {\n                offsets[elId] = offset || offsets[elId];\n                if (sizes[elId] == null) {\n                    s = managedElements[elId].el;\n                    if (s != null) sizes[elId] = _currentInstance.getSize(s);\n                }\n                offsetTimestamps[elId] = timestamp;\n            }\n\n            if (offsets[elId] && !offsets[elId].right) {\n                offsets[elId].right = offsets[elId].left + sizes[elId][0];\n                offsets[elId].bottom = offsets[elId].top + sizes[elId][1];\n                offsets[elId].width = sizes[elId][0];\n                offsets[elId].height = sizes[elId][1];\n                offsets[elId].centerx = offsets[elId].left + (offsets[elId].width / 2);\n                offsets[elId].centery = offsets[elId].top + (offsets[elId].height / 2);\n            }\n\n            return {o: offsets[elId], s: sizes[elId]};\n        };\n\n        /**\n         * callback from the current library to tell us to prepare ourselves (attach\n         * mouse listeners etc; can't do that until the library has provided a bind method)\n         */\n        this.init = function () {\n            rendererTypes = root.jsPlumb.getRenderModes();\n\n            var _oneType = function (renderer, name, fn) {\n                root.jsPlumb.Connectors[renderer][name] = function () {\n                    fn.apply(this, arguments);\n                    root.jsPlumb.ConnectorRenderers[renderer].apply(this, arguments);\n                };\n                _ju.extend(root.jsPlumb.Connectors[renderer][name], [ fn, root.jsPlumb.ConnectorRenderers[renderer]]);\n            };\n\n            if (!root.jsPlumb.connectorsInitialized) {\n                for (var i = 0; i < connectorTypes.length; i++) {\n                    for (var j = 0; j < rendererTypes.length; j++) {\n                        _oneType(rendererTypes[j], connectorTypes[i][1], connectorTypes[i][0]);\n                    }\n\n                }\n                root.jsPlumb.connectorsInitialized = true;\n            }\n\n            if (!initialized) {\n                _getContainerFromDefaults();\n                _currentInstance.anchorManager = new root.jsPlumb.AnchorManager({jsPlumbInstance: _currentInstance});\n                initialized = true;\n                _currentInstance.fire(\"ready\", _currentInstance);\n            }\n        }.bind(this);\n\n        this.log = log;\n        this.jsPlumbUIComponent = jsPlumbUIComponent;\n\n        /*\n         * Creates an anchor with the given params.\n         *\n         *\n         * Returns: The newly created Anchor.\n         * Throws: an error if a named anchor was not found.\n         */\n        this.makeAnchor = function () {\n            var pp, _a = function (t, p) {\n                if (root.jsPlumb.Anchors[t]) return new root.jsPlumb.Anchors[t](p);\n                if (!_currentInstance.Defaults.DoNotThrowErrors)\n                    throw { msg: \"jsPlumb: unknown anchor type '\" + t + \"'\" };\n            };\n            if (arguments.length === 0) return null;\n            var specimen = arguments[0], elementId = arguments[1], jsPlumbInstance = arguments[2], newAnchor = null;\n            // if it appears to be an anchor already...\n            if (specimen.compute && specimen.getOrientation) return specimen;  //TODO hazy here about whether it should be added or is already added somehow.\n            // is it the name of an anchor type?\n            else if (typeof specimen == \"string\") {\n                newAnchor = _a(arguments[0], {elementId: elementId, jsPlumbInstance: _currentInstance});\n            }\n            // is it an array? it will be one of:\n            // \t\tan array of [spec, params] - this defines a single anchor, which may be dynamic, but has parameters.\n            //\t\tan array of arrays - this defines some dynamic anchors\n            //\t\tan array of numbers - this defines a single anchor.\n            else if (_ju.isArray(specimen)) {\n                if (_ju.isArray(specimen[0]) || _ju.isString(specimen[0])) {\n                    // if [spec, params] format\n                    if (specimen.length == 2 && _ju.isObject(specimen[1])) {\n                        // if first arg is a string, its a named anchor with params\n                        if (_ju.isString(specimen[0])) {\n                            pp = root.jsPlumb.extend({elementId: elementId, jsPlumbInstance: _currentInstance}, specimen[1]);\n                            newAnchor = _a(specimen[0], pp);\n                        }\n                        // otherwise first arg is array, second is params. we treat as a dynamic anchor, which is fine\n                        // even if the first arg has only one entry. you could argue all anchors should be implicitly dynamic in fact.\n                        else {\n                            pp = root.jsPlumb.extend({elementId: elementId, jsPlumbInstance: _currentInstance, anchors: specimen[0]}, specimen[1]);\n                            newAnchor = new root.jsPlumb.DynamicAnchor(pp);\n                        }\n                    }\n                    else\n                        newAnchor = new jsPlumb.DynamicAnchor({anchors: specimen, selector: null, elementId: elementId, jsPlumbInstance: _currentInstance});\n\n                }\n                else {\n                    var anchorParams = {\n                        x: specimen[0], y: specimen[1],\n                        orientation: (specimen.length >= 4) ? [ specimen[2], specimen[3] ] : [0, 0],\n                        offsets: (specimen.length >= 6) ? [ specimen[4], specimen[5] ] : [ 0, 0 ],\n                        elementId: elementId,\n                        jsPlumbInstance: _currentInstance,\n                        cssClass: specimen.length == 7 ? specimen[6] : null\n                    };\n                    newAnchor = new root.jsPlumb.Anchor(anchorParams);\n                    newAnchor.clone = function () {\n                        return new root.jsPlumb.Anchor(anchorParams);\n                    };\n                }\n            }\n\n            if (!newAnchor.id) newAnchor.id = \"anchor_\" + _idstamp();\n            return newAnchor;\n        };\n\n        /**\n         * makes a list of anchors from the given list of types or coords, eg\n         * [\"TopCenter\", \"RightMiddle\", \"BottomCenter\", [0, 1, -1, -1] ]\n         */\n        this.makeAnchors = function (types, elementId, jsPlumbInstance) {\n            var r = [];\n            for (var i = 0, ii = types.length; i < ii; i++) {\n                if (typeof types[i] == \"string\")\n                    r.push(root.jsPlumb.Anchors[types[i]]({elementId: elementId, jsPlumbInstance: jsPlumbInstance}));\n                else if (_ju.isArray(types[i]))\n                    r.push(_currentInstance.makeAnchor(types[i], elementId, jsPlumbInstance));\n            }\n            return r;\n        };\n\n        /**\n         * Makes a dynamic anchor from the given list of anchors (which may be in shorthand notation as strings or dimension arrays, or Anchor\n         * objects themselves) and the given, optional, anchorSelector function (jsPlumb uses a default if this is not provided; most people will\n         * not need to provide this - i think).\n         */\n        this.makeDynamicAnchor = function (anchors, anchorSelector) {\n            return new root.jsPlumb.DynamicAnchor({anchors: anchors, selector: anchorSelector, elementId: null, jsPlumbInstance: _currentInstance});\n        };\n\n// --------------------- makeSource/makeTarget ---------------------------------------------- \n\n        this.targetEndpointDefinitions = {};\n        var _setEndpointPaintStylesAndAnchor = function (ep, epIndex, _instance) {\n           /* ep.paintStyle = ep.paintStyle ||\n                _instance.Defaults.EndpointStyles[epIndex] ||\n                _instance.Defaults.EndpointStyle;\n\n            ep.hoverPaintStyle = ep.hoverPaintStyle ||\n                _instance.Defaults.EndpointHoverStyles[epIndex] ||\n                _instance.Defaults.EndpointHoverStyle;\n\n            ep.anchor = ep.anchor ||\n                _instance.Defaults.Anchors[epIndex] ||\n                _instance.Defaults.Anchor;\n\n            ep.endpoint = ep.endpoint ||\n                _instance.Defaults.Endpoints[epIndex] ||\n                _instance.Defaults.Endpoint;*/\n        };\n\n        // TODO put all the source stuff inside one parent, keyed by id.\n        this.sourceEndpointDefinitions = {};\n\n        var selectorFilter = function (evt, _el, selector, _instance, negate) {\n            var t = evt.target || evt.srcElement, ok = false,\n                sel = _instance.getSelector(_el, selector);\n            for (var j = 0; j < sel.length; j++) {\n                if (sel[j] == t) {\n                    ok = true;\n                    break;\n                }\n            }\n            return negate ? !ok : ok;\n        };\n\n        // SP target source refactor\n        var _makeElementDropHandler = function (elInfo, p, dropOptions, isSource, isTarget) {\n            var proxyComponent = new jsPlumbUIComponent(p);\n            var _drop = p._jsPlumb.EndpointDropHandler({\n                jsPlumb: _currentInstance,\n                enabled: function () {\n                    return elInfo.def.enabled;\n                },\n                isFull: function () {\n                    var targetCount = _currentInstance.select({target: elInfo.id}).length;\n                    return elInfo.def.maxConnections > 0 && targetCount >= elInfo.def.maxConnections;\n                },\n                element: elInfo.el,\n                elementId: elInfo.id,\n                isSource: isSource,\n                isTarget: isTarget,\n                addClass: function (clazz) {\n                    _currentInstance.addClass(elInfo.el, clazz);\n                },\n                removeClass: function (clazz) {\n                    _currentInstance.removeClass(elInfo.el, clazz);\n                },\n                onDrop: function (jpc) {\n                    var source = jpc.endpoints[0];\n                    source.anchor.locked = false;\n                },\n                isDropAllowed: function () {\n                    return proxyComponent.isDropAllowed.apply(proxyComponent, arguments);\n                },\n                isRedrop:function(jpc) {\n                    return (jpc.suspendedElement != null && jpc.suspendedEndpoint != null && jpc.suspendedEndpoint.element === elInfo.el);\n                },\n                getEndpoint: function (jpc) {\n\n                    // make a new Endpoint for the target, or get it from the cache if uniqueEndpoint\n                    // is set. if its a redrop the new endpoint will be immediately cleaned up.\n\n                    var newEndpoint = elInfo.def.endpoint;\n\n                    // if no cached endpoint, or there was one but it has been cleaned up\n                    // (ie. detached), create a new one\n                    if (newEndpoint == null || newEndpoint._jsPlumb == null) {\n                        var eps = _currentInstance.deriveEndpointAndAnchorSpec(jpc.getType().join(\" \"), true);\n                        var pp = eps.endpoints ? root.jsPlumb.extend(p, {\n                            endpoint:elInfo.def.def.endpoint || eps.endpoints[1]\n                        }) :p;\n                        if (eps.anchors) {\n                            pp = root.jsPlumb.extend(pp, {\n                                anchor:elInfo.def.def.anchor || eps.anchors[1]\n                            });\n                        }\n                        newEndpoint = _currentInstance.addEndpoint(elInfo.el, pp);\n                        newEndpoint._mtNew = true;\n                    }\n\n                    if (p.uniqueEndpoint) elInfo.def.endpoint = newEndpoint;  // may of course just store what it just pulled out. that's ok.\n                    // TODO test options to makeTarget to see if we should do this?\n                    newEndpoint._doNotDeleteOnDetach = false; // reset.\n                    newEndpoint._deleteOnDetach = true;\n\n                    // if connection is detachable, init the new endpoint to be draggable, to support that happening.\n                    if (jpc.isDetachable())\n                        newEndpoint.initDraggable();\n\n                    // if the anchor has a 'positionFinder' set, then delegate to that function to find\n                    // out where to locate the anchor.\n                    if (newEndpoint.anchor.positionFinder != null) {\n                        var dropPosition = _currentInstance.getUIPosition(arguments, _currentInstance.getZoom()),\n                            elPosition = _currentInstance.getOffset(elInfo.el),\n                            elSize = _currentInstance.getSize(elInfo.el),\n                            ap = dropPosition == null ? [0,0] : newEndpoint.anchor.positionFinder(dropPosition, elPosition, elSize, newEndpoint.anchor.constructorParams);\n\n                        newEndpoint.anchor.x = ap[0];\n                        newEndpoint.anchor.y = ap[1];\n                        // now figure an orientation for it..kind of hard to know what to do actually. probably the best thing i can do is to\n                        // support specifying an orientation in the anchor's spec. if one is not supplied then i will make the orientation\n                        // be what will cause the most natural link to the source: it will be pointing at the source, but it needs to be\n                        // specified in one axis only, and so how to make that choice? i think i will use whichever axis is the one in which\n                        // the target is furthest away from the source.\n                    }\n\n                    return newEndpoint;\n                },\n                maybeCleanup: function (ep) {\n                    if (ep._mtNew && ep.connections.length === 0) {\n                        _currentInstance.deleteObject({endpoint: ep});\n                    }\n                    else\n                        delete ep._mtNew;\n                }\n            });\n\n            // wrap drop events as needed and initialise droppable\n            var dropEvent = root.jsPlumb.dragEvents.drop;\n            dropOptions.scope = dropOptions.scope || (p.scope || _currentInstance.Defaults.Scope);\n            dropOptions[dropEvent] = _ju.wrap(dropOptions[dropEvent], _drop, true);\n\n            // if target, return true from the over event. this will cause katavorio to stop setting drops to hover\n            // if multipleDrop is set to false.\n            if (isTarget) {\n                dropOptions[root.jsPlumb.dragEvents.over] = function () { return true; };\n            }\n\n            // vanilla jsplumb only\n            if (p.allowLoopback === false) {\n                dropOptions.canDrop = function (_drag) {\n                    var de = _drag.getDragElement()._jsPlumbRelatedElement;\n                    return de != elInfo.el;\n                };\n            }\n            _currentInstance.initDroppable(elInfo.el, dropOptions, \"internal\");\n\n            return _drop;\n\n        };\n\n        // see API docs\n        this.makeTarget = function (el, params, referenceParams) {\n\n            // put jsplumb ref into params without altering the params passed in\n            var p = root.jsPlumb.extend({_jsPlumb: this}, referenceParams);\n            root.jsPlumb.extend(p, params);\n\n            // calculate appropriate paint styles and anchor from the params given\n            _setEndpointPaintStylesAndAnchor(p, 1, this);\n\n            var maxConnections = p.maxConnections || -1,\n\n                _doOne = function (el) {\n\n                    // get the element's id and store the endpoint definition for it.  jsPlumb.connect calls will look for one of these,\n                    // and use the endpoint definition if found.\n                    // decode the info for this element (id and element)\n                    var elInfo = _info(el),\n                        elid = elInfo.id,\n                        dropOptions = root.jsPlumb.extend({}, p.dropOptions || {}),\n                        type = p.connectionType || \"default\";\n\n                    this.targetEndpointDefinitions[elid] = this.targetEndpointDefinitions[elid] || {};\n\n                    _ensureContainer(elid);\n\n                    // if this is a group and the user has not mandated a rank, set to -1 so that Nodes takes\n                    // precedence.\n                    if (elInfo.el._isJsPlumbGroup && dropOptions.rank == null) {\n                        dropOptions.rank = -1;\n                    }\n\n                    // store the definition\n                    var _def = {\n                        def: root.jsPlumb.extend({}, p),\n                        uniqueEndpoint: p.uniqueEndpoint,\n                        maxConnections: maxConnections,\n                        enabled: true\n                    };\n                    elInfo.def = _def;\n                    this.targetEndpointDefinitions[elid][type] = _def;\n                    _makeElementDropHandler(elInfo, p, dropOptions, p.isSource === true, true);\n                    // stash the definition on the drop\n                    elInfo.el._katavorioDrop[elInfo.el._katavorioDrop.length - 1].targetDef = _def;\n\n                }.bind(this);\n\n            // make an array if only given one element\n            var inputs = el.length && el.constructor != String ? el : [ el ];\n\n            // register each one in the list.\n            for (var i = 0, ii = inputs.length; i < ii; i++) {\n                _doOne(inputs[i]);\n            }\n\n            return this;\n        };\n\n        // see api docs\n        this.unmakeTarget = function (el, doNotClearArrays) {\n            var info = _info(el);\n            _currentInstance.destroyDroppable(info.el, \"internal\");\n            if (!doNotClearArrays) {\n                delete this.targetEndpointDefinitions[info.id];\n            }\n\n            return this;\n        };\n\n        // see api docs\n        this.makeSource = function (el, params, referenceParams) {\n            var p = root.jsPlumb.extend({_jsPlumb: this}, referenceParams);\n            root.jsPlumb.extend(p, params);\n            var type = p.connectionType || \"default\";\n            var aae = _currentInstance.deriveEndpointAndAnchorSpec(type);\n            p.endpoint = p.endpoint || aae.endpoints[0];\n            p.anchor = p.anchor || aae.anchors[0];\n            _setEndpointPaintStylesAndAnchor(p, 0, this);\n            var maxConnections = p.maxConnections || -1,\n                onMaxConnections = p.onMaxConnections,\n                _doOne = function (elInfo) {\n                    // get the element's id and store the endpoint definition for it.  jsPlumb.connect calls will look for one of these,\n                    // and use the endpoint definition if found.\n                    var elid = elInfo.id,\n                        _del = this.getElement(elInfo.el);\n\n                    this.sourceEndpointDefinitions[elid] = this.sourceEndpointDefinitions[elid] || {};\n                    _ensureContainer(elid);\n\n                    var _def = {\n                        def:root.jsPlumb.extend({}, p),\n                        uniqueEndpoint: p.uniqueEndpoint,\n                        maxConnections: maxConnections,\n                        enabled: true\n                    };\n\n\n                    this.sourceEndpointDefinitions[elid][type] = _def;\n                    elInfo.def = _def;\n\n                    var stopEvent = root.jsPlumb.dragEvents.stop,\n                        dragEvent = root.jsPlumb.dragEvents.drag,\n                        dragOptions = root.jsPlumb.extend({ }, p.dragOptions || {}),\n                        existingDrag = dragOptions.drag,\n                        existingStop = dragOptions.stop,\n                        ep = null,\n                        endpointAddedButNoDragYet = false;\n\n                    // set scope if its not set in dragOptions but was passed in in params\n                    dragOptions.scope = dragOptions.scope || p.scope;\n\n                    dragOptions[dragEvent] = _ju.wrap(dragOptions[dragEvent], function () {\n                        if (existingDrag) existingDrag.apply(this, arguments);\n                        endpointAddedButNoDragYet = false;\n                    });\n\n                    dragOptions[stopEvent] = _ju.wrap(dragOptions[stopEvent], function () {\n\n                        if (existingStop) existingStop.apply(this, arguments);\n                        this.currentlyDragging = false;\n                        if (ep._jsPlumb != null) { // if not cleaned up...\n\n                            // reset the anchor to the anchor that was initially provided. the one we were using to drag\n                            // the connection was just a placeholder that was located at the place the user pressed the\n                            // mouse button to initiate the drag.\n                            var anchorDef = p.anchor || this.Defaults.Anchor,\n                                oldAnchor = ep.anchor,\n                                oldConnection = ep.connections[0];\n\n                            var    newAnchor = this.makeAnchor(anchorDef, elid, this),\n                                _el = ep.element;\n\n                            // if the anchor has a 'positionFinder' set, then delegate to that function to find\n                            // out where to locate the anchor. issue 117.\n                            if (newAnchor.positionFinder != null) {\n                                var elPosition = _currentInstance.getOffset(_el),\n                                    elSize = this.getSize(_el),\n                                    dropPosition = { left: elPosition.left + (oldAnchor.x * elSize[0]), top: elPosition.top + (oldAnchor.y * elSize[1]) },\n                                    ap = newAnchor.positionFinder(dropPosition, elPosition, elSize, newAnchor.constructorParams);\n\n                                newAnchor.x = ap[0];\n                                newAnchor.y = ap[1];\n                            }\n\n                            ep.setAnchor(newAnchor, true);\n                            ep.repaint();\n                            this.repaint(ep.elementId);\n                            if (oldConnection != null) this.repaint(oldConnection.targetId);\n                        }\n                    }.bind(this));\n\n                    // when the user presses the mouse, add an Endpoint, if we are enabled.\n                    var mouseDownListener = function (e) {\n                        // on right mouse button, abort.\n                        if (e.which === 3 || e.button === 2) return;\n\n                        // TODO store def on element.\n                        var def = this.sourceEndpointDefinitions[elid][type];\n\n                        // if disabled, return.\n                        if (!def.enabled) return;\n\n                        elid = this.getId(this.getElement(elInfo.el)); // elid might have changed since this method was called to configure the element.\n\n                        // if a filter was given, run it, and return if it says no.\n                        if (p.filter) {\n                            var r = _ju.isString(p.filter) ? selectorFilter(e, elInfo.el, p.filter, this, p.filterExclude) : p.filter(e, elInfo.el);\n                            if (r === false) return;\n                        }\n\n                        // if maxConnections reached\n                        var sourceCount = this.select({source: elid}).length;\n                        if (def.maxConnections >= 0 && (sourceCount >= def.maxConnections)) {\n                            if (onMaxConnections) {\n                                onMaxConnections({\n                                    element: elInfo.el,\n                                    maxConnections: maxConnections\n                                }, e);\n                            }\n                            return false;\n                        }\n\n                        // find the position on the element at which the mouse was pressed; this is where the endpoint\n                        // will be located.\n                        var elxy = root.jsPlumb.getPositionOnElement(e, _del, _zoom);\n\n                        // we need to override the anchor in here, and force 'isSource', but we don't want to mess with\n                        // the params passed in, because after a connection is established we're going to reset the endpoint\n                        // to have the anchor we were given.\n                        var tempEndpointParams = {};\n                        root.jsPlumb.extend(tempEndpointParams, p);\n                        tempEndpointParams.isTemporarySource = true;\n                        tempEndpointParams.anchor = [ elxy[0], elxy[1] , 0, 0];\n                        tempEndpointParams.dragOptions = dragOptions;\n\n                        if (def.def.scope) tempEndpointParams.scope = def.def.scope;\n\n                        ep = this.addEndpoint(elid, tempEndpointParams);\n                        endpointAddedButNoDragYet = true;\n                        ep._doNotDeleteOnDetach = false; // reset.\n                        ep._deleteOnDetach = true;\n\n                        // if unique endpoint and it's already been created, push it onto the endpoint we create. at the end\n                        // of a successful connection we'll switch to that endpoint.\n                        // TODO this is the same code as the programmatic endpoints create on line 1050 ish\n                        if (def.uniqueEndpoint) {\n                            if (!def.endpoint) {\n                                def.endpoint = ep;\n                                ep._deleteOnDetach = false;\n                                ep._doNotDeleteOnDetach = true;\n                            }\n                            else\n                                ep.finalEndpoint = def.endpoint;\n                        }\n\n                        var _delTempEndpoint = function () {\n                            // this mouseup event is fired only if no dragging occurred, by jquery and yui, but for mootools\n                            // it is fired even if dragging has occurred, in which case we would blow away a perfectly\n                            // legitimate endpoint, were it not for this check.  the flag is set after adding an\n                            // endpoint and cleared in a drag listener we set in the dragOptions above.\n                            _currentInstance.off(ep.canvas, \"mouseup\", _delTempEndpoint);\n                            _currentInstance.off(elInfo.el, \"mouseup\", _delTempEndpoint);\n                            if (endpointAddedButNoDragYet) {\n                                endpointAddedButNoDragYet = false;\n                                _currentInstance.deleteEndpoint(ep);\n                            }\n                        };\n\n                        _currentInstance.on(ep.canvas, \"mouseup\", _delTempEndpoint);\n                        _currentInstance.on(elInfo.el, \"mouseup\", _delTempEndpoint);\n\n                        // optionally check for attributes to extract from the source element\n                        var payload = {};\n                        if (def.def.extract) {\n                            for (var att in def.def.extract) {\n                                var v = (e.srcElement || e.target).getAttribute(att);\n                                if (v) {\n                                    payload[def.def.extract[att]] = v;\n                                }\n                            }\n                        }\n\n                        // and then trigger its mousedown event, which will kick off a drag, which will start dragging\n                        // a new connection from this endpoint.\n                        _currentInstance.trigger(ep.canvas, \"mousedown\", e, payload);\n\n                        _ju.consume(e);\n\n                    }.bind(this);\n\n                    this.on(elInfo.el, \"mousedown\", mouseDownListener);\n                    _def.trigger = mouseDownListener;\n\n                    // if a filter was provided, set it as a dragFilter on the element,\n                    // to prevent the element drag function from kicking in when we want to\n                    // drag a new connection\n                    if (p.filter && (_ju.isString(p.filter) || _ju.isFunction(p.filter))) {\n                        _currentInstance.setDragFilter(elInfo.el, p.filter);\n                    }\n\n                    var dropOptions = root.jsPlumb.extend({}, p.dropOptions || {});\n\n                    _makeElementDropHandler(elInfo, p, dropOptions, true, p.isTarget === true);\n\n                }.bind(this);\n\n            var inputs = el.length && el.constructor != String ? el : [ el ];\n            for (var i = 0, ii = inputs.length; i < ii; i++) {\n                _doOne(_info(inputs[i]));\n            }\n\n            return this;\n        };\n\n        // see api docs\n        this.unmakeSource = function (el, connectionType, doNotClearArrays) {\n            var info = _info(el);\n            _currentInstance.destroyDroppable(info.el, \"internal\");\n            var eldefs = this.sourceEndpointDefinitions[info.id];\n            if (eldefs) {\n                for (var def in eldefs) {\n                    if (connectionType == null || connectionType === def) {\n                        var mouseDownListener = eldefs[def].trigger;\n                        if (mouseDownListener)\n                            _currentInstance.off(info.el, \"mousedown\", mouseDownListener);\n                        if (!doNotClearArrays) {\n                            delete this.sourceEndpointDefinitions[info.id][def];\n                        }\n                    }\n                }\n            }\n\n            return this;\n        };\n\n        // see api docs\n        this.unmakeEverySource = function () {\n            for (var i in this.sourceEndpointDefinitions)\n                _currentInstance.unmakeSource(i, null, true);\n\n            this.sourceEndpointDefinitions = {};\n            return this;\n        };\n\n        var _getScope = function (el, types, connectionType) {\n            types = _ju.isArray(types) ? types : [ types ];\n            var id = _getId(el);\n            connectionType = connectionType || \"default\";\n            for (var i = 0; i < types.length; i++) {\n                var eldefs = this[types[i]][id];\n                if (eldefs && eldefs[connectionType]) return eldefs[connectionType].def.scope || this.Defaults.Scope;\n            }\n        }.bind(this);\n\n        var _setScope = function (el, scope, types, connectionType) {\n            types = _ju.isArray(types) ? types : [ types ];\n            var id = _getId(el);\n            connectionType = connectionType || \"default\";\n            for (var i = 0; i < types.length; i++) {\n                var eldefs = this[types[i]][id];\n                if (eldefs && eldefs[connectionType]) {\n                    eldefs[connectionType].def.scope = scope;\n                }\n            }\n\n        }.bind(this);\n\n        this.getScope = function (el, scope) {\n            return _getScope(el, [ \"sourceEndpointDefinitions\", \"targetEndpointDefinitions\" ]);\n        };\n        this.getSourceScope = function (el) {\n            return _getScope(el, \"sourceEndpointDefinitions\");\n        };\n        this.getTargetScope = function (el) {\n            return _getScope(el, \"targetEndpointDefinitions\");\n        };\n        this.setScope = function (el, scope, connectionType) {\n            this.setSourceScope(el, scope, connectionType);\n            this.setTargetScope(el, scope, connectionType);\n        };\n        this.setSourceScope = function (el, scope, connectionType) {\n            _setScope(el, scope, \"sourceEndpointDefinitions\", connectionType);\n            // we get the source scope during the mousedown event, but we also want to set this.\n            this.setDragScope(el, scope);\n        };\n        this.setTargetScope = function (el, scope, connectionType) {\n            _setScope(el, scope, \"targetEndpointDefinitions\", connectionType);\n            this.setDropScope(el, scope);\n        };\n\n        // see api docs\n        this.unmakeEveryTarget = function () {\n            for (var i in this.targetEndpointDefinitions)\n                _currentInstance.unmakeTarget(i, true);\n\n            this.targetEndpointDefinitions = {};\n            return this;\n        };\n\n        // does the work of setting a source enabled or disabled.\n        var _setEnabled = function (type, el, state, toggle, connectionType) {\n            var a = type == \"source\" ? this.sourceEndpointDefinitions : this.targetEndpointDefinitions,\n                originalState, info, newState;\n\n            connectionType = connectionType || \"default\";\n\n            // a selector or an array\n            if (el.length && !_ju.isString(el)) {\n                originalState = [];\n                for (var i = 0, ii = el.length; i < ii; i++) {\n                    info = _info(el[i]);\n                    if (a[info.id] && a[info.id][connectionType]) {\n                        originalState[i] = a[info.id][connectionType].enabled;\n                        newState = toggle ? !originalState[i] : state;\n                        a[info.id][connectionType].enabled = newState;\n                        _currentInstance[newState ? \"removeClass\" : \"addClass\"](info.el, \"jtk-\" + type + \"-disabled\");\n                    }\n                }\n            }\n            // otherwise a DOM element or a String ID.\n            else {\n                info = _info(el);\n                var id = info.id;\n                if (a[id] && a[id][connectionType]) {\n                    originalState = a[id][connectionType].enabled;\n                    newState = toggle ? !originalState : state;\n                    a[id][connectionType].enabled = newState;\n                    _currentInstance[newState ? \"removeClass\" : \"addClass\"](info.el, \"jtk-\" + type + \"-disabled\");\n                }\n            }\n            return originalState;\n        }.bind(this);\n\n        var _first = function (el, fn) {\n            if (_ju.isString(el) || !el.length)\n                return fn.apply(this, [ el ]);\n            else if (el.length)\n                return fn.apply(this, [ el[0] ]);\n\n        }.bind(this);\n\n        this.toggleSourceEnabled = function (el, connectionType) {\n            _setEnabled(\"source\", el, null, true, connectionType);\n            return this.isSourceEnabled(el, connectionType);\n        };\n\n        this.setSourceEnabled = function (el, state, connectionType) {\n            return _setEnabled(\"source\", el, state, null, connectionType);\n        };\n        this.isSource = function (el, connectionType) {\n            connectionType = connectionType || \"default\";\n            return _first(el, function (_el) {\n                var eldefs = this.sourceEndpointDefinitions[_info(_el).id];\n                return eldefs != null && eldefs[connectionType] != null;\n            }.bind(this));\n        };\n        this.isSourceEnabled = function (el, connectionType) {\n            connectionType = connectionType || \"default\";\n            return _first(el, function (_el) {\n                var sep = this.sourceEndpointDefinitions[_info(_el).id];\n                return sep && sep[connectionType] && sep[connectionType].enabled === true;\n            }.bind(this));\n        };\n\n        this.toggleTargetEnabled = function (el, connectionType) {\n            _setEnabled(\"target\", el, null, true, connectionType);\n            return this.isTargetEnabled(el, connectionType);\n        };\n\n        this.isTarget = function (el, connectionType) {\n            connectionType = connectionType || \"default\";\n            return _first(el, function (_el) {\n                var eldefs = this.targetEndpointDefinitions[_info(_el).id];\n                return eldefs != null && eldefs[connectionType] != null;\n            }.bind(this));\n        };\n        this.isTargetEnabled = function (el, connectionType) {\n            connectionType = connectionType || \"default\";\n            return _first(el, function (_el) {\n                var tep = this.targetEndpointDefinitions[_info(_el).id];\n                return tep && tep[connectionType] && tep[connectionType].enabled === true;\n            }.bind(this));\n        };\n        this.setTargetEnabled = function (el, state, connectionType) {\n            return _setEnabled(\"target\", el, state, null, connectionType);\n        };\n\n// --------------------- end makeSource/makeTarget ---------------------------------------------- \t\t\t\t\n\n        this.ready = function (fn) {\n            _currentInstance.bind(\"ready\", fn);\n        };\n\n        var _elEach = function(el, fn) {\n            // support both lists...\n            if (typeof el == 'object' && el.length)\n                for (var i = 0, ii = el.length; i < ii; i++) {\n                    fn(el[i]);\n                }\n            else // ...and single strings or elements.\n                fn(el);\n\n            return _currentInstance;\n        };\n\n        // repaint some element's endpoints and connections\n        this.repaint = function (el, ui, timestamp) {\n            return _elEach(el, function(_el) {\n                _draw(_el, ui, timestamp);\n            });\n        };\n\n        this.revalidate = function (el, timestamp, isIdAlready) {\n            return _elEach(el, function(_el) {\n                var elId = isIdAlready ? _el : _currentInstance.getId(_el);\n                _currentInstance.updateOffset({ elId: elId, recalc: true, timestamp:timestamp });\n                _currentInstance.repaint(_el);\n            });\n        };\n\n        // repaint every endpoint and connection.\n        this.repaintEverything = function () {\n            // TODO this timestamp causes continuous anchors to not repaint properly.\n            // fix this. do not just take out the timestamp. it runs a lot faster with\n            // the timestamp included.\n            var timestamp = _timestamp(), elId;\n\n            for (elId in endpointsByElement) {\n                _currentInstance.updateOffset({ elId: elId, recalc: true, timestamp: timestamp });\n            }\n\n            for (elId in endpointsByElement) {\n                _draw(elId, null, timestamp);\n            }\n\n            return this;\n        };\n\n        this.removeAllEndpoints = function (el, recurse, affectedElements) {\n            affectedElements = affectedElements || [];\n            var _one = function (_el) {\n                var info = _info(_el),\n                    ebe = endpointsByElement[info.id],\n                    i, ii;\n\n                if (ebe) {\n                    affectedElements.push(info);\n                    for (i = 0, ii = ebe.length; i < ii; i++)\n                        _currentInstance.deleteEndpoint(ebe[i], false);\n                }\n                delete endpointsByElement[info.id];\n\n                if (recurse) {\n                    if (info.el && info.el.nodeType != 3 && info.el.nodeType != 8) {\n                        for (i = 0, ii = info.el.childNodes.length; i < ii; i++) {\n                            _one(info.el.childNodes[i]);\n                        }\n                    }\n                }\n\n            };\n            _one(el);\n            return this;\n        };\n\n        var _doRemove = function(info, affectedElements) {\n            _currentInstance.removeAllEndpoints(info.id, true, affectedElements);\n            var _one = function(_info) {\n                _currentInstance.getDragManager().elementRemoved(_info.id);\n                _currentInstance.anchorManager.clearFor(_info.id);\n                _currentInstance.anchorManager.removeFloatingConnection(_info.id);\n\n                if (_currentInstance.isSource(_info.el)) _currentInstance.unmakeSource(_info.el);\n                if (_currentInstance.isTarget(_info.el)) _currentInstance.unmakeTarget(_info.el);\n                _currentInstance.destroyDraggable(_info.el);\n                _currentInstance.destroyDroppable(_info.el);\n\n\n                delete _currentInstance.floatingConnections[_info.id];\n                delete managedElements[_info.id];\n                delete offsets[_info.id];\n                if (_info.el) {\n                    _currentInstance.removeElement(_info.el);\n                    _info.el._jsPlumb = null;\n                }\n            };\n\n            // remove all affected child elements\n            for (var ae = 1; ae < affectedElements.length; ae++) {\n                _one(affectedElements[ae]);\n            }\n            // and always remove the requested one from the dom.\n            _one(info);\n        };\n\n        /**\n         * Remove the given element, including cleaning up all endpoints registered for it.\n         * This is exposed in the public API but also used internally by jsPlumb when removing the\n         * element associated with a connection drag.\n         */\n        this.remove = function (el, doNotRepaint) {\n            var info = _info(el), affectedElements = [];\n            if (info.text) {\n                info.el.parentNode.removeChild(info.el);\n            }\n            else if (info.id) {\n                _currentInstance.batch(function () {\n                    _doRemove(info, affectedElements);\n                }, doNotRepaint === false);\n            }\n            return _currentInstance;\n        };\n\n        this.empty = function (el, doNotRepaint) {\n            var affectedElements = [];\n            var _one = function(el, dontRemoveFocus) {\n                var info = _info(el);\n                if (info.text) {\n                    info.el.parentNode.removeChild(info.el);\n                }\n                else if (info.el) {\n                    while(info.el.childNodes.length > 0) {\n                        _one(info.el.childNodes[0]);\n                    }\n                    if (!dontRemoveFocus) _doRemove(info, affectedElements);\n                }\n            };\n\n            _currentInstance.batch(function() {\n                _one(el, true);\n            }, doNotRepaint === false);\n\n            return _currentInstance;\n        };\n\n        this.reset = function () {\n            _currentInstance.silently(function() {\n                _hoverSuspended = false;\n                _currentInstance.removeAllGroups();\n                _currentInstance.removeGroupManager();\n                _currentInstance.deleteEveryEndpoint();\n                _currentInstance.unbind();\n                this.targetEndpointDefinitions = {};\n                this.sourceEndpointDefinitions = {};\n                connections.length = 0;\n                if (this.doReset) this.doReset();\n            }.bind(this));\n        };\n\n        var _clearObject = function (obj) {\n            if (obj.canvas && obj.canvas.parentNode)\n                obj.canvas.parentNode.removeChild(obj.canvas);\n            obj.cleanup();\n            obj.destroy();\n        };\n\n        this.clear = function () {\n            _currentInstance.select().each(_clearObject);\n            _currentInstance.selectEndpoints().each(_clearObject);\n\n            endpointsByElement = {};\n            endpointsByUUID = {};\n        };\n\n        this.setDefaultScope = function (scope) {\n            DEFAULT_SCOPE = scope;\n            return _currentInstance;\n        };\n\n        // sets whether or not some element should be currently draggable.\n        this.setDraggable = _setDraggable;\n\n        this.deriveEndpointAndAnchorSpec = function(type, dontPrependDefault) {\n            var bits = ((dontPrependDefault ? \"\" : \"default \") + type).split(/[\\s]/), eps = null, ep = null, a = null, as = null;\n            for (var i = 0; i < bits.length; i++) {\n                var _t = _currentInstance.getType(bits[i], \"connection\");\n                if (_t) {\n                    if (_t.endpoints) eps = _t.endpoints;\n                    if (_t.endpoint) ep = _t.endpoint;\n                    if (_t.anchors) as = _t.anchors;\n                    if (_t.anchor) a = _t.anchor;\n                }\n            }\n            return { endpoints: eps ? eps : [ ep, ep ], anchors: as ? as : [a, a ]};\n        };\n\n        // sets the id of some element, changing whatever we need to to keep track.\n        this.setId = function (el, newId, doNotSetAttribute) {\n            //\n            var id;\n\n            if (_ju.isString(el)) {\n                id = el;\n            }\n            else {\n                el = this.getElement(el);\n                id = this.getId(el);\n            }\n\n            var sConns = this.getConnections({source: id, scope: '*'}, true),\n                tConns = this.getConnections({target: id, scope: '*'}, true);\n\n            newId = \"\" + newId;\n\n            if (!doNotSetAttribute) {\n                el = this.getElement(id);\n                this.setAttribute(el, \"id\", newId);\n            }\n            else\n                el = this.getElement(newId);\n\n            endpointsByElement[newId] = endpointsByElement[id] || [];\n            for (var i = 0, ii = endpointsByElement[newId].length; i < ii; i++) {\n                endpointsByElement[newId][i].setElementId(newId);\n                endpointsByElement[newId][i].setReferenceElement(el);\n            }\n            delete endpointsByElement[id];\n\n            this.sourceEndpointDefinitions[newId] = this.sourceEndpointDefinitions[id];\n            delete this.sourceEndpointDefinitions[id];\n            this.targetEndpointDefinitions[newId] = this.targetEndpointDefinitions[id];\n            delete this.targetEndpointDefinitions[id];\n\n            this.anchorManager.changeId(id, newId);\n            this.getDragManager().changeId(id, newId);\n            managedElements[newId] = managedElements[id];\n            delete managedElements[id];\n\n            var _conns = function (list, epIdx, type) {\n                for (var i = 0, ii = list.length; i < ii; i++) {\n                    list[i].endpoints[epIdx].setElementId(newId);\n                    list[i].endpoints[epIdx].setReferenceElement(el);\n                    list[i][type + \"Id\"] = newId;\n                    list[i][type] = el;\n                }\n            };\n            _conns(sConns, 0, \"source\");\n            _conns(tConns, 1, \"target\");\n\n            this.repaint(newId);\n        };\n\n        this.setDebugLog = function (debugLog) {\n            log = debugLog;\n        };\n\n        this.setSuspendDrawing = function (val, repaintAfterwards) {\n            var curVal = _suspendDrawing;\n            _suspendDrawing = val;\n            if (val) _suspendedAt = new Date().getTime(); else _suspendedAt = null;\n            if (repaintAfterwards) this.repaintEverything();\n            return curVal;\n        };\n\n        // returns whether or not drawing is currently suspended.\n        this.isSuspendDrawing = function () {\n            return _suspendDrawing;\n        };\n\n        // return timestamp for when drawing was suspended.\n        this.getSuspendedAt = function () {\n            return _suspendedAt;\n        };\n\n        this.batch = function (fn, doNotRepaintAfterwards) {\n            var _wasSuspended = this.isSuspendDrawing();\n            if (!_wasSuspended)\n                this.setSuspendDrawing(true);\n            try {\n                fn();\n            }\n            catch (e) {\n                _ju.log(\"Function run while suspended failed\", e);\n            }\n            if (!_wasSuspended)\n                this.setSuspendDrawing(false, !doNotRepaintAfterwards);\n        };\n\n        this.doWhileSuspended = this.batch;\n\n        this.getCachedData = _getCachedData;\n        this.timestamp = _timestamp;\n        this.show = function (el, changeEndpoints) {\n            _setVisible(el, \"block\", changeEndpoints);\n            return _currentInstance;\n        };\n\n        // TODO: update this method to return the current state.\n        this.toggleVisible = _toggleVisible;\n        this.toggleDraggable = _toggleDraggable;\n        this.addListener = this.bind;\n    };\n\n    _ju.extend(root.jsPlumbInstance, _ju.EventGenerator, {\n        setAttribute: function (el, a, v) {\n            this.setAttribute(el, a, v);\n        },\n        getAttribute: function (el, a) {\n            return this.getAttribute(root.jsPlumb.getElement(el), a);\n        },\n        convertToFullOverlaySpec: function(spec) {\n            if (_ju.isString(spec)) {\n                spec = [ spec, { } ];\n            }\n            spec[1].id = spec[1].id || _ju.uuid();\n            return spec;\n        },\n        registerConnectionType: function (id, type) {\n            this._connectionTypes[id] = root.jsPlumb.extend({}, type);\n            if (type.overlays) {\n                var to = {};\n                for (var i = 0; i < type.overlays.length; i++) {\n                    // if a string, convert to object representation so that we can store the typeid on it.\n                    // also assign an id.\n                    var fo = this.convertToFullOverlaySpec(type.overlays[i]);\n                    to[fo[1].id] = fo;\n                }\n                this._connectionTypes[id].overlays = to;\n            }\n        },\n        registerConnectionTypes: function (types) {\n            for (var i in types)\n                this.registerConnectionType(i, types[i]);\n        },\n        registerEndpointType: function (id, type) {\n            this._endpointTypes[id] = root.jsPlumb.extend({}, type);\n            if (type.overlays) {\n                var to = {};\n                for (var i = 0; i < type.overlays.length; i++) {\n                    // if a string, convert to object representation so that we can store the typeid on it.\n                    // also assign an id.\n                    var fo = this.convertToFullOverlaySpec(type.overlays[i]);\n                    to[fo[1].id] = fo;\n                }\n                this._endpointTypes[id].overlays = to;\n            }\n        },\n        registerEndpointTypes: function (types) {\n            for (var i in types)\n                //this._endpointTypes[i] = jsPlumb.extend({}, types[i]);\n                this.registerEndpointType(i, types[i]);\n        },\n        getType: function (id, typeDescriptor) {\n            return typeDescriptor === \"connection\" ? this._connectionTypes[id] : this._endpointTypes[id];\n        },\n        setIdChanged: function (oldId, newId) {\n            this.setId(oldId, newId, true);\n        },\n        // set parent: change the parent for some node and update all the registrations we need to.\n        setParent: function (el, newParent) {\n            var _dom = this.getElement(el),\n                _id = this.getId(_dom),\n                _pdom = this.getElement(newParent),\n                _pid = this.getId(_pdom);\n\n            _dom.parentNode.removeChild(_dom);\n            _pdom.appendChild(_dom);\n            this.getDragManager().setParent(_dom, _id, _pdom, _pid);\n        },\n        extend: function (o1, o2, names) {\n            var i;\n            if (names) {\n                for (i = 0; i < names.length; i++)\n                    o1[names[i]] = o2[names[i]];\n            }\n            else\n                for (i in o2) o1[i] = o2[i];\n            return o1;\n        },\n        floatingConnections: {},\n        getFloatingAnchorIndex: function (jpc) {\n            return jpc.endpoints[0].isFloating() ? 0 : jpc.endpoints[1].isFloating() ? 1 : -1;\n        }\n    });\n\n    jsPlumbInstance.prototype.Defaults = {\n        Anchor: \"Bottom\",\n        Anchors: [ null, null ],\n        ConnectionsDetachable: true,\n        ConnectionOverlays: [ ],\n        Connector: \"Bezier\",\n        Container: null,\n        DoNotThrowErrors: false,\n        DragOptions: { },\n        DropOptions: { },\n        Endpoint: \"Dot\",\n        EndpointOverlays: [ ],\n        Endpoints: [ null, null ],\n        EndpointStyle: { fill: \"#456\" },\n        EndpointStyles: [ null, null ],\n        EndpointHoverStyle: null,\n        EndpointHoverStyles: [ null, null ],\n        HoverPaintStyle: null,\n        LabelStyle: { color: \"black\" },\n        LogEnabled: false,\n        Overlays: [ ],\n        MaxConnections: 1,\n        PaintStyle: { \"stroke-width\": 4, stroke: \"#456\" },\n        ReattachConnections: false,\n        RenderMode: \"svg\",\n        Scope: \"jsPlumb_DefaultScope\"\n    };\n\n// --------------------- static instance + module registration -------------------------------------------\n\n// create static instance and assign to window if window exists.\t\n    var jsPlumb = new jsPlumbInstance();\n    // register on 'root' (lets us run on server or browser)\n    root.jsPlumb = jsPlumb;\n    // add 'getInstance' method to static instance\n    jsPlumb.getInstance = function (_defaults, overrideFns) {\n        var j = new jsPlumbInstance(_defaults);\n        if (overrideFns) {\n            for (var ovf in overrideFns) {\n                j[ovf] = overrideFns[ovf];\n            }\n        }\n        j.init();\n        return j;\n    };\n    jsPlumb.each = function (spec, fn) {\n        if (spec == null) return;\n        if (typeof spec === \"string\")\n            fn(jsPlumb.getElement(spec));\n        else if (spec.length != null) {\n            for (var i = 0; i < spec.length; i++)\n                fn(jsPlumb.getElement(spec[i]));\n        }\n        else\n            fn(spec); // assume it's an element.\n    };\n\n    // CommonJS\n    if (typeof exports !== 'undefined') {\n        exports.jsPlumb = jsPlumb;\n    }\n\n// --------------------- end static instance + AMD registration -------------------------------------------\t\t\n\n}).call(typeof window !== 'undefined' ? window : this);\n\n/*\n * jsPlumb\n *\n * Title:jsPlumb 2.3.0\n *\n * Provides a way to visually connect elements on an HTML page, using SVG.\n *\n * This file contains the base functionality for DOM type adapters.\n *\n * Copyright (c) 2010 - 2017 jsPlumb (hello@jsplumbtoolkit.com)\n *\n * http://jsplumbtoolkit.com\n * http://github.com/sporritt/jsplumb\n *\n * Dual licensed under the MIT and GPL2 licenses.\n */\n;\n(function () {\n\n    var root = this, _ju = root.jsPlumbUtil;\n\n    var _genLoc = function (prefix, e) {\n            if (e == null) return [ 0, 0 ];\n            var ts = _touches(e), t = _getTouch(ts, 0);\n            return [t[prefix + \"X\"], t[prefix + \"Y\"]];\n        },\n        _pageLocation = _genLoc.bind(this, \"page\"),\n        _screenLocation = _genLoc.bind(this, \"screen\"),\n        _clientLocation = _genLoc.bind(this, \"client\"),\n        _getTouch = function (touches, idx) {\n            return touches.item ? touches.item(idx) : touches[idx];\n        },\n        _touches = function (e) {\n            return e.touches && e.touches.length > 0 ? e.touches :\n                    e.changedTouches && e.changedTouches.length > 0 ? e.changedTouches :\n                    e.targetTouches && e.targetTouches.length > 0 ? e.targetTouches :\n                [ e ];\n        };\n\n    /**\n     Manages dragging for some instance of jsPlumb.\n\n     TODO instead of this being accessed directly, it should subscribe to events on the jsPlumb instance: every method\n     in here is called directly by jsPlumb. But what should happen is that we have unpublished events that this listens\n     to.  The only trick is getting one of these instantiated with every jsPlumb instance: it needs to have a hook somehow.\n     Basically the general idea is to pull ALL the drag code out (prototype method registrations plus this) into a\n     dedicated drag script), that does not necessarily need to be included.\n\n\n     */\n    var DragManager = function (_currentInstance) {\n        var _draggables = {}, _dlist = [], _delements = {}, _elementsWithEndpoints = {},\n        // elementids mapped to the draggable to which they belong.\n            _draggablesForElements = {};\n\n        /**\n         register some element as draggable.  right now the drag init stuff is done elsewhere, and it is\n         possible that will continue to be the case.\n         */\n        this.register = function (el) {\n            var id = _currentInstance.getId(el),\n                parentOffset = _currentInstance.getOffset(el);\n\n            if (!_draggables[id]) {\n                _draggables[id] = el;\n                _dlist.push(el);\n                _delements[id] = {};\n            }\n\n            // look for child elements that have endpoints and register them against this draggable.\n            var _oneLevel = function (p) {\n                if (p) {\n                    for (var i = 0; i < p.childNodes.length; i++) {\n                        if (p.childNodes[i].nodeType != 3 && p.childNodes[i].nodeType != 8) {\n                            var cEl = jsPlumb.getElement(p.childNodes[i]),\n                                cid = _currentInstance.getId(p.childNodes[i], null, true);\n                            if (cid && _elementsWithEndpoints[cid] && _elementsWithEndpoints[cid] > 0) {\n                                var cOff = _currentInstance.getOffset(cEl);\n                                _delements[id][cid] = {\n                                    id: cid,\n                                    offset: {\n                                        left: cOff.left - parentOffset.left,\n                                        top: cOff.top - parentOffset.top\n                                    }\n                                };\n                                _draggablesForElements[cid] = id;\n                            }\n                            _oneLevel(p.childNodes[i]);\n                        }\n                    }\n                }\n            };\n\n            _oneLevel(el);\n        };\n\n        // refresh the offsets for child elements of this element.\n        this.updateOffsets = function (elId, childOffsetOverrides) {\n            if (elId != null) {\n                childOffsetOverrides = childOffsetOverrides || {};\n                var domEl = jsPlumb.getElement(elId),\n                    id = _currentInstance.getId(domEl),\n                    children = _delements[id],\n                    parentOffset = _currentInstance.getOffset(domEl);\n\n                if (children) {\n                    for (var i in children) {\n                        if (children.hasOwnProperty(i)) {\n                            var cel = jsPlumb.getElement(i),\n                                cOff = childOffsetOverrides[i] || _currentInstance.getOffset(cel);\n\n                            // do not update if we have a value already and we'd just be writing 0,0\n                            if (cel.offsetParent == null && _delements[id][i] != null) continue;\n\n                            _delements[id][i] = {\n                                id: i,\n                                offset: {\n                                    left: cOff.left - parentOffset.left,\n                                    top: cOff.top - parentOffset.top\n                                }\n                            };\n                            _draggablesForElements[i] = id;\n                        }\n                    }\n                }\n            }\n        };\n\n        /**\n         notification that an endpoint was added to the given el.  we go up from that el's parent\n         node, looking for a parent that has been registered as a draggable. if we find one, we add this\n         el to that parent's list of elements to update on drag (if it is not there already)\n         */\n        this.endpointAdded = function (el, id) {\n\n            id = id || _currentInstance.getId(el);\n\n            var b = document.body,\n                p = el.parentNode;\n\n            _elementsWithEndpoints[id] = _elementsWithEndpoints[id] ? _elementsWithEndpoints[id] + 1 : 1;\n\n            while (p != null && p != b) {\n                var pid = _currentInstance.getId(p, null, true);\n                if (pid && _draggables[pid]) {\n                    var pLoc = _currentInstance.getOffset(p);\n\n                    if (_delements[pid][id] == null) {\n                        var cLoc = _currentInstance.getOffset(el);\n                        _delements[pid][id] = {\n                            id: id,\n                            offset: {\n                                left: cLoc.left - pLoc.left,\n                                top: cLoc.top - pLoc.top\n                            }\n                        };\n                        _draggablesForElements[id] = pid;\n                    }\n                    break;\n                }\n                p = p.parentNode;\n            }\n        };\n\n        this.endpointDeleted = function (endpoint) {\n            if (_elementsWithEndpoints[endpoint.elementId]) {\n                _elementsWithEndpoints[endpoint.elementId]--;\n                if (_elementsWithEndpoints[endpoint.elementId] <= 0) {\n                    for (var i in _delements) {\n                        if (_delements.hasOwnProperty(i) && _delements[i]) {\n                            delete _delements[i][endpoint.elementId];\n                            delete _draggablesForElements[endpoint.elementId];\n                        }\n                    }\n                }\n            }\n        };\n\n        this.changeId = function (oldId, newId) {\n            _delements[newId] = _delements[oldId];\n            _delements[oldId] = {};\n            _draggablesForElements[newId] = _draggablesForElements[oldId];\n            _draggablesForElements[oldId] = null;\n        };\n\n        this.getElementsForDraggable = function (id) {\n            return _delements[id];\n        };\n\n        this.elementRemoved = function (elementId) {\n            var elId = _draggablesForElements[elementId];\n            if (elId) {\n                delete _delements[elId][elementId];\n                delete _draggablesForElements[elementId];\n            }\n        };\n\n        this.reset = function () {\n            _draggables = {};\n            _dlist = [];\n            _delements = {};\n            _elementsWithEndpoints = {};\n        };\n\n        //\n        // notification drag ended. We check automatically if need to update some\n        // ancestor's offsets.\n        //\n        this.dragEnded = function (el) {\n            if (el.offsetParent != null) {\n                var id = _currentInstance.getId(el),\n                    ancestor = _draggablesForElements[id];\n\n                if (ancestor) this.updateOffsets(ancestor);\n            }\n        };\n\n        this.setParent = function (el, elId, p, pId, currentChildLocation) {\n            var current = _draggablesForElements[elId];\n            if (!_delements[pId]) {\n                _delements[pId] = {};\n            }\n            var pLoc = _currentInstance.getOffset(p),\n                cLoc = currentChildLocation || _currentInstance.getOffset(el);\n            if (current) {\n                delete _delements[current][elId];\n            }\n\n            _delements[pId][elId] = {\n                id:elId,\n                offset : {\n                    left: cLoc.left - pLoc.left,\n                    top: cLoc.top - pLoc.top\n                }\n            };\n            _draggablesForElements[elId] = pId;\n        };\n\n        this.clearParent = function(el, elId) {\n            var current = _draggablesForElements[elId];\n            if (current) {\n                delete _delements[current][elId];\n                delete _draggablesForElements[elId];\n            }\n        };\n\n        this.revalidateParent = function(el, elId, childOffset) {\n            var current = _draggablesForElements[elId];\n            if (current) {\n                var co = {};\n                co[elId] = childOffset;\n                this.updateOffsets(current, co);\n                _currentInstance.revalidate(current);\n            }\n        };\n\n        this.getDragAncestor = function (el) {\n            var de = jsPlumb.getElement(el),\n                id = _currentInstance.getId(de),\n                aid = _draggablesForElements[id];\n\n            if (aid)\n                return jsPlumb.getElement(aid);\n            else\n                return null;\n        };\n\n    };\n\n    var trim = function (str) {\n            return str == null ? null : (str.replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, ''));\n        },\n        _setClassName = function (el, cn) {\n            cn = trim(cn);\n            if (typeof el.className.baseVal != \"undefined\")  // SVG\n                el.className.baseVal = cn;\n            else\n                el.className = cn;\n        },\n        _getClassName = function (el) {\n            return (typeof el.className.baseVal == \"undefined\") ? el.className : el.className.baseVal;\n        },\n        _classManip = function (el, classesToAdd, classesToRemove) {\n            classesToAdd = classesToAdd == null ? [] : _ju.isArray(classesToAdd) ? classesToAdd : classesToAdd.split(/\\s+/);\n            classesToRemove = classesToRemove == null ? [] : _ju.isArray(classesToRemove) ? classesToRemove : classesToRemove.split(/\\s+/);\n\n            var className = _getClassName(el),\n                curClasses = className.split(/\\s+/);\n\n            var _oneSet = function (add, classes) {\n                for (var i = 0; i < classes.length; i++) {\n                    if (add) {\n                        if (curClasses.indexOf(classes[i]) == -1)\n                            curClasses.push(classes[i]);\n                    }\n                    else {\n                        var idx = curClasses.indexOf(classes[i]);\n                        if (idx != -1)\n                            curClasses.splice(idx, 1);\n                    }\n                }\n            };\n\n            _oneSet(true, classesToAdd);\n            _oneSet(false, classesToRemove);\n\n            _setClassName(el, curClasses.join(\" \"));\n        };\n\n    root.jsPlumb.extend(root.jsPlumbInstance.prototype, {\n\n        headless: false,\n\n        pageLocation: _pageLocation,\n        screenLocation: _screenLocation,\n        clientLocation: _clientLocation,\n\n        getDragManager:function() {\n            if (this.dragManager == null)\n                this.dragManager = new DragManager(this);\n\n            return this.dragManager;\n        },\n\n        recalculateOffsets:function(elId) {\n            this.getDragManager().updateOffsets(elId);\n        },\n\n        createElement:function(tag, style, clazz, atts) {\n            return this.createElementNS(null, tag, style, clazz, atts);\n        },\n\n        createElementNS:function(ns, tag, style, clazz, atts) {\n            var e = ns == null ? document.createElement(tag) : document.createElementNS(ns, tag);\n            var i;\n            style = style || {};\n            for (i in style)\n                e.style[i] = style[i];\n\n            if (clazz)\n                e.className = clazz;\n\n            atts = atts || {};\n            for (i in atts)\n                e.setAttribute(i, \"\" + atts[i]);\n\n            return e;\n        },\n\n        getAttribute: function (el, attName) {\n            return el.getAttribute != null ? el.getAttribute(attName) : null;\n        },\n\n        setAttribute: function (el, a, v) {\n            if (el.setAttribute != null) el.setAttribute(a, v);\n        },\n\n        setAttributes: function (el, atts) {\n            for (var i in atts)\n                if (atts.hasOwnProperty(i)) el.setAttribute(i, atts[i]);\n        },\n        appendToRoot: function (node) {\n            document.body.appendChild(node);\n        },\n        getRenderModes: function () {\n            return [ \"svg\"  ];\n        },\n        getClass:_getClassName,\n        addClass: function (el, clazz) {\n            jsPlumb.each(el, function (e) {\n                _classManip(e, clazz);\n            });\n        },\n        hasClass: function (el, clazz) {\n            el = jsPlumb.getElement(el);\n            if (el.classList) return el.classList.contains(clazz);\n            else {\n                return _getClassName(el).indexOf(clazz) != -1;\n            }\n        },\n        removeClass: function (el, clazz) {\n            jsPlumb.each(el, function (e) {\n                _classManip(e, null, clazz);\n            });\n        },\n        updateClasses: function (el, toAdd, toRemove) {\n            jsPlumb.each(el, function (e) {\n                _classManip(e, toAdd, toRemove);\n            });\n        },\n        setClass: function (el, clazz) {\n            jsPlumb.each(el, function (e) {\n                _setClassName(e, clazz);\n            });\n        },\n        setPosition: function (el, p) {\n            el.style.left = p.left + \"px\";\n            el.style.top = p.top + \"px\";\n        },\n        getPosition: function (el) {\n            var _one = function (prop) {\n                var v = el.style[prop];\n                return v ? v.substring(0, v.length - 2) : 0;\n            };\n            return {\n                left: _one(\"left\"),\n                top: _one(\"top\")\n            };\n        },\n        getStyle:function(el, prop) {\n            if (typeof window.getComputedStyle !== 'undefined') {\n                return getComputedStyle(el, null).getPropertyValue(prop);\n            } else {\n                return el.currentStyle[prop];\n            }\n        },\n        getSelector: function (ctx, spec) {\n            var sel = null;\n            if (arguments.length == 1) {\n                sel = ctx.nodeType != null ? ctx : document.querySelectorAll(ctx);\n            }\n            else\n                sel = ctx.querySelectorAll(spec);\n\n            return sel;\n        },\n        getOffset:function(el, relativeToRoot, container) {\n            el = jsPlumb.getElement(el);\n            container = container || this.getContainer();\n            var out = {\n                    left: el.offsetLeft,\n                    top: el.offsetTop\n                },\n                op = (relativeToRoot  || (container != null && (el != container && el.offsetParent != container))) ?  el.offsetParent : null,\n                _maybeAdjustScroll = function(offsetParent) {\n                    if (offsetParent != null && offsetParent !== document.body && (offsetParent.scrollTop > 0 || offsetParent.scrollLeft > 0)) {\n                        out.left -= offsetParent.scrollLeft;\n                        out.top -= offsetParent.scrollTop;\n                    }\n                }.bind(this);\n\n            while (op != null) {\n                out.left += op.offsetLeft;\n                out.top += op.offsetTop;\n                _maybeAdjustScroll(op);\n                op = relativeToRoot ? op.offsetParent :\n                        op.offsetParent == container ? null : op.offsetParent;\n            }\n\n            // if container is scrolled and the element (or its offset parent) is not absolute or fixed, adjust accordingly.\n            if (container != null && !relativeToRoot && (container.scrollTop > 0 || container.scrollLeft > 0)) {\n                var pp = el.offsetParent != null ? this.getStyle(el.offsetParent, \"position\") : \"static\",\n                    p = this.getStyle(el, \"position\");\n                if (p !== \"absolute\" && p !== \"fixed\" && pp !== \"absolute\" && pp != \"fixed\") {\n                    out.left -= container.scrollLeft;\n                    out.top -= container.scrollTop;\n                }\n            }\n            return out;\n        },\n        //\n        // return x+y proportion of the given element's size corresponding to the location of the given event.\n        //\n        getPositionOnElement: function (evt, el, zoom) {\n            var box = typeof el.getBoundingClientRect !== \"undefined\" ? el.getBoundingClientRect() : { left: 0, top: 0, width: 0, height: 0 },\n                body = document.body,\n                docElem = document.documentElement,\n                scrollTop = window.pageYOffset || docElem.scrollTop || body.scrollTop,\n                scrollLeft = window.pageXOffset || docElem.scrollLeft || body.scrollLeft,\n                clientTop = docElem.clientTop || body.clientTop || 0,\n                clientLeft = docElem.clientLeft || body.clientLeft || 0,\n                pst = 0,\n                psl = 0,\n                top = box.top + scrollTop - clientTop + (pst * zoom),\n                left = box.left + scrollLeft - clientLeft + (psl * zoom),\n                cl = jsPlumb.pageLocation(evt),\n                w = box.width || (el.offsetWidth * zoom),\n                h = box.height || (el.offsetHeight * zoom),\n                x = (cl[0] - left) / w,\n                y = (cl[1] - top) / h;\n\n            return [ x, y ];\n        },\n\n        /**\n         * Gets the absolute position of some element as read from the left/top properties in its style.\n         * @method getAbsolutePosition\n         * @param {Element} el The element to retrieve the absolute coordinates from. **Note** this is a DOM element, not a selector from the underlying library.\n         * @return {Number[]} [left, top] pixel values.\n         */\n        getAbsolutePosition: function (el) {\n            var _one = function (s) {\n                var ss = el.style[s];\n                if (ss) return parseFloat(ss.substring(0, ss.length - 2));\n            };\n            return [ _one(\"left\"), _one(\"top\") ];\n        },\n\n        /**\n         * Sets the absolute position of some element by setting the left/top properties in its style.\n         * @method setAbsolutePosition\n         * @param {Element} el The element to set the absolute coordinates on. **Note** this is a DOM element, not a selector from the underlying library.\n         * @param {Number[]} xy x and y coordinates\n         * @param {Number[]} [animateFrom] Optional previous xy to animate from.\n         * @param {Object} [animateOptions] Options for the animation.\n         */\n        setAbsolutePosition: function (el, xy, animateFrom, animateOptions) {\n            if (animateFrom) {\n                this.animate(el, {\n                    left: \"+=\" + (xy[0] - animateFrom[0]),\n                    top: \"+=\" + (xy[1] - animateFrom[1])\n                }, animateOptions);\n            }\n            else {\n                el.style.left = xy[0] + \"px\";\n                el.style.top = xy[1] + \"px\";\n            }\n        },\n        /**\n         * gets the size for the element, in an array : [ width, height ].\n         */\n        getSize: function (el) {\n            return [ el.offsetWidth, el.offsetHeight ];\n        },\n        getWidth: function (el) {\n            return el.offsetWidth;\n        },\n        getHeight: function (el) {\n            return el.offsetHeight;\n        },\n        getRenderMode : function() { return \"svg\"; }\n\n    });\n}).call(typeof window !== 'undefined' ? window : this);\n\n/*\n * jsPlumb\n *\n * Title:jsPlumb 2.3.0\n *\n * Provides a way to visually connect elements on an HTML page, using SVG.\n *\n * This file contains code for components that support overlays.\n *\n * Copyright (c) 2010 - 2017 jsPlumb (hello@jsplumbtoolkit.com)\n *\n * http://jsplumbtoolkit.com\n * http://github.com/sporritt/jsplumb\n *\n * Dual licensed under the MIT and GPL2 licenses.\n */\n;(function() {\n\n    \"use strict\";\n    var root = this, _jp = root.jsPlumb, _ju = root.jsPlumbUtil;\n\n    // ------------------------------ BEGIN OverlayCapablejsPlumbUIComponent --------------------------------------------\n\n    var _internalLabelOverlayId = \"__label\",\n    // this is a shortcut helper method to let people add a label as\n    // overlay.\n        _makeLabelOverlay = function (component, params) {\n\n            var _params = {\n                    cssClass: params.cssClass,\n                    labelStyle: component.labelStyle,\n                    id: _internalLabelOverlayId,\n                    component: component,\n                    _jsPlumb: component._jsPlumb.instance  // TODO not necessary, since the instance can be accessed through the component.\n                },\n                mergedParams = _jp.extend(_params, params);\n\n            return new _jp.Overlays[component._jsPlumb.instance.getRenderMode()].Label(mergedParams);\n        },\n        _processOverlay = function (component, o) {\n            var _newOverlay = null;\n            if (_ju.isArray(o)) {\t// this is for the shorthand [\"Arrow\", { width:50 }] syntax\n                // there's also a three arg version:\n                // [\"Arrow\", { width:50 }, {location:0.7}]\n                // which merges the 3rd arg into the 2nd.\n                var type = o[0],\n                // make a copy of the object so as not to mess up anyone else's reference...\n                    p = _jp.extend({component: component, _jsPlumb: component._jsPlumb.instance}, o[1]);\n                if (o.length == 3) _jp.extend(p, o[2]);\n                _newOverlay = new _jp.Overlays[component._jsPlumb.instance.getRenderMode()][type](p);\n            } else if (o.constructor == String) {\n                _newOverlay = new _jp.Overlays[component._jsPlumb.instance.getRenderMode()][o]({component: component, _jsPlumb: component._jsPlumb.instance});\n            } else {\n                _newOverlay = o;\n            }\n\n            _newOverlay.id = _newOverlay.id || _ju.uuid();\n            component.cacheTypeItem(\"overlay\", _newOverlay, _newOverlay.id);\n            //component._jsPlumb.overlays.push(_newOverlay);\n            component._jsPlumb.overlays[_newOverlay.id] = _newOverlay;\n\n            return _newOverlay;\n        };\n\n    _jp.OverlayCapableJsPlumbUIComponent = function (params) {\n\n        root.jsPlumbUIComponent.apply(this, arguments);\n        this._jsPlumb.overlays = {};\n        this._jsPlumb.overlayPositions = {};\n\n        if (params.label) {\n            this.getDefaultType().overlays[_internalLabelOverlayId] = [\"Label\", {\n                label: params.label,\n                location: params.labelLocation || this.defaultLabelLocation || 0.5,\n                labelStyle: params.labelStyle || this._jsPlumb.instance.Defaults.LabelStyle,\n                id:_internalLabelOverlayId\n            }];\n        }\n\n        this.setListenerComponent = function (c) {\n            if (this._jsPlumb) {\n                for (var i in this._jsPlumb.overlays)\n                    this._jsPlumb.overlays[i].setListenerComponent(c);\n            }\n        };\n    };\n\n    _jp.OverlayCapableJsPlumbUIComponent.applyType = function (component, t) {\n        if (t.overlays) {\n            // loop through the ones in the type. if already present on the component,\n            // dont remove or re-add.\n            var keep = {}, i;\n\n            for (i in t.overlays) {\n\n                var existing = component._jsPlumb.overlays[t.overlays[i][1].id];\n                if (existing) {\n                    // maybe update from data, if there were parameterised values for instance.\n                    existing.updateFrom(t.overlays[i][1]);\n                    keep[t.overlays[i][1].id] = true;\n                }\n                else {\n                    var c = component.getCachedTypeItem(\"overlay\", t.overlays[i][1].id);\n                    if (c != null) {\n                        c.reattach(component._jsPlumb.instance);\n                        c.setVisible(true);\n                        // maybe update from data, if there were parameterised values for instance.\n                        c.updateFrom(t.overlays[i][1]);\n                        component._jsPlumb.overlays[c.id] = c;\n                    }\n                    else {\n                        c = component.addOverlay(t.overlays[i], true);\n                    }\n                    keep[c.id] = true;\n                }\n            }\n\n            // now loop through the full overlays and remove those that we dont want to keep\n            for (i in component._jsPlumb.overlays) {\n                if (keep[component._jsPlumb.overlays[i].id] == null)\n                    component.removeOverlay(component._jsPlumb.overlays[i].id, true); // remove overlay but dont clean it up.\n                    // that would remove event listeners etc; overlays are never discarded by the types stuff, they are\n                    // just detached/reattached.\n            }\n        }\n    };\n\n    _ju.extend(_jp.OverlayCapableJsPlumbUIComponent, root.jsPlumbUIComponent, {\n\n        setHover: function (hover, ignoreAttachedElements) {\n            if (this._jsPlumb && !this._jsPlumb.instance.isConnectionBeingDragged()) {\n                for (var i in this._jsPlumb.overlays) {\n                    this._jsPlumb.overlays[i][hover ? \"addClass\" : \"removeClass\"](this._jsPlumb.instance.hoverClass);\n                }\n            }\n        },\n        addOverlay: function (overlay, doNotRepaint) {\n            var o = _processOverlay(this, overlay);\n            if (!doNotRepaint) this.repaint();\n            return o;\n        },\n        getOverlay: function (id) {\n            return this._jsPlumb.overlays[id];\n        },\n        getOverlays: function () {\n            return this._jsPlumb.overlays;\n        },\n        hideOverlay: function (id) {\n            var o = this.getOverlay(id);\n            if (o) o.hide();\n        },\n        hideOverlays: function () {\n            for (var i in this._jsPlumb.overlays)\n                this._jsPlumb.overlays[i].hide();\n        },\n        showOverlay: function (id) {\n            var o = this.getOverlay(id);\n            if (o) o.show();\n        },\n        showOverlays: function () {\n            for (var i in this._jsPlumb.overlays)\n                this._jsPlumb.overlays[i].show();\n        },\n        removeAllOverlays: function (doNotRepaint) {\n            for (var i in this._jsPlumb.overlays) {\n                if (this._jsPlumb.overlays[i].cleanup) this._jsPlumb.overlays[i].cleanup();\n            }\n\n            this._jsPlumb.overlays = {};\n            this._jsPlumb.overlayPositions = null;\n            if (!doNotRepaint)\n                this.repaint();\n        },\n        removeOverlay: function (overlayId, dontCleanup) {\n            var o = this._jsPlumb.overlays[overlayId];\n            if (o) {\n                o.setVisible(false);\n                if (!dontCleanup && o.cleanup) o.cleanup();\n                delete this._jsPlumb.overlays[overlayId];\n                if (this._jsPlumb.overlayPositions)\n                    delete this._jsPlumb.overlayPositions[overlayId];\n            }\n        },\n        removeOverlays: function () {\n            for (var i = 0, j = arguments.length; i < j; i++)\n                this.removeOverlay(arguments[i]);\n        },\n        moveParent: function (newParent) {\n            if (this.bgCanvas) {\n                this.bgCanvas.parentNode.removeChild(this.bgCanvas);\n                newParent.appendChild(this.bgCanvas);\n            }\n\n            if (this.canvas && this.canvas.parentNode) {\n                this.canvas.parentNode.removeChild(this.canvas);\n                newParent.appendChild(this.canvas);\n\n                for (var i in this._jsPlumb.overlays) {\n                    if (this._jsPlumb.overlays[i].isAppendedAtTopLevel) {\n                        var el = this._jsPlumb.overlays[i].getElement();\n                        el.parentNode.removeChild(el);\n                        newParent.appendChild(el);\n                    }\n                }\n            }\n        },\n        getLabel: function () {\n            var lo = this.getOverlay(_internalLabelOverlayId);\n            return lo != null ? lo.getLabel() : null;\n        },\n        getLabelOverlay: function () {\n            return this.getOverlay(_internalLabelOverlayId);\n        },\n        setLabel: function (l) {\n            var lo = this.getOverlay(_internalLabelOverlayId);\n            if (!lo) {\n                var params = l.constructor == String || l.constructor == Function ? { label: l } : l;\n                lo = _makeLabelOverlay(this, params);\n                this._jsPlumb.overlays[_internalLabelOverlayId] = lo;\n            }\n            else {\n                if (l.constructor == String || l.constructor == Function) lo.setLabel(l);\n                else {\n                    if (l.label) lo.setLabel(l.label);\n                    if (l.location) lo.setLocation(l.location);\n                }\n            }\n\n            if (!this._jsPlumb.instance.isSuspendDrawing())\n                this.repaint();\n        },\n        cleanup: function (force) {\n            for (var i in this._jsPlumb.overlays) {\n                this._jsPlumb.overlays[i].cleanup(force);\n                this._jsPlumb.overlays[i].destroy(force);\n            }\n            if (force) {\n                this._jsPlumb.overlays = {};\n                this._jsPlumb.overlayPositions = null;\n            }\n        },\n        setVisible: function (v) {\n            this[v ? \"showOverlays\" : \"hideOverlays\"]();\n        },\n        setAbsoluteOverlayPosition: function (overlay, xy) {\n            this._jsPlumb.overlayPositions[overlay.id] = xy;\n        },\n        getAbsoluteOverlayPosition: function (overlay) {\n            return this._jsPlumb.overlayPositions ? this._jsPlumb.overlayPositions[overlay.id] : null;\n        },\n        _clazzManip:function(action, clazz, dontUpdateOverlays) {\n            if (!dontUpdateOverlays) {\n                for (var i in this._jsPlumb.overlays) {\n                    this._jsPlumb.overlays[i][action + \"Class\"](clazz);\n                }\n            }\n        },\n        addClass:function(clazz, dontUpdateOverlays) {\n            this._clazzManip(\"add\", clazz, dontUpdateOverlays)\n        },\n        removeClass:function(clazz, dontUpdateOverlays) {\n            this._clazzManip(\"remove\", clazz, dontUpdateOverlays)\n        }\n    });\n\n// ------------------------------ END OverlayCapablejsPlumbUIComponent --------------------------------------------\n\n}).call(typeof window !== 'undefined' ? window : this);\n\n/*\n * jsPlumb\n * \n * Title:jsPlumb 2.3.0\n * \n * Provides a way to visually connect elements on an HTML page, using SVG.\n * \n * This file contains the code for Endpoints.\n *\n * Copyright (c) 2010 - 2017 jsPlumb (hello@jsplumbtoolkit.com)\n * \n * http://jsplumbtoolkit.com\n * http://github.com/sporritt/jsplumb\n * \n * Dual licensed under the MIT and GPL2 licenses.\n */\n(function () {\n\n    \"use strict\";\n    var root = this, _jp = root.jsPlumb, _ju = root.jsPlumbUtil;\n\n    // create the drag handler for a connection\n    var _makeConnectionDragHandler = function (endpoint, placeholder, _jsPlumb) {\n        var stopped = false;\n        return {\n            drag: function () {\n                if (stopped) {\n                    stopped = false;\n                    return true;\n                }\n\n                if (placeholder.element) {\n                    var _ui = _jsPlumb.getUIPosition(arguments, _jsPlumb.getZoom());\n                    if (_ui != null) jsPlumb.setPosition(placeholder.element, _ui);\n                    _jsPlumb.repaint(placeholder.element, _ui);\n                    // always repaint the source endpoint, because only continuous/dynamic anchors cause the endpoint\n                    // to be repainted, so static anchors need to be told (or the endpoint gets dragged around)\n                    endpoint.paint({anchorPoint:endpoint.anchor.getCurrentLocation({element:endpoint})});\n                }\n            },\n            stopDrag: function () {\n                stopped = true;\n            }\n        };\n    };\n\n    // creates a placeholder div for dragging purposes, adds it, and pre-computes its offset.\n    var _makeDraggablePlaceholder = function (placeholder, _jsPlumb, ipco, ips) {\n        var n = jsPlumb.createElement(\"div\", { position : \"absolute\" });\n        _jsPlumb.appendElement(n);\n        var id = _jsPlumb.getId(n);\n        jsPlumb.setPosition(n, ipco);\n        n.style.width = ips[0] + \"px\";\n        n.style.height = ips[1] + \"px\";\n        _jsPlumb.manage(id, n, true); // TRANSIENT MANAGE\n        // create and assign an id, and initialize the offset.\n        placeholder.id = id;\n        placeholder.element = n;\n    };\n\n    // create a floating endpoint (for drag connections)\n    var _makeFloatingEndpoint = function (paintStyle, referenceAnchor, endpoint, referenceCanvas, sourceElement, _jsPlumb, _newEndpoint, scope) {\n        var floatingAnchor = new _jp.FloatingAnchor({ reference: referenceAnchor, referenceCanvas: referenceCanvas, jsPlumbInstance: _jsPlumb });\n        //setting the scope here should not be the way to fix that mootools issue.  it should be fixed by not\n        // adding the floating endpoint as a droppable.  that makes more sense anyway!\n        // TRANSIENT MANAGE\n        return _newEndpoint({\n            paintStyle: paintStyle,\n            endpoint: endpoint,\n            anchor: floatingAnchor,\n            source: sourceElement,\n            scope: scope\n        });\n    };\n\n    var typeParameters = [ \"connectorStyle\", \"connectorHoverStyle\", \"connectorOverlays\",\n        \"connector\", \"connectionType\", \"connectorClass\", \"connectorHoverClass\" ];\n\n    // a helper function that tries to find a connection to the given element, and returns it if so. if elementWithPrecedence is null,\n    // or no connection to it is found, we return the first connection in our list.\n    var findConnectionToUseForDynamicAnchor = function (ep, elementWithPrecedence) {\n        var idx = 0;\n        if (elementWithPrecedence != null) {\n            for (var i = 0; i < ep.connections.length; i++) {\n                if (ep.connections[i].sourceId == elementWithPrecedence || ep.connections[i].targetId == elementWithPrecedence) {\n                    idx = i;\n                    break;\n                }\n            }\n        }\n\n        return ep.connections[idx];\n    };\n\n    _jp.Endpoint = function (params) {\n        var _jsPlumb = params._jsPlumb,\n            _newConnection = params.newConnection,\n            _newEndpoint = params.newEndpoint;\n\n        this.idPrefix = \"_jsplumb_e_\";\n        this.defaultLabelLocation = [ 0.5, 0.5 ];\n        this.defaultOverlayKeys = [\"Overlays\", \"EndpointOverlays\"];\n        _jp.OverlayCapableJsPlumbUIComponent.apply(this, arguments);\n\n// TYPE\n\n        this.appendToDefaultType({\n            connectionType:params.connectionType,\n            maxConnections: params.maxConnections == null ? this._jsPlumb.instance.Defaults.MaxConnections : params.maxConnections, // maximum number of connections this endpoint can be the source of.,\n            paintStyle: params.endpointStyle || params.paintStyle || params.style || this._jsPlumb.instance.Defaults.EndpointStyle || _jp.Defaults.EndpointStyle,\n            hoverPaintStyle: params.endpointHoverStyle || params.hoverPaintStyle || this._jsPlumb.instance.Defaults.EndpointHoverStyle || _jp.Defaults.EndpointHoverStyle,\n            connectorStyle: params.connectorStyle,\n            connectorHoverStyle: params.connectorHoverStyle,\n            connectorClass: params.connectorClass,\n            connectorHoverClass: params.connectorHoverClass,\n            connectorOverlays: params.connectorOverlays,\n            connector: params.connector,\n            connectorTooltip: params.connectorTooltip\n        });\n\n// END TYPE\n\n        this._jsPlumb.enabled = !(params.enabled === false);\n        this._jsPlumb.visible = true;\n        this.element = _jp.getElement(params.source);\n        this._jsPlumb.uuid = params.uuid;\n        this._jsPlumb.floatingEndpoint = null;\n        var inPlaceCopy = null;\n        if (this._jsPlumb.uuid) params.endpointsByUUID[this._jsPlumb.uuid] = this;\n        this.elementId = params.elementId;\n        this.dragProxy = params.dragProxy;\n\n        this._jsPlumb.connectionCost = params.connectionCost;\n        this._jsPlumb.connectionsDirected = params.connectionsDirected;\n        this._jsPlumb.currentAnchorClass = \"\";\n        this._jsPlumb.events = {};\n\n        var _updateAnchorClass = function () {\n            // stash old, get new\n            var oldAnchorClass = _jsPlumb.endpointAnchorClassPrefix + \"-\" + this._jsPlumb.currentAnchorClass;\n            this._jsPlumb.currentAnchorClass = this.anchor.getCssClass();\n            var anchorClass = _jsPlumb.endpointAnchorClassPrefix + (this._jsPlumb.currentAnchorClass ? \"-\" + this._jsPlumb.currentAnchorClass : \"\");\n\n            this.removeClass(oldAnchorClass);\n            this.addClass(anchorClass);\n            // add and remove at the same time to reduce the number of reflows.\n            _jp.updateClasses(this.element, anchorClass, oldAnchorClass);\n        }.bind(this);\n\n        this.prepareAnchor = function(anchorParams) {\n            var a = this._jsPlumb.instance.makeAnchor(anchorParams, this.elementId, _jsPlumb);\n            a.bind(\"anchorChanged\", function (currentAnchor) {\n                this.fire(\"anchorChanged\", {endpoint: this, anchor: currentAnchor});\n                _updateAnchorClass();\n            }.bind(this));\n            return a;\n        };\n\n        this.setPreparedAnchor = function(anchor, doNotRepaint) {\n            this._jsPlumb.instance.continuousAnchorFactory.clear(this.elementId);\n            this.anchor = anchor;\n            _updateAnchorClass();\n\n            if (!doNotRepaint)\n                this._jsPlumb.instance.repaint(this.elementId);\n\n            return this;\n        };\n\n        this.setAnchor = function (anchorParams, doNotRepaint) {\n            var a = this.prepareAnchor(anchorParams);\n            this.setPreparedAnchor(a, doNotRepaint);\n            return this;\n        };\n\n        var internalHover = function (state) {\n            if (this.connections.length > 0) {\n                for (var i = 0; i < this.connections.length; i++)\n                    this.connections[i].setHover(state, false);\n            }\n            else\n                this.setHover(state);\n        }.bind(this);\n\n        this.bind(\"mouseover\", function () {\n            internalHover(true);\n        });\n        this.bind(\"mouseout\", function () {\n            internalHover(false);\n        });\n\n        // ANCHOR MANAGER\n        if (!params._transient) // in place copies, for example, are transient.  they will never need to be retrieved during a paint cycle, because they dont move, and then they are deleted.\n            this._jsPlumb.instance.anchorManager.add(this, this.elementId);\n\n        this.prepareEndpoint = function(ep, typeId) {\n            var _e = function (t, p) {\n                var rm = _jsPlumb.getRenderMode();\n                if (_jp.Endpoints[rm][t]) return new _jp.Endpoints[rm][t](p);\n                if (!_jsPlumb.Defaults.DoNotThrowErrors)\n                    throw { msg: \"jsPlumb: unknown endpoint type '\" + t + \"'\" };\n            };\n\n            var endpointArgs = {\n                _jsPlumb: this._jsPlumb.instance,\n                cssClass: params.cssClass,\n                container: params.container,\n                tooltip: params.tooltip,\n                connectorTooltip: params.connectorTooltip,\n                endpoint: this\n            };\n\n            var endpoint;\n\n            if (_ju.isString(ep))\n                endpoint = _e(ep, endpointArgs);\n            else if (_ju.isArray(ep)) {\n                endpointArgs = _ju.merge(ep[1], endpointArgs);\n                endpoint = _e(ep[0], endpointArgs);\n            }\n            else {\n                endpoint = ep.clone();\n            }\n\n            // assign a clone function using a copy of endpointArgs. this is used when a drag starts: the endpoint that was dragged is cloned,\n            // and the clone is left in its place while the original one goes off on a magical journey.\n            // the copy is to get around a closure problem, in which endpointArgs ends up getting shared by\n            // the whole world.\n            //var argsForClone = jsPlumb.extend({}, endpointArgs);\n            endpoint.clone = function () {\n                // TODO this, and the code above, can be refactored to be more dry.\n                if (_ju.isString(ep))\n                    return _e(ep, endpointArgs);\n                else if (_ju.isArray(ep)) {\n                    endpointArgs = _ju.merge(ep[1], endpointArgs);\n                    return _e(ep[0], endpointArgs);\n                }\n            }.bind(this);\n\n            endpoint.typeId = typeId;\n            return endpoint;\n        };\n\n        this.setEndpoint = function(ep, doNotRepaint) {\n            var _ep = this.prepareEndpoint(ep);\n            this.setPreparedEndpoint(_ep, true);\n        };\n\n        this.setPreparedEndpoint = function (ep, doNotRepaint) {\n            if (this.endpoint != null) {\n                this.endpoint.cleanup();\n                this.endpoint.destroy();\n            }\n            this.endpoint = ep;\n            this.type = this.endpoint.type;\n            this.canvas = this.endpoint.canvas;\n        };\n\n        _jp.extend(this, params, typeParameters);\n\n        this.isSource = params.isSource || false;\n        this.isTemporarySource = params.isTemporarySource || false;\n        this.isTarget = params.isTarget || false;\n\n        this.connections = params.connections || [];\n        this.connectorPointerEvents = params[\"connector-pointer-events\"];\n\n        this.scope = params.scope || _jsPlumb.getDefaultScope();\n        this.timestamp = null;\n        this.reattachConnections = params.reattach || _jsPlumb.Defaults.ReattachConnections;\n        this.connectionsDetachable = _jsPlumb.Defaults.ConnectionsDetachable;\n        if (params.connectionsDetachable === false || params.detachable === false)\n            this.connectionsDetachable = false;\n        this.dragAllowedWhenFull = params.dragAllowedWhenFull !== false;\n\n        if (params.onMaxConnections)\n            this.bind(\"maxConnections\", params.onMaxConnections);\n\n        //\n        // add a connection. not part of public API.\n        //\n        this.addConnection = function (connection) {\n            this.connections.push(connection);\n            this[(this.connections.length > 0 ? \"add\" : \"remove\") + \"Class\"](_jsPlumb.endpointConnectedClass);\n            this[(this.isFull() ? \"add\" : \"remove\") + \"Class\"](_jsPlumb.endpointFullClass);\n        };\n\n        this.detachFromConnection = function (connection, idx, doNotCleanup) {\n            idx = idx == null ? this.connections.indexOf(connection) : idx;\n            if (idx >= 0) {\n                this.connections.splice(idx, 1);\n                this[(this.connections.length > 0 ? \"add\" : \"remove\") + \"Class\"](_jsPlumb.endpointConnectedClass);\n                this[(this.isFull() ? \"add\" : \"remove\") + \"Class\"](_jsPlumb.endpointFullClass);\n            }\n\n            if ((this._forceDeleteOnDetach || (!doNotCleanup && this._deleteOnDetach)) && this.connections.length === 0) {\n                _jsPlumb.deleteObject({\n                    endpoint: this,\n                    fireEvent: false,\n                    //deleteAttachedObjects: false\n                    deleteAttachedObjects: doNotCleanup !== true\n                });\n            }\n        };\n\n        //this.detach = function (connection, ignoreTarget, forceDetach, fireEvent, originalEvent, endpointBeingDeleted, connectionIndex) {\n\n        this.detach = function (params) {\n            var connectionIndex = params.connectionIndex,\n                connection = params.connection,\n                ignoreTarget = params.ignoreTarget,\n                fireEvent = params.fireEvent,\n                originalEvent = params.originalEvent,\n                endpointBeingDeleted = params.endpointBeingDeleted,\n                forceDetach = params.forceDetach;\n\n            var idx = connectionIndex == null ? this.connections.indexOf(connection) : connectionIndex,\n                actuallyDetached = false;\n            fireEvent = (fireEvent !== false);\n\n            if (idx >= 0) {\n\n                if (forceDetach || connection._forceDetach || (connection.isDetachable() && connection.isDetachAllowed(connection) && this.isDetachAllowed(connection) && _jsPlumb.checkCondition(\"beforeDetach\", connection, endpointBeingDeleted) )) {\n\n                    _jsPlumb.deleteObject({\n                        connection: connection,\n                        fireEvent: (!ignoreTarget && fireEvent),\n                        originalEvent: originalEvent,\n                        deleteAttachedObjects:params.deleteAttachedObjects\n                        //deleteAttachedObjects:null\n                    });\n                    actuallyDetached = true;\n                }\n            }\n            return actuallyDetached;\n        };\n\n        this.detachAll = function (fireEvent, forceDetach) {\n            var unaffectedConns = [];\n            while (this.connections.length > 0) {\n                // TODO this could pass the index in to the detach method to save some time (index will always be zero in this while loop)\n                var actuallyDetached = this.detach({\n                    connection:this.connections[0],\n                    ignoreTarget:false,\n                    forceDetach:forceDetach === true,\n                    fireEvent:fireEvent !== false,\n                    originalEvent:null,\n                    endpointBeingDeleted:this,\n                    connectionIndex:0\n                });\n                if (!actuallyDetached) {\n                    unaffectedConns.push(this.connections[0]);\n                    this.connections.splice(0, 1);\n                }\n            }\n            this.connections = unaffectedConns;\n            return this;\n        };\n        this.detachFrom = function (targetEndpoint, fireEvent, originalEvent) {\n            var c = [];\n            for (var i = 0; i < this.connections.length; i++) {\n                if (this.connections[i].endpoints[1] == targetEndpoint || this.connections[i].endpoints[0] == targetEndpoint) {\n                    c.push(this.connections[i]);\n                }\n            }\n            for (var j = 0; j < c.length; j++) {\n                this.detach({\n                    connection:c[j],\n                    ignoreTarget:false,\n                    forceDetach:true,\n                    fireEvent:fireEvent,\n                    originalEvent:originalEvent\n                });\n            }\n            return this;\n        };\n\n        this.getElement = function () {\n            return this.element;\n        };\n\n        this.setElement = function (el) {\n            var parentId = this._jsPlumb.instance.getId(el),\n                curId = this.elementId;\n            // remove the endpoint from the list for the current endpoint's element\n            _ju.removeWithFunction(params.endpointsByElement[this.elementId], function (e) {\n                return e.id == this.id;\n            }.bind(this));\n            this.element = _jp.getElement(el);\n            this.elementId = _jsPlumb.getId(this.element);\n            _jsPlumb.anchorManager.rehomeEndpoint(this, curId, this.element);\n            _jsPlumb.dragManager.endpointAdded(this.element);\n            _ju.addToList(params.endpointsByElement, parentId, this);\n            return this;\n        };\n\n        /**\n         * private but must be exposed.\n         */\n        this.makeInPlaceCopy = function () {\n            var loc = this.anchor.getCurrentLocation({element: this}),\n                o = this.anchor.getOrientation(this),\n                acc = this.anchor.getCssClass(),\n                inPlaceAnchor = {\n                    bind: function () {\n                    },\n                    compute: function () {\n                        return [ loc[0], loc[1] ];\n                    },\n                    getCurrentLocation: function () {\n                        return [ loc[0], loc[1] ];\n                    },\n                    getOrientation: function () {\n                        return o;\n                    },\n                    getCssClass: function () {\n                        return acc;\n                    }\n                };\n\n            return _newEndpoint({\n                dropOptions: params.dropOptions,\n                anchor: inPlaceAnchor,\n                source: this.element,\n                paintStyle: this.getPaintStyle(),\n                endpoint: params.hideOnDrag ? \"Blank\" : this.endpoint,\n                _transient: true,\n                scope: this.scope,\n                reference:this\n            });\n        };\n\n        /**\n         * returns a connection from the pool; used when dragging starts.  just gets the head of the array if it can.\n         */\n        this.connectorSelector = function () {\n            var candidate = this.connections[0];\n            // SP target source refactor\n            if (/*this.isTarget && */candidate) return candidate;\n            else {\n                return (this.connections.length < this._jsPlumb.maxConnections) || this._jsPlumb.maxConnections == -1 ? null : candidate;\n            }\n        };\n\n        this.setStyle = this.setPaintStyle;\n\n        this.paint = function (params) {\n            params = params || {};\n            var timestamp = params.timestamp, recalc = !(params.recalc === false);\n            if (!timestamp || this.timestamp !== timestamp) {\n\n                var info = _jsPlumb.updateOffset({ elId: this.elementId, timestamp: timestamp });\n\n                var xy = params.offset ? params.offset.o : info.o;\n                if (xy != null) {\n                    var ap = params.anchorPoint, connectorPaintStyle = params.connectorPaintStyle;\n                    if (ap == null) {\n                        var wh = params.dimensions || info.s,\n                            anchorParams = { xy: [ xy.left, xy.top ], wh: wh, element: this, timestamp: timestamp };\n                        if (recalc && this.anchor.isDynamic && this.connections.length > 0) {\n                            var c = findConnectionToUseForDynamicAnchor(this, params.elementWithPrecedence),\n                                oIdx = c.endpoints[0] == this ? 1 : 0,\n                                oId = oIdx === 0 ? c.sourceId : c.targetId,\n                                oInfo = _jsPlumb.getCachedData(oId),\n                                oOffset = oInfo.o, oWH = oInfo.s;\n                            anchorParams.txy = [ oOffset.left, oOffset.top ];\n                            anchorParams.twh = oWH;\n                            anchorParams.tElement = c.endpoints[oIdx];\n                        }\n                        ap = this.anchor.compute(anchorParams);\n                    }\n\n                    this.endpoint.compute(ap, this.anchor.getOrientation(this), this._jsPlumb.paintStyleInUse, connectorPaintStyle || this.paintStyleInUse);\n                    this.endpoint.paint(this._jsPlumb.paintStyleInUse, this.anchor);\n                    this.timestamp = timestamp;\n\n                    // paint overlays\n                    for (var i in this._jsPlumb.overlays) {\n                        if (this._jsPlumb.overlays.hasOwnProperty(i)) {\n                            var o = this._jsPlumb.overlays[i];\n                            if (o.isVisible()) {\n                                this._jsPlumb.overlayPlacements[i] = o.draw(this.endpoint, this._jsPlumb.paintStyleInUse);\n                                o.paint(this._jsPlumb.overlayPlacements[i]);\n                            }\n                        }\n                    }\n                }\n            }\n        };\n\n        this.getTypeDescriptor = function () {\n            return \"endpoint\";\n        };\n        this.isVisible = function () {\n            return this._jsPlumb.visible;\n        };\n\n        this.repaint = this.paint;\n\n        var draggingInitialised = false;\n        this.initDraggable = function () {\n\n            // is this a connection source? we make it draggable and have the\n            // drag listener maintain a connection with a floating endpoint.\n            if (!draggingInitialised && _jp.isDragSupported(this.element)) {\n                var placeholderInfo = { id: null, element: null },\n                    jpc = null,\n                    existingJpc = false,\n                    existingJpcParams = null,\n                    _dragHandler = _makeConnectionDragHandler(this, placeholderInfo, _jsPlumb),\n                    dragOptions = params.dragOptions || {},\n                    defaultOpts = {},\n                    startEvent = _jp.dragEvents.start,\n                    stopEvent = _jp.dragEvents.stop,\n                    dragEvent = _jp.dragEvents.drag,\n                    beforeStartEvent = _jp.dragEvents.beforeStart,\n                    payload;\n\n                // respond to beforeStart from katavorio; this will have, optionally, a payload of attribute values\n                // that were placed there by the makeSource mousedown listener.\n                var beforeStart = function(beforeStartParams) {\n                    payload = beforeStartParams.e.payload || {};\n                };\n\n                var start = function (startParams) {\n\n// -------------   first, get a connection to drag. this may be null, in which case we are dragging a new one.\n\n                    jpc = this.connectorSelector();\n\n// -------------------------------- now a bunch of tests about whether or not to proceed -------------------------\n\n                    var _continue = true;\n                    // if not enabled, return\n                    if (!this.isEnabled()) _continue = false;\n                    // if no connection and we're not a source - or temporarily a source, as is the case with makeSource - return.\n                    if (jpc == null && !this.isSource && !this.isTemporarySource) _continue = false;\n                    // otherwise if we're full and not allowed to drag, also return false.\n                    if (this.isSource && this.isFull() && !(jpc != null && this.dragAllowedWhenFull)) _continue = false;\n                    // if the connection was setup as not detachable or one of its endpoints\n                    // was setup as connectionsDetachable = false, or Defaults.ConnectionsDetachable\n                    // is set to false...\n                    if (jpc != null && !jpc.isDetachable(this)) _continue = false;\n\n                    var beforeDrag = _jsPlumb.checkCondition(jpc == null ? \"beforeDrag\" : \"beforeStartDetach\", {\n                        endpoint:this,\n                        source:this.element,\n                        sourceId:this.elementId,\n                        connection:jpc\n                    });\n                    if (beforeDrag === false) _continue = false;\n                    // else we might have been given some data. we'll pass it in to a new connection as 'data'.\n                    // here we also merge in the optional payload we were given on mousedown.\n                    else if (typeof beforeDrag === \"object\") {\n                        _jp.extend(beforeDrag, payload || {});\n                    }\n                    else\n                        // or if no beforeDrag data, maybe use the payload on its own.\n                        beforeDrag = payload || {};\n\n                    if (_continue === false) {\n                        // this is for mootools and yui. returning false from this causes jquery to stop drag.\n                        // the events are wrapped in both mootools and yui anyway, but i don't think returning\n                        // false from the start callback would stop a drag.\n                        if (_jsPlumb.stopDrag) _jsPlumb.stopDrag(this.canvas);\n                        _dragHandler.stopDrag();\n                        return false;\n                    }\n\n// ---------------------------------------------------------------------------------------------------------------------\n\n                    // ok to proceed.\n\n                    // clear hover for all connections for this endpoint before continuing.\n                    for (var i = 0; i < this.connections.length; i++)\n                        this.connections[i].setHover(false);\n\n                    this.addClass(\"endpointDrag\");\n                    _jsPlumb.setConnectionBeingDragged(true);\n\n                    // if we're not full but there was a connection, make it null. we'll create a new one.\n                    if (jpc && !this.isFull() && this.isSource) jpc = null;\n\n                    _jsPlumb.updateOffset({ elId: this.elementId });\n\n// ----------------    make the element we will drag around, and position it -----------------------------\n\n                    var ipco = this._jsPlumb.instance.getOffset(this.canvas),\n                        canvasElement = this.canvas,\n                        ips = this._jsPlumb.instance.getSize(this.canvas);\n\n                    _makeDraggablePlaceholder(placeholderInfo, _jsPlumb, ipco, ips);\n\n                    // store the id of the dragging div and the source element. the drop function will pick these up.                   \n                    _jsPlumb.setAttributes(this.canvas, {\n                        \"dragId\": placeholderInfo.id,\n                        \"elId\": this.elementId\n                    });\n\n// ------------------- create an endpoint that will be our floating endpoint ------------------------------------\n\n                    var endpointToFloat = this.dragProxy || this.endpoint;\n                    if (this.dragProxy == null && this.connectionType != null) {\n                        var aae = this._jsPlumb.instance.deriveEndpointAndAnchorSpec(this.connectionType);\n                        if (aae.endpoints[1]) endpointToFloat = aae.endpoints[1];\n                    }\n                    var centerAnchor = this._jsPlumb.instance.makeAnchor(\"Center\");\n                    centerAnchor.isFloating = true;\n                    this._jsPlumb.floatingEndpoint = _makeFloatingEndpoint(this.getPaintStyle(), centerAnchor, endpointToFloat, this.canvas, placeholderInfo.element, _jsPlumb, _newEndpoint, this.scope);\n                    var _savedAnchor = this._jsPlumb.floatingEndpoint.anchor;\n\n\n                    if (jpc == null) {\n\n                        this.setHover(false, false);\n                        // create a connection. one end is this endpoint, the other is a floating endpoint.                    \n                        jpc = _newConnection({\n                            sourceEndpoint: this,\n                            targetEndpoint: this._jsPlumb.floatingEndpoint,\n                            source: this.element,  // for makeSource with parent option.  ensure source element is represented correctly.\n                            target: placeholderInfo.element,\n                            anchors: [ this.anchor, this._jsPlumb.floatingEndpoint.anchor ],\n                            paintStyle: params.connectorStyle, // this can be null. Connection will use the default.\n                            hoverPaintStyle: params.connectorHoverStyle,\n                            connector: params.connector, // this can also be null. Connection will use the default.\n                            overlays: params.connectorOverlays,\n                            type: this.connectionType,\n                            cssClass: this.connectorClass,\n                            hoverClass: this.connectorHoverClass,\n                            scope:params.scope,\n                            data:beforeDrag\n                        });\n                        jpc.pending = true;\n                        jpc.addClass(_jsPlumb.draggingClass);\n                        this._jsPlumb.floatingEndpoint.addClass(_jsPlumb.draggingClass);\n                        this._jsPlumb.floatingEndpoint.anchor = _savedAnchor;\n                        // fire an event that informs that a connection is being dragged\n                        _jsPlumb.fire(\"connectionDrag\", jpc);\n\n                        // register the new connection on the drag manager. This connection, at this point, is 'pending',\n                        // and has as its target a temporary element (the 'placeholder'). If the connection subsequently\n                        // becomes established, the anchor manager is informed that the target of the connection has\n                        // changed.\n\n                        _jsPlumb.anchorManager.newConnection(jpc);\n\n                    } else {\n                        existingJpc = true;\n                        jpc.setHover(false);\n                        // new anchor idx\n                        var anchorIdx = jpc.endpoints[0].id == this.id ? 0 : 1;\n                        this.detachFromConnection(jpc, null, true);                         // detach from the connection while dragging is occurring. but dont cleanup automatically.\n\n                        // store the original scope (issue 57)\n                        var dragScope = _jsPlumb.getDragScope(canvasElement);\n                        _jsPlumb.setAttribute(this.canvas, \"originalScope\", dragScope);\n\n                        // fire an event that informs that a connection is being dragged. we do this before\n                        // replacing the original target with the floating element info.\n                        _jsPlumb.fire(\"connectionDrag\", jpc);\n\n                        // now we replace ourselves with the temporary div we created above:\n                        if (anchorIdx === 0) {\n                            existingJpcParams = [ jpc.source, jpc.sourceId, canvasElement, dragScope ];\n                            _jsPlumb.anchorManager.sourceChanged(jpc.endpoints[anchorIdx].elementId, placeholderInfo.id, jpc, placeholderInfo.element);\n\n                        } else {\n                            existingJpcParams = [ jpc.target, jpc.targetId, canvasElement, dragScope ];\n                            jpc.target = placeholderInfo.element;\n                            jpc.targetId = placeholderInfo.id;\n\n                            _jsPlumb.anchorManager.updateOtherEndpoint(jpc.sourceId, jpc.endpoints[anchorIdx].elementId, jpc.targetId, jpc);\n                        }\n\n                        // store the original endpoint and assign the new floating endpoint for the drag.\n                        jpc.suspendedEndpoint = jpc.endpoints[anchorIdx];\n\n                        // PROVIDE THE SUSPENDED ELEMENT, BE IT A SOURCE OR TARGET (ISSUE 39)\n                        jpc.suspendedElement = jpc.endpoints[anchorIdx].getElement();\n                        jpc.suspendedElementId = jpc.endpoints[anchorIdx].elementId;\n                        jpc.suspendedElementType = anchorIdx === 0 ? \"source\" : \"target\";\n\n                        jpc.suspendedEndpoint.setHover(false);\n                        this._jsPlumb.floatingEndpoint.referenceEndpoint = jpc.suspendedEndpoint;\n                        jpc.endpoints[anchorIdx] = this._jsPlumb.floatingEndpoint;\n\n                        jpc.addClass(_jsPlumb.draggingClass);\n                        this._jsPlumb.floatingEndpoint.addClass(_jsPlumb.draggingClass);\n                    }\n\n                    // register it and register connection on it.\n                    _jsPlumb.floatingConnections[placeholderInfo.id] = jpc;\n                    // only register for the target endpoint; we will not be dragging the source at any time\n                    // before this connection is either discarded or made into a permanent connection.\n                    _ju.addToList(params.endpointsByElement, placeholderInfo.id, this._jsPlumb.floatingEndpoint);\n                    // tell jsplumb about it\n                    _jsPlumb.currentlyDragging = true;\n                }.bind(this);\n\n                var stop = function () {\n                    _jsPlumb.setConnectionBeingDragged(false);\n\n                    if (jpc && jpc.endpoints != null) {\n                        // get the actual drop event (decode from library args to stop function)\n                        var originalEvent = _jsPlumb.getDropEvent(arguments);\n                        // unlock the other endpoint (if it is dynamic, it would have been locked at drag start)\n                        var idx = _jsPlumb.getFloatingAnchorIndex(jpc);\n                        jpc.endpoints[idx === 0 ? 1 : 0].anchor.locked = false;\n                        // TODO: Dont want to know about css classes inside jsplumb, ideally.\n                        jpc.removeClass(_jsPlumb.draggingClass);\n\n                        // if we have the floating endpoint then the connection has not been dropped\n                        // on another endpoint.  If it is a new connection we throw it away. If it is an\n                        // existing connection we check to see if we should reattach it, throwing it away\n                        // if not.\n                        if (this._jsPlumb && (jpc.deleteConnectionNow || jpc.endpoints[idx] == this._jsPlumb.floatingEndpoint)) {\n                            // 6a. if the connection was an existing one...\n                            if (existingJpc && jpc.suspendedEndpoint) {\n                                // fix for issue35, thanks Sylvain Gizard: when firing the detach event make sure the\n                                // floating endpoint has been replaced.\n                                if (idx === 0) {\n                                    jpc.floatingElement = jpc.source;\n                                    jpc.floatingId = jpc.sourceId;\n                                    jpc.floatingEndpoint = jpc.endpoints[0];\n                                    jpc.floatingIndex = 0;\n                                    jpc.source = existingJpcParams[0];\n                                    jpc.sourceId = existingJpcParams[1];\n                                } else {\n                                    // keep a copy of the floating element; the anchor manager will want to clean up.\n                                    jpc.floatingElement = jpc.target;\n                                    jpc.floatingId = jpc.targetId;\n                                    jpc.floatingEndpoint = jpc.endpoints[1];\n                                    jpc.floatingIndex = 1;\n                                    jpc.target = existingJpcParams[0];\n                                    jpc.targetId = existingJpcParams[1];\n                                }\n\n                                var fe = this._jsPlumb.floatingEndpoint; // store for later removal.\n                                // restore the original scope (issue 57)\n                                _jsPlumb.setDragScope(existingJpcParams[2], existingJpcParams[3]);\n                                jpc.endpoints[idx] = jpc.suspendedEndpoint;\n                                // IF the connection should be reattached, or the other endpoint refuses detach, then\n                                // reset the connection to its original state\n                                if (jpc.isReattach() || jpc._forceReattach || jpc._forceDetach || !jpc.endpoints[idx === 0 ? 1 : 0].detach({connection:jpc, ignoreTarget:false, forceDetach:false, fireEvent:true, originalEvent:originalEvent, endpointBeingDeleted:true})) {\n\n                                    jpc.setHover(false);\n                                    jpc._forceDetach = null;\n                                    jpc._forceReattach = null;\n                                    this._jsPlumb.floatingEndpoint.detachFromConnection(jpc);\n                                    jpc.suspendedEndpoint.addConnection(jpc);\n\n                                    // TODO this code is duplicated in lots of places...and there is nothing external\n                                    // in the code; it all refers to the connection itself. we could add a\n                                    // `checkSanity(connection)` method to anchorManager that did this.\n                                    if (idx == 1) {\n                                        _jsPlumb.anchorManager.updateOtherEndpoint(jpc.sourceId, jpc.floatingId, jpc.targetId, jpc);\n                                    }\n                                    else {\n                                        _jsPlumb.anchorManager.sourceChanged(jpc.floatingId, jpc.sourceId, jpc, jpc.source);\n                                    }\n\n                                    _jsPlumb.repaint(existingJpcParams[1]);\n                                }\n                                else {\n                                    _jsPlumb.deleteObject({endpoint: fe});\n                                }\n                            }\n                        }\n\n                        // makeTargets sets this flag, to tell us we have been replaced and should delete this object.\n                        if (this.deleteAfterDragStop) {\n                            _jsPlumb.deleteObject({endpoint: this});\n                        }\n                        else {\n                            if (this._jsPlumb) {\n                                 this.paint({recalc: false});\n                            }\n                        }\n\n                        // although the connection is no longer valid, there are use cases where this is useful.\n                        _jsPlumb.fire(\"connectionDragStop\", jpc, originalEvent);\n                        // fire this event to give people more fine-grained control (connectionDragStop fires a lot)\n                        if (jpc.pending) {\n                            _jsPlumb.fire(\"connectionAborted\", jpc, originalEvent);\n                        }\n                        // tell jsplumb that dragging is finished.\n                        _jsPlumb.currentlyDragging = false;\n                        jpc.suspendedElement = null;\n                        jpc.suspendedEndpoint = null;\n                        jpc = null;\n                    }\n\n                    // if no endpoints, jpc already cleaned up. but still we want to ensure we're reset properly.\n                    // remove the element associated with the floating endpoint\n                    // (and its associated floating endpoint and visual artefacts)\n                    if (placeholderInfo && placeholderInfo.element) {\n                        _jsPlumb.remove(placeholderInfo.element, false, false);\n                    }\n                    // remove the inplace copy\n                    if (inPlaceCopy) {\n                        _jsPlumb.deleteObject({endpoint: inPlaceCopy});\n                    }\n\n                    if (this._jsPlumb) {\n                        // make our canvas visible (TODO: hand off to library; we should not know about DOM)\n                        this.canvas.style.visibility = \"visible\";\n                        // unlock our anchor\n                        this.anchor.locked = false;\n                        // clear floating anchor.\n                        this._jsPlumb.floatingEndpoint = null;\n                    }\n\n                }.bind(this);\n\n                dragOptions = _jp.extend(defaultOpts, dragOptions);\n                dragOptions.scope = this.scope || dragOptions.scope;\n                dragOptions[beforeStartEvent] = _ju.wrap(dragOptions[beforeStartEvent], beforeStart, false);\n                dragOptions[startEvent] = _ju.wrap(dragOptions[startEvent], start, false);\n                // extracted drag handler function so can be used by makeSource\n                dragOptions[dragEvent] = _ju.wrap(dragOptions[dragEvent], _dragHandler.drag);\n                dragOptions[stopEvent] = _ju.wrap(dragOptions[stopEvent], stop);\n                dragOptions.multipleDrop = false;\n\n                dragOptions.canDrag = function () {\n                    return this.isSource || this.isTemporarySource || /*(this.isTarget && */this.connections.length > 0/*)*/;\n                }.bind(this);\n\n                _jsPlumb.initDraggable(this.canvas, dragOptions, \"internal\");\n\n                this.canvas._jsPlumbRelatedElement = this.element;\n\n                draggingInitialised = true;\n            }\n        };\n\n        var ep = params.endpoint || this._jsPlumb.instance.Defaults.Endpoint || _jp.Defaults.Endpoint;\n        this.setEndpoint(ep, true);\n        var anchorParamsToUse = params.anchor ? params.anchor : params.anchors ? params.anchors : (_jsPlumb.Defaults.Anchor || \"Top\");\n        this.setAnchor(anchorParamsToUse, true);\n\n        // finally, set type if it was provided\n        var type = [ \"default\", (params.type || \"\")].join(\" \");\n        this.addType(type, params.data, true);\n        this.canvas = this.endpoint.canvas;\n        this.canvas._jsPlumb = this;\n\n        this.initDraggable();\n\n        // pulled this out into a function so we can reuse it for the inPlaceCopy canvas; you can now drop detached connections\n        // back onto the endpoint you detached it from.\n        var _initDropTarget = function (canvas, isTransient, endpoint, referenceEndpoint) {\n\n            if (_jp.isDropSupported(this.element)) {\n                var dropOptions = params.dropOptions || _jsPlumb.Defaults.DropOptions || _jp.Defaults.DropOptions;\n                dropOptions = _jp.extend({}, dropOptions);\n                dropOptions.scope = dropOptions.scope || this.scope;\n                var dropEvent = _jp.dragEvents.drop,\n                    overEvent = _jp.dragEvents.over,\n                    outEvent = _jp.dragEvents.out,\n                    _ep = this,\n                    drop = _jsPlumb.EndpointDropHandler({\n                        getEndpoint: function () {\n                            return _ep;\n                        },\n                        jsPlumb: _jsPlumb,\n                        enabled: function () {\n                            return endpoint != null ? endpoint.isEnabled() : true;\n                        },\n                        isFull: function () {\n                            return endpoint.isFull();\n                        },\n                        element: this.element,\n                        elementId: this.elementId,\n                        isSource: this.isSource,\n                        isTarget: this.isTarget,\n                        addClass: function (clazz) {\n                            _ep.addClass(clazz);\n                        },\n                        removeClass: function (clazz) {\n                            _ep.removeClass(clazz);\n                        },\n                        isDropAllowed: function () {\n                            return _ep.isDropAllowed.apply(_ep, arguments);\n                        },\n                        reference:referenceEndpoint,\n                        isRedrop:function(jpc, dhParams) {\n                            return jpc.suspendedEndpoint && dhParams.reference && (jpc.suspendedEndpoint.id === dhParams.reference.id);\n                        }\n                    });\n\n                dropOptions[dropEvent] = _ju.wrap(dropOptions[dropEvent], drop, true);\n                dropOptions[overEvent] = _ju.wrap(dropOptions[overEvent], function () {\n                    var draggable = _jp.getDragObject(arguments),\n                        id = _jsPlumb.getAttribute(_jp.getElement(draggable), \"dragId\"),\n                        _jpc = _jsPlumb.floatingConnections[id];\n\n                    if (_jpc != null) {\n                        var idx = _jsPlumb.getFloatingAnchorIndex(_jpc);\n                        // here we should fire the 'over' event if we are a target and this is a new connection,\n                        // or we are the same as the floating endpoint.\n                        var _cont = (this.isTarget && idx !== 0) || (_jpc.suspendedEndpoint && this.referenceEndpoint && this.referenceEndpoint.id == _jpc.suspendedEndpoint.id);\n                        if (_cont) {\n                            var bb = _jsPlumb.checkCondition(\"checkDropAllowed\", {\n                                sourceEndpoint: _jpc.endpoints[idx],\n                                targetEndpoint: this,\n                                connection: _jpc\n                            });\n                            this[(bb ? \"add\" : \"remove\") + \"Class\"](_jsPlumb.endpointDropAllowedClass);\n                            this[(bb ? \"remove\" : \"add\") + \"Class\"](_jsPlumb.endpointDropForbiddenClass);\n                            _jpc.endpoints[idx].anchor.over(this.anchor, this);\n                        }\n                    }\n                }.bind(this));\n\n                dropOptions[outEvent] = _ju.wrap(dropOptions[outEvent], function () {\n                    var draggable = _jp.getDragObject(arguments),\n                        id = draggable == null ? null : _jsPlumb.getAttribute(_jp.getElement(draggable), \"dragId\"),\n                        _jpc = id ? _jsPlumb.floatingConnections[id] : null;\n\n                    if (_jpc != null) {\n                        var idx = _jsPlumb.getFloatingAnchorIndex(_jpc);\n                        var _cont = (this.isTarget && idx !== 0) || (_jpc.suspendedEndpoint && this.referenceEndpoint && this.referenceEndpoint.id == _jpc.suspendedEndpoint.id);\n                        if (_cont) {\n                            this.removeClass(_jsPlumb.endpointDropAllowedClass);\n                            this.removeClass(_jsPlumb.endpointDropForbiddenClass);\n                            _jpc.endpoints[idx].anchor.out();\n                        }\n                    }\n                }.bind(this));\n\n                _jsPlumb.initDroppable(canvas, dropOptions, \"internal\", isTransient);\n            }\n        }.bind(this);\n\n        // Initialise the endpoint's canvas as a drop target. The drop handler will take care of the logic of whether\n        // something can actually be dropped.\n        if (!this.anchor.isFloating)\n            _initDropTarget(this.canvas, !(params._transient || this.anchor.isFloating), this, params.reference);\n\n\n        return this;\n    };\n\n    _ju.extend(_jp.Endpoint, _jp.OverlayCapableJsPlumbUIComponent, {\n\n        setVisible: function (v, doNotChangeConnections, doNotNotifyOtherEndpoint) {\n            this._jsPlumb.visible = v;\n            if (this.canvas) this.canvas.style.display = v ? \"block\" : \"none\";\n            this[v ? \"showOverlays\" : \"hideOverlays\"]();\n            if (!doNotChangeConnections) {\n                for (var i = 0; i < this.connections.length; i++) {\n                    this.connections[i].setVisible(v);\n                    if (!doNotNotifyOtherEndpoint) {\n                        var oIdx = this === this.connections[i].endpoints[0] ? 1 : 0;\n                        // only change the other endpoint if this is its only connection.\n                        if (this.connections[i].endpoints[oIdx].connections.length == 1) this.connections[i].endpoints[oIdx].setVisible(v, true, true);\n                    }\n                }\n            }\n        },\n        getAttachedElements: function () {\n            return this.connections;\n        },\n        applyType: function (t, doNotRepaint) {\n            this.setPaintStyle(t.endpointStyle || t.paintStyle, doNotRepaint);\n            this.setHoverPaintStyle(t.endpointHoverStyle || t.hoverPaintStyle, doNotRepaint);\n            if (t.maxConnections != null) this._jsPlumb.maxConnections = t.maxConnections;\n            if (t.scope) this.scope = t.scope;\n            _jp.extend(this, t, typeParameters);\n            if (t.cssClass != null && this.canvas) this._jsPlumb.instance.addClass(this.canvas, t.cssClass);\n            _jp.OverlayCapableJsPlumbUIComponent.applyType(this, t);\n        },\n        isEnabled: function () {\n            return this._jsPlumb.enabled;\n        },\n        setEnabled: function (e) {\n            this._jsPlumb.enabled = e;\n        },\n        cleanup: function () {\n            var anchorClass = this._jsPlumb.instance.endpointAnchorClassPrefix + (this._jsPlumb.currentAnchorClass ? \"-\" + this._jsPlumb.currentAnchorClass : \"\");\n            _jp.removeClass(this.element, anchorClass);\n            this.anchor = null;\n            this.endpoint.cleanup(true);\n            this.endpoint.destroy();\n            this.endpoint = null;\n            // drag/drop\n            this._jsPlumb.instance.destroyDraggable(this.canvas, \"internal\");\n            this._jsPlumb.instance.destroyDroppable(this.canvas, \"internal\");\n        },\n        setHover: function (h) {\n            if (this.endpoint && this._jsPlumb && !this._jsPlumb.instance.isConnectionBeingDragged())\n                this.endpoint.setHover(h);\n        },\n        isFull: function () {\n            return this._jsPlumb.maxConnections === 0 ? true : !(this.isFloating() || this._jsPlumb.maxConnections < 0 || this.connections.length < this._jsPlumb.maxConnections);\n        },\n        /**\n         * private but needs to be exposed.\n         */\n        isFloating: function () {\n            return this.anchor != null && this.anchor.isFloating;\n        },\n        isConnectedTo: function (endpoint) {\n            var found = false;\n            if (endpoint) {\n                for (var i = 0; i < this.connections.length; i++) {\n                    if (this.connections[i].endpoints[1] == endpoint || this.connections[i].endpoints[0] == endpoint) {\n                        found = true;\n                        break;\n                    }\n                }\n            }\n            return found;\n        },\n        getConnectionCost: function () {\n            return this._jsPlumb.connectionCost;\n        },\n        setConnectionCost: function (c) {\n            this._jsPlumb.connectionCost = c;\n        },\n        areConnectionsDirected: function () {\n            return this._jsPlumb.connectionsDirected;\n        },\n        setConnectionsDirected: function (b) {\n            this._jsPlumb.connectionsDirected = b;\n        },\n        setElementId: function (_elId) {\n            this.elementId = _elId;\n            this.anchor.elementId = _elId;\n        },\n        setReferenceElement: function (_el) {\n            this.element = _jp.getElement(_el);\n        },\n        setDragAllowedWhenFull: function (allowed) {\n            this.dragAllowedWhenFull = allowed;\n        },\n        equals: function (endpoint) {\n            return this.anchor.equals(endpoint.anchor);\n        },\n        getUuid: function () {\n            return this._jsPlumb.uuid;\n        },\n        computeAnchor: function (params) {\n            return this.anchor.compute(params);\n        }\n    });\n\n    root.jsPlumbInstance.prototype.EndpointDropHandler = function (dhParams) {\n        return function (e) {\n\n            var _jsPlumb = dhParams.jsPlumb;\n\n            // remove the classes that are added dynamically. drop is neither forbidden nor allowed now that\n            // the drop is finishing.\n            dhParams.removeClass(_jsPlumb.endpointDropAllowedClass);\n            dhParams.removeClass(_jsPlumb.endpointDropForbiddenClass);\n\n            var originalEvent = _jsPlumb.getDropEvent(arguments),\n                draggable = _jsPlumb.getDragObject(arguments),\n                id = _jsPlumb.getAttribute(draggable, \"dragId\"),\n                elId = _jsPlumb.getAttribute(draggable, \"elId\"),\n                scope = _jsPlumb.getAttribute(draggable, \"originalScope\"),\n                jpc = _jsPlumb.floatingConnections[id];\n\n            // if no active connection, bail.\n            if (jpc == null) return;\n\n            // calculate if this is an existing connection.\n            var existingConnection = jpc.suspendedEndpoint != null;\n\n            // if suspended endpoint exists but has been cleaned up, bail. This means it's an existing connection\n            // that has been detached and will shortly be discarded.\n            if (existingConnection && jpc.suspendedEndpoint._jsPlumb == null) return;\n\n            // get the drop endpoint. for a normal connection this is just the one that would replace the currently\n            // floating endpoint. for a makeTarget this is a new endpoint that is created on drop. But we leave that to\n            // the handler to figure out.\n            var _ep = dhParams.getEndpoint(jpc);\n\n            // If we're not given an endpoint to use, bail.\n            if (_ep == null) return;\n\n            // if this is a drop back where the connection came from, mark it force reattach and\n            // return; the stop handler will reattach. without firing an event.\n            if (dhParams.isRedrop(jpc, dhParams)) {\n                jpc._forceReattach = true;\n                jpc.setHover(false);\n                if (dhParams.maybeCleanup) dhParams.maybeCleanup(_ep);\n                return;\n            }\n\n            // ensure we dont bother trying to drop sources on non-source eps, and same for target.\n            var idx = _jsPlumb.getFloatingAnchorIndex(jpc);\n            if ((idx === 0 && !dhParams.isSource)|| (idx === 1 && !dhParams.isTarget)){\n                if (dhParams.maybeCleanup) dhParams.maybeCleanup(_ep);\n                return;\n            }\n\n            if (dhParams.onDrop) dhParams.onDrop(jpc);\n\n            // restore the original scope if necessary (issue 57)\n            if (scope) _jsPlumb.setDragScope(draggable, scope);\n\n            // if the target of the drop is full, fire an event (we abort below)\n            // makeTarget: keep.\n            var isFull = dhParams.isFull(e);\n            if (isFull) {\n                _ep.fire(\"maxConnections\", {\n                    endpoint: this,\n                    connection: jpc,\n                    maxConnections: _ep._jsPlumb.maxConnections\n                }, originalEvent);\n            }\n            //\n            // if endpoint enabled, not full, and matches the index of the floating endpoint...\n            if (!isFull &&  dhParams.enabled()) {\n                var _doContinue = true;\n\n                // before testing for beforeDrop, reset the connection's source/target to be the actual DOM elements\n                // involved (that is, stash any temporary stuff used for dragging. but we need to keep it around in\n                // order that the anchor manager can clean things up properly).\n                if (idx === 0) {\n                    jpc.floatingElement = jpc.source;\n                    jpc.floatingId = jpc.sourceId;\n                    jpc.floatingEndpoint = jpc.endpoints[0];\n                    jpc.floatingIndex = 0;\n                    jpc.source = dhParams.element;\n                    jpc.sourceId = dhParams.elementId;\n                } else {\n                    jpc.floatingElement = jpc.target;\n                    jpc.floatingId = jpc.targetId;\n                    jpc.floatingEndpoint = jpc.endpoints[1];\n                    jpc.floatingIndex = 1;\n                    jpc.target = dhParams.element;\n                    jpc.targetId = dhParams.elementId;\n                }\n\n                // if this is an existing connection and detach is not allowed we won't continue. The connection's\n                // endpoints have been reinstated; everything is back to how it was.\n                if (existingConnection && jpc.suspendedEndpoint.id != _ep.id) {\n\n                    if (!jpc.isDetachAllowed(jpc) || !jpc.endpoints[idx].isDetachAllowed(jpc) || !jpc.suspendedEndpoint.isDetachAllowed(jpc) || !_jsPlumb.checkCondition(\"beforeDetach\", jpc))\n                        _doContinue = false;\n                }\n\n// ------------ wrap the execution path in a function so we can support asynchronous beforeDrop\n\n                var continueFunction = function (optionalData) {\n                    // remove this jpc from the current endpoint, which is a floating endpoint that we will\n                    // subsequently discard.\n                    jpc.endpoints[idx].detachFromConnection(jpc);\n\n                    // if there's a suspended endpoint, detach it from the connection.\n                    if (jpc.suspendedEndpoint) jpc.suspendedEndpoint.detachFromConnection(jpc);\n\n                    jpc.endpoints[idx] = _ep;\n                    _ep.addConnection(jpc);\n\n                    // copy our parameters in to the connection:\n                    var params = _ep.getParameters();\n                    for (var aParam in params)\n                        jpc.setParameter(aParam, params[aParam]);\n\n                    if (!existingConnection) {\n                        // if not an existing connection and\n                        if (params.draggable)\n                            _jsPlumb.initDraggable(this.element, dragOptions, \"internal\", _jsPlumb);\n                    }\n                    else {\n                        var suspendedElementId = jpc.suspendedEndpoint.elementId;\n                        _jsPlumb.fireMoveEvent({\n                            index: idx,\n                            originalSourceId: idx === 0 ? suspendedElementId : jpc.sourceId,\n                            newSourceId: idx === 0 ? _ep.elementId : jpc.sourceId,\n                            originalTargetId: idx == 1 ? suspendedElementId : jpc.targetId,\n                            newTargetId: idx == 1 ? _ep.elementId : jpc.targetId,\n                            originalSourceEndpoint: idx === 0 ? jpc.suspendedEndpoint : jpc.endpoints[0],\n                            newSourceEndpoint: idx === 0 ? _ep : jpc.endpoints[0],\n                            originalTargetEndpoint: idx == 1 ? jpc.suspendedEndpoint : jpc.endpoints[1],\n                            newTargetEndpoint: idx == 1 ? _ep : jpc.endpoints[1],\n                            connection: jpc\n                        }, originalEvent);\n                    }\n\n                    if (idx == 1) {\n                        _jsPlumb.anchorManager.updateOtherEndpoint(jpc.sourceId, jpc.floatingId, jpc.targetId, jpc);\n                    }\n                    else {\n                        _jsPlumb.anchorManager.sourceChanged(jpc.floatingId, jpc.sourceId, jpc, jpc.source);\n                    }\n\n                    // when makeSource has uniqueEndpoint:true, we want to create connections with new endpoints\n                    // that are subsequently deleted. So makeSource sets `finalEndpoint`, which is the Endpoint to\n                    // which the connection should be attached. The `detachFromConnection` call below results in the\n                    // temporary endpoint being cleaned up.\n                    if (jpc.endpoints[0].finalEndpoint) {\n                        var _toDelete = jpc.endpoints[0];\n                        _toDelete.detachFromConnection(jpc);\n                        jpc.endpoints[0] = jpc.endpoints[0].finalEndpoint;\n                        jpc.endpoints[0].addConnection(jpc);\n                    }\n\n                    // if optionalData was given, merge it onto the connection's data.\n                    if (_ju.isObject(optionalData)) {\n                        jpc.mergeData(optionalData);\n                    }\n                    // finalise will inform the anchor manager and also add to\n                    // connectionsByScope if necessary.\n                    _jsPlumb.finaliseConnection(jpc, null, originalEvent, false);\n                    jpc.setHover(false);\n\n                }.bind(this);\n\n                var dontContinueFunction = function () {\n                    // otherwise just put it back on the endpoint it was on before the drag.\n                    if (jpc.suspendedEndpoint) {\n                        jpc.endpoints[idx] = jpc.suspendedEndpoint;\n                        jpc.setHover(false);\n                        jpc._forceDetach = true;\n                        if (idx === 0) {\n                            jpc.source = jpc.suspendedEndpoint.element;\n                            jpc.sourceId = jpc.suspendedEndpoint.elementId;\n                        } else {\n                            jpc.target = jpc.suspendedEndpoint.element;\n                            jpc.targetId = jpc.suspendedEndpoint.elementId;\n                        }\n                        jpc.suspendedEndpoint.addConnection(jpc);\n\n                        // TODO checkSanity\n                        if (idx == 1) {\n                            _jsPlumb.anchorManager.updateOtherEndpoint(jpc.sourceId, jpc.floatingId, jpc.targetId, jpc);\n                        }\n                        else {\n                            _jsPlumb.anchorManager.sourceChanged(jpc.floatingId, jpc.sourceId, jpc, jpc.source);\n                        }\n\n                        _jsPlumb.repaint(jpc.sourceId);\n                        jpc._forceDetach = false;\n                    }\n                };\n\n// --------------------------------------\n                // now check beforeDrop.  this will be available only on Endpoints that are setup to\n                // have a beforeDrop condition (although, secretly, under the hood all Endpoints and\n                // the Connection have them, because they are on jsPlumbUIComponent.  shhh!), because\n                // it only makes sense to have it on a target endpoint.\n                _doContinue = _doContinue && dhParams.isDropAllowed(jpc.sourceId, jpc.targetId, jpc.scope, jpc, _ep);// && jpc.pending;\n\n                if (_doContinue) {\n                    continueFunction(_doContinue);\n                    return true;\n                }\n                else {\n                    dontContinueFunction();\n                }\n            }\n\n            if (dhParams.maybeCleanup) dhParams.maybeCleanup(_ep);\n\n            _jsPlumb.currentlyDragging = false;\n        };\n    };\n}).call(typeof window !== 'undefined' ? window : this);\n\n/*\n * jsPlumb\n * \n * Title:jsPlumb 2.3.0\n * \n * Provides a way to visually connect elements on an HTML page, using SVG.\n * \n * This file contains the code for Connections.\n *\n * Copyright (c) 2010 - 2017 jsPlumb (hello@jsplumbtoolkit.com)\n * \n * https://jsplumbtoolkit.com\n * http://github.com/sporritt/jsplumb\n * \n * Dual licensed under the MIT and GPL2 licenses.\n */\n;\n(function () {\n\n    \"use strict\";\n    var root = this,\n        _jp = root.jsPlumb,\n        _ju = root.jsPlumbUtil;\n\n    var makeConnector = function (_jsPlumb, renderMode, connectorName, connectorArgs, forComponent) {\n            if (!_jsPlumb.Defaults.DoNotThrowErrors && _jp.Connectors[renderMode][connectorName] == null)\n                throw { msg: \"jsPlumb: unknown connector type '\" + connectorName + \"'\" };\n\n            return new _jp.Connectors[renderMode][connectorName](connectorArgs, forComponent);\n        },\n        _makeAnchor = function (anchorParams, elementId, _jsPlumb) {\n            return (anchorParams) ? _jsPlumb.makeAnchor(anchorParams, elementId, _jsPlumb) : null;\n        },\n        _updateConnectedClass = function (conn, element, _jsPlumb, remove) {\n            if (element != null) {\n                element._jsPlumbConnections = element._jsPlumbConnections || {};\n                if (remove)\n                    delete element._jsPlumbConnections[conn.id];\n                else\n                    element._jsPlumbConnections[conn.id] = true;\n\n                if (_ju.isEmpty(element._jsPlumbConnections)) {\n                    _jsPlumb.removeClass(element, _jsPlumb.connectedClass);\n                }\n                else\n                    _jsPlumb.addClass(element, _jsPlumb.connectedClass);\n            }\n        };\n\n    _jp.Connection = function (params) {\n        var _newEndpoint = params.newEndpoint;\n\n        this.id = params.id;\n        this.connector = null;\n        this.idPrefix = \"_jsplumb_c_\";\n        this.defaultLabelLocation = 0.5;\n        this.defaultOverlayKeys = [\"Overlays\", \"ConnectionOverlays\"];\n        // if a new connection is the result of moving some existing connection, params.previousConnection\n        // will have that Connection in it. listeners for the jsPlumbConnection event can look for that\n        // member and take action if they need to.\n        this.previousConnection = params.previousConnection;\n        this.source = _jp.getElement(params.source);\n        this.target = _jp.getElement(params.target);\n        // sourceEndpoint and targetEndpoint override source/target, if they are present. but \n        // source is not overridden if the Endpoint has declared it is not the final target of a connection;\n        // instead we use the source that the Endpoint declares will be the final source element.\n        if (params.sourceEndpoint) this.source = params.sourceEndpoint.getElement();\n        if (params.targetEndpoint) this.target = params.targetEndpoint.getElement();\n\n        _jp.OverlayCapableJsPlumbUIComponent.apply(this, arguments);\n\n        this.sourceId = this._jsPlumb.instance.getId(this.source);\n        this.targetId = this._jsPlumb.instance.getId(this.target);\n        this.scope = params.scope; // scope may have been passed in to the connect call. if it wasn't, we will pull it from the source endpoint, after having initialised the endpoints.            \n        this.endpoints = [];\n        this.endpointStyles = [];\n\n        var _jsPlumb = this._jsPlumb.instance;\n\n        _jsPlumb.manage(this.sourceId, this.source);\n        _jsPlumb.manage(this.targetId, this.target);\n\n        this._jsPlumb.visible = true;\n        this._jsPlumb.editable = params.editable === true;\n        this._jsPlumb.params = {\n            cssClass: params.cssClass,\n            container: params.container,\n            \"pointer-events\": params[\"pointer-events\"],\n            editorParams: params.editorParams,\n            overlays: params.overlays\n        };\n        this._jsPlumb.lastPaintedAt = null;\n\n        // listen to mouseover and mouseout events passed from the container delegate.\n        this.bind(\"mouseover\", function () {\n            this.setHover(true);\n        }.bind(this));\n        this.bind(\"mouseout\", function () {\n            this.setHover(false);\n        }.bind(this));\n\n        this.editableRequested = params.editable !== false;\n        this.setEditable = function(e) {\n            return this.connector ? this.connector.setEditable(e) : false;\n        };\n        this.isEditable = function() { return this.connector ? this.connector.isEditable() : false; };\n        this.isEditing = function() { return this.connector ? this.connector.isEditing() : false; };\n\n// INITIALISATION CODE\n\n        this.makeEndpoint = function (isSource, el, elId, ep) {\n            elId = elId || this._jsPlumb.instance.getId(el);\n            return this.prepareEndpoint(_jsPlumb, _newEndpoint, this, ep, isSource ? 0 : 1, params, el, elId);\n        };\n\n        // if type given, get the endpoint definitions mapping to that type from the jsplumb instance, and use those.\n        // we apply types at the end of this constructor but endpoints are only honoured in a type definition at\n        // create time.\n        if (params.type) {\n            params.endpoints = this._jsPlumb.instance.deriveEndpointAndAnchorSpec(params.type).endpoints;\n        }\n\n        var eS = this.makeEndpoint(true, this.source, this.sourceId, params.sourceEndpoint),\n            eT = this.makeEndpoint(false, this.target, this.targetId, params.targetEndpoint);\n\n        if (eS) _ju.addToList(params.endpointsByElement, this.sourceId, eS);\n        if (eT) _ju.addToList(params.endpointsByElement, this.targetId, eT);\n        // if scope not set, set it to be the scope for the source endpoint.\n        if (!this.scope) this.scope = this.endpoints[0].scope;\n\n        // if explicitly told to (or not to) delete endpoints on detach, override endpoint's preferences\n        if (params.deleteEndpointsOnDetach != null) {\n            this.endpoints[0]._deleteOnDetach = params.deleteEndpointsOnDetach;\n            this.endpoints[1]._deleteOnDetach = params.deleteEndpointsOnDetach;\n        }\n        else {\n            // otherwise, unless the endpoints say otherwise, mark them for deletion.\n            if (!this.endpoints[0]._doNotDeleteOnDetach) this.endpoints[0]._deleteOnDetach = true;\n            if (!this.endpoints[1]._doNotDeleteOnDetach) this.endpoints[1]._deleteOnDetach = true;\n        }\n\n// -------------------------- DEFAULT TYPE ---------------------------------------------\n\n        // DETACHABLE\n        var _detachable = _jsPlumb.Defaults.ConnectionsDetachable;\n        if (params.detachable === false) _detachable = false;\n        if (this.endpoints[0].connectionsDetachable === false) _detachable = false;\n        if (this.endpoints[1].connectionsDetachable === false) _detachable = false;\n        // REATTACH\n        var _reattach = params.reattach || this.endpoints[0].reattachConnections || this.endpoints[1].reattachConnections || _jsPlumb.Defaults.ReattachConnections;\n\n        this.appendToDefaultType({\n            detachable: _detachable,\n            reattach: _reattach,\n            paintStyle:this.endpoints[0].connectorStyle || this.endpoints[1].connectorStyle || params.paintStyle || _jsPlumb.Defaults.PaintStyle || _jp.Defaults.PaintStyle,\n            hoverPaintStyle:this.endpoints[0].connectorHoverStyle || this.endpoints[1].connectorHoverStyle || params.hoverPaintStyle || _jsPlumb.Defaults.HoverPaintStyle || _jp.Defaults.HoverPaintStyle\n        });\n\n\n        var _suspendedAt = _jsPlumb.getSuspendedAt();\n        if (!_jsPlumb.isSuspendDrawing()) {\n            // paint the endpoints\n            var myInfo = _jsPlumb.getCachedData(this.sourceId),\n                myOffset = myInfo.o, myWH = myInfo.s,\n                otherInfo = _jsPlumb.getCachedData(this.targetId),\n                otherOffset = otherInfo.o,\n                otherWH = otherInfo.s,\n                initialTimestamp = _suspendedAt || _jsPlumb.timestamp(),\n                anchorLoc = this.endpoints[0].anchor.compute({\n                    xy: [ myOffset.left, myOffset.top ], wh: myWH, element: this.endpoints[0],\n                    elementId: this.endpoints[0].elementId,\n                    txy: [ otherOffset.left, otherOffset.top ], twh: otherWH, tElement: this.endpoints[1],\n                    timestamp: initialTimestamp\n                });\n\n            this.endpoints[0].paint({ anchorLoc: anchorLoc, timestamp: initialTimestamp });\n\n            anchorLoc = this.endpoints[1].anchor.compute({\n                xy: [ otherOffset.left, otherOffset.top ], wh: otherWH, element: this.endpoints[1],\n                elementId: this.endpoints[1].elementId,\n                txy: [ myOffset.left, myOffset.top ], twh: myWH, tElement: this.endpoints[0],\n                timestamp: initialTimestamp\n            });\n            this.endpoints[1].paint({ anchorLoc: anchorLoc, timestamp: initialTimestamp });\n        }\n\n        this.getTypeDescriptor = function () {\n            return \"connection\";\n        };\n        this.getAttachedElements = function () {\n            return this.endpoints;\n        };\n\n        this.isDetachable = function () {\n            return this._jsPlumb.detachable === true;\n        };\n        this.setDetachable = function (detachable) {\n            this._jsPlumb.detachable = detachable === true;\n        };\n        this.isReattach = function () {\n            return this._jsPlumb.reattach === true || this.endpoints[0].reattachConnections === true || this.endpoints[1].reattachConnections === true;\n        };\n        this.setReattach = function (reattach) {\n            this._jsPlumb.reattach = reattach === true;\n        };\n\n// END INITIALISATION CODE\n\n\n// COST + DIRECTIONALITY\n        // if cost not supplied, try to inherit from source endpoint\n        this._jsPlumb.cost = params.cost || this.endpoints[0].getConnectionCost();\n        this._jsPlumb.directed = params.directed;\n        // inherit directed flag if set no source endpoint\n        if (params.directed == null) this._jsPlumb.directed = this.endpoints[0].areConnectionsDirected();\n// END COST + DIRECTIONALITY\n\n// PARAMETERS\n        // merge all the parameters objects into the connection.  parameters set\n        // on the connection take precedence; then source endpoint params, then\n        // finally target endpoint params.\n        var _p = _jp.extend({}, this.endpoints[1].getParameters());\n        _jp.extend(_p, this.endpoints[0].getParameters());\n        _jp.extend(_p, this.getParameters());\n        this.setParameters(_p);\n// END PARAMETERS\n\n// PAINTING\n\n        this.setConnector(this.endpoints[0].connector || this.endpoints[1].connector || params.connector || _jsPlumb.Defaults.Connector || _jp.Defaults.Connector, true);\n        if (params.geometry) {\n            this.connector.setGeometry(params.geometry);\n        }\n        var data = params.data == null || !_ju.isObject(params.data) ? {} : params.data;\n        this.getData = function() { return data; };\n        this.setData = function(d) { data = d || {}; };\n        this.mergeData = function(d) { data = _jp.extend(data, d); };\n\n        // the very last thing we do is apply types, if there are any.\n        var _types = [ \"default\", this.endpoints[0].connectionType, this.endpoints[1].connectionType,  params.type ].join(\" \");\n        if (/[^\\s]/.test(_types))\n            this.addType(_types, params.data, true);\n\n        this.updateConnectedClass();\n\n// END PAINTING    \n    };\n\n    _ju.extend(_jp.Connection, _jp.OverlayCapableJsPlumbUIComponent, {\n        applyType: function (t, doNotRepaint, typeMap) {\n\n            // none of these things result in the creation of objects so can be ignored.\n            if (t.detachable != null) this.setDetachable(t.detachable);\n            if (t.reattach != null) this.setReattach(t.reattach);\n            if (t.scope) this.scope = t.scope;\n\n            if (t.cssClass != null && this.canvas) this._jsPlumb.instance.addClass(this.canvas, t.cssClass);\n\n            var _anchors = null;\n            // this also results in the creation of objects.\n            if (t.anchor) {\n                // note that even if the param was anchor, we store `anchors`.\n                _anchors = this.getCachedTypeItem(\"anchors\", typeMap.anchor);\n                if (_anchors == null) {\n                    _anchors = [ this._jsPlumb.instance.makeAnchor(t.anchor), this._jsPlumb.instance.makeAnchor(t.anchor) ];\n                    this.cacheTypeItem(\"anchors\", _anchors, typeMap.anchor);\n                }\n            }\n            else if (t.anchors) {\n                _anchors = this.getCachedTypeItem(\"anchors\", typeMap.anchors);\n                if (_anchors == null) {\n                    _anchors = [\n                        this._jsPlumb.instance.makeAnchor(t.anchors[0]),\n                        this._jsPlumb.instance.makeAnchor(t.anchors[1])\n                    ];\n                    this.cacheTypeItem(\"anchors\", _anchors, typeMap.anchors);\n                }\n            }\n            if (_anchors != null) {\n                this.endpoints[0].anchor = _anchors[0];\n                this.endpoints[1].anchor = _anchors[1];\n                if (this.endpoints[1].anchor.isDynamic) this._jsPlumb.instance.repaint(this.endpoints[1].elementId);\n            }\n\n            _jp.OverlayCapableJsPlumbUIComponent.applyType(this, t);\n        },\n        addClass: function (c, informEndpoints) {\n            if (informEndpoints) {\n                this.endpoints[0].addClass(c);\n                this.endpoints[1].addClass(c);\n                if (this.suspendedEndpoint) this.suspendedEndpoint.addClass(c);\n            }\n            if (this.connector) {\n                this.connector.addClass(c);\n            }\n        },\n        removeClass: function (c, informEndpoints) {\n            if (informEndpoints) {\n                this.endpoints[0].removeClass(c);\n                this.endpoints[1].removeClass(c);\n                if (this.suspendedEndpoint) this.suspendedEndpoint.removeClass(c);\n            }\n            if (this.connector) {\n                this.connector.removeClass(c);\n            }\n        },\n        isVisible: function () {\n            return this._jsPlumb.visible;\n        },\n        setVisible: function (v) {\n            this._jsPlumb.visible = v;\n            if (this.connector)\n                this.connector.setVisible(v);\n            this.repaint();\n        },\n        cleanup: function () {\n            this.updateConnectedClass(true);\n            this.endpoints = null;\n            this.source = null;\n            this.target = null;\n            if (this.connector != null) {\n                this.connector.cleanup(true);\n                this.connector.destroy(true);\n            }\n            this.connector = null;\n        },\n        updateConnectedClass:function(remove) {\n            if (this._jsPlumb) {\n                _updateConnectedClass(this, this.source, this._jsPlumb.instance, remove);\n                _updateConnectedClass(this, this.target, this._jsPlumb.instance, remove);\n            }\n        },\n        setHover: function (state) {\n            if (this.connector && this._jsPlumb && !this._jsPlumb.instance.isConnectionBeingDragged()) {\n                this.connector.setHover(state);\n                root.jsPlumb[state ? \"addClass\" : \"removeClass\"](this.source, this._jsPlumb.instance.hoverSourceClass);\n                root.jsPlumb[state ? \"addClass\" : \"removeClass\"](this.target, this._jsPlumb.instance.hoverTargetClass);\n            }\n        },\n        getUuids:function() {\n            return [ this.endpoints[0].getUuid(), this.endpoints[1].getUuid() ];\n        },\n        getCost: function () {\n            return this._jsPlumb ? this._jsPlumb.cost : -Infinity;\n        },\n        setCost: function (c) {\n            this._jsPlumb.cost = c;\n        },\n        isDirected: function () {\n            return this._jsPlumb.directed === true;\n        },\n        getConnector: function () {\n            return this.connector;\n        },\n        getGeometry : function() { return this.connector ? this.connector.getGeometry() : null; },\n        setGeometry : function(g) { if (this.connector) this.connector.setGeometry(g); },\n        prepareConnector:function(connectorSpec, typeId) {\n            var connectorArgs = {\n                    _jsPlumb: this._jsPlumb.instance,\n                    cssClass: (this._jsPlumb.params.cssClass || \"\") + (this.isEditable() ? this._jsPlumb.instance.editableConnectorClass : \"\"),\n                    container: this._jsPlumb.params.container,\n                    \"pointer-events\": this._jsPlumb.params[\"pointer-events\"],\n                    editable:this.editableRequested\n                },\n                renderMode = this._jsPlumb.instance.getRenderMode(),\n                connector;\n\n            if (_ju.isString(connectorSpec))\n                connector = makeConnector(this._jsPlumb.instance, renderMode, connectorSpec, connectorArgs, this); // lets you use a string as shorthand.\n            else if (_ju.isArray(connectorSpec)) {\n                if (connectorSpec.length == 1)\n                    connector = makeConnector(this._jsPlumb.instance, renderMode, connectorSpec[0], connectorArgs, this);\n                else\n                    connector = makeConnector(this._jsPlumb.instance, renderMode, connectorSpec[0], _ju.merge(connectorSpec[1], connectorArgs), this);\n            }\n            if (typeId != null) connector.typeId = typeId;\n            return connector;\n        },\n        setPreparedConnector: function(connector, doNotRepaint, doNotChangeListenerComponent, typeId) {\n\n            var previous, previousClasses = \"\";\n            // the connector will not be cleaned up if it was set as part of a type, because `typeId` will be set on it\n            // and we havent passed in `true` for \"force\" here.\n            if (this.connector != null) {\n                previous = this.connector;\n                previousClasses = previous.getClass();\n                this.connector.cleanup();\n                this.connector.destroy();\n            }\n\n            this.connector = connector;\n            if (typeId) {\n                this.cacheTypeItem(\"connector\", connector, typeId);\n            }\n\n            this.canvas = this.connector.canvas;\n            this.bgCanvas = this.connector.bgCanvas;\n\n            // put classes from prior connector onto the canvas\n            this.addClass(previousClasses);\n\n            // new: instead of binding listeners per connector, we now just have one delegate on the container.\n            // so for that handler we set the connection as the '_jsPlumb' member of the canvas element, and\n            // bgCanvas, if it exists, which it does right now in the VML renderer, so it won't from v 2.0.0 onwards.\n            if (this.canvas) this.canvas._jsPlumb = this;\n            if (this.bgCanvas) this.bgCanvas._jsPlumb = this;\n\n            if (previous != null) {\n                var o = this.getOverlays();\n                for (var i = 0; i < o.length; i++) {\n                    if (o[i].transfer) o[i].transfer(this.connector);\n                }\n            }\n\n            if (!doNotChangeListenerComponent) this.setListenerComponent(this.connector);\n            if (!doNotRepaint) this.repaint();\n        },\n        setConnector: function (connectorSpec, doNotRepaint, doNotChangeListenerComponent, typeId) {\n            var connector = this.prepareConnector(connectorSpec, typeId);\n            this.setPreparedConnector(connector, doNotRepaint, doNotChangeListenerComponent, typeId);\n        },\n        paint: function (params) {\n\n            if (!this._jsPlumb.instance.isSuspendDrawing() && this._jsPlumb.visible) {\n                params = params || {};\n                var timestamp = params.timestamp,\n                // if the moving object is not the source we must transpose the two references.\n                    swap = false,\n                    tId = swap ? this.sourceId : this.targetId, sId = swap ? this.targetId : this.sourceId,\n                    tIdx = swap ? 0 : 1, sIdx = swap ? 1 : 0;\n\n                if (timestamp == null || timestamp != this._jsPlumb.lastPaintedAt) {\n                    var sourceInfo = this._jsPlumb.instance.updateOffset({elId:sId}).o,\n                        targetInfo = this._jsPlumb.instance.updateOffset({elId:tId}).o,\n                        sE = this.endpoints[sIdx], tE = this.endpoints[tIdx];\n\n                    var sAnchorP = sE.anchor.getCurrentLocation({xy: [sourceInfo.left, sourceInfo.top], wh: [sourceInfo.width, sourceInfo.height], element: sE, timestamp: timestamp}),\n                        tAnchorP = tE.anchor.getCurrentLocation({xy: [targetInfo.left, targetInfo.top], wh: [targetInfo.width, targetInfo.height], element: tE, timestamp: timestamp});\n\n                    this.connector.resetBounds();\n\n                    this.connector.compute({\n                        sourcePos: sAnchorP,\n                        targetPos: tAnchorP,\n                        sourceEndpoint: this.endpoints[sIdx],\n                        targetEndpoint: this.endpoints[tIdx],\n                        \"stroke-width\": this._jsPlumb.paintStyleInUse.strokeWidth,\n                        sourceInfo: sourceInfo,\n                        targetInfo: targetInfo\n                    });\n\n                    var overlayExtents = { minX: Infinity, minY: Infinity, maxX: -Infinity, maxY: -Infinity };\n\n                    // compute overlays. we do this first so we can get their placements, and adjust the\n                    // container if needs be (if an overlay would be clipped)\n                    for (var i in this._jsPlumb.overlays) {\n                        if (this._jsPlumb.overlays.hasOwnProperty(i)) {\n                            var o = this._jsPlumb.overlays[i];\n                            if (o.isVisible()) {\n                                this._jsPlumb.overlayPlacements[i] = o.draw(this.connector, this._jsPlumb.paintStyleInUse, this.getAbsoluteOverlayPosition(o));\n                                overlayExtents.minX = Math.min(overlayExtents.minX, this._jsPlumb.overlayPlacements[i].minX);\n                                overlayExtents.maxX = Math.max(overlayExtents.maxX, this._jsPlumb.overlayPlacements[i].maxX);\n                                overlayExtents.minY = Math.min(overlayExtents.minY, this._jsPlumb.overlayPlacements[i].minY);\n                                overlayExtents.maxY = Math.max(overlayExtents.maxY, this._jsPlumb.overlayPlacements[i].maxY);\n                            }\n                        }\n                    }\n\n                    var lineWidth = parseFloat(this._jsPlumb.paintStyleInUse.strokeWidth || 1) / 2,\n                        outlineWidth = parseFloat(this._jsPlumb.paintStyleInUse.strokeWidth || 0),\n                        extents = {\n                            xmin: Math.min(this.connector.bounds.minX - (lineWidth + outlineWidth), overlayExtents.minX),\n                            ymin: Math.min(this.connector.bounds.minY - (lineWidth + outlineWidth), overlayExtents.minY),\n                            xmax: Math.max(this.connector.bounds.maxX + (lineWidth + outlineWidth), overlayExtents.maxX),\n                            ymax: Math.max(this.connector.bounds.maxY + (lineWidth + outlineWidth), overlayExtents.maxY)\n                        };\n                    // paint the connector.\n                    this.connector.paint(this._jsPlumb.paintStyleInUse, null, extents);\n                    // and then the overlays\n                    for (var j in this._jsPlumb.overlays) {\n                        if (this._jsPlumb.overlays.hasOwnProperty(j)) {\n                            var p = this._jsPlumb.overlays[j];\n                            if (p.isVisible()) {\n                                p.paint(this._jsPlumb.overlayPlacements[j], extents);\n                            }\n                        }\n                    }\n                }\n                this._jsPlumb.lastPaintedAt = timestamp;\n            }\n        },\n        repaint: function (params) {\n            params = params || {};\n            this.paint({ elId: this.sourceId, recalc: !(params.recalc === false), timestamp: params.timestamp});\n        },\n        prepareEndpoint: function (_jsPlumb, _newEndpoint, conn, existing, index, params, element, elementId) {\n            var e;\n            if (existing) {\n                conn.endpoints[index] = existing;\n                existing.addConnection(conn);\n            } else {\n                if (!params.endpoints) params.endpoints = [ null, null ];\n                var ep = params.endpoints[index] || params.endpoint || _jsPlumb.Defaults.Endpoints[index] || _jp.Defaults.Endpoints[index] || _jsPlumb.Defaults.Endpoint || _jp.Defaults.Endpoint;\n                if (!params.endpointStyles) params.endpointStyles = [ null, null ];\n                if (!params.endpointHoverStyles) params.endpointHoverStyles = [ null, null ];\n                var es = params.endpointStyles[index] || params.endpointStyle || _jsPlumb.Defaults.EndpointStyles[index] || _jp.Defaults.EndpointStyles[index] || _jsPlumb.Defaults.EndpointStyle || _jp.Defaults.EndpointStyle;\n                // Endpoints derive their fill from the connector's stroke, if no fill was specified.\n                if (es.fill == null && params.paintStyle != null)\n                    es.fill = params.paintStyle.stroke;\n\n                if (es.outlineStroke == null && params.paintStyle != null)\n                    es.outlineStroke = params.paintStyle.outlineStroke;\n                if (es.outlineWidth == null && params.paintStyle != null)\n                    es.outlineWidth = params.paintStyle.outlineWidth;\n\n                var ehs = params.endpointHoverStyles[index] || params.endpointHoverStyle || _jsPlumb.Defaults.EndpointHoverStyles[index] || _jp.Defaults.EndpointHoverStyles[index] || _jsPlumb.Defaults.EndpointHoverStyle || _jp.Defaults.EndpointHoverStyle;\n                // endpoint hover fill style is derived from connector's hover stroke style\n                if (params.hoverPaintStyle != null) {\n                    if (ehs == null) ehs = {};\n                    if (ehs.fill == null) {\n                        ehs.fill = params.hoverPaintStyle.stroke;\n                    }\n                }\n                var a = params.anchors ? params.anchors[index] :\n                        params.anchor ? params.anchor :\n                            _makeAnchor(_jsPlumb.Defaults.Anchors[index], elementId, _jsPlumb) ||\n                            _makeAnchor(_jp.Defaults.Anchors[index], elementId, _jsPlumb) ||\n                            _makeAnchor(_jsPlumb.Defaults.Anchor, elementId, _jsPlumb) ||\n                            _makeAnchor(_jp.Defaults.Anchor, elementId, _jsPlumb),\n                    u = params.uuids ? params.uuids[index] : null;\n\n                e = _newEndpoint({\n                    paintStyle: es, hoverPaintStyle: ehs, endpoint: ep, connections: [ conn ],\n                    uuid: u, anchor: a, source: element, scope: params.scope,\n                    reattach: params.reattach || _jsPlumb.Defaults.ReattachConnections,\n                    detachable: params.detachable || _jsPlumb.Defaults.ConnectionsDetachable\n                });\n                conn.endpoints[index] = e;\n\n                if (params.drawEndpoints === false) e.setVisible(false, true, true);\n\n            }\n            return e;\n        }\n\n    }); // END Connection class            \n}).call(typeof window !== 'undefined' ? window : this);\n\n/*\n * jsPlumb\n * \n * Title:jsPlumb 2.3.0\n * \n * Provides a way to visually connect elements on an HTML page, using SVG.\n * \n * This file contains the code for creating and manipulating anchors.\n *\n * Copyright (c) 2010 - 2017 jsPlumb (hello@jsplumbtoolkit.com)\n * \n * http://jsplumbtoolkit.com\n * http://github.com/sporritt/jsplumb\n * \n * Dual licensed under the MIT and GPL2 licenses.\n */\n;\n(function () {\n\n    \"use strict\";\n\n    var root = this,\n        _ju = root.jsPlumbUtil,\n        _jp = root.jsPlumb;\n\n    //\n    // manages anchors for all elements.\n    //\n    _jp.AnchorManager = function (params) {\n        var _amEndpoints = {},\n            continuousAnchorLocations = {},\n            userDefinedContinuousAnchorLocations = {},\n            continuousAnchorOrientations = {},\n            Orientation = { HORIZONTAL: \"horizontal\", VERTICAL: \"vertical\", DIAGONAL: \"diagonal\", IDENTITY: \"identity\" },\n            axes = [\"left\", \"top\", \"right\", \"bottom\"],\n            connectionsByElementId = {},\n            self = this,\n            anchorLists = {},\n            jsPlumbInstance = params.jsPlumbInstance,\n            floatingConnections = {},\n            calculateOrientation = function (sourceId, targetId, sd, td, sourceAnchor, targetAnchor) {\n\n                if (sourceId === targetId) return {\n                    orientation: Orientation.IDENTITY,\n                    a: [\"top\", \"top\"]\n                };\n\n                var theta = Math.atan2((td.centery - sd.centery), (td.centerx - sd.centerx)),\n                    theta2 = Math.atan2((sd.centery - td.centery), (sd.centerx - td.centerx));\n\n// --------------------------------------------------------------------------------------\n\n                // improved face calculation. get midpoints of each face for source and target, then put in an array with all combinations of\n                // source/target faces. sort this array by distance between midpoints. the entry at index 0 is our preferred option. we can\n                // go through the array one by one until we find an entry in which each requested face is supported.\n                var candidates = [], midpoints = { };\n                (function (types, dim) {\n                    for (var i = 0; i < types.length; i++) {\n                        midpoints[types[i]] = {\n                            \"left\": [ dim[i].left, dim[i].centery ],\n                            \"right\": [ dim[i].right, dim[i].centery ],\n                            \"top\": [ dim[i].centerx, dim[i].top ],\n                            \"bottom\": [ dim[i].centerx , dim[i].bottom]\n                        };\n                    }\n                })([ \"source\", \"target\" ], [ sd, td ]);\n\n                for (var sf = 0; sf < axes.length; sf++) {\n                    for (var tf = 0; tf < axes.length; tf++) {\n                        candidates.push({\n                            source: axes[sf],\n                            target: axes[tf],\n                            dist: Biltong.lineLength(midpoints.source[axes[sf]], midpoints.target[axes[tf]])\n                        });\n                    }\n                }\n\n                candidates.sort(function (a, b) {\n                    return a.dist < b.dist ? -1 : a.dist > b.dist ? 1 : 0;\n                });\n\n                // now go through this list and try to get an entry that satisfies both (there will be one, unless one of the anchors\n                // declares no available faces)\n                var sourceEdge = candidates[0].source, targetEdge = candidates[0].target;\n                for (var i = 0; i < candidates.length; i++) {\n\n                    if (!sourceAnchor.isContinuous || sourceAnchor.isEdgeSupported(candidates[i].source))\n                        sourceEdge = candidates[i].source;\n                    else\n                        sourceEdge = null;\n\n                    if (!targetAnchor.isContinuous || targetAnchor.isEdgeSupported(candidates[i].target))\n                        targetEdge = candidates[i].target;\n                    else {\n                        targetEdge = null;\n                    }\n\n                    if (sourceEdge != null && targetEdge != null) break;\n                }\n\n// --------------------------------------------------------------------------------------\n\n                return {\n                    a: [ sourceEdge, targetEdge ],\n                    theta: theta,\n                    theta2: theta2\n                };\n            },\n        // used by placeAnchors function\n            placeAnchorsOnLine = function (desc, elementDimensions, elementPosition, connections, horizontal, otherMultiplier, reverse) {\n                var a = [], step = elementDimensions[horizontal ? 0 : 1] / (connections.length + 1);\n\n                for (var i = 0; i < connections.length; i++) {\n                    var val = (i + 1) * step, other = otherMultiplier * elementDimensions[horizontal ? 1 : 0];\n                    if (reverse)\n                        val = elementDimensions[horizontal ? 0 : 1] - val;\n\n                    var dx = (horizontal ? val : other), x = elementPosition[0] + dx, xp = dx / elementDimensions[0],\n                        dy = (horizontal ? other : val), y = elementPosition[1] + dy, yp = dy / elementDimensions[1];\n\n                    a.push([ x, y, xp, yp, connections[i][1], connections[i][2] ]);\n                }\n\n                return a;\n            },\n        // used by edgeSortFunctions\n            currySort = function (reverseAngles) {\n                return function (a, b) {\n                    var r = true;\n                    if (reverseAngles) {\n                        r = a[0][0] < b[0][0];\n                    }\n                    else {\n                        r = a[0][0] > b[0][0];\n                    }\n                    return r === false ? -1 : 1;\n                };\n            },\n        // used by edgeSortFunctions\n            leftSort = function (a, b) {\n                // first get adjusted values\n                var p1 = a[0][0] < 0 ? -Math.PI - a[0][0] : Math.PI - a[0][0],\n                    p2 = b[0][0] < 0 ? -Math.PI - b[0][0] : Math.PI - b[0][0];\n                if (p1 > p2) return 1;\n                else return -1;\n            },\n        // used by placeAnchors\n            edgeSortFunctions = {\n                \"top\": function (a, b) {\n                    return a[0] > b[0] ? 1 : -1;\n                },\n                \"right\": currySort(true),\n                \"bottom\": currySort(true),\n                \"left\": leftSort\n            },\n        // used by placeAnchors\n            _sortHelper = function (_array, _fn) {\n                return _array.sort(_fn);\n            },\n        // used by AnchorManager.redraw\n            placeAnchors = function (elementId, _anchorLists) {\n                var cd = jsPlumbInstance.getCachedData(elementId), sS = cd.s, sO = cd.o,\n                    placeSomeAnchors = function (desc, elementDimensions, elementPosition, unsortedConnections, isHorizontal, otherMultiplier, orientation) {\n                        if (unsortedConnections.length > 0) {\n                            var sc = _sortHelper(unsortedConnections, edgeSortFunctions[desc]), // puts them in order based on the target element's pos on screen\n                                reverse = desc === \"right\" || desc === \"top\",\n                                anchors = placeAnchorsOnLine(desc, elementDimensions,\n                                    elementPosition, sc,\n                                    isHorizontal, otherMultiplier, reverse);\n\n                            // takes a computed anchor position and adjusts it for parent offset and scroll, then stores it.\n                            var _setAnchorLocation = function (endpoint, anchorPos) {\n                                continuousAnchorLocations[endpoint.id] = [ anchorPos[0], anchorPos[1], anchorPos[2], anchorPos[3] ];\n                                continuousAnchorOrientations[endpoint.id] = orientation;\n                            };\n\n                            for (var i = 0; i < anchors.length; i++) {\n                                var c = anchors[i][4], weAreSource = c.endpoints[0].elementId === elementId, weAreTarget = c.endpoints[1].elementId === elementId;\n                                if (weAreSource)\n                                    _setAnchorLocation(c.endpoints[0], anchors[i]);\n                                if (weAreTarget)\n                                    _setAnchorLocation(c.endpoints[1], anchors[i]);\n                            }\n                        }\n                    };\n\n                placeSomeAnchors(\"bottom\", sS, [sO.left, sO.top], _anchorLists.bottom, true, 1, [0, 1]);\n                placeSomeAnchors(\"top\", sS, [sO.left, sO.top], _anchorLists.top, true, 0, [0, -1]);\n                placeSomeAnchors(\"left\", sS, [sO.left, sO.top], _anchorLists.left, false, 0, [-1, 0]);\n                placeSomeAnchors(\"right\", sS, [sO.left, sO.top], _anchorLists.right, false, 1, [1, 0]);\n            };\n\n        this.reset = function () {\n            _amEndpoints = {};\n            connectionsByElementId = {};\n            anchorLists = {};\n        };\n        this.addFloatingConnection = function (key, conn) {\n            floatingConnections[key] = conn;\n        };\n        this.removeFloatingConnection = function (key) {\n            delete floatingConnections[key];\n        };\n        this.newConnection = function (conn) {\n            var sourceId = conn.sourceId, targetId = conn.targetId,\n                ep = conn.endpoints,\n                doRegisterTarget = true,\n                registerConnection = function (otherIndex, otherEndpoint, otherAnchor, elId, c) {\n                    if ((sourceId == targetId) && otherAnchor.isContinuous) {\n                        // remove the target endpoint's canvas.  we dont need it.\n                        conn._jsPlumb.instance.removeElement(ep[1].canvas);\n                        doRegisterTarget = false;\n                    }\n                    _ju.addToList(connectionsByElementId, elId, [c, otherEndpoint, otherAnchor.constructor == _jp.DynamicAnchor]);\n                };\n\n            registerConnection(0, ep[0], ep[0].anchor, targetId, conn);\n            if (doRegisterTarget)\n                registerConnection(1, ep[1], ep[1].anchor, sourceId, conn);\n        };\n        var removeEndpointFromAnchorLists = function (endpoint) {\n            (function (list, eId) {\n                if (list) {  // transient anchors dont get entries in this list.\n                    var f = function (e) {\n                        return e[4] == eId;\n                    };\n                    _ju.removeWithFunction(list.top, f);\n                    _ju.removeWithFunction(list.left, f);\n                    _ju.removeWithFunction(list.bottom, f);\n                    _ju.removeWithFunction(list.right, f);\n                }\n            })(anchorLists[endpoint.elementId], endpoint.id);\n        };\n        this.connectionDetached = function (connInfo, doNotRedraw) {\n            var connection = connInfo.connection || connInfo,\n                sourceId = connInfo.sourceId,\n                targetId = connInfo.targetId,\n                ep = connection.endpoints,\n                removeConnection = function (otherIndex, otherEndpoint, otherAnchor, elId, c) {\n                   _ju.removeWithFunction(connectionsByElementId[elId], function (_c) {\n                        return _c[0].id == c.id;\n                    });\n                };\n\n            removeConnection(1, ep[1], ep[1].anchor, sourceId, connection);\n            removeConnection(0, ep[0], ep[0].anchor, targetId, connection);\n            if (connection.floatingId) {\n                removeConnection(connection.floatingIndex, connection.floatingEndpoint, connection.floatingEndpoint.anchor, connection.floatingId, connection);\n                removeEndpointFromAnchorLists(connection.floatingEndpoint);\n            }\n\n            // remove from anchorLists            \n            removeEndpointFromAnchorLists(connection.endpoints[0]);\n            removeEndpointFromAnchorLists(connection.endpoints[1]);\n\n            if (!doNotRedraw) {\n                self.redraw(connection.sourceId);\n                if (connection.targetId !== connection.sourceId)\n                    self.redraw(connection.targetId);\n            }\n        };\n        this.add = function (endpoint, elementId) {\n            _ju.addToList(_amEndpoints, elementId, endpoint);\n        };\n        this.changeId = function (oldId, newId) {\n            connectionsByElementId[newId] = connectionsByElementId[oldId];\n            _amEndpoints[newId] = _amEndpoints[oldId];\n            delete connectionsByElementId[oldId];\n            delete _amEndpoints[oldId];\n        };\n        this.getConnectionsFor = function (elementId) {\n            return connectionsByElementId[elementId] || [];\n        };\n        this.getEndpointsFor = function (elementId) {\n            return _amEndpoints[elementId] || [];\n        };\n        this.deleteEndpoint = function (endpoint) {\n            _ju.removeWithFunction(_amEndpoints[endpoint.elementId], function (e) {\n                return e.id == endpoint.id;\n            });\n            removeEndpointFromAnchorLists(endpoint);\n        };\n        this.clearFor = function (elementId) {\n            delete _amEndpoints[elementId];\n            _amEndpoints[elementId] = [];\n        };\n        // updates the given anchor list by either updating an existing anchor's info, or adding it. this function\n        // also removes the anchor from its previous list, if the edge it is on has changed.\n        // all connections found along the way (those that are connected to one of the faces this function\n        // operates on) are added to the connsToPaint list, as are their endpoints. in this way we know to repaint\n        // them wthout having to calculate anything else about them.\n        var _updateAnchorList = function (lists, theta, order, conn, aBoolean, otherElId, idx, reverse, edgeId, elId, connsToPaint, endpointsToPaint) {\n            // first try to find the exact match, but keep track of the first index of a matching element id along the way.s\n            var exactIdx = -1,\n                firstMatchingElIdx = -1,\n                endpoint = conn.endpoints[idx],\n                endpointId = endpoint.id,\n                oIdx = [1, 0][idx],\n                values = [\n                    [ theta, order ],\n                    conn,\n                    aBoolean,\n                    otherElId,\n                    endpointId\n                ],\n                listToAddTo = lists[edgeId],\n                listToRemoveFrom = endpoint._continuousAnchorEdge ? lists[endpoint._continuousAnchorEdge] : null,\n                i,\n                candidate;\n\n            if (listToRemoveFrom) {\n                var rIdx = _ju.findWithFunction(listToRemoveFrom, function (e) {\n                    return e[4] == endpointId;\n                });\n                if (rIdx != -1) {\n                    listToRemoveFrom.splice(rIdx, 1);\n                    // get all connections from this list\n                    for (i = 0; i < listToRemoveFrom.length; i++) {\n                        candidate = listToRemoveFrom[i][1];\n                        _ju.addWithFunction(connsToPaint, candidate, function (c) {\n                            return c.id == candidate.id;\n                        });\n                        _ju.addWithFunction(endpointsToPaint, listToRemoveFrom[i][1].endpoints[idx], function (e) {\n                            return e.id == candidate.endpoints[idx].id;\n                        });\n                        _ju.addWithFunction(endpointsToPaint, listToRemoveFrom[i][1].endpoints[oIdx], function (e) {\n                            return e.id == candidate.endpoints[oIdx].id;\n                        });\n                    }\n                }\n            }\n\n            for (i = 0; i < listToAddTo.length; i++) {\n                candidate = listToAddTo[i][1];\n                if (params.idx == 1 && listToAddTo[i][3] === otherElId && firstMatchingElIdx == -1)\n                    firstMatchingElIdx = i;\n                _ju.addWithFunction(connsToPaint, candidate, function (c) {\n                    return c.id == candidate.id;\n                });\n                _ju.addWithFunction(endpointsToPaint, listToAddTo[i][1].endpoints[idx], function (e) {\n                    return e.id == candidate.endpoints[idx].id;\n                });\n                _ju.addWithFunction(endpointsToPaint, listToAddTo[i][1].endpoints[oIdx], function (e) {\n                    return e.id == candidate.endpoints[oIdx].id;\n                });\n            }\n            if (exactIdx != -1) {\n                listToAddTo[exactIdx] = values;\n            }\n            else {\n                var insertIdx = reverse ? firstMatchingElIdx != -1 ? firstMatchingElIdx : 0 : listToAddTo.length; // of course we will get this from having looked through the array shortly.\n                listToAddTo.splice(insertIdx, 0, values);\n            }\n\n            // store this for next time.\n            endpoint._continuousAnchorEdge = edgeId;\n        };\n\n        //\n        // find the entry in an endpoint's list for this connection and update its target endpoint\n        // with the current target in the connection.\n        // This method and sourceChanged need to be folder into one.\n        //\n        this.updateOtherEndpoint = function (sourceElId, oldTargetId, newTargetId, connection) {\n            var sIndex = _ju.findWithFunction(connectionsByElementId[sourceElId], function (i) {\n                    return i[0].id === connection.id;\n                }),\n                tIndex = _ju.findWithFunction(connectionsByElementId[oldTargetId], function (i) {\n                    return i[0].id === connection.id;\n                });\n\n            // update or add data for source\n            if (sIndex != -1) {\n                connectionsByElementId[sourceElId][sIndex][0] = connection;\n                connectionsByElementId[sourceElId][sIndex][1] = connection.endpoints[1];\n                connectionsByElementId[sourceElId][sIndex][2] = connection.endpoints[1].anchor.constructor == _jp.DynamicAnchor;\n            }\n\n            // remove entry for previous target (if there)\n            if (tIndex > -1) {\n                connectionsByElementId[oldTargetId].splice(tIndex, 1);\n                // add entry for new target\n                _ju.addToList(connectionsByElementId, newTargetId, [connection, connection.endpoints[0], connection.endpoints[0].anchor.constructor == _jp.DynamicAnchor]);\n            }\n\n            connection.updateConnectedClass();\n        };\n\n        //\n        // notification that the connection given has changed source from the originalId to the newId.\n        // This involves:\n        // 1. removing the connection from the list of connections stored for the originalId\n        // 2. updating the source information for the target of the connection\n        // 3. re-registering the connection in connectionsByElementId with the newId\n        //\n        this.sourceChanged = function (originalId, newId, connection, newElement) {\n            if (originalId !== newId) {\n\n                connection.sourceId = newId;\n                connection.source = newElement;\n\n                // remove the entry that points from the old source to the target\n                _ju.removeWithFunction(connectionsByElementId[originalId], function (info) {\n                    return info[0].id === connection.id;\n                });\n                // find entry for target and update it\n                var tIdx = _ju.findWithFunction(connectionsByElementId[connection.targetId], function (i) {\n                    return i[0].id === connection.id;\n                });\n                if (tIdx > -1) {\n                    connectionsByElementId[connection.targetId][tIdx][0] = connection;\n                    connectionsByElementId[connection.targetId][tIdx][1] = connection.endpoints[0];\n                    connectionsByElementId[connection.targetId][tIdx][2] = connection.endpoints[0].anchor.constructor == _jp.DynamicAnchor;\n                }\n                // add entry for new source\n                _ju.addToList(connectionsByElementId, newId, [connection, connection.endpoints[1], connection.endpoints[1].anchor.constructor == _jp.DynamicAnchor]);\n\n                // TODO SP not final on this yet. when a user drags an existing connection and it turns into a self\n                // loop, then this code hides the target endpoint (by removing it from the DOM) But I think this should\n                // occur only if the anchor is Continuous\n                if (connection.endpoints[1].anchor.isContinuous) {\n                    if (connection.source === connection.target) {\n                        connection._jsPlumb.instance.removeElement(connection.endpoints[1].canvas);\n                    }\n                    else {\n                        if (connection.endpoints[1].canvas.parentNode == null) {\n                            connection._jsPlumb.instance.appendElement(connection.endpoints[1].canvas);\n                        }\n                    }\n                }\n\n                connection.updateConnectedClass();\n            }\n        };\n\n        //\n        // moves the given endpoint from `currentId` to `element`.\n        // This involves:\n        //\n        // 1. changing the key in _amEndpoints under which the endpoint is stored\n        // 2. changing the source or target values in all of the endpoint's connections\n        // 3. changing the array in connectionsByElementId in which the endpoint's connections\n        //    are stored (done by either sourceChanged or updateOtherEndpoint)\n        //\n        this.rehomeEndpoint = function (ep, currentId, element) {\n            var eps = _amEndpoints[currentId] || [],\n                elementId = jsPlumbInstance.getId(element);\n\n            if (elementId !== currentId) {\n                var idx = eps.indexOf(ep);\n                if (idx > -1) {\n                    var _ep = eps.splice(idx, 1)[0];\n                    self.add(_ep, elementId);\n                }\n            }\n\n            for (var i = 0; i < ep.connections.length; i++) {\n                if (ep.connections[i].sourceId == currentId) {\n                    //ep.connections[i].sourceId = ep.elementId;\n                    //ep.connections[i].source = ep.element;\n                    self.sourceChanged(currentId, ep.elementId, ep.connections[i], ep.element);\n                }\n                else if (ep.connections[i].targetId == currentId) {\n                    ep.connections[i].targetId = ep.elementId;\n                    ep.connections[i].target = ep.element;\n                    self.updateOtherEndpoint(ep.connections[i].sourceId, currentId, ep.elementId, ep.connections[i]);\n                }\n            }\n        };\n\n        this.redraw = function (elementId, ui, timestamp, offsetToUI, clearEdits, doNotRecalcEndpoint) {\n\n            if (!jsPlumbInstance.isSuspendDrawing()) {\n                // get all the endpoints for this element\n                var ep = _amEndpoints[elementId] || [],\n                    endpointConnections = connectionsByElementId[elementId] || [],\n                    connectionsToPaint = [],\n                    endpointsToPaint = [],\n                    anchorsToUpdate = [];\n\n                timestamp = timestamp || jsPlumbInstance.timestamp();\n                // offsetToUI are values that would have been calculated in the dragManager when registering\n                // an endpoint for an element that had a parent (somewhere in the hierarchy) that had been\n                // registered as draggable.\n                offsetToUI = offsetToUI || {left: 0, top: 0};\n                if (ui) {\n                    ui = {\n                        left: ui.left + offsetToUI.left,\n                        top: ui.top + offsetToUI.top\n                    };\n                }\n\n                // valid for one paint cycle.\n                var myOffset = jsPlumbInstance.updateOffset({ elId: elementId, offset: ui, recalc: false, timestamp: timestamp }),\n                    orientationCache = {};\n\n                // actually, first we should compute the orientation of this element to all other elements to which\n                // this element is connected with a continuous anchor (whether both ends of the connection have\n                // a continuous anchor or just one)\n\n                for (var i = 0; i < endpointConnections.length; i++) {\n                    var conn = endpointConnections[i][0],\n                        sourceId = conn.sourceId,\n                        targetId = conn.targetId,\n                        sourceContinuous = conn.endpoints[0].anchor.isContinuous,\n                        targetContinuous = conn.endpoints[1].anchor.isContinuous;\n\n                    if (sourceContinuous || targetContinuous) {\n                        var oKey = sourceId + \"_\" + targetId,\n                            o = orientationCache[oKey],\n                            oIdx = conn.sourceId == elementId ? 1 : 0;\n\n                        if (sourceContinuous && !anchorLists[sourceId]) anchorLists[sourceId] = { top: [], right: [], bottom: [], left: [] };\n                        if (targetContinuous && !anchorLists[targetId]) anchorLists[targetId] = { top: [], right: [], bottom: [], left: [] };\n\n                        if (elementId != targetId) jsPlumbInstance.updateOffset({ elId: targetId, timestamp: timestamp });\n                        if (elementId != sourceId) jsPlumbInstance.updateOffset({ elId: sourceId, timestamp: timestamp });\n\n                        var td = jsPlumbInstance.getCachedData(targetId),\n                            sd = jsPlumbInstance.getCachedData(sourceId);\n\n                        if (targetId == sourceId && (sourceContinuous || targetContinuous)) {\n                            // here we may want to improve this by somehow determining the face we'd like\n                            // to put the connector on.  ideally, when drawing, the face should be calculated\n                            // by determining which face is closest to the point at which the mouse button\n                            // was released.  for now, we're putting it on the top face.\n                            _updateAnchorList( anchorLists[sourceId], -Math.PI / 2, 0, conn, false, targetId, 0, false, \"top\", sourceId, connectionsToPaint, endpointsToPaint);\n                            _updateAnchorList( anchorLists[targetId], -Math.PI / 2, 0, conn, false, sourceId, 1, false, \"top\", targetId, connectionsToPaint, endpointsToPaint);\n                        }\n                        else {\n                            if (!o) {\n                                o = calculateOrientation(sourceId, targetId, sd.o, td.o, conn.endpoints[0].anchor, conn.endpoints[1].anchor);\n                                orientationCache[oKey] = o;\n                                // this would be a performance enhancement, but the computed angles need to be clamped to\n                                //the (-PI/2 -> PI/2) range in order for the sorting to work properly.\n                                /*  orientationCache[oKey2] = {\n                                 orientation:o.orientation,\n                                 a:[o.a[1], o.a[0]],\n                                 theta:o.theta + Math.PI,\n                                 theta2:o.theta2 + Math.PI\n                                 };*/\n                            }\n                            if (sourceContinuous) _updateAnchorList(anchorLists[sourceId], o.theta, 0, conn, false, targetId, 0, false, o.a[0], sourceId, connectionsToPaint, endpointsToPaint);\n                            if (targetContinuous) _updateAnchorList(anchorLists[targetId], o.theta2, -1, conn, true, sourceId, 1, true, o.a[1], targetId, connectionsToPaint, endpointsToPaint);\n                        }\n\n                        if (sourceContinuous) _ju.addWithFunction(anchorsToUpdate, sourceId, function (a) {\n                            return a === sourceId;\n                        });\n                        if (targetContinuous) _ju.addWithFunction(anchorsToUpdate, targetId, function (a) {\n                            return a === targetId;\n                        });\n                        _ju.addWithFunction(connectionsToPaint, conn, function (c) {\n                            return c.id == conn.id;\n                        });\n                        if ((sourceContinuous && oIdx === 0) || (targetContinuous && oIdx === 1))\n                            _ju.addWithFunction(endpointsToPaint, conn.endpoints[oIdx], function (e) {\n                                return e.id == conn.endpoints[oIdx].id;\n                            });\n                    }\n                }\n\n                // place Endpoints whose anchors are continuous but have no Connections\n                for (i = 0; i < ep.length; i++) {\n                    if (ep[i].connections.length === 0 && ep[i].anchor.isContinuous) {\n                        if (!anchorLists[elementId]) anchorLists[elementId] = { top: [], right: [], bottom: [], left: [] };\n                        _updateAnchorList(anchorLists[elementId], -Math.PI / 2, 0, {endpoints: [ep[i], ep[i]], paint: function () {\n                        }}, false, elementId, 0, false, ep[i].anchor.getDefaultFace(), elementId, connectionsToPaint, endpointsToPaint);\n                        _ju.addWithFunction(anchorsToUpdate, elementId, function (a) {\n                            return a === elementId;\n                        });\n                    }\n                }\n\n\n                // now place all the continuous anchors we need to;\n                for (i = 0; i < anchorsToUpdate.length; i++) {\n                    placeAnchors(anchorsToUpdate[i], anchorLists[anchorsToUpdate[i]]);\n                }\n\n                // now that continuous anchors have been placed, paint all the endpoints for this element\n                // TODO performance: add the endpoint ids to a temp array, and then when iterating in the next\n                // loop, check that we didn't just paint that endpoint. we can probably shave off a few more milliseconds this way.\n                for (i = 0; i < ep.length; i++) {\n                    ep[i].paint({ timestamp: timestamp, offset: myOffset, dimensions: myOffset.s, recalc: doNotRecalcEndpoint !== true });\n                }\n\n                // ... and any other endpoints we came across as a result of the continuous anchors.\n                for (i = 0; i < endpointsToPaint.length; i++) {\n                    var cd = jsPlumbInstance.getCachedData(endpointsToPaint[i].elementId);\n                    endpointsToPaint[i].paint({ timestamp: timestamp, offset: cd, dimensions: cd.s });\n                }\n\n                // paint all the standard and \"dynamic connections\", which are connections whose other anchor is\n                // static and therefore does need to be recomputed; we make sure that happens only one time.\n\n                // TODO we could have compiled a list of these in the first pass through connections; might save some time.\n                for (i = 0; i < endpointConnections.length; i++) {\n                    var otherEndpoint = endpointConnections[i][1];\n                    if (otherEndpoint.anchor.constructor == _jp.DynamicAnchor) {\n                        otherEndpoint.paint({ elementWithPrecedence: elementId, timestamp: timestamp });\n                        _ju.addWithFunction(connectionsToPaint, endpointConnections[i][0], function (c) {\n                            return c.id == endpointConnections[i][0].id;\n                        });\n                        // all the connections for the other endpoint now need to be repainted\n                        for (var k = 0; k < otherEndpoint.connections.length; k++) {\n                            if (otherEndpoint.connections[k] !== endpointConnections[i][0])\n                                _ju.addWithFunction(connectionsToPaint, otherEndpoint.connections[k], function (c) {\n                                    return c.id == otherEndpoint.connections[k].id;\n                                });\n                        }\n                    } else if (otherEndpoint.anchor.constructor == _jp.Anchor) {\n                        _ju.addWithFunction(connectionsToPaint, endpointConnections[i][0], function (c) {\n                            return c.id == endpointConnections[i][0].id;\n                        });\n                    }\n                }\n\n                // paint current floating connection for this element, if there is one.\n                var fc = floatingConnections[elementId];\n                if (fc)\n                    fc.paint({timestamp: timestamp, recalc: false, elId: elementId});\n\n                // paint all the connections\n                for (i = 0; i < connectionsToPaint.length; i++) {\n                    connectionsToPaint[i].paint({elId: elementId, timestamp: timestamp, recalc: false, clearEdits: clearEdits});\n                }\n            }\n        };\n\n        var ContinuousAnchor = function (anchorParams) {\n            _ju.EventGenerator.apply(this);\n            this.type = \"Continuous\";\n            this.isDynamic = true;\n            this.isContinuous = true;\n            var faces = anchorParams.faces || [\"top\", \"right\", \"bottom\", \"left\"],\n                clockwise = !(anchorParams.clockwise === false),\n                availableFaces = { },\n                opposites = { \"top\": \"bottom\", \"right\": \"left\", \"left\": \"right\", \"bottom\": \"top\" },\n                clockwiseOptions = { \"top\": \"right\", \"right\": \"bottom\", \"left\": \"top\", \"bottom\": \"left\" },\n                antiClockwiseOptions = { \"top\": \"left\", \"right\": \"top\", \"left\": \"bottom\", \"bottom\": \"right\" },\n                secondBest = clockwise ? clockwiseOptions : antiClockwiseOptions,\n                lastChoice = clockwise ? antiClockwiseOptions : clockwiseOptions,\n                cssClass = anchorParams.cssClass || \"\";\n\n            for (var i = 0; i < faces.length; i++) {\n                availableFaces[faces[i]] = true;\n            }\n\n            this.getDefaultFace = function () {\n                return faces.length === 0 ? \"top\" : faces[0];\n            };\n\n            // if the given edge is supported, returns it. otherwise looks for a substitute that _is_\n            // supported. if none supported we also return the request edge.\n            this.verifyEdge = function (edge) {\n                if (availableFaces[edge]) return edge;\n                else if (availableFaces[opposites[edge]]) return opposites[edge];\n                else if (availableFaces[secondBest[edge]]) return secondBest[edge];\n                else if (availableFaces[lastChoice[edge]]) return lastChoice[edge];\n                return edge; // we have to give them something.\n            };\n\n            this.isEdgeSupported = function (edge) {\n                return availableFaces[edge] === true;\n            };\n\n            this.compute = function (params) {\n                return userDefinedContinuousAnchorLocations[params.element.id] || continuousAnchorLocations[params.element.id] || [0, 0];\n            };\n            this.getCurrentLocation = function (params) {\n                return userDefinedContinuousAnchorLocations[params.element.id] || continuousAnchorLocations[params.element.id] || [0, 0];\n            };\n            this.getOrientation = function (endpoint) {\n                return continuousAnchorOrientations[endpoint.id] || [0, 0];\n            };\n            this.clearUserDefinedLocation = function () {\n                delete userDefinedContinuousAnchorLocations[anchorParams.elementId];\n            };\n            this.setUserDefinedLocation = function (loc) {\n                userDefinedContinuousAnchorLocations[anchorParams.elementId] = loc;\n            };\n            this.getCssClass = function () {\n                return cssClass;\n            };\n        };\n\n        // continuous anchors\n        jsPlumbInstance.continuousAnchorFactory = {\n            get: function (params) {\n                return new ContinuousAnchor(params);\n            },\n            clear: function (elementId) {\n                delete userDefinedContinuousAnchorLocations[elementId];\n                delete continuousAnchorLocations[elementId];\n            }\n        };\n    };\n\n    /**\n     * Anchors model a position on some element at which an Endpoint may be located.  They began as a first class citizen of jsPlumb, ie. a user\n     * was required to create these themselves, but over time this has been replaced by the concept of referring to them either by name (eg. \"TopMiddle\"),\n     * or by an array describing their coordinates (eg. [ 0, 0.5, 0, -1 ], which is the same as \"TopMiddle\").  jsPlumb now handles all of the\n     * creation of Anchors without user intervention.\n     */\n    _jp.Anchor = function (params) {\n        this.x = params.x || 0;\n        this.y = params.y || 0;\n        this.elementId = params.elementId;\n        this.cssClass = params.cssClass || \"\";\n        this.userDefinedLocation = null;\n        this.orientation = params.orientation || [ 0, 0 ];\n        this.lastReturnValue = null;\n        this.offsets = params.offsets || [ 0, 0 ];\n        this.timestamp = null;\n\n        _ju.EventGenerator.apply(this);\n\n        this.compute = function (params) {\n\n            var xy = params.xy, wh = params.wh, timestamp = params.timestamp;\n\n            if (params.clearUserDefinedLocation)\n                this.userDefinedLocation = null;\n\n            if (timestamp && timestamp === this.timestamp)\n                return this.lastReturnValue;\n\n            if (this.userDefinedLocation != null) {\n                this.lastReturnValue = this.userDefinedLocation;\n            }\n            else {\n                this.lastReturnValue = [ xy[0] + (this.x * wh[0]) + this.offsets[0], xy[1] + (this.y * wh[1]) + this.offsets[1] ];\n            }\n\n            this.timestamp = timestamp;\n            return this.lastReturnValue;\n        };\n\n        this.getCurrentLocation = function (params) {\n            params = params || {};\n            return (this.lastReturnValue == null || (params.timestamp != null && this.timestamp != params.timestamp)) ? this.compute(params) : this.lastReturnValue;\n        };\n    };\n    _ju.extend(_jp.Anchor, _ju.EventGenerator, {\n        equals: function (anchor) {\n            if (!anchor) return false;\n            var ao = anchor.getOrientation(),\n                o = this.getOrientation();\n            return this.x == anchor.x && this.y == anchor.y && this.offsets[0] == anchor.offsets[0] && this.offsets[1] == anchor.offsets[1] && o[0] == ao[0] && o[1] == ao[1];\n        },\n        getUserDefinedLocation: function () {\n            return this.userDefinedLocation;\n        },\n        setUserDefinedLocation: function (l) {\n            this.userDefinedLocation = l;\n        },\n        clearUserDefinedLocation: function () {\n            this.userDefinedLocation = null;\n        },\n        getOrientation: function () {\n            return this.orientation;\n        },\n        getCssClass: function () {\n            return this.cssClass;\n        }\n    });\n\n    /**\n     * An Anchor that floats. its orientation is computed dynamically from\n     * its position relative to the anchor it is floating relative to.  It is used when creating\n     * a connection through drag and drop.\n     *\n     * TODO FloatingAnchor could totally be refactored to extend Anchor just slightly.\n     */\n    _jp.FloatingAnchor = function (params) {\n\n        _jp.Anchor.apply(this, arguments);\n\n        // this is the anchor that this floating anchor is referenced to for\n        // purposes of calculating the orientation.\n        var ref = params.reference,\n            // the canvas this refers to.\n            refCanvas = params.referenceCanvas,\n            size = _jp.getSize(refCanvas),\n            // these are used to store the current relative position of our\n            // anchor wrt the reference anchor. they only indicate\n            // direction, so have a value of 1 or -1 (or, very rarely, 0). these\n            // values are written by the compute method, and read\n            // by the getOrientation method.\n            xDir = 0, yDir = 0,\n            // temporary member used to store an orientation when the floating\n            // anchor is hovering over another anchor.\n            orientation = null,\n            _lastResult = null;\n\n        // clear from parent. we want floating anchor orientation to always be computed.\n        this.orientation = null;\n\n        // set these to 0 each; they are used by certain types of connectors in the loopback case,\n        // when the connector is trying to clear the element it is on. but for floating anchor it's not\n        // very important.\n        this.x = 0;\n        this.y = 0;\n\n        this.isFloating = true;\n\n        this.compute = function (params) {\n            var xy = params.xy,\n                result = [ xy[0] + (size[0] / 2), xy[1] + (size[1] / 2) ]; // return origin of the element. we may wish to improve this so that any object can be the drag proxy.\n            _lastResult = result;\n            return result;\n        };\n\n        this.getOrientation = function (_endpoint) {\n            if (orientation) return orientation;\n            else {\n                var o = ref.getOrientation(_endpoint);\n                // here we take into account the orientation of the other\n                // anchor: if it declares zero for some direction, we declare zero too. this might not be the most awesome. perhaps we can come\n                // up with a better way. it's just so that the line we draw looks like it makes sense. maybe this wont make sense.\n                return [ Math.abs(o[0]) * xDir * -1,\n                        Math.abs(o[1]) * yDir * -1 ];\n            }\n        };\n\n        /**\n         * notification the endpoint associated with this anchor is hovering\n         * over another anchor; we want to assume that anchor's orientation\n         * for the duration of the hover.\n         */\n        this.over = function (anchor, endpoint) {\n            orientation = anchor.getOrientation(endpoint);\n        };\n\n        /**\n         * notification the endpoint associated with this anchor is no\n         * longer hovering over another anchor; we should resume calculating\n         * orientation as we normally do.\n         */\n        this.out = function () {\n            orientation = null;\n        };\n\n        this.getCurrentLocation = function (params) {\n            return _lastResult == null ? this.compute(params) : _lastResult;\n        };\n    };\n    _ju.extend(_jp.FloatingAnchor, _jp.Anchor);\n\n    var _convertAnchor = function (anchor, jsPlumbInstance, elementId) {\n        return anchor.constructor == _jp.Anchor ? anchor : jsPlumbInstance.makeAnchor(anchor, elementId, jsPlumbInstance);\n    };\n\n    /* \n     * A DynamicAnchor is an Anchor that contains a list of other Anchors, which it cycles\n     * through at compute time to find the one that is located closest to\n     * the center of the target element, and returns that Anchor's compute\n     * method result. this causes endpoints to follow each other with\n     * respect to the orientation of their target elements, which is a useful\n     * feature for some applications.\n     * \n     */\n    _jp.DynamicAnchor = function (params) {\n        _jp.Anchor.apply(this, arguments);\n\n        this.isDynamic = true;\n        this.anchors = [];\n        this.elementId = params.elementId;\n        this.jsPlumbInstance = params.jsPlumbInstance;\n\n        for (var i = 0; i < params.anchors.length; i++)\n            this.anchors[i] = _convertAnchor(params.anchors[i], this.jsPlumbInstance, this.elementId);\n\n        this.getAnchors = function () {\n            return this.anchors;\n        };\n        this.locked = false;\n        var _curAnchor = this.anchors.length > 0 ? this.anchors[0] : null,\n            _lastAnchor = _curAnchor,\n            self = this,\n\n        // helper method to calculate the distance between the centers of the two elements.\n            _distance = function (anchor, cx, cy, xy, wh) {\n                var ax = xy[0] + (anchor.x * wh[0]), ay = xy[1] + (anchor.y * wh[1]),\n                    acx = xy[0] + (wh[0] / 2), acy = xy[1] + (wh[1] / 2);\n                return (Math.sqrt(Math.pow(cx - ax, 2) + Math.pow(cy - ay, 2)) +\n                    Math.sqrt(Math.pow(acx - ax, 2) + Math.pow(acy - ay, 2)));\n            },\n        // default method uses distance between element centers.  you can provide your own method in the dynamic anchor\n        // constructor (and also to jsPlumb.makeDynamicAnchor). the arguments to it are four arrays:\n        // xy - xy loc of the anchor's element\n        // wh - anchor's element's dimensions\n        // txy - xy loc of the element of the other anchor in the connection\n        // twh - dimensions of the element of the other anchor in the connection.\n        // anchors - the list of selectable anchors\n            _anchorSelector = params.selector || function (xy, wh, txy, twh, anchors) {\n                var cx = txy[0] + (twh[0] / 2), cy = txy[1] + (twh[1] / 2);\n                var minIdx = -1, minDist = Infinity;\n                for (var i = 0; i < anchors.length; i++) {\n                    var d = _distance(anchors[i], cx, cy, xy, wh);\n                    if (d < minDist) {\n                        minIdx = i + 0;\n                        minDist = d;\n                    }\n                }\n                return anchors[minIdx];\n            };\n\n        this.compute = function (params) {\n            var xy = params.xy, wh = params.wh, txy = params.txy, twh = params.twh;\n\n            this.timestamp = params.timestamp;\n\n            var udl = self.getUserDefinedLocation();\n            if (udl != null) {\n                return udl;\n            }\n\n            // if anchor is locked or an opposite element was not given, we\n            // maintain our state. anchor will be locked\n            // if it is the source of a drag and drop.\n            if (this.locked || txy == null || twh == null)\n                return _curAnchor.compute(params);\n            else\n                params.timestamp = null; // otherwise clear this, i think. we want the anchor to compute.\n\n            _curAnchor = _anchorSelector(xy, wh, txy, twh, this.anchors);\n            this.x = _curAnchor.x;\n            this.y = _curAnchor.y;\n\n            if (_curAnchor != _lastAnchor)\n                this.fire(\"anchorChanged\", _curAnchor);\n\n            _lastAnchor = _curAnchor;\n\n            return _curAnchor.compute(params);\n        };\n\n        this.getCurrentLocation = function (params) {\n            return this.getUserDefinedLocation() || (_curAnchor != null ? _curAnchor.getCurrentLocation(params) : null);\n        };\n\n        this.getOrientation = function (_endpoint) {\n            return _curAnchor != null ? _curAnchor.getOrientation(_endpoint) : [ 0, 0 ];\n        };\n        this.over = function (anchor, endpoint) {\n            if (_curAnchor != null) _curAnchor.over(anchor, endpoint);\n        };\n        this.out = function () {\n            if (_curAnchor != null) _curAnchor.out();\n        };\n\n        this.getCssClass = function () {\n            return (_curAnchor && _curAnchor.getCssClass()) || \"\";\n        };\n    };\n    _ju.extend(_jp.DynamicAnchor, _jp.Anchor);\n\n// -------- basic anchors ------------------    \n    var _curryAnchor = function (x, y, ox, oy, type, fnInit) {\n        _jp.Anchors[type] = function (params) {\n            var a = params.jsPlumbInstance.makeAnchor([ x, y, ox, oy, 0, 0 ], params.elementId, params.jsPlumbInstance);\n            a.type = type;\n            if (fnInit) fnInit(a, params);\n            return a;\n        };\n    };\n\n    _curryAnchor(0.5, 0, 0, -1, \"TopCenter\");\n    _curryAnchor(0.5, 1, 0, 1, \"BottomCenter\");\n    _curryAnchor(0, 0.5, -1, 0, \"LeftMiddle\");\n    _curryAnchor(1, 0.5, 1, 0, \"RightMiddle\");\n\n    _curryAnchor(0.5, 0, 0, -1, \"Top\");\n    _curryAnchor(0.5, 1, 0, 1, \"Bottom\");\n    _curryAnchor(0, 0.5, -1, 0, \"Left\");\n    _curryAnchor(1, 0.5, 1, 0, \"Right\");\n    _curryAnchor(0.5, 0.5, 0, 0, \"Center\");\n    _curryAnchor(1, 0, 0, -1, \"TopRight\");\n    _curryAnchor(1, 1, 0, 1, \"BottomRight\");\n    _curryAnchor(0, 0, 0, -1, \"TopLeft\");\n    _curryAnchor(0, 1, 0, 1, \"BottomLeft\");\n\n// ------- dynamic anchors -------------------    \n\n    // default dynamic anchors chooses from Top, Right, Bottom, Left\n    _jp.Defaults.DynamicAnchors = function (params) {\n        return params.jsPlumbInstance.makeAnchors([\"TopCenter\", \"RightMiddle\", \"BottomCenter\", \"LeftMiddle\"], params.elementId, params.jsPlumbInstance);\n    };\n\n    // default dynamic anchors bound to name 'AutoDefault'\n    _jp.Anchors.AutoDefault = function (params) {\n        var a = params.jsPlumbInstance.makeDynamicAnchor(_jp.Defaults.DynamicAnchors(params));\n        a.type = \"AutoDefault\";\n        return a;\n    };\n\n// ------- continuous anchors -------------------    \n\n    var _curryContinuousAnchor = function (type, faces) {\n        _jp.Anchors[type] = function (params) {\n            var a = params.jsPlumbInstance.makeAnchor([\"Continuous\", { faces: faces }], params.elementId, params.jsPlumbInstance);\n            a.type = type;\n            return a;\n        };\n    };\n\n    _jp.Anchors.Continuous = function (params) {\n        return params.jsPlumbInstance.continuousAnchorFactory.get(params);\n    };\n\n    _curryContinuousAnchor(\"ContinuousLeft\", [\"left\"]);\n    _curryContinuousAnchor(\"ContinuousTop\", [\"top\"]);\n    _curryContinuousAnchor(\"ContinuousBottom\", [\"bottom\"]);\n    _curryContinuousAnchor(\"ContinuousRight\", [\"right\"]);\n\n// ------- position assign anchors -------------------    \n\n    // this anchor type lets you assign the position at connection time.\n    _curryAnchor(0, 0, 0, 0, \"Assign\", function (anchor, params) {\n        // find what to use as the \"position finder\". the user may have supplied a String which represents\n        // the id of a position finder in jsPlumb.AnchorPositionFinders, or the user may have supplied the\n        // position finder as a function.  we find out what to use and then set it on the anchor.\n        var pf = params.position || \"Fixed\";\n        anchor.positionFinder = pf.constructor == String ? params.jsPlumbInstance.AnchorPositionFinders[pf] : pf;\n        // always set the constructor params; the position finder might need them later (the Grid one does,\n        // for example)\n        anchor.constructorParams = params;\n    });\n\n    // these are the default anchor positions finders, which are used by the makeTarget function.  supplying\n    // a position finder argument to that function allows you to specify where the resulting anchor will\n    // be located\n    root.jsPlumbInstance.prototype.AnchorPositionFinders = {\n        \"Fixed\": function (dp, ep, es) {\n            return [ (dp.left - ep.left) / es[0], (dp.top - ep.top) / es[1] ];\n        },\n        \"Grid\": function (dp, ep, es, params) {\n            var dx = dp.left - ep.left, dy = dp.top - ep.top,\n                gx = es[0] / (params.grid[0]), gy = es[1] / (params.grid[1]),\n                mx = Math.floor(dx / gx), my = Math.floor(dy / gy);\n            return [ ((mx * gx) + (gx / 2)) / es[0], ((my * gy) + (gy / 2)) / es[1] ];\n        }\n    };\n\n// ------- perimeter anchors -------------------    \n\n    _jp.Anchors.Perimeter = function (params) {\n        params = params || {};\n        var anchorCount = params.anchorCount || 60,\n            shape = params.shape;\n\n        if (!shape) throw new Error(\"no shape supplied to Perimeter Anchor type\");\n\n        var _circle = function () {\n                var r = 0.5, step = Math.PI * 2 / anchorCount, current = 0, a = [];\n                for (var i = 0; i < anchorCount; i++) {\n                    var x = r + (r * Math.sin(current)),\n                        y = r + (r * Math.cos(current));\n                    a.push([ x, y, 0, 0 ]);\n                    current += step;\n                }\n                return a;\n            },\n            _path = function (segments) {\n                var anchorsPerFace = anchorCount / segments.length, a = [],\n                    _computeFace = function (x1, y1, x2, y2, fractionalLength) {\n                        anchorsPerFace = anchorCount * fractionalLength;\n                        var dx = (x2 - x1) / anchorsPerFace, dy = (y2 - y1) / anchorsPerFace;\n                        for (var i = 0; i < anchorsPerFace; i++) {\n                            a.push([\n                                    x1 + (dx * i),\n                                    y1 + (dy * i),\n                                0,\n                                0\n                            ]);\n                        }\n                    };\n\n                for (var i = 0; i < segments.length; i++)\n                    _computeFace.apply(null, segments[i]);\n\n                return a;\n            },\n            _shape = function (faces) {\n                var s = [];\n                for (var i = 0; i < faces.length; i++) {\n                    s.push([faces[i][0], faces[i][1], faces[i][2], faces[i][3], 1 / faces.length]);\n                }\n                return _path(s);\n            },\n            _rectangle = function () {\n                return _shape([\n                    [ 0, 0, 1, 0 ],\n                    [ 1, 0, 1, 1 ],\n                    [ 1, 1, 0, 1 ],\n                    [ 0, 1, 0, 0 ]\n                ]);\n            };\n\n        var _shapes = {\n                \"Circle\": _circle,\n                \"Ellipse\": _circle,\n                \"Diamond\": function () {\n                    return _shape([\n                        [ 0.5, 0, 1, 0.5 ],\n                        [ 1, 0.5, 0.5, 1 ],\n                        [ 0.5, 1, 0, 0.5 ],\n                        [ 0, 0.5, 0.5, 0 ]\n                    ]);\n                },\n                \"Rectangle\": _rectangle,\n                \"Square\": _rectangle,\n                \"Triangle\": function () {\n                    return _shape([\n                        [ 0.5, 0, 1, 1 ],\n                        [ 1, 1, 0, 1 ],\n                        [ 0, 1, 0.5, 0]\n                    ]);\n                },\n                \"Path\": function (params) {\n                    var points = params.points, p = [], tl = 0;\n                    for (var i = 0; i < points.length - 1; i++) {\n                        var l = Math.sqrt(Math.pow(points[i][2] - points[i][0]) + Math.pow(points[i][3] - points[i][1]));\n                        tl += l;\n                        p.push([points[i][0], points[i][1], points[i + 1][0], points[i + 1][1], l]);\n                    }\n                    for (var j = 0; j < p.length; j++) {\n                        p[j][4] = p[j][4] / tl;\n                    }\n                    return _path(p);\n                }\n            },\n            _rotate = function (points, amountInDegrees) {\n                var o = [], theta = amountInDegrees / 180 * Math.PI;\n                for (var i = 0; i < points.length; i++) {\n                    var _x = points[i][0] - 0.5,\n                        _y = points[i][1] - 0.5;\n\n                    o.push([\n                            0.5 + ((_x * Math.cos(theta)) - (_y * Math.sin(theta))),\n                            0.5 + ((_x * Math.sin(theta)) + (_y * Math.cos(theta))),\n                        points[i][2],\n                        points[i][3]\n                    ]);\n                }\n                return o;\n            };\n\n        if (!_shapes[shape]) throw new Error(\"Shape [\" + shape + \"] is unknown by Perimeter Anchor type\");\n\n        var da = _shapes[shape](params);\n        if (params.rotation) da = _rotate(da, params.rotation);\n        var a = params.jsPlumbInstance.makeDynamicAnchor(da);\n        a.type = \"Perimeter\";\n        return a;\n    };\n}).call(typeof window !== 'undefined' ? window : this);\n/*\n * jsPlumb\n * \n * Title:jsPlumb 2.3.0\n * \n * Provides a way to visually connect elements on an HTML page, using SVG.\n * \n * This file contains the default Connectors, Endpoint and Overlay definitions.\n *\n * Copyright (c) 2010 - 2017 jsPlumb (hello@jsplumbtoolkit.com)\n * \n * http://jsplumbtoolkit.com\n * http://github.com/sporritt/jsplumb\n * \n * Dual licensed under the MIT and GPL2 licenses.\n */\n;\n(function () {\n\n    \"use strict\";\n    var root = this, _jp = root.jsPlumb, _ju = root.jsPlumbUtil, _jg = root.Biltong;\n\n    _jp.Segments = {\n\n        /*\n         * Class: AbstractSegment\n         * A Connector is made up of 1..N Segments, each of which has a Type, such as 'Straight', 'Arc',\n         * 'Bezier'. This is new from 1.4.2, and gives us a lot more flexibility when drawing connections: things such\n         * as rounded corners for flowchart connectors, for example, or a straight line stub for Bezier connections, are\n         * much easier to do now.\n         *\n         * A Segment is responsible for providing coordinates for painting it, and also must be able to report its length.\n         * \n         */\n        AbstractSegment: function (params) {\n            this.params = params;\n\n            /**\n             * Function: findClosestPointOnPath\n             * Finds the closest point on this segment to the given [x, y],\n             * returning both the x and y of the point plus its distance from\n             * the supplied point, and its location along the length of the\n             * path inscribed by the segment.  This implementation returns\n             * Infinity for distance and null values for everything else;\n             * subclasses are expected to override.\n             */\n            this.findClosestPointOnPath = function (x, y) {\n                return {\n                    d: Infinity,\n                    x: null,\n                    y: null,\n                    l: null\n                };\n            };\n\n            this.getBounds = function () {\n                return {\n                    minX: Math.min(params.x1, params.x2),\n                    minY: Math.min(params.y1, params.y2),\n                    maxX: Math.max(params.x1, params.x2),\n                    maxY: Math.max(params.y1, params.y2)\n                };\n            };\n        },\n        Straight: function (params) {\n            var _super = _jp.Segments.AbstractSegment.apply(this, arguments),\n                length, m, m2, x1, x2, y1, y2,\n                _recalc = function () {\n                    length = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));\n                    m = _jg.gradient({x: x1, y: y1}, {x: x2, y: y2});\n                    m2 = -1 / m;\n                };\n\n            this.type = \"Straight\";\n\n            this.getLength = function () {\n                return length;\n            };\n            this.getGradient = function () {\n                return m;\n            };\n\n            this.getCoordinates = function () {\n                return { x1: x1, y1: y1, x2: x2, y2: y2 };\n            };\n            this.setCoordinates = function (coords) {\n                x1 = coords.x1;\n                y1 = coords.y1;\n                x2 = coords.x2;\n                y2 = coords.y2;\n                _recalc();\n            };\n            this.setCoordinates({x1: params.x1, y1: params.y1, x2: params.x2, y2: params.y2});\n\n            this.getBounds = function () {\n                return {\n                    minX: Math.min(x1, x2),\n                    minY: Math.min(y1, y2),\n                    maxX: Math.max(x1, x2),\n                    maxY: Math.max(y1, y2)\n                };\n            };\n\n            /**\n             * returns the point on the segment's path that is 'location' along the length of the path, where 'location' is a decimal from\n             * 0 to 1 inclusive. for the straight line segment this is simple maths.\n             */\n            this.pointOnPath = function (location, absolute) {\n                if (location === 0 && !absolute)\n                    return { x: x1, y: y1 };\n                else if (location == 1 && !absolute)\n                    return { x: x2, y: y2 };\n                else {\n                    var l = absolute ? location > 0 ? location : length + location : location * length;\n                    return _jg.pointOnLine({x: x1, y: y1}, {x: x2, y: y2}, l);\n                }\n            };\n\n            /**\n             * returns the gradient of the segment at the given point - which for us is constant.\n             */\n            this.gradientAtPoint = function (_) {\n                return m;\n            };\n\n            /**\n             * returns the point on the segment's path that is 'distance' along the length of the path from 'location', where\n             * 'location' is a decimal from 0 to 1 inclusive, and 'distance' is a number of pixels.\n             * this hands off to jsPlumbUtil to do the maths, supplying two points and the distance.\n             */\n            this.pointAlongPathFrom = function (location, distance, absolute) {\n                var p = this.pointOnPath(location, absolute),\n                    farAwayPoint = distance <= 0 ? {x: x1, y: y1} : {x: x2, y: y2 };\n\n                /*\n                 location == 1 ? {\n                 x:x1 + ((x2 - x1) * 10),\n                 y:y1 + ((y1 - y2) * 10)\n                 } :\n                 */\n\n                if (distance <= 0 && Math.abs(distance) > 1) distance *= -1;\n\n                return _jg.pointOnLine(p, farAwayPoint, distance);\n            };\n\n            // is c between a and b?\n            var within = function (a, b, c) {\n                return c >= Math.min(a, b) && c <= Math.max(a, b);\n            };\n            // find which of a and b is closest to c\n            var closest = function (a, b, c) {\n                return Math.abs(c - a) < Math.abs(c - b) ? a : b;\n            };\n\n            /**\n             Function: findClosestPointOnPath\n             Finds the closest point on this segment to [x,y]. See\n             notes on this method in AbstractSegment.\n             */\n            this.findClosestPointOnPath = function (x, y) {\n                var out = {\n                    d: Infinity,\n                    x: null,\n                    y: null,\n                    l: null,\n                    x1: x1,\n                    x2: x2,\n                    y1: y1,\n                    y2: y2\n                };\n\n                if (m === 0) {\n                    out.y = y1;\n                    out.x = within(x1, x2, x) ? x : closest(x1, x2, x);\n                }\n                else if (m == Infinity || m == -Infinity) {\n                    out.x = x1;\n                    out.y = within(y1, y2, y) ? y : closest(y1, y2, y);\n                }\n                else {\n                    // closest point lies on normal from given point to this line.  \n                    var b = y1 - (m * x1),\n                        b2 = y - (m2 * x),\n                    // y1 = m.x1 + b and y1 = m2.x1 + b2\n                    // so m.x1 + b = m2.x1 + b2\n                    // x1(m - m2) = b2 - b\n                    // x1 = (b2 - b) / (m - m2)\n                        _x1 = (b2 - b) / (m - m2),\n                        _y1 = (m * _x1) + b;\n\n                    out.x = within(x1, x2, _x1) ? _x1 : closest(x1, x2, _x1);//_x1;\n                    out.y = within(y1, y2, _y1) ? _y1 : closest(y1, y2, _y1);//_y1;\n                }\n\n                var fractionInSegment = _jg.lineLength([ out.x, out.y ], [ x1, y1 ]);\n                out.d = _jg.lineLength([x, y], [out.x, out.y]);\n                out.l = fractionInSegment / length;\n                return out;\n            };\n        },\n\n        /*\n         Arc Segment. You need to supply:\n\n         r   -   radius\n         cx  -   center x for the arc\n         cy  -   center y for the arc\n         ac  -   whether the arc is anticlockwise or not. default is clockwise.\n\n         and then either:\n\n         startAngle  -   startAngle for the arc.\n         endAngle    -   endAngle for the arc.\n\n         or:\n\n         x1          -   x for start point\n         y1          -   y for start point\n         x2          -   x for end point\n         y2          -   y for end point\n\n         */\n        Arc: function (params) {\n            var _super = _jp.Segments.AbstractSegment.apply(this, arguments),\n                _calcAngle = function (_x, _y) {\n                    return _jg.theta([params.cx, params.cy], [_x, _y]);\n                },\n                _calcAngleForLocation = function (segment, location) {\n                    if (segment.anticlockwise) {\n                        var sa = segment.startAngle < segment.endAngle ? segment.startAngle + TWO_PI : segment.startAngle,\n                            s = Math.abs(sa - segment.endAngle);\n                        return sa - (s * location);\n                    }\n                    else {\n                        var ea = segment.endAngle < segment.startAngle ? segment.endAngle + TWO_PI : segment.endAngle,\n                            ss = Math.abs(ea - segment.startAngle);\n\n                        return segment.startAngle + (ss * location);\n                    }\n                },\n                TWO_PI = 2 * Math.PI;\n\n            this.radius = params.r;\n            this.anticlockwise = params.ac;\n            this.type = \"Arc\";\n\n            if (params.startAngle && params.endAngle) {\n                this.startAngle = params.startAngle;\n                this.endAngle = params.endAngle;\n                this.x1 = params.cx + (this.radius * Math.cos(params.startAngle));\n                this.y1 = params.cy + (this.radius * Math.sin(params.startAngle));\n                this.x2 = params.cx + (this.radius * Math.cos(params.endAngle));\n                this.y2 = params.cy + (this.radius * Math.sin(params.endAngle));\n            }\n            else {\n                this.startAngle = _calcAngle(params.x1, params.y1);\n                this.endAngle = _calcAngle(params.x2, params.y2);\n                this.x1 = params.x1;\n                this.y1 = params.y1;\n                this.x2 = params.x2;\n                this.y2 = params.y2;\n            }\n\n            if (this.endAngle < 0) this.endAngle += TWO_PI;\n            if (this.startAngle < 0) this.startAngle += TWO_PI;\n\n            // segment is used by vml     \n            //this.segment = _jg.quadrant([this.x1, this.y1], [this.x2, this.y2]);\n\n            // we now have startAngle and endAngle as positive numbers, meaning the\n            // absolute difference (|d|) between them is the sweep (s) of this arc, unless the\n            // arc is 'anticlockwise' in which case 's' is given by 2PI - |d|.\n\n            var ea = this.endAngle < this.startAngle ? this.endAngle + TWO_PI : this.endAngle;\n            this.sweep = Math.abs(ea - this.startAngle);\n            if (this.anticlockwise) this.sweep = TWO_PI - this.sweep;\n            var circumference = 2 * Math.PI * this.radius,\n                frac = this.sweep / TWO_PI,\n                length = circumference * frac;\n\n            this.getLength = function () {\n                return length;\n            };\n\n            this.getBounds = function () {\n                return {\n                    minX: params.cx - params.r,\n                    maxX: params.cx + params.r,\n                    minY: params.cy - params.r,\n                    maxY: params.cy + params.r\n                };\n            };\n\n            var VERY_SMALL_VALUE = 0.0000000001,\n                gentleRound = function (n) {\n                    var f = Math.floor(n), r = Math.ceil(n);\n                    if (n - f < VERY_SMALL_VALUE)\n                        return f;\n                    else if (r - n < VERY_SMALL_VALUE)\n                        return r;\n                    return n;\n                };\n\n            /**\n             * returns the point on the segment's path that is 'location' along the length of the path, where 'location' is a decimal from\n             * 0 to 1 inclusive.\n             */\n            this.pointOnPath = function (location, absolute) {\n\n                if (location === 0) {\n                    return { x: this.x1, y: this.y1, theta: this.startAngle };\n                }\n                else if (location == 1) {\n                    return { x: this.x2, y: this.y2, theta: this.endAngle };\n                }\n\n                if (absolute) {\n                    location = location / length;\n                }\n\n                var angle = _calcAngleForLocation(this, location),\n                    _x = params.cx + (params.r * Math.cos(angle)),\n                    _y = params.cy + (params.r * Math.sin(angle));\n\n                return { x: gentleRound(_x), y: gentleRound(_y), theta: angle };\n            };\n\n            /**\n             * returns the gradient of the segment at the given point.\n             */\n            this.gradientAtPoint = function (location, absolute) {\n                var p = this.pointOnPath(location, absolute);\n                var m = _jg.normal([ params.cx, params.cy ], [p.x, p.y ]);\n                if (!this.anticlockwise && (m == Infinity || m == -Infinity)) m *= -1;\n                return m;\n            };\n\n            this.pointAlongPathFrom = function (location, distance, absolute) {\n                var p = this.pointOnPath(location, absolute),\n                    arcSpan = distance / circumference * 2 * Math.PI,\n                    dir = this.anticlockwise ? -1 : 1,\n                    startAngle = p.theta + (dir * arcSpan),\n                    startX = params.cx + (this.radius * Math.cos(startAngle)),\n                    startY = params.cy + (this.radius * Math.sin(startAngle));\n\n                return {x: startX, y: startY};\n            };\n        },\n\n        Bezier: function (params) {\n            this.curve = [\n                { x: params.x1, y: params.y1},\n                { x: params.cp1x, y: params.cp1y },\n                { x: params.cp2x, y: params.cp2y },\n                { x: params.x2, y: params.y2 }\n            ];\n\n            var _super = _jp.Segments.AbstractSegment.apply(this, arguments);\n            // although this is not a strictly rigorous determination of bounds\n            // of a bezier curve, it works for the types of curves that this segment\n            // type produces.\n            this.bounds = {\n                minX: Math.min(params.x1, params.x2, params.cp1x, params.cp2x),\n                minY: Math.min(params.y1, params.y2, params.cp1y, params.cp2y),\n                maxX: Math.max(params.x1, params.x2, params.cp1x, params.cp2x),\n                maxY: Math.max(params.y1, params.y2, params.cp1y, params.cp2y)\n            };\n\n            this.type = \"Bezier\";\n\n            var _translateLocation = function (_curve, location, absolute) {\n                if (absolute)\n                    location = root.jsBezier.locationAlongCurveFrom(_curve, location > 0 ? 0 : 1, location);\n\n                return location;\n            };\n\n            /**\n             * returns the point on the segment's path that is 'location' along the length of the path, where 'location' is a decimal from\n             * 0 to 1 inclusive.\n             */\n            this.pointOnPath = function (location, absolute) {\n                location = _translateLocation(this.curve, location, absolute);\n                return root.jsBezier.pointOnCurve(this.curve, location);\n            };\n\n            /**\n             * returns the gradient of the segment at the given point.\n             */\n            this.gradientAtPoint = function (location, absolute) {\n                location = _translateLocation(this.curve, location, absolute);\n                return root.jsBezier.gradientAtPoint(this.curve, location);\n            };\n\n            this.pointAlongPathFrom = function (location, distance, absolute) {\n                location = _translateLocation(this.curve, location, absolute);\n                return root.jsBezier.pointAlongCurveFrom(this.curve, location, distance);\n            };\n\n            this.getLength = function () {\n                return root.jsBezier.getLength(this.curve);\n            };\n\n            this.getBounds = function () {\n                return this.bounds;\n            };\n        }\n    };\n\n    _jp.SegmentRenderer = {\n        getPath: function (segment) {\n            return ({\n                \"Straight\": function () {\n                    var d = segment.getCoordinates();\n                    return \"M \" + d.x1 + \" \" + d.y1 + \" L \" + d.x2 + \" \" + d.y2;\n                },\n                \"Bezier\": function () {\n                    var d = segment.params;\n                    return \"M \" + d.x1 + \" \" + d.y1 +\n                        \" C \" + d.cp1x + \" \" + d.cp1y + \" \" + d.cp2x + \" \" + d.cp2y + \" \" + d.x2 + \" \" + d.y2;\n                },\n                \"Arc\": function () {\n                    var d = segment.params,\n                        laf = segment.sweep > Math.PI ? 1 : 0,\n                        sf = segment.anticlockwise ? 0 : 1;\n\n                    return \"M\" + segment.x1 + \" \" + segment.y1 + \" A \" + segment.radius + \" \" + d.r + \" 0 \" + laf + \",\" + sf + \" \" + segment.x2 + \" \" + segment.y2;\n                }\n            })[segment.type]();\n        }\n    };\n\n    /*\n     Class: AbstractComponent\n     Superclass for AbstractConnector and AbstractEndpoint.\n     */\n    var AbstractComponent = function () {\n        this.resetBounds = function () {\n            this.bounds = { minX: Infinity, minY: Infinity, maxX: -Infinity, maxY: -Infinity };\n        };\n        this.resetBounds();\n    };\n\n    /*\n     * Class: AbstractConnector\n     * Superclass for all Connectors; here is where Segments are managed.  This is exposed on jsPlumb just so it\n     * can be accessed from other files. You should not try to instantiate one of these directly.\n     *\n     * When this class is asked for a pointOnPath, or gradient etc, it must first figure out which segment to dispatch\n     * that request to. This is done by keeping track of the total connector length as segments are added, and also\n     * their cumulative ratios to the total length.  Then when the right segment is found it is a simple case of dispatching\n     * the request to it (and adjusting 'location' so that it is relative to the beginning of that segment.)\n     */\n    _jp.Connectors.AbstractConnector = function (params) {\n\n        AbstractComponent.apply(this, arguments);\n\n        var segments = [],\n            totalLength = 0,\n            segmentProportions = [],\n            segmentProportionalLengths = [],\n            stub = params.stub || 0,\n            sourceStub = _ju.isArray(stub) ? stub[0] : stub,\n            targetStub = _ju.isArray(stub) ? stub[1] : stub,\n            gap = params.gap || 0,\n            sourceGap = _ju.isArray(gap) ? gap[0] : gap,\n            targetGap = _ju.isArray(gap) ? gap[1] : gap,\n            userProvidedSegments = null,\n            edited = false,\n            paintInfo = null,\n            geometry = null,\n            editable = params.editable !== false && _jp.ConnectorEditors != null && _jp.ConnectorEditors[this.type] != null;\n\n        var _setGeometry = this.setGeometry = function(g, internallyComputed) {\n            edited = (!internallyComputed);\n            geometry = g;\n        };\n        var _getGeometry = this.getGeometry = function() {\n            return geometry;\n        };\n\n        this.getPathData = function() {\n            var p = \"\";\n            for (var i = 0; i < segments.length; i++) {\n                p += _jp.SegmentRenderer.getPath(segments[i]);\n                p += \" \";\n            }\n            return p;\n        };\n\n        this.hasBeenEdited = function() { return edited; };\n        this.isEditing = function() { return this.editor != null && this.editor.isActive(); };\n        this.setEditable = function(e) {\n            // if this connector has an editor already, or\n            // if an editor for this connector's type is available, or\n            // if the child declares an overrideSetEditable and it does not return false, editable is true.\n            if (e && _jp.ConnectorEditors != null && _jp.ConnectorEditors[this.type] != null && (this.overrideSetEditable == null || this.overrideSetEditable())) {\n                editable = e;\n            } else {\n                editable = false;\n            }\n            return editable;\n        };\n        this.isEditable = function() { return editable; };\n\n        /**\n         * Function: findSegmentForPoint\n         * Returns the segment that is closest to the given [x,y],\n         * null if nothing found.  This function returns a JS\n         * object with:\n         *\n         *   d   -   distance from segment\n         *   l   -   proportional location in segment\n         *   x   -   x point on the segment\n         *   y   -   y point on the segment\n         *   s   -   the segment itself.\n         */\n        this.findSegmentForPoint = function (x, y) {\n            var out = { d: Infinity, s: null, x: null, y: null, l: null };\n            for (var i = 0; i < segments.length; i++) {\n                var _s = segments[i].findClosestPointOnPath(x, y);\n                if (_s.d < out.d) {\n                    out.d = _s.d;\n                    out.l = _s.l;\n                    out.x = _s.x;\n                    out.y = _s.y;\n                    out.s = segments[i];\n                    out.x1 = _s.x1;\n                    out.x2 = _s.x2;\n                    out.y1 = _s.y1;\n                    out.y2 = _s.y2;\n                    out.index = i;\n                }\n            }\n\n            return out;\n        };\n\n        var _updateSegmentProportions = function () {\n                var curLoc = 0;\n                for (var i = 0; i < segments.length; i++) {\n                    var sl = segments[i].getLength();\n                    segmentProportionalLengths[i] = sl / totalLength;\n                    segmentProportions[i] = [curLoc, (curLoc += (sl / totalLength)) ];\n                }\n            },\n\n            /**\n             * returns [segment, proportion of travel in segment, segment index] for the segment\n             * that contains the point which is 'location' distance along the entire path, where\n             * 'location' is a decimal between 0 and 1 inclusive. in this connector type, paths\n             * are made up of a list of segments, each of which contributes some fraction to\n             * the total length.\n             * From 1.3.10 this also supports the 'absolute' property, which lets us specify a location\n             * as the absolute distance in pixels, rather than a proportion of the total path.\n             */\n            _findSegmentForLocation = function (location, absolute) {\n                if (absolute) {\n                    location = location > 0 ? location / totalLength : (totalLength + location) / totalLength;\n                }\n                var idx = segmentProportions.length - 1, inSegmentProportion = 1;\n                for (var i = 0; i < segmentProportions.length; i++) {\n                    if (segmentProportions[i][1] >= location) {\n                        idx = i;\n                        // todo is this correct for all connector path types?\n                        inSegmentProportion = location == 1 ? 1 : location === 0 ? 0 : (location - segmentProportions[i][0]) / segmentProportionalLengths[i];\n                        break;\n                    }\n                }\n                return { segment: segments[idx], proportion: inSegmentProportion, index: idx };\n            },\n            _addSegment = function (conn, type, params) {\n                if (params.x1 == params.x2 && params.y1 == params.y2) return;\n                var s = new _jp.Segments[type](params);\n                segments.push(s);\n                totalLength += s.getLength();\n                conn.updateBounds(s);\n            },\n            _clearSegments = function () {\n                totalLength = segments.length = segmentProportions.length = segmentProportionalLengths.length = 0;\n            };\n\n        this.setSegments = function (_segs) {\n            userProvidedSegments = [];\n            totalLength = 0;\n            for (var i = 0; i < _segs.length; i++) {\n                userProvidedSegments.push(_segs[i]);\n                totalLength += _segs[i].getLength();\n            }\n        };\n\n        this.getLength = function() {\n            return totalLength;\n        };\n\n        var _prepareCompute = function (params) {\n            this.strokeWidth = params.strokeWidth;\n            var segment = _jg.quadrant(params.sourcePos, params.targetPos),\n                swapX = params.targetPos[0] < params.sourcePos[0],\n                swapY = params.targetPos[1] < params.sourcePos[1],\n                lw = params.strokeWidth || 1,\n                so = params.sourceEndpoint.anchor.getOrientation(params.sourceEndpoint),\n                to = params.targetEndpoint.anchor.getOrientation(params.targetEndpoint),\n                x = swapX ? params.targetPos[0] : params.sourcePos[0],\n                y = swapY ? params.targetPos[1] : params.sourcePos[1],\n                w = Math.abs(params.targetPos[0] - params.sourcePos[0]),\n                h = Math.abs(params.targetPos[1] - params.sourcePos[1]);\n\n            // if either anchor does not have an orientation set, we derive one from their relative\n            // positions.  we fix the axis to be the one in which the two elements are further apart, and\n            // point each anchor at the other element.  this is also used when dragging a new connection.\n            if (so[0] === 0 && so[1] === 0 || to[0] === 0 && to[1] === 0) {\n                var index = w > h ? 0 : 1, oIndex = [1, 0][index];\n                so = [];\n                to = [];\n                so[index] = params.sourcePos[index] > params.targetPos[index] ? -1 : 1;\n                to[index] = params.sourcePos[index] > params.targetPos[index] ? 1 : -1;\n                so[oIndex] = 0;\n                to[oIndex] = 0;\n            }\n\n            var sx = swapX ? w + (sourceGap * so[0]) : sourceGap * so[0],\n                sy = swapY ? h + (sourceGap * so[1]) : sourceGap * so[1],\n                tx = swapX ? targetGap * to[0] : w + (targetGap * to[0]),\n                ty = swapY ? targetGap * to[1] : h + (targetGap * to[1]),\n                oProduct = ((so[0] * to[0]) + (so[1] * to[1]));\n\n            var result = {\n                sx: sx, sy: sy, tx: tx, ty: ty, lw: lw,\n                xSpan: Math.abs(tx - sx),\n                ySpan: Math.abs(ty - sy),\n                mx: (sx + tx) / 2,\n                my: (sy + ty) / 2,\n                so: so, to: to, x: x, y: y, w: w, h: h,\n                segment: segment,\n                startStubX: sx + (so[0] * sourceStub),\n                startStubY: sy + (so[1] * sourceStub),\n                endStubX: tx + (to[0] * targetStub),\n                endStubY: ty + (to[1] * targetStub),\n                isXGreaterThanStubTimes2: Math.abs(sx - tx) > (sourceStub + targetStub),\n                isYGreaterThanStubTimes2: Math.abs(sy - ty) > (sourceStub + targetStub),\n                opposite: oProduct == -1,\n                perpendicular: oProduct === 0,\n                orthogonal: oProduct == 1,\n                sourceAxis: so[0] === 0 ? \"y\" : \"x\",\n                points: [x, y, w, h, sx, sy, tx, ty ]\n            };\n            result.anchorOrientation = result.opposite ? \"opposite\" : result.orthogonal ? \"orthogonal\" : \"perpendicular\";\n            return result;\n        };\n\n        this.getSegments = function () {\n            return segments;\n        };\n\n        this.updateBounds = function (segment) {\n            var segBounds = segment.getBounds();\n            this.bounds.minX = Math.min(this.bounds.minX, segBounds.minX);\n            this.bounds.maxX = Math.max(this.bounds.maxX, segBounds.maxX);\n            this.bounds.minY = Math.min(this.bounds.minY, segBounds.minY);\n            this.bounds.maxY = Math.max(this.bounds.maxY, segBounds.maxY);\n        };\n\n        var dumpSegmentsToConsole = function () {\n            console.log(\"SEGMENTS:\");\n            for (var i = 0; i < segments.length; i++) {\n                console.log(segments[i].type, segments[i].getLength(), segmentProportions[i]);\n            }\n        };\n\n        this.pointOnPath = function (location, absolute) {\n            var seg = _findSegmentForLocation(location, absolute);\n            return seg.segment && seg.segment.pointOnPath(seg.proportion, false) || [0, 0];\n        };\n\n        this.gradientAtPoint = function (location, absolute) {\n            var seg = _findSegmentForLocation(location, absolute);\n            return seg.segment && seg.segment.gradientAtPoint(seg.proportion, false) || 0;\n        };\n\n        this.pointAlongPathFrom = function (location, distance, absolute) {\n            var seg = _findSegmentForLocation(location, absolute);\n            // TODO what happens if this crosses to the next segment?\n            return seg.segment && seg.segment.pointAlongPathFrom(seg.proportion, distance, false) || [0, 0];\n        };\n\n        this.compute = function (params) {\n            paintInfo = _prepareCompute.call(this, params);\n\n            _clearSegments();\n            this._compute(paintInfo, params);\n            this.x = paintInfo.points[0];\n            this.y = paintInfo.points[1];\n            this.w = paintInfo.points[2];\n            this.h = paintInfo.points[3];\n            this.segment = paintInfo.segment;\n            _updateSegmentProportions();\n        };\n\n        return {\n            addSegment: _addSegment,\n            prepareCompute: _prepareCompute,\n            sourceStub: sourceStub,\n            targetStub: targetStub,\n            maxStub: Math.max(sourceStub, targetStub),\n            sourceGap: sourceGap,\n            targetGap: targetGap,\n            maxGap: Math.max(sourceGap, targetGap),\n            setGeometry:_setGeometry,\n            getGeometry:_getGeometry\n        };\n    };\n    _ju.extend(_jp.Connectors.AbstractConnector, AbstractComponent);\n\n\n    // ********************************* END OF CONNECTOR TYPES *******************************************************************\n\n    // ********************************* ENDPOINT TYPES *******************************************************************\n\n    _jp.Endpoints.AbstractEndpoint = function (params) {\n        AbstractComponent.apply(this, arguments);\n        var compute = this.compute = function (anchorPoint, orientation, endpointStyle, connectorPaintStyle) {\n            var out = this._compute.apply(this, arguments);\n            this.x = out[0];\n            this.y = out[1];\n            this.w = out[2];\n            this.h = out[3];\n            this.bounds.minX = this.x;\n            this.bounds.minY = this.y;\n            this.bounds.maxX = this.x + this.w;\n            this.bounds.maxY = this.y + this.h;\n            return out;\n        };\n        return {\n            compute: compute,\n            cssClass: params.cssClass\n        };\n    };\n    _ju.extend(_jp.Endpoints.AbstractEndpoint, AbstractComponent);\n\n    /**\n     * Class: Endpoints.Dot\n     * A round endpoint, with default radius 10 pixels.\n     */\n\n    /**\n     * Function: Constructor\n     *\n     * Parameters:\n     *\n     *    radius    -    radius of the endpoint.  defaults to 10 pixels.\n     */\n    _jp.Endpoints.Dot = function (params) {\n        this.type = \"Dot\";\n        var _super = _jp.Endpoints.AbstractEndpoint.apply(this, arguments);\n        params = params || {};\n        this.radius = params.radius || 10;\n        this.defaultOffset = 0.5 * this.radius;\n        this.defaultInnerRadius = this.radius / 3;\n\n        this._compute = function (anchorPoint, orientation, endpointStyle, connectorPaintStyle) {\n            this.radius = endpointStyle.radius || this.radius;\n            var x = anchorPoint[0] - this.radius,\n                y = anchorPoint[1] - this.radius,\n                w = this.radius * 2,\n                h = this.radius * 2;\n\n            if (endpointStyle.stroke) {\n                var lw = endpointStyle.strokeWidth || 1;\n                x -= lw;\n                y -= lw;\n                w += (lw * 2);\n                h += (lw * 2);\n            }\n            return [ x, y, w, h, this.radius ];\n        };\n    };\n    _ju.extend(_jp.Endpoints.Dot, _jp.Endpoints.AbstractEndpoint);\n\n    _jp.Endpoints.Rectangle = function (params) {\n        this.type = \"Rectangle\";\n        var _super = _jp.Endpoints.AbstractEndpoint.apply(this, arguments);\n        params = params || {};\n        this.width = params.width || 20;\n        this.height = params.height || 20;\n\n        this._compute = function (anchorPoint, orientation, endpointStyle, connectorPaintStyle) {\n            var width = endpointStyle.width || this.width,\n                height = endpointStyle.height || this.height,\n                x = anchorPoint[0] - (width / 2),\n                y = anchorPoint[1] - (height / 2);\n\n            return [ x, y, width, height];\n        };\n    };\n    _ju.extend(_jp.Endpoints.Rectangle, _jp.Endpoints.AbstractEndpoint);\n\n    var DOMElementEndpoint = function (params) {\n        _jp.jsPlumbUIComponent.apply(this, arguments);\n        this._jsPlumb.displayElements = [];\n    };\n    _ju.extend(DOMElementEndpoint, _jp.jsPlumbUIComponent, {\n        getDisplayElements: function () {\n            return this._jsPlumb.displayElements;\n        },\n        appendDisplayElement: function (el) {\n            this._jsPlumb.displayElements.push(el);\n        }\n    });\n\n    /**\n     * Class: Endpoints.Image\n     * Draws an image as the Endpoint.\n     */\n    /**\n     * Function: Constructor\n     *\n     * Parameters:\n     *\n     *    src    -    location of the image to use.\n\n     TODO: multiple references to self. not sure quite how to get rid of them entirely. perhaps self = null in the cleanup\n     function will suffice\n\n     TODO this class still might leak memory.\n\n     */\n    _jp.Endpoints.Image = function (params) {\n\n        this.type = \"Image\";\n        DOMElementEndpoint.apply(this, arguments);\n        _jp.Endpoints.AbstractEndpoint.apply(this, arguments);\n\n        var _onload = params.onload,\n            src = params.src || params.url,\n            clazz = params.cssClass ? \" \" + params.cssClass : \"\";\n\n        this._jsPlumb.img = new Image();\n        this._jsPlumb.ready = false;\n        this._jsPlumb.initialized = false;\n        this._jsPlumb.deleted = false;\n        this._jsPlumb.widthToUse = params.width;\n        this._jsPlumb.heightToUse = params.height;\n        this._jsPlumb.endpoint = params.endpoint;\n\n        this._jsPlumb.img.onload = function () {\n            if (this._jsPlumb != null) {\n                this._jsPlumb.ready = true;\n                this._jsPlumb.widthToUse = this._jsPlumb.widthToUse || this._jsPlumb.img.width;\n                this._jsPlumb.heightToUse = this._jsPlumb.heightToUse || this._jsPlumb.img.height;\n                if (_onload) {\n                    _onload(this);\n                }\n            }\n        }.bind(this);\n\n        /*\n         Function: setImage\n         Sets the Image to use in this Endpoint.\n\n         Parameters:\n         img         -   may be a URL or an Image object\n         onload      -   optional; a callback to execute once the image has loaded.\n         */\n        this._jsPlumb.endpoint.setImage = function (_img, onload) {\n            var s = _img.constructor == String ? _img : _img.src;\n            _onload = onload;\n            this._jsPlumb.img.src = s;\n\n            if (this.canvas != null)\n                this.canvas.setAttribute(\"src\", this._jsPlumb.img.src);\n        }.bind(this);\n\n        this._jsPlumb.endpoint.setImage(src, _onload);\n        this._compute = function (anchorPoint, orientation, endpointStyle, connectorPaintStyle) {\n            this.anchorPoint = anchorPoint;\n            if (this._jsPlumb.ready) return [anchorPoint[0] - this._jsPlumb.widthToUse / 2, anchorPoint[1] - this._jsPlumb.heightToUse / 2,\n                this._jsPlumb.widthToUse, this._jsPlumb.heightToUse];\n            else return [0, 0, 0, 0];\n        };\n\n        this.canvas = _jp.createElement(\"img\", {\n            position:\"absolute\",\n            margin:0,\n            padding:0,\n            outline:0\n        }, this._jsPlumb.instance.endpointClass + clazz);\n\n        if (this._jsPlumb.widthToUse) this.canvas.setAttribute(\"width\", this._jsPlumb.widthToUse);\n        if (this._jsPlumb.heightToUse) this.canvas.setAttribute(\"height\", this._jsPlumb.heightToUse);\n        this._jsPlumb.instance.appendElement(this.canvas);\n\n        this.actuallyPaint = function (d, style, anchor) {\n            if (!this._jsPlumb.deleted) {\n                if (!this._jsPlumb.initialized) {\n                    this.canvas.setAttribute(\"src\", this._jsPlumb.img.src);\n                    this.appendDisplayElement(this.canvas);\n                    this._jsPlumb.initialized = true;\n                }\n                var x = this.anchorPoint[0] - (this._jsPlumb.widthToUse / 2),\n                    y = this.anchorPoint[1] - (this._jsPlumb.heightToUse / 2);\n                _ju.sizeElement(this.canvas, x, y, this._jsPlumb.widthToUse, this._jsPlumb.heightToUse);\n            }\n        };\n\n        this.paint = function (style, anchor) {\n            if (this._jsPlumb != null) {  // may have been deleted\n                if (this._jsPlumb.ready) {\n                    this.actuallyPaint(style, anchor);\n                }\n                else {\n                    root.setTimeout(function () {\n                        this.paint(style, anchor);\n                    }.bind(this), 200);\n                }\n            }\n        };\n    };\n    _ju.extend(_jp.Endpoints.Image, [ DOMElementEndpoint, _jp.Endpoints.AbstractEndpoint ], {\n        cleanup: function (force) {\n            if (force) {\n                this._jsPlumb.deleted = true;\n                if (this.canvas) this.canvas.parentNode.removeChild(this.canvas);\n                this.canvas = null;\n            }\n        }\n    });\n\n    /*\n     * Class: Endpoints.Blank\n     * An Endpoint that paints nothing (visible) on the screen.  Supports cssClass and hoverClass parameters like all Endpoints.\n     */\n    _jp.Endpoints.Blank = function (params) {\n        var _super = _jp.Endpoints.AbstractEndpoint.apply(this, arguments);\n        this.type = \"Blank\";\n        DOMElementEndpoint.apply(this, arguments);\n        this._compute = function (anchorPoint, orientation, endpointStyle, connectorPaintStyle) {\n            return [anchorPoint[0], anchorPoint[1], 10, 0];\n        };\n\n        var clazz = params.cssClass ? \" \" + params.cssClass : \"\";\n\n        this.canvas = _jp.createElement(\"div\", {\n            display: \"block\",\n            width: \"1px\",\n            height: \"1px\",\n            background: \"transparent\",\n            position: \"absolute\"\n        }, this._jsPlumb.instance.endpointClass + clazz);\n\n        this._jsPlumb.instance.appendElement(this.canvas);\n\n        this.paint = function (style, anchor) {\n            _ju.sizeElement(this.canvas, this.x, this.y, this.w, this.h);\n        };\n    };\n    _ju.extend(_jp.Endpoints.Blank, [_jp.Endpoints.AbstractEndpoint, DOMElementEndpoint], {\n        cleanup: function () {\n            if (this.canvas && this.canvas.parentNode) {\n                this.canvas.parentNode.removeChild(this.canvas);\n            }\n        }\n    });\n\n    /*\n     * Class: Endpoints.Triangle\n     * A triangular Endpoint.\n     */\n    /*\n     * Function: Constructor\n     *\n     * Parameters:\n     *\n     * \twidth\t-\twidth of the triangle's base.  defaults to 55 pixels.\n     * \theight\t-\theight of the triangle from base to apex.  defaults to 55 pixels.\n     */\n    _jp.Endpoints.Triangle = function (params) {\n        this.type = \"Triangle\";\n        _jp.Endpoints.AbstractEndpoint.apply(this, arguments);\n        params = params || {  };\n        params.width = params.width || 55;\n        params.height = params.height || 55;\n        this.width = params.width;\n        this.height = params.height;\n        this._compute = function (anchorPoint, orientation, endpointStyle, connectorPaintStyle) {\n            var width = endpointStyle.width || self.width,\n                height = endpointStyle.height || self.height,\n                x = anchorPoint[0] - (width / 2),\n                y = anchorPoint[1] - (height / 2);\n            return [ x, y, width, height ];\n        };\n    };\n// ********************************* END OF ENDPOINT TYPES *******************************************************************\n\n\n// ********************************* OVERLAY DEFINITIONS ***********************************************************************    \n\n    var AbstractOverlay = _jp.Overlays.AbstractOverlay = function (params) {\n        this.visible = true;\n        this.isAppendedAtTopLevel = true;\n        this.component = params.component;\n        this.loc = params.location == null ? 0.5 : params.location;\n        this.endpointLoc = params.endpointLocation == null ? [ 0.5, 0.5] : params.endpointLocation;\n        this.visible = params.visible !== false;\n    };\n    AbstractOverlay.prototype = {\n        cleanup: function (force) {\n            if (force) {\n                this.component = null;\n                this.canvas = null;\n                this.endpointLoc = null;\n            }\n        },\n        reattach:function(instance) {\n\n        },\n        setVisible: function (val) {\n            this.visible = val;\n            this.component.repaint();\n        },\n        isVisible: function () {\n            return this.visible;\n        },\n        hide: function () {\n            this.setVisible(false);\n        },\n        show: function () {\n            this.setVisible(true);\n        },\n        incrementLocation: function (amount) {\n            this.loc += amount;\n            this.component.repaint();\n        },\n        setLocation: function (l) {\n            this.loc = l;\n            this.component.repaint();\n        },\n        getLocation: function () {\n            return this.loc;\n        },\n        updateFrom:function() { }\n    };\n\n\n    /*\n     * Class: Overlays.Arrow\n     *\n     * An arrow overlay, defined by four points: the head, the two sides of the tail, and a 'foldback' point at some distance along the length\n     * of the arrow that lines from each tail point converge into.  The foldback point is defined using a decimal that indicates some fraction\n     * of the length of the arrow and has a default value of 0.623.  A foldback point value of 1 would mean that the arrow had a straight line\n     * across the tail.\n     */\n    /*\n     * @constructor\n     *\n     * @param {Object} params Constructor params.\n     * @param {Number} [params.length] Distance in pixels from head to tail baseline. default 20.\n     * @param {Number} [params.width] Width in pixels of the tail baseline. default 20.\n     * @param {String} [params.fill] Style to use when filling the arrow.  defaults to \"black\".\n     * @param {String} [params.stroke] Style to use when stroking the arrow. defaults to null, which means the arrow is not stroked.\n     * @param {Number} [params.stroke-width] Line width to use when stroking the arrow. defaults to 1, but only used if stroke is not null.\n     * @param {Number} [params.foldback] Distance (as a decimal from 0 to 1 inclusive) along the length of the arrow marking the point the tail points should fold back to.  defaults to 0.623.\n     * @param {Number} [params.location] Distance (as a decimal from 0 to 1 inclusive) marking where the arrow should sit on the connector. defaults to 0.5.\n     * @param {NUmber} [params.direction] Indicates the direction the arrow points in. valid values are -1 and 1; 1 is default.\n     */\n    _jp.Overlays.Arrow = function (params) {\n        this.type = \"Arrow\";\n        AbstractOverlay.apply(this, arguments);\n        this.isAppendedAtTopLevel = false;\n        params = params || {};\n\n        this.length = params.length || 20;\n        this.width = params.width || 20;\n        this.id = params.id;\n        var direction = (params.direction || 1) < 0 ? -1 : 1,\n            paintStyle = params.paintStyle || { \"stroke-width\": 1 },\n        // how far along the arrow the lines folding back in come to. default is 62.3%.\n            foldback = params.foldback || 0.623;\n\n        this.computeMaxSize = function () {\n            return self.width * 1.5;\n        };\n\n        this.elementCreated = function(p, component) {\n            this.path = p;\n            if (params.events) {\n                for (var i in params.events) {\n                    _jp.on(p, i, params.events[i]);\n                }\n            }\n        };\n\n        this.draw = function (component, currentConnectionPaintStyle) {\n\n            var hxy, mid, txy, tail, cxy;\n            if (component.pointAlongPathFrom) {\n\n                if (_ju.isString(this.loc) || this.loc > 1 || this.loc < 0) {\n                    var l = parseInt(this.loc, 10),\n                        fromLoc = this.loc < 0 ? 1 : 0;\n                    hxy = component.pointAlongPathFrom(fromLoc, l, false);\n                    mid = component.pointAlongPathFrom(fromLoc, l - (direction * this.length / 2), false);\n                    txy = _jg.pointOnLine(hxy, mid, this.length);\n                }\n                else if (this.loc == 1) {\n                    hxy = component.pointOnPath(this.loc);\n                    mid = component.pointAlongPathFrom(this.loc, -(this.length));\n                    txy = _jg.pointOnLine(hxy, mid, this.length);\n\n                    if (direction == -1) {\n                        var _ = txy;\n                        txy = hxy;\n                        hxy = _;\n                    }\n                }\n                else if (this.loc === 0) {\n                    txy = component.pointOnPath(this.loc);\n                    mid = component.pointAlongPathFrom(this.loc, this.length);\n                    hxy = _jg.pointOnLine(txy, mid, this.length);\n                    if (direction == -1) {\n                        var __ = txy;\n                        txy = hxy;\n                        hxy = __;\n                    }\n                }\n                else {\n                    hxy = component.pointAlongPathFrom(this.loc, direction * this.length / 2);\n                    mid = component.pointOnPath(this.loc);\n                    txy = _jg.pointOnLine(hxy, mid, this.length);\n                }\n\n                tail = _jg.perpendicularLineTo(hxy, txy, this.width);\n                cxy = _jg.pointOnLine(hxy, txy, foldback * this.length);\n\n                var d = { hxy: hxy, tail: tail, cxy: cxy },\n                    stroke = paintStyle.stroke || currentConnectionPaintStyle.stroke,\n                    fill = paintStyle.fill || currentConnectionPaintStyle.stroke,\n                    lineWidth = paintStyle.strokeWidth || currentConnectionPaintStyle.strokeWidth;\n\n                return {\n                    component: component,\n                    d: d,\n                    \"stroke-width\": lineWidth,\n                    stroke: stroke,\n                    fill: fill,\n                    minX: Math.min(hxy.x, tail[0].x, tail[1].x),\n                    maxX: Math.max(hxy.x, tail[0].x, tail[1].x),\n                    minY: Math.min(hxy.y, tail[0].y, tail[1].y),\n                    maxY: Math.max(hxy.y, tail[0].y, tail[1].y)\n                };\n            }\n            else return {component: component, minX: 0, maxX: 0, minY: 0, maxY: 0};\n        };\n    };\n    _ju.extend(_jp.Overlays.Arrow, AbstractOverlay, {\n        updateFrom:function(d) {\n            this.length = d.length || this.length;\n            this.width = d.width|| this.width;\n            this.direction = d.direction != null ? d.direction : this.direction;\n            this.foldback = d.foldback|| this.foldback;\n        }\n    });\n\n    /*\n     * Class: Overlays.PlainArrow\n     *\n     * A basic arrow.  This is in fact just one instance of the more generic case in which the tail folds back on itself to some\n     * point along the length of the arrow: in this case, that foldback point is the full length of the arrow.  so it just does\n     * a 'call' to Arrow with foldback set appropriately.\n     */\n    /*\n     * Function: Constructor\n     * See <Overlays.Arrow> for allowed parameters for this overlay.\n     */\n    _jp.Overlays.PlainArrow = function (params) {\n        params = params || {};\n        var p = _jp.extend(params, {foldback: 1});\n        _jp.Overlays.Arrow.call(this, p);\n        this.type = \"PlainArrow\";\n    };\n    _ju.extend(_jp.Overlays.PlainArrow, _jp.Overlays.Arrow);\n\n    /*\n     * Class: Overlays.Diamond\n     * \n     * A diamond. Like PlainArrow, this is a concrete case of the more generic case of the tail points converging on some point...it just\n     * happens that in this case, that point is greater than the length of the the arrow.\n     *\n     *      this could probably do with some help with positioning...due to the way it reuses the Arrow paint code, what Arrow thinks is the\n     *      center is actually 1/4 of the way along for this guy.  but we don't have any knowledge of pixels at this point, so we're kind of\n     *      stuck when it comes to helping out the Arrow class. possibly we could pass in a 'transpose' parameter or something. the value\n     *      would be -l/4 in this case - move along one quarter of the total length.\n     */\n    /*\n     * Function: Constructor\n     * See <Overlays.Arrow> for allowed parameters for this overlay.\n     */\n    _jp.Overlays.Diamond = function (params) {\n        params = params || {};\n        var l = params.length || 40,\n            p = _jp.extend(params, {length: l / 2, foldback: 2});\n        _jp.Overlays.Arrow.call(this, p);\n        this.type = \"Diamond\";\n    };\n    _ju.extend(_jp.Overlays.Diamond, _jp.Overlays.Arrow);\n\n    var _getDimensions = function (component, forceRefresh) {\n        if (component._jsPlumb.cachedDimensions == null || forceRefresh)\n            component._jsPlumb.cachedDimensions = component.getDimensions();\n        return component._jsPlumb.cachedDimensions;\n    };\n\n    // abstract superclass for overlays that add an element to the DOM.\n    var AbstractDOMOverlay = function (params) {\n        _jp.jsPlumbUIComponent.apply(this, arguments);\n        AbstractOverlay.apply(this, arguments);\n\n        // hand off fired events to associated component.\n        var _f = this.fire;\n        this.fire = function () {\n            _f.apply(this, arguments);\n            if (this.component) this.component.fire.apply(this.component, arguments);\n        };\n\n        this.detached=false;\n        this.id = params.id;\n        this._jsPlumb.div = null;\n        this._jsPlumb.initialised = false;\n        this._jsPlumb.component = params.component;\n        this._jsPlumb.cachedDimensions = null;\n        this._jsPlumb.create = params.create;\n        this._jsPlumb.initiallyInvisible = params.visible === false;\n\n        this.getElement = function () {\n            if (this._jsPlumb.div == null) {\n                var div = this._jsPlumb.div = _jp.getElement(this._jsPlumb.create(this._jsPlumb.component));\n                div.style.position = \"absolute\";\n                div.className = this._jsPlumb.instance.overlayClass + \" \" +\n                    (this.cssClass ? this.cssClass :\n                        params.cssClass ? params.cssClass : \"\");\n                this._jsPlumb.instance.appendElement(div);\n                this._jsPlumb.instance.getId(div);\n                this.canvas = div;\n\n                // in IE the top left corner is what it placed at the desired location.  This will not\n                // be fixed. IE8 is not going to be supported for much longer.\n                var ts = \"translate(-50%, -50%)\";\n                div.style.webkitTransform = ts;\n                div.style.mozTransform = ts;\n                div.style.msTransform = ts;\n                div.style.oTransform = ts;\n                div.style.transform = ts;\n\n                // write the related component into the created element\n                div._jsPlumb = this;\n\n                if (params.visible === false)\n                    div.style.display = \"none\";\n            }\n            return this._jsPlumb.div;\n        };\n\n        this.draw = function (component, currentConnectionPaintStyle, absolutePosition) {\n            var td = _getDimensions(this);\n            if (td != null && td.length == 2) {\n                var cxy = { x: 0, y: 0 };\n\n                // absolutePosition would have been set by a call to connection.setAbsoluteOverlayPosition.\n                if (absolutePosition) {\n                    cxy = { x: absolutePosition[0], y: absolutePosition[1] };\n                }\n                else if (component.pointOnPath) {\n                    var loc = this.loc, absolute = false;\n                    if (_ju.isString(this.loc) || this.loc < 0 || this.loc > 1) {\n                        loc = parseInt(this.loc, 10);\n                        absolute = true;\n                    }\n                    cxy = component.pointOnPath(loc, absolute);  // a connection\n                }\n                else {\n                    var locToUse = this.loc.constructor == Array ? this.loc : this.endpointLoc;\n                    cxy = { x: locToUse[0] * component.w,\n                        y: locToUse[1] * component.h };\n                }\n\n                var minx = cxy.x - (td[0] / 2),\n                    miny = cxy.y - (td[1] / 2);\n\n                return {\n                    component: component,\n                    d: { minx: minx, miny: miny, td: td, cxy: cxy },\n                    minX: minx,\n                    maxX: minx + td[0],\n                    minY: miny,\n                    maxY: miny + td[1]\n                };\n            }\n            else return {minX: 0, maxX: 0, minY: 0, maxY: 0};\n        };\n    };\n    _ju.extend(AbstractDOMOverlay, [_jp.jsPlumbUIComponent, AbstractOverlay], {\n        getDimensions: function () {\n            return [1,1];\n        },\n        setVisible: function (state) {\n            if (this._jsPlumb.div) {\n                this._jsPlumb.div.style.display = state ? \"block\" : \"none\";\n                // if initially invisible, dimensions are 0,0 and never get updated\n                if (state && this._jsPlumb.initiallyInvisible) {\n                    _getDimensions(this, true);\n                    this.component.repaint();\n                    this._jsPlumb.initiallyInvisible = false;\n                }\n            }\n        },\n        /*\n         * Function: clearCachedDimensions\n         * Clears the cached dimensions for the label. As a performance enhancement, label dimensions are\n         * cached from 1.3.12 onwards. The cache is cleared when you change the label text, of course, but\n         * there are other reasons why the text dimensions might change - if you make a change through CSS, for\n         * example, you might change the font size.  in that case you should explicitly call this method.\n         */\n        clearCachedDimensions: function () {\n            this._jsPlumb.cachedDimensions = null;\n        },\n        cleanup: function (force) {\n            if (force) {\n                if (this._jsPlumb.div != null) {\n                    this._jsPlumb.div._jsPlumb = null;\n                    this._jsPlumb.instance.removeElement(this._jsPlumb.div);\n                }\n            }\n            else {\n                // if not a forced cleanup, just detach child from parent for now.\n                if (this._jsPlumb && this._jsPlumb.div && this._jsPlumb.div.parentNode)\n                    this._jsPlumb.div.parentNode.removeChild(this._jsPlumb.div);\n                this.detached = true;\n            }\n\n        },\n        reattach:function(instance) {\n            if (this._jsPlumb.div != null) instance.getContainer().appendChild(this._jsPlumb.div);\n            this.detached = false;\n        },\n        computeMaxSize: function () {\n            var td = _getDimensions(this);\n            return Math.max(td[0], td[1]);\n        },\n        paint: function (p, containerExtents) {\n            if (!this._jsPlumb.initialised) {\n                this.getElement();\n                p.component.appendDisplayElement(this._jsPlumb.div);\n                this._jsPlumb.initialised = true;\n                if (this.detached) this._jsPlumb.div.parentNode.removeChild(this._jsPlumb.div);\n            }\n            this._jsPlumb.div.style.left = (p.component.x + p.d.minx) + \"px\";\n            this._jsPlumb.div.style.top = (p.component.y + p.d.miny) + \"px\";\n        }\n    });\n\n    /*\n     * Class: Overlays.Custom\n     * A Custom overlay. You supply a 'create' function which returns some DOM element, and jsPlumb positions it.\n     * The 'create' function is passed a Connection or Endpoint.\n     */\n    /*\n     * Function: Constructor\n     * \n     * Parameters:\n     * \tcreate - function for jsPlumb to call that returns a DOM element.\n     * \tlocation - distance (as a decimal from 0 to 1 inclusive) marking where the label should sit on the connector. defaults to 0.5.\n     * \tid - optional id to use for later retrieval of this overlay.\n     * \t\n     */\n    _jp.Overlays.Custom = function (params) {\n        this.type = \"Custom\";\n        AbstractDOMOverlay.apply(this, arguments);\n    };\n    _ju.extend(_jp.Overlays.Custom, AbstractDOMOverlay);\n\n    _jp.Overlays.GuideLines = function () {\n        var self = this;\n        self.length = 50;\n        self.strokeWidth = 5;\n        this.type = \"GuideLines\";\n        AbstractOverlay.apply(this, arguments);\n        _jp.jsPlumbUIComponent.apply(this, arguments);\n        this.draw = function (connector, currentConnectionPaintStyle) {\n\n            var head = connector.pointAlongPathFrom(self.loc, self.length / 2),\n                mid = connector.pointOnPath(self.loc),\n                tail = _jg.pointOnLine(head, mid, self.length),\n                tailLine = _jg.perpendicularLineTo(head, tail, 40),\n                headLine = _jg.perpendicularLineTo(tail, head, 20);\n\n            return {\n                connector: connector,\n                head: head,\n                tail: tail,\n                headLine: headLine,\n                tailLine: tailLine,\n                minX: Math.min(head.x, tail.x, headLine[0].x, headLine[1].x),\n                minY: Math.min(head.y, tail.y, headLine[0].y, headLine[1].y),\n                maxX: Math.max(head.x, tail.x, headLine[0].x, headLine[1].x),\n                maxY: Math.max(head.y, tail.y, headLine[0].y, headLine[1].y)\n            };\n        };\n\n        // this.cleanup = function() { };  // nothing to clean up for GuideLines\n    };\n\n    /*\n     * Class: Overlays.Label\n\n     */\n    /*\n     * Function: Constructor\n     * \n     * Parameters:\n     * \tcssClass - optional css class string to append to css class. This string is appended \"as-is\", so you can of course have multiple classes\n     *             defined.  This parameter is preferred to using labelStyle, borderWidth and borderStyle.\n     * \tlabel - the label to paint.  May be a string or a function that returns a string.  Nothing will be painted if your label is null or your\n     *         label function returns null.  empty strings _will_ be painted.\n     * \tlocation - distance (as a decimal from 0 to 1 inclusive) marking where the label should sit on the connector. defaults to 0.5.\n     * \tid - optional id to use for later retrieval of this overlay.\n     * \n     * \t\n     */\n    _jp.Overlays.Label = function (params) {\n        this.labelStyle = params.labelStyle;\n\n        var labelWidth = null, labelHeight = null, labelText = null, labelPadding = null;\n        this.cssClass = this.labelStyle != null ? this.labelStyle.cssClass : null;\n        var p = _jp.extend({\n            create: function () {\n                return _jp.createElement(\"div\");\n            }}, params);\n        _jp.Overlays.Custom.call(this, p);\n        this.type = \"Label\";\n        this.label = params.label || \"\";\n        this.labelText = null;\n        if (this.labelStyle) {\n            var el = this.getElement();\n            this.labelStyle.font = this.labelStyle.font || \"12px sans-serif\";\n            el.style.font = this.labelStyle.font;\n            el.style.color = this.labelStyle.color || \"black\";\n            if (this.labelStyle.fill) el.style.background = this.labelStyle.fill;\n            if (this.labelStyle.borderWidth > 0) {\n                var dStyle = this.labelStyle.borderStyle ? this.labelStyle.borderStyle : \"black\";\n                el.style.border = this.labelStyle.borderWidth + \"px solid \" + dStyle;\n            }\n            if (this.labelStyle.padding) el.style.padding = this.labelStyle.padding;\n        }\n\n    };\n    _ju.extend(_jp.Overlays.Label, _jp.Overlays.Custom, {\n        cleanup: function (force) {\n            if (force) {\n                this.div = null;\n                this.label = null;\n                this.labelText = null;\n                this.cssClass = null;\n                this.labelStyle = null;\n            }\n        },\n        getLabel: function () {\n            return this.label;\n        },\n        /*\n         * Function: setLabel\n         * sets the label's, um, label.  you would think i'd call this function\n         * 'setText', but you can pass either a Function or a String to this, so\n         * it makes more sense as 'setLabel'. This uses innerHTML on the label div, so keep\n         * that in mind if you need escaped HTML.\n         */\n        setLabel: function (l) {\n            this.label = l;\n            this.labelText = null;\n            this.clearCachedDimensions();\n            this.update();\n            this.component.repaint();\n        },\n        getDimensions: function () {\n            this.update();\n            return AbstractDOMOverlay.prototype.getDimensions.apply(this, arguments);\n        },\n        update: function () {\n            if (typeof this.label == \"function\") {\n                var lt = this.label(this);\n                this.getElement().innerHTML = lt.replace(/\\r\\n/g, \"<br/>\");\n            }\n            else {\n                if (this.labelText == null) {\n                    this.labelText = this.label;\n                    this.getElement().innerHTML = this.labelText.replace(/\\r\\n/g, \"<br/>\");\n                }\n            }\n        },\n        updateFrom:function(d) {\n            if(d.label != null){\n                this.setLabel(d.label);\n            }\n        }\n    });\n\n    // ********************************* END OF OVERLAY DEFINITIONS ***********************************************************************\n\n}).call(typeof window !== 'undefined' ? window : this);\n\n/*\n * jsPlumb\n *\n * Title:jsPlumb 2.3.0\n *\n * Provides a way to visually connect elements on an HTML page, using SVG.\n *\n * This file contains the base class for library adapters.\n *\n * Copyright (c) 2010 - 2017 jsPlumb (hello@jsplumbtoolkit.com)\n *\n * http://jsplumbtoolkit.com\n * http://github.com/sporritt/jsplumb\n *\n * Dual licensed under the MIT and GPL2 licenses.\n */\n;(function() {\n    \"use strict\";\n    var root = this,\n        _jp = root.jsPlumb;\n\n    var _getEventManager = function(instance) {\n        var e = instance._mottle;\n        if (!e) {\n            e = instance._mottle = new root.Mottle();\n        }\n        return e;\n    };\n\n    _jp.extend(root.jsPlumbInstance.prototype, {\n        getEventManager:function() {\n            return _getEventManager(this);\n        },\n        on : function(el, event, callback) {\n            // TODO: here we would like to map the tap event if we know its\n            // an internal bind to a click. we have to know its internal because only\n            // then can we be sure that the UP event wont be consumed (tap is a synthesized\n            // event from a mousedown followed by a mouseup).\n            //event = { \"click\":\"tap\", \"dblclick\":\"dbltap\"}[event] || event;\n            this.getEventManager().on.apply(this, arguments);\n            return this;\n        },\n        off : function(el, event, callback) {\n            this.getEventManager().off.apply(this, arguments);\n            return this;\n        }\n    });\n\n\n}).call(typeof window !== 'undefined' ? window : this);\n/*\n * jsPlumb\n *\n * Title:jsPlumb 2.3.0\n *\n * Provides a way to visually connect elements on an HTML page, using SVG.\n *\n * This file contains the code for working with Groups.\n *\n * Copyright (c) 2010 - 2017 jsPlumb (hello@jsplumbtoolkit.com)\n *\n * http://jsplumbtoolkit.com\n * http://github.com/sporritt/jsplumb\n *\n * Dual licensed under the MIT and GPL2 licenses.\n */\n;(function() {\n    \"use strict\";\n\n    var root = this,\n        _ju = root.jsPlumbUtil,\n        _jpi = root.jsPlumbInstance;\n\n    var GROUP_COLLAPSED_CLASS = \"jtk-group-collapsed\";\n    var GROUP_EXPANDED_CLASS = \"jtk-group-expanded\";\n    var GROUP_CONTAINER_SELECTOR = \"[jtk-group-content]\";\n    var ELEMENT_DRAGGABLE_EVENT = \"elementDraggable\";\n    var STOP = \"stop\";\n    var REVERT = \"revert\";\n    var GROUP_MANAGER = \"_groupManager\";\n    var GROUP = \"_jsPlumbGroup\";\n    var GROUP_DRAG_SCOPE = \"_jsPlumbGroupDrag\";\n    var EVT_CHILD_ADDED = \"group:addMember\";\n    var EVT_CHILD_REMOVED = \"group:removeMember\";\n    var EVT_GROUP_ADDED = \"group:add\";\n    var EVT_GROUP_REMOVED = \"group:remove\";\n    var EVT_EXPAND = \"group:expand\";\n    var EVT_COLLAPSE = \"group:collapse\";\n\n    var GroupManager = function(_jsPlumb) {\n        var _managedGroups = {}, _connectionSourceMap = {}, _connectionTargetMap = {}, self = this;\n\n        _jsPlumb.bind(\"connection\", function(p) {\n            if (p.source[GROUP] != null && p.target[GROUP] != null && p.source[GROUP] === p.target[GROUP]) {\n                _connectionSourceMap[p.connection.id] = p.source[GROUP];\n                _connectionTargetMap[p.connection.id] = p.source[GROUP];\n            }\n            else {\n                if (p.source[GROUP] != null) {\n                    _ju.suggest(p.source[GROUP].connections.source, p.connection);\n                    _connectionSourceMap[p.connection.id] = p.source[GROUP];\n                }\n                if (p.target[GROUP] != null) {\n                    _ju.suggest(p.target[GROUP].connections.target, p.connection);\n                    _connectionTargetMap[p.connection.id] = p.target[GROUP];\n                }\n            }\n        });\n\n        function _cleanupDetachedConnection(conn) {\n            delete conn.proxies;\n            var group = _connectionSourceMap[conn.id], f;\n            if (group != null) {\n                f = function(c) { return c.id === conn.id; };\n                _ju.removeWithFunction(group.connections.source, f);\n                _ju.removeWithFunction(group.connections.target, f);\n                delete _connectionSourceMap[conn.id];\n            }\n\n            group = _connectionTargetMap[conn.id];\n            if (group != null) {\n                f = function(c) { return c.id === conn.id; };\n                _ju.removeWithFunction(group.connections.source, f);\n                _ju.removeWithFunction(group.connections.target, f);\n                delete _connectionTargetMap[conn.id];\n            }\n        }\n\n        _jsPlumb.bind(\"internal.connectionDetached\", function(p) {\n            _cleanupDetachedConnection(p.connection);\n        });\n\n        _jsPlumb.bind(\"connectionMoved\", function(p) {\n            var connMap = p.index === 0 ? _connectionSourceMap : _connectionTargetMap;\n            var group = connMap[p.connection.id];\n            if (group) {\n                var list = group.connections[p.index === 0 ? \"source\" : \"target\"];\n                var idx = list.indexOf(p.connection);\n                if (idx != -1) {\n                    list.splice(idx, 1);\n                }\n            }\n        });\n\n        this.addGroup = function(group) {\n            _jsPlumb.addClass(group.getEl(), GROUP_EXPANDED_CLASS);\n            _managedGroups[group.id] = group;\n            group.manager = this;\n            _updateConnectionsForGroup(group);\n            _jsPlumb.fire(EVT_GROUP_ADDED, { group:group });\n        };\n\n        this.addToGroup = function(group, el, doNotFireEvent) {\n            group = this.getGroup(group);\n            if (group) {\n                //group.add(el, doNotFireEvent);\n                var groupEl = group.getEl();\n\n                if (el._isJsPlumbGroup) return;\n                var currentGroup = el._jsPlumbGroup;\n                // if already a member of this group, do nothing\n                if (currentGroup !== group) {\n                    var elpos = _jsPlumb.getOffset(el, true);\n                    var cpos = group.collapsed ? _jsPlumb.getOffset(groupEl, true) : _jsPlumb.getOffset(group.getDragArea(), true);\n\n                    // otherwise, transfer to this group.\n                    if (currentGroup != null) {\n                        currentGroup.remove(el, doNotFireEvent);\n                        self.updateConnectionsForGroup(currentGroup);\n                    }\n                    group.add(el, doNotFireEvent);\n\n                    var handleDroppedConnections = function (list, index) {\n                        var oidx = index == 0 ? 1 : 0;\n                        list.each(function (c) {\n                            c.setVisible(false);\n                            if (c.endpoints[oidx].element._jsPlumbGroup === group) {\n                                c.endpoints[oidx].setVisible(false);\n                                self.expandConnection(c, oidx, group);\n                            }\n                            else {\n                                c.endpoints[index].setVisible(false);\n                                self.collapseConnection(c, index, group);\n                            }\n                        });\n                    };\n\n                    if (group.collapsed) {\n                        handleDroppedConnections(_jsPlumb.select({source: el}), 0);\n                        handleDroppedConnections(_jsPlumb.select({target: el}), 1);\n                    }\n\n                    var elId = _jsPlumb.getId(el);\n                    _jsPlumb.dragManager.setParent(el, elId, groupEl, _jsPlumb.getId(groupEl), elpos);\n\n                    var newPosition = { left: elpos.left - cpos.left, top: elpos.top - cpos.top };\n\n                    _jsPlumb.setPosition(el, newPosition);\n\n                    _jsPlumb.dragManager.revalidateParent(el, elId, elpos);\n\n                    self.updateConnectionsForGroup(group);\n\n                    _jsPlumb.revalidate(elId);\n\n                    setTimeout(function () {\n                        _jsPlumb.fire(EVT_CHILD_ADDED, {group: group, el: el});\n                    }, 0);\n                }\n            }\n        };\n\n        this.removeFromGroup = function(group, el, doNotFireEvent) {\n            group = this.getGroup(group);\n            if (group) {\n                group.remove(el, null, doNotFireEvent);\n            }\n        };\n\n        this.getGroup = function(groupId) {\n            var group = groupId;\n            if (_ju.isString(groupId)) {\n                group = _managedGroups[groupId];\n                if (group == null) throw new TypeError(\"No such group [\" + groupId + \"]\");\n            }\n            return group;\n        };\n\n        this.getGroups = function() {\n            var o = [];\n            for (var g in _managedGroups) {\n                o.push(_managedGroups[g]);\n            }\n            return o;\n        };\n\n        this.removeGroup = function(group, deleteMembers, manipulateDOM, doNotFireEvent) {\n            group = this.getGroup(group);\n            this.expandGroup(group, true); // this reinstates any original connections and removes all proxies, but does not fire an event.\n            group[deleteMembers ? \"removeAll\" : \"orphanAll\"](manipulateDOM, doNotFireEvent);\n            _jsPlumb.remove(group.getEl());\n            delete _managedGroups[group.id];\n            delete _jsPlumb._groups[group.id];\n            _jsPlumb.fire(EVT_GROUP_REMOVED, { group:group });\n        };\n\n        this.removeAllGroups = function(deleteMembers, manipulateDOM, doNotFireEvent) {\n            for (var g in _managedGroups) {\n                this.removeGroup(_managedGroups[g], deleteMembers, manipulateDOM, doNotFireEvent);\n            }\n        };\n\n        function _setVisible(group, state) {\n            var m = group.getMembers();\n            for (var i = 0; i < m.length; i++) {\n                _jsPlumb[state ? \"show\" : \"hide\"](m[i], true);\n            }\n        }\n\n        var _collapseConnection = this.collapseConnection = function(c, index, group) {\n\n            var proxyEp, groupEl = group.getEl(), groupElId = _jsPlumb.getId(groupEl),\n                originalElementId = c.endpoints[index].elementId;\n\n            var otherEl = c.endpoints[index === 0 ? 1 : 0].element;\n            if (otherEl[GROUP] && (!otherEl[GROUP].shouldProxy() && otherEl[GROUP].collapsed)) {\n                return;\n            }\n\n            c.proxies = c.proxies || [];\n            if(c.proxies[index]) {\n                proxyEp = c.proxies[index].ep;\n            }else {\n                proxyEp = _jsPlumb.addEndpoint(groupEl, {\n                    endpoint:group.getEndpoint(c, index),\n                    anchor:group.getAnchor(c, index),\n                    parameters:{\n                        isProxyEndpoint:true\n                    }\n                });\n                proxyEp._forceDeleteOnDetach = true;\n            }\n            // for this index, stash proxy info: the new EP, the original EP.\n            c.proxies[index] = { ep:proxyEp, originalEp: c.endpoints[index] };\n\n            // and advise the anchor manager\n            if (index === 0) {\n                // TODO why are there two differently named methods? Why is there not one method that says \"some end of this\n                // connection changed (you give the index), and here's the new element and element id.\"\n                _jsPlumb.anchorManager.sourceChanged(originalElementId, groupElId, c, groupEl);\n            }\n            else {\n                _jsPlumb.anchorManager.updateOtherEndpoint(c.endpoints[0].elementId, originalElementId, groupElId, c);\n                c.target = groupEl;\n                c.targetId = groupElId;\n            }\n\n\n            // detach the original EP from the connection.\n            c.proxies[index].originalEp.detachFromConnection(c, null, true);\n\n            // set the proxy as the new ep\n            proxyEp.connections = [ c ];\n            c.endpoints[index] = proxyEp;\n\n            c.setVisible(true);\n        };\n\n        this.collapseGroup = function(group) {\n            group = this.getGroup(group);\n            if (group == null || group.collapsed) return;\n            var groupEl = group.getEl();\n\n            // todo remove old proxy endpoints first, just in case?\n            //group.proxies.length = 0;\n\n            // hide all connections\n            _setVisible(group, false);\n\n            if (group.shouldProxy()) {\n                // collapses all connections in a group.\n                var _collapseSet = function (conns, index) {\n                    for (var i = 0; i < conns.length; i++) {\n                        var c = conns[i];\n                        _collapseConnection(c, index, group);\n                    }\n                };\n\n                // setup proxies for sources and targets\n                _collapseSet(group.connections.source, 0);\n                _collapseSet(group.connections.target, 1);\n            }\n\n            group.collapsed = true;\n            _jsPlumb.removeClass(groupEl, GROUP_EXPANDED_CLASS);\n            _jsPlumb.addClass(groupEl, GROUP_COLLAPSED_CLASS);\n            _jsPlumb.revalidate(groupEl);\n            _jsPlumb.fire(EVT_COLLAPSE, { group:group  });\n        };\n\n        var _expandConnection = this.expandConnection = function(c, index, group) {\n\n            // if no proxies or none for this end of the connection, abort.\n            if (c.proxies == null || c.proxies[index] == null) return;\n\n            var groupElId = _jsPlumb.getId(group.getEl()),\n                originalElement = c.proxies[index].originalEp.element,\n                originalElementId = c.proxies[index].originalEp.elementId;\n\n            c.endpoints[index] = c.proxies[index].originalEp;\n            // and advise the anchor manager\n            if (index === 0) {\n                // TODO why are there two differently named methods? Why is there not one method that says \"some end of this\n                // connection changed (you give the index), and here's the new element and element id.\"\n                _jsPlumb.anchorManager.sourceChanged(groupElId, originalElementId, c, originalElement);\n            }\n            else {\n                _jsPlumb.anchorManager.updateOtherEndpoint(c.endpoints[0].elementId, groupElId, originalElementId, c);\n                c.target = originalElement;\n                c.targetId = originalElementId;\n            }\n\n            // detach the proxy EP from the connection.\n            c.proxies[index].ep.detachFromConnection(c, null, true);\n\n\n            c.proxies[index].originalEp.addConnection(c);\n\n            // cleanup\n            delete c.proxies[index];\n        };\n\n        this.expandGroup = function(group, doNotFireEvent) {\n\n            group = this.getGroup(group);\n\n            if (group == null || !group.collapsed) return;\n            var groupEl = group.getEl();\n\n            _setVisible(group, true);\n\n            if (group.shouldProxy()) {\n                // collapses all connections in a group.\n                var _expandSet = function (conns, index) {\n                    for (var i = 0; i < conns.length; i++) {\n                        var c = conns[i];\n                        _expandConnection(c, index, group);\n                    }\n                };\n\n                // setup proxies for sources and targets\n                _expandSet(group.connections.source, 0);\n                _expandSet(group.connections.target, 1);\n            }\n\n            group.collapsed = false;\n            _jsPlumb.addClass(groupEl, GROUP_EXPANDED_CLASS);\n            _jsPlumb.removeClass(groupEl, GROUP_COLLAPSED_CLASS);\n            _jsPlumb.revalidate(groupEl);\n            this.repaintGroup(group);\n            if (!doNotFireEvent) {\n                _jsPlumb.fire(EVT_EXPAND, { group: group});\n            }\n        };\n\n        this.repaintGroup = function(group) {\n            group = this.getGroup(group);\n            var m = group.getMembers();\n            for (var i = 0; i < m.length; i++) {\n                _jsPlumb.revalidate(m[i]);\n            }\n        };\n\n        // TODO refactor this with the code that responds to `connection` events.\n        function _updateConnectionsForGroup(group) {\n            var members = group.getMembers();\n            var c1 = _jsPlumb.getConnections({source:members}, true);\n            var c2 = _jsPlumb.getConnections({target:members}, true);\n            var processed = {};\n            group.connections.source.length = 0;\n            group.connections.target.length = 0;\n            var oneSet = function(c) {\n                for (var i = 0; i < c.length; i++) {\n                    if (processed[c[i].id]) continue;\n                    processed[c[i].id] = true;\n                    if (c[i].source._jsPlumbGroup === group) {\n                        if (c[i].target._jsPlumbGroup !== group) {\n                            group.connections.source.push(c[i]);\n                        }\n                        _connectionSourceMap[c[i].id] = group;\n                    }\n                    else if (c[i].target._jsPlumbGroup === group) {\n                        group.connections.target.push(c[i]);\n                        _connectionTargetMap[c[i].id] = group;\n                    }\n                }\n            };\n            oneSet(c1); oneSet(c2);\n        }\n\n        this.updateConnectionsForGroup = _updateConnectionsForGroup;\n        this.refreshAllGroups = function() {\n            for (var g in _managedGroups) {\n                _updateConnectionsForGroup(_managedGroups[g]);\n                _jsPlumb.dragManager.updateOffsets(_jsPlumb.getId(_managedGroups[g].getEl()));\n            }\n        };\n    };\n\n    /**\n     *\n     * @param {jsPlumbInstance} _jsPlumb Associated jsPlumb instance.\n     * @param {Object} params\n     * @param {Element} params.el The DOM element representing the Group.\n     * @param {String} [params.id] Optional ID for the Group. A UUID will be assigned as the Group's ID if you do not provide one.\n     * @param {Boolean} [params.constrain=false] If true, child elements will not be able to be dragged outside of the Group container.\n     * @param {Boolean} [params.revert=true] By default, child elements revert to the container if dragged outside. You can change this by setting `revert:false`. This behaviour is also overridden if you set `orphan` or `prune`.\n     * @param {Boolean} [params.orphan=false] If true, child elements dropped outside of the Group container will be removed from the Group (but not from the DOM).\n     * @param {Boolean} [params.prune=false] If true, child elements dropped outside of the Group container will be removed from the Group and also from the DOM.\n     * @param {Boolean} [params.dropOverride=false] If true, a child element that has been dropped onto some other Group will not be subject to the controls imposed by `prune`, `revert` or `orphan`.\n     * @constructor\n     */\n    var Group = function(_jsPlumb, params) {\n        var self = this;\n        var el = params.el;\n        this.getEl = function() { return el; };\n        this.id = params.id || _ju.uuid();\n        el._isJsPlumbGroup = true;\n\n        var getDragArea = this.getDragArea = function() {\n            var da = _jsPlumb.getSelector(el, GROUP_CONTAINER_SELECTOR);\n            return da && da.length > 0 ? da[0] : el;\n        };\n\n        var ghost = params.ghost === true;\n        var constrain = ghost || (params.constrain === true);\n        var revert = params.revert !== false;\n        var orphan = params.orphan === true;\n        var prune = params.prune === true;\n        var dropOverride = params.dropOverride === true;\n        var proxied = params.proxied !== false;\n        var elements = [];\n        this.connections = { source:[], target:[], internal:[] };\n\n        // this function, and getEndpoint below, are stubs for a future setup in which we can choose endpoint\n        // and anchor based upon the connection and the index (source/target) of the endpoint to be proxied.\n        this.getAnchor = function(conn, endpointIndex) {\n            return params.anchor || \"Continuous\";\n        };\n\n        this.getEndpoint = function(conn, endpointIndex) {\n            return params.endpoint || [ \"Dot\", { radius:10 }];\n        };\n\n        this.collapsed = false;\n        if (params.draggable !== false) {\n            var opts = {\n                stop:function(params) {\n                    _jsPlumb.fire(\"groupDragStop\", jsPlumb.extend(params, {group:self}));\n                },\n                scope:GROUP_DRAG_SCOPE\n            };\n            if (params.dragOptions) {\n                root.jsPlumb.extend(opts, params.dragOptions);\n            }\n            _jsPlumb.draggable(params.el, opts);\n        }\n        if (params.droppable !== false) {\n            _jsPlumb.droppable(params.el, {\n                drop:function(p) {\n                    var el = p.drag.el;\n                    if (el._isJsPlumbGroup) return;\n                    var currentGroup = el._jsPlumbGroup;\n                    if (currentGroup !== self) {\n                        if (currentGroup != null) {\n                            if (currentGroup.overrideDrop(el, self)) {\n                                return;\n                            }\n                        }\n                        _jsPlumb.getGroupManager().addToGroup(self, el, false);\n                    }\n\n                }\n            });\n        }\n        var _each = function(_el, fn) {\n            var els = _el.nodeType == null ?  _el : [ _el ];\n            for (var i = 0; i < els.length; i++) {\n                fn(els[i]);\n            }\n        };\n\n        this.overrideDrop = function(_el, targetGroup) {\n            return dropOverride && (revert || prune || orphan);\n        };\n\n        this.add = function(_el, doNotFireEvent) {\n            var dragArea = getDragArea();\n            _each(_el, function(__el) {\n\n                if (__el._jsPlumbGroup != null) {\n                    if (__el._jsPlumbGroup === self) {\n                        return;\n                    } else {\n                        __el._jsPlumbGroup.remove(__el, true, doNotFireEvent, false);\n                    }\n                }\n\n                __el._jsPlumbGroup = self;\n                elements.push(__el);\n                // test if draggable and add handlers if so.\n                if (_jsPlumb.isAlreadyDraggable(__el)) {\n                    _bindDragHandlers(__el);\n                }\n\n                if (__el.parentNode != dragArea) {\n                    dragArea.appendChild(__el);\n                }\n\n                if (!doNotFireEvent) {\n                    _jsPlumb.fire(EVT_CHILD_ADDED, {group: self, el: __el});\n                }\n            });\n\n            _jsPlumb.getGroupManager().updateConnectionsForGroup(self);\n        };\n\n        this.remove = function(el, manipulateDOM, doNotFireEvent, doNotUpdateConnections) {\n\n            _each(el, function(__el) {\n                delete __el._jsPlumbGroup;\n                _ju.removeWithFunction(elements, function(e) {\n                    return e === __el;\n                });\n\n                if (manipulateDOM) {\n                    try { self.getDragArea().removeChild(__el); }\n                    catch (e) {\n                        jsPlumbUtil.log(\"Could not remove element from Group \" + e);\n                    }\n                }\n                _unbindDragHandlers(__el);\n                if (!doNotFireEvent) {\n                    _jsPlumb.fire(EVT_CHILD_REMOVED, {group: self, el: __el});\n                }\n            });\n            if (!doNotUpdateConnections) {\n                _jsPlumb.getGroupManager().updateConnectionsForGroup(self);\n            }\n        };\n        this.removeAll = function(manipulateDOM, doNotFireEvent) {\n            for (var i = 0, l = elements.length; i < l; i++) {\n                self.remove(elements[0], manipulateDOM, doNotFireEvent, true);\n            }\n            elements.length = 0;\n            _jsPlumb.getGroupManager().updateConnectionsForGroup(self);\n        };\n        this.orphanAll = function() {\n            for (var i = 0; i < elements.length; i++) {\n                _orphan(elements[i]);\n            }\n            elements.length = 0;\n        };\n        this.getMembers = function() { return elements; };\n\n        el[GROUP] = this;\n\n        _jsPlumb.bind(ELEMENT_DRAGGABLE_EVENT, function(dragParams) {\n            // if its for the current group,\n            if (dragParams.el._jsPlumbGroup == this) {\n                _bindDragHandlers(dragParams.el);\n            }\n        }.bind(this));\n\n        function _findParent(_el) {\n            return _el.offsetParent;\n        }\n\n        function _isInsideParent(_el, pos) {\n            var p = _findParent(_el),\n                s = _jsPlumb.getSize(p),\n                ss = _jsPlumb.getSize(_el),\n                leftEdge = pos[0],\n                rightEdge = leftEdge + ss[0],\n                topEdge = pos[1],\n                bottomEdge = topEdge + ss[1];\n\n            return rightEdge > 0 && leftEdge < s[0] && bottomEdge > 0 && topEdge < s[1];\n        }\n\n        //\n        // orphaning an element means taking it out of the group and adding it to the main jsplumb container.\n        //\n        function _orphan(_el) {\n            var id = _jsPlumb.getId(_el);\n            var pos = _jsPlumb.getOffset(_el);\n            _el.parentNode.removeChild(_el);\n            _jsPlumb.getContainer().appendChild(_el);\n            _jsPlumb.setPosition(_el, pos);\n            delete _el._jsPlumbGroup;\n            _unbindDragHandlers(_el);\n            _jsPlumb.dragManager.clearParent(_el, id);\n        }\n\n        //\n        // remove an element from the group, then either prune it from the jsplumb instance, or just orphan it.\n        //\n        function _pruneOrOrphan(p) {\n            if (!_isInsideParent(p.el, p.pos)) {\n                p.el._jsPlumbGroup.remove(p.el);\n                if (prune) {\n                    _jsPlumb.remove(p.el);\n                } else {\n                    _orphan(p.el);\n                }\n            }\n        }\n\n        //\n        // redraws the element\n        //\n        function _revalidate(_el) {\n            var id = _jsPlumb.getId(_el);\n            _jsPlumb.revalidate(_el);\n            _jsPlumb.dragManager.revalidateParent(_el, id);\n        }\n\n        //\n        // unbind the group specific drag/revert handlers.\n        //\n        function _unbindDragHandlers(_el) {\n            if (!_el._katavorioDrag) return;\n            if (prune || orphan) {\n                _el._katavorioDrag.off(STOP, _pruneOrOrphan);\n            }\n            if (!prune && !orphan && revert) {\n                _el._katavorioDrag.off(REVERT, _revalidate);\n                _el._katavorioDrag.setRevert(null);\n            }\n        }\n\n        function _bindDragHandlers(_el) {\n            if (!_el._katavorioDrag) return;\n            if (prune || orphan) {\n                _el._katavorioDrag.on(STOP, _pruneOrOrphan);\n            }\n\n            if (constrain) {\n                _el._katavorioDrag.setConstrain(true);\n            }\n\n            if (ghost) {\n                _el._katavorioDrag.setUseGhostProxy(true);\n            }\n\n            if (!prune && !orphan && revert) {\n                _el._katavorioDrag.on(REVERT, _revalidate);\n                _el._katavorioDrag.setRevert(function(__el, pos) {\n                    return !_isInsideParent(__el, pos);\n                });\n            }\n        }\n\n        this.shouldProxy = function() {\n            return proxied;\n        };\n\n        _jsPlumb.getGroupManager().addGroup(this);\n    };\n\n    /**\n     * Adds a group to the jsPlumb instance.\n     * @method addGroup\n     * @param {Object} params\n     * @return {Group} The newly created Group.\n     */\n    _jpi.prototype.addGroup = function(params) {\n        var j = this;\n        j._groups = j._groups || {};\n        if (j._groups[params.id] != null) {\n            throw new TypeError(\"cannot create Group [\" + params.id + \"]; a Group with that ID exists\");\n        }\n        if (params.el[GROUP] != null) {\n            throw new TypeError(\"cannot create Group [\" + params.id + \"]; the given element is already a Group\");\n        }\n        var group = new Group(j, params);\n        j._groups[group.id] = group;\n        return group;\n    };\n\n    /**\n     * Add an element to a group.\n     * @method addToGroup\n     * @param {String} group Group, or ID of the group, to add the element to.\n     * @param {Element} el Element to add to the group.\n     */\n    _jpi.prototype.addToGroup = function(group, el, doNotFireEvent) {\n\n        var _one = function(_el) {\n            var id = this.getId(_el);\n            this.manage(id, _el);\n            this.getGroupManager().addToGroup(group, _el, doNotFireEvent);\n        }.bind(this);\n\n        if (Array.isArray(el)) {\n            for (var i = 0; i < el.length; i++) {\n                _one(el[i]);\n            }\n        } else {\n            _one(el);\n        }\n    };\n\n    /**\n     * Remove an element from a group.\n     * @method removeFromGroup\n     * @param {String} group Group, or ID of the group, to remove the element from.\n     * @param {Element} el Element to add to the group.\n     */\n    _jpi.prototype.removeFromGroup = function(group, el, doNotFireEvent) {\n        this.getGroupManager().removeFromGroup(group, el, doNotFireEvent);\n    };\n\n    /**\n     * Remove a group, and optionally remove its members from the jsPlumb instance.\n     * @method removeGroup\n     * @param {String|Group} group Group to delete, or ID of Group to delete.\n     * @param {Boolean} [deleteMembers=false] If true, group members will be removed along with the group. Otherwise they will\n     * just be 'orphaned' (returned to the main container).\n     */\n    _jpi.prototype.removeGroup = function(group, deleteMembers, manipulateDOM, doNotFireEvent) {\n        this.getGroupManager().removeGroup(group, deleteMembers, manipulateDOM, doNotFireEvent);\n    };\n\n    /**\n     * Remove all groups, and optionally remove their members from the jsPlumb instance.\n     * @method removeAllGroup\n     * @param {Boolean} [deleteMembers=false] If true, group members will be removed along with the groups. Otherwise they will\n     * just be 'orphaned' (returned to the main container).\n     */\n    _jpi.prototype.removeAllGroups = function(deleteMembers, manipulateDOM, doNotFireEvent) {\n        this.getGroupManager().removeAllGroups(deleteMembers, manipulateDOM, doNotFireEvent);\n    };\n\n    /**\n     * Get a Group\n     * @method getGroup\n     * @param {String} groupId ID of the group to get\n     * @return {Group} Group with the given ID, null if not found.\n     */\n    _jpi.prototype.getGroup = function(groupId) {\n        return this.getGroupManager().getGroup(groupId);\n    };\n\n    /**\n     * Gets all the Groups managed by the jsPlumb instance.\n     * @returns {Group[]} List of Groups. Empty if none.\n     */\n    _jpi.prototype.getGroups = function() {\n        return this.getGroupManager().getGroups();\n    };\n\n    /**\n     * Expands a group element. jsPlumb doesn't do \"everything\" for you here, because what it means to expand a Group\n     * will vary from application to application. jsPlumb does these things:\n     *\n     * - Hides any connections that are internal to the group (connections between members, and connections from member of\n     * the group to the group itself)\n     * - Proxies all connections for which the source or target is a member of the group.\n     * - Hides the proxied connections.\n     * - Adds the jtk-group-expanded class to the group's element\n     * - Removes the jtk-group-collapsed class from the group's element.\n     *\n     * @method expandGroup\n     * @param {String|Group} group Group to expand, or ID of Group to expand.\n     */\n    _jpi.prototype.expandGroup = function(group) {\n        this.getGroupManager().expandGroup(group);\n    };\n\n    /**\n     * Collapses a group element. jsPlumb doesn't do \"everything\" for you here, because what it means to collapse a Group\n     * will vary from application to application. jsPlumb does these things:\n     *\n     * - Shows any connections that are internal to the group (connections between members, and connections from member of\n     * the group to the group itself)\n     * - Removes proxies for all connections for which the source or target is a member of the group.\n     * - Shows the previously proxied connections.\n     * - Adds the jtk-group-collapsed class to the group's element\n     * - Removes the jtk-group-expanded class from the group's element.\n     *\n     * @method expandGroup\n     * @param {String|Group} group Group to expand, or ID of Group to expand.\n     */\n    _jpi.prototype.collapseGroup = function(groupId) {\n        this.getGroupManager().collapseGroup(groupId);\n    };\n\n\n    _jpi.prototype.repaintGroup = function(group) {\n        this.getGroupManager().repaintGroup(group);\n    };\n\n    /**\n     * Collapses or expands a group element depending on its current state. See notes in the collapseGroup and expandGroup method.\n     *\n     * @method toggleGroup\n     * @param {String|Group} group Group to expand/collapse, or ID of Group to expand/collapse.\n     */\n    _jpi.prototype.toggleGroup = function(group) {\n        group = this.getGroupManager().getGroup(group);\n        if (group != null) {\n            this.getGroupManager()[group.collapsed ? \"expandGroup\" : \"collapseGroup\"](group);\n        }\n    };\n\n    //\n    // lazy init a group manager for the given jsplumb instance.\n    //\n    _jpi.prototype.getGroupManager = function() {\n        var mgr = this[GROUP_MANAGER];\n        if (mgr == null) {\n            mgr = this[GROUP_MANAGER] = new GroupManager(this);\n        }\n        return mgr;\n    };\n\n    _jpi.prototype.removeGroupManager = function() {\n        delete this[GROUP_MANAGER];\n    };\n\n    /**\n     * Gets the Group that the given element belongs to, null if none.\n     * @method getGroupFor\n     * @param {String|Element} el Element, or element ID.\n     * @returns {Group} A Group, if found, or null.\n     */\n    _jpi.prototype.getGroupFor = function(el) {\n        el = this.getElement(el);\n        if (el) {\n            return el[GROUP];\n        }\n    };\n\n}).call(typeof window !== 'undefined' ? window : this);\n\n\n/*\n * jsPlumb\n * \n * Title:jsPlumb 2.3.0\n * \n * Provides a way to visually connect elements on an HTML page, using SVG.\n * \n * This file contains the 'flowchart' connectors, consisting of vertical and horizontal line segments.\n *\n * Copyright (c) 2010 - 2017 jsPlumb (hello@jsplumbtoolkit.com)\n * \n * http://jsplumbtoolkit.com\n * http://github.com/sporritt/jsplumb\n * \n * Dual licensed under the MIT and GPL2 licenses.\n */\n;\n(function () {\n\n    \"use strict\";\n    var root = this, _jp = root.jsPlumb, _ju = root.jsPlumbUtil;\n\n    var Flowchart = function (params) {\n        this.type = \"Flowchart\";\n        params = params || {};\n        params.stub = params.stub == null ? 30 : params.stub;\n        var segments,\n            _super = _jp.Connectors.AbstractConnector.apply(this, arguments),\n            midpoint = params.midpoint == null ? 0.5 : params.midpoint,\n            alwaysRespectStubs = params.alwaysRespectStubs === true,\n            lastx = null, lasty = null, lastOrientation,\n            cornerRadius = params.cornerRadius != null ? params.cornerRadius : 0,\n\n            // TODO now common between this and AbstractBezierEditor; refactor into superclass?\n            loopbackRadius = params.loopbackRadius || 25,\n            isLoopbackCurrently = false,\n\n            sgn = function (n) {\n                return n < 0 ? -1 : n === 0 ? 0 : 1;\n            },\n            /**\n             * helper method to add a segment.\n             */\n            addSegment = function (segments, x, y, paintInfo) {\n                if (lastx == x && lasty == y) return;\n                var lx = lastx == null ? paintInfo.sx : lastx,\n                    ly = lasty == null ? paintInfo.sy : lasty,\n                    o = lx == x ? \"v\" : \"h\",\n                    sgnx = sgn(x - lx),\n                    sgny = sgn(y - ly);\n\n                lastx = x;\n                lasty = y;\n                segments.push([lx, ly, x, y, o, sgnx, sgny]);\n            },\n            segLength = function (s) {\n                return Math.sqrt(Math.pow(s[0] - s[2], 2) + Math.pow(s[1] - s[3], 2));\n            },\n            _cloneArray = function (a) {\n                var _a = [];\n                _a.push.apply(_a, a);\n                return _a;\n            },\n            writeSegments = function (conn, segments, paintInfo) {\n                var current = null, next;\n                for (var i = 0; i < segments.length - 1; i++) {\n\n                    current = current || _cloneArray(segments[i]);\n                    next = _cloneArray(segments[i + 1]);\n                    if (cornerRadius > 0 && current[4] != next[4]) {\n                        var radiusToUse = Math.min(cornerRadius, segLength(current), segLength(next));\n                        // right angle. adjust current segment's end point, and next segment's start point.\n                        current[2] -= current[5] * radiusToUse;\n                        current[3] -= current[6] * radiusToUse;\n                        next[0] += next[5] * radiusToUse;\n                        next[1] += next[6] * radiusToUse;\n                        var ac = (current[6] == next[5] && next[5] == 1) ||\n                                ((current[6] == next[5] && next[5] === 0) && current[5] != next[6]) ||\n                                (current[6] == next[5] && next[5] == -1),\n                            sgny = next[1] > current[3] ? 1 : -1,\n                            sgnx = next[0] > current[2] ? 1 : -1,\n                            sgnEqual = sgny == sgnx,\n                            cx = (sgnEqual && ac || (!sgnEqual && !ac)) ? next[0] : current[2],\n                            cy = (sgnEqual && ac || (!sgnEqual && !ac)) ? current[3] : next[1];\n\n                        _super.addSegment(conn, \"Straight\", {\n                            x1: current[0], y1: current[1], x2: current[2], y2: current[3]\n                        });\n\n                        _super.addSegment(conn, \"Arc\", {\n                            r: radiusToUse,\n                            x1: current[2],\n                            y1: current[3],\n                            x2: next[0],\n                            y2: next[1],\n                            cx: cx,\n                            cy: cy,\n                            ac: ac\n                        });\n                    }\n                    else {\n                        // dx + dy are used to adjust for line width.\n                        var dx = (current[2] == current[0]) ? 0 : (current[2] > current[0]) ? (paintInfo.lw / 2) : -(paintInfo.lw / 2),\n                            dy = (current[3] == current[1]) ? 0 : (current[3] > current[1]) ? (paintInfo.lw / 2) : -(paintInfo.lw / 2);\n                        _super.addSegment(conn, \"Straight\", {\n                            x1: current[0] - dx, y1: current[1] - dy, x2: current[2] + dx, y2: current[3] + dy\n                        });\n                    }\n                    current = next;\n                }\n                if (next != null) {\n                    // last segment\n                    _super.addSegment(conn, \"Straight\", {\n                        x1: next[0], y1: next[1], x2: next[2], y2: next[3]\n                    });\n                }\n            };\n\n        this._compute = function (paintInfo, params) {\n\n            segments = [];\n            lastx = null;\n            lasty = null;\n            lastOrientation = null;\n\n            var commonStubCalculator = function () {\n                return [ paintInfo.startStubX, paintInfo.startStubY, paintInfo.endStubX, paintInfo.endStubY ];\n            },\n                stubCalculators = {\n                    perpendicular: commonStubCalculator,\n                    orthogonal: commonStubCalculator,\n                    opposite: function (axis) {\n                        var pi = paintInfo,\n                            idx = axis == \"x\" ? 0 : 1,\n                            areInProximity = {\n                                \"x\": function () {\n                                    return ( (pi.so[idx] == 1 && (\n                                        ( (pi.startStubX > pi.endStubX) && (pi.tx > pi.startStubX) ) ||\n                                        ( (pi.sx > pi.endStubX) && (pi.tx > pi.sx))))) ||\n\n                                        ( (pi.so[idx] == -1 && (\n                                            ( (pi.startStubX < pi.endStubX) && (pi.tx < pi.startStubX) ) ||\n                                            ( (pi.sx < pi.endStubX) && (pi.tx < pi.sx)))));\n                                },\n                                \"y\": function () {\n                                    return ( (pi.so[idx] == 1 && (\n                                        ( (pi.startStubY > pi.endStubY) && (pi.ty > pi.startStubY) ) ||\n                                        ( (pi.sy > pi.endStubY) && (pi.ty > pi.sy))))) ||\n\n                                        ( (pi.so[idx] == -1 && (\n                                            ( (pi.startStubY < pi.endStubY) && (pi.ty < pi.startStubY) ) ||\n                                            ( (pi.sy < pi.endStubY) && (pi.ty < pi.sy)))));\n                                }\n                            };\n\n                        if (!alwaysRespectStubs && areInProximity[axis]()) {\n                            return {\n                                \"x\": [(paintInfo.sx + paintInfo.tx) / 2, paintInfo.startStubY, (paintInfo.sx + paintInfo.tx) / 2, paintInfo.endStubY],\n                                \"y\": [paintInfo.startStubX, (paintInfo.sy + paintInfo.ty) / 2, paintInfo.endStubX, (paintInfo.sy + paintInfo.ty) / 2]\n                            }[axis];\n                        }\n                        else {\n                            return [ paintInfo.startStubX, paintInfo.startStubY, paintInfo.endStubX, paintInfo.endStubY ];\n                        }\n                    }\n                };\n\n            // calculate Stubs.\n            var stubs = stubCalculators[paintInfo.anchorOrientation](paintInfo.sourceAxis),\n                idx = paintInfo.sourceAxis == \"x\" ? 0 : 1,\n                oidx = paintInfo.sourceAxis == \"x\" ? 1 : 0,\n                ss = stubs[idx],\n                oss = stubs[oidx],\n                es = stubs[idx + 2],\n                oes = stubs[oidx + 2];\n\n            // add the start stub segment. use stubs for loopback as it will look better, with the loop spaced\n            // away from the element.\n            addSegment(segments, stubs[0], stubs[1], paintInfo);\n\n            // if its a loopback and we should treat it differently.\n            if (false &&params.sourcePos[0] == params.targetPos[0] && params.sourcePos[1] == params.targetPos[1]) {\n\n                // we use loopbackRadius here, as statemachine connectors do.\n                // so we go radius to the left from stubs[0], then upwards by 2*radius, to the right by 2*radius,\n                // down by 2*radius, left by radius.\n                addSegment(segments, stubs[0] - loopbackRadius, stubs[1], paintInfo);\n                addSegment(segments, stubs[0] - loopbackRadius, stubs[1] - (2 * loopbackRadius), paintInfo);\n                addSegment(segments, stubs[0] + loopbackRadius, stubs[1] - (2 * loopbackRadius), paintInfo);\n                addSegment(segments, stubs[0] + loopbackRadius, stubs[1], paintInfo);\n                addSegment(segments, stubs[0], stubs[1], paintInfo);\n\n            }\n            else {\n\n\n                var midx = paintInfo.startStubX + ((paintInfo.endStubX - paintInfo.startStubX) * midpoint),\n                    midy = paintInfo.startStubY + ((paintInfo.endStubY - paintInfo.startStubY) * midpoint);\n\n                var orientations = { x: [ 0, 1 ], y: [ 1, 0 ] },\n                    lineCalculators = {\n                        perpendicular: function (axis) {\n                            var pi = paintInfo,\n                                sis = {\n                                    x: [\n                                        [ [ 1, 2, 3, 4 ], null, [ 2, 1, 4, 3 ] ],\n                                        null,\n                                        [ [ 4, 3, 2, 1 ], null, [ 3, 4, 1, 2 ] ]\n                                    ],\n                                    y: [\n                                        [ [ 3, 2, 1, 4 ], null, [ 2, 3, 4, 1 ] ],\n                                        null,\n                                        [ [ 4, 1, 2, 3 ], null, [ 1, 4, 3, 2 ] ]\n                                    ]\n                                },\n                                stubs = {\n                                    x: [ [ pi.startStubX, pi.endStubX ], null, [ pi.endStubX, pi.startStubX ] ],\n                                    y: [ [ pi.startStubY, pi.endStubY ], null, [ pi.endStubY, pi.startStubY ] ]\n                                },\n                                midLines = {\n                                    x: [ [ midx, pi.startStubY ], [ midx, pi.endStubY ] ],\n                                    y: [ [ pi.startStubX, midy ], [ pi.endStubX, midy ] ]\n                                },\n                                linesToEnd = {\n                                    x: [ [ pi.endStubX, pi.startStubY ] ],\n                                    y: [ [ pi.startStubX, pi.endStubY ] ]\n                                },\n                                startToEnd = {\n                                    x: [ [ pi.startStubX, pi.endStubY ], [ pi.endStubX, pi.endStubY ] ],\n                                    y: [ [ pi.endStubX, pi.startStubY ], [ pi.endStubX, pi.endStubY ] ]\n                                },\n                                startToMidToEnd = {\n                                    x: [ [ pi.startStubX, midy ], [ pi.endStubX, midy ], [ pi.endStubX, pi.endStubY ] ],\n                                    y: [ [ midx, pi.startStubY ], [ midx, pi.endStubY ], [ pi.endStubX, pi.endStubY ] ]\n                                },\n                                otherStubs = {\n                                    x: [ pi.startStubY, pi.endStubY ],\n                                    y: [ pi.startStubX, pi.endStubX ]\n                                },\n                                soIdx = orientations[axis][0], toIdx = orientations[axis][1],\n                                _so = pi.so[soIdx] + 1,\n                                _to = pi.to[toIdx] + 1,\n                                otherFlipped = (pi.to[toIdx] == -1 && (otherStubs[axis][1] < otherStubs[axis][0])) || (pi.to[toIdx] == 1 && (otherStubs[axis][1] > otherStubs[axis][0])),\n                                stub1 = stubs[axis][_so][0],\n                                stub2 = stubs[axis][_so][1],\n                                segmentIndexes = sis[axis][_so][_to];\n\n                            if (pi.segment == segmentIndexes[3] || (pi.segment == segmentIndexes[2] && otherFlipped)) {\n                                return midLines[axis];\n                            }\n                            else if (pi.segment == segmentIndexes[2] && stub2 < stub1) {\n                                return linesToEnd[axis];\n                            }\n                            else if ((pi.segment == segmentIndexes[2] && stub2 >= stub1) || (pi.segment == segmentIndexes[1] && !otherFlipped)) {\n                                return startToMidToEnd[axis];\n                            }\n                            else if (pi.segment == segmentIndexes[0] || (pi.segment == segmentIndexes[1] && otherFlipped)) {\n                                return startToEnd[axis];\n                            }\n                        },\n                        orthogonal: function (axis, startStub, otherStartStub, endStub, otherEndStub) {\n                            var pi = paintInfo,\n                                extent = {\n                                    \"x\": pi.so[0] == -1 ? Math.min(startStub, endStub) : Math.max(startStub, endStub),\n                                    \"y\": pi.so[1] == -1 ? Math.min(startStub, endStub) : Math.max(startStub, endStub)\n                                }[axis];\n\n                            return {\n                                \"x\": [\n                                    [ extent, otherStartStub ],\n                                    [ extent, otherEndStub ],\n                                    [ endStub, otherEndStub ]\n                                ],\n                                \"y\": [\n                                    [ otherStartStub, extent ],\n                                    [ otherEndStub, extent ],\n                                    [ otherEndStub, endStub ]\n                                ]\n                            }[axis];\n                        },\n                        opposite: function (axis, ss, oss, es) {\n                            var pi = paintInfo,\n                                otherAxis = {\"x\": \"y\", \"y\": \"x\"}[axis],\n                                dim = {\"x\": \"height\", \"y\": \"width\"}[axis],\n                                comparator = pi[\"is\" + axis.toUpperCase() + \"GreaterThanStubTimes2\"];\n\n                            if (params.sourceEndpoint.elementId == params.targetEndpoint.elementId) {\n                                var _val = oss + ((1 - params.sourceEndpoint.anchor[otherAxis]) * params.sourceInfo[dim]) + _super.maxStub;\n                                return {\n                                    \"x\": [\n                                        [ ss, _val ],\n                                        [ es, _val ]\n                                    ],\n                                    \"y\": [\n                                        [ _val, ss ],\n                                        [ _val, es ]\n                                    ]\n                                }[axis];\n\n                            }\n                            else if (!comparator || (pi.so[idx] == 1 && ss > es) || (pi.so[idx] == -1 && ss < es)) {\n                                return {\n                                    \"x\": [\n                                        [ ss, midy ],\n                                        [ es, midy ]\n                                    ],\n                                    \"y\": [\n                                        [ midx, ss ],\n                                        [ midx, es ]\n                                    ]\n                                }[axis];\n                            }\n                            else if ((pi.so[idx] == 1 && ss < es) || (pi.so[idx] == -1 && ss > es)) {\n                                return {\n                                    \"x\": [\n                                        [ midx, pi.sy ],\n                                        [ midx, pi.ty ]\n                                    ],\n                                    \"y\": [\n                                        [ pi.sx, midy ],\n                                        [ pi.tx, midy ]\n                                    ]\n                                }[axis];\n                            }\n                        }\n                    };\n\n                // compute the rest of the line\n                var p = lineCalculators[paintInfo.anchorOrientation](paintInfo.sourceAxis, ss, oss, es, oes);\n                if (p) {\n                    for (var i = 0; i < p.length; i++) {\n                        addSegment(segments, p[i][0], p[i][1], paintInfo);\n                    }\n                }\n\n                // line to end stub\n                addSegment(segments, stubs[2], stubs[3], paintInfo);\n\n            }\n\n            // end stub to end (common)\n            addSegment(segments, paintInfo.tx, paintInfo.ty, paintInfo);\n\n            // write out the segments.\n            writeSegments(this, segments, paintInfo);\n        };\n\n        /*this.getPath = function () {\n            var _last = null, _lastAxis = null, s = [], segs = segments;\n            for (var i = 0; i < segs.length; i++) {\n                var seg = segs[i], axis = seg[4], axisIndex = (axis == \"v\" ? 3 : 2);\n                if (_last != null && _lastAxis === axis) {\n                    _last[axisIndex] = seg[axisIndex];\n                }\n                else {\n                    if (seg[0] != seg[2] || seg[1] != seg[3]) {\n                        s.push({\n                            start: [ seg[0], seg[1] ],\n                            end: [ seg[2], seg[3] ]\n                        });\n                        _last = seg;\n                        _lastAxis = seg[4];\n                    }\n                }\n            }\n            return s;\n        };*/\n    };\n\n    _ju.extend(Flowchart, _jp.Connectors.AbstractConnector);\n    _jp.registerConnectorType(Flowchart, \"Flowchart\");\n}).call(typeof window !== 'undefined' ? window : this);\n/*\n * jsPlumb\n *\n * Title:jsPlumb 2.3.0\n *\n * Provides a way to visually connect elements on an HTML page, using SVG.\n *\n * This file contains the code for the Bezier connector type.\n *\n * Copyright (c) 2010 - 2017 jsPlumb (hello@jsplumbtoolkit.com)\n *\n * http://jsplumbtoolkit.com\n * http://github.com/sporritt/jsplumb\n * \n * Dual licensed under the MIT and GPL2 licenses.\n */\n;\n(function () {\n\n    \"use strict\";\n    var root = this, _jp = root.jsPlumb, _ju = root.jsPlumbUtil;\n\n    _jp.Connectors.AbstractBezierConnector = function(params) {\n        params = params || {};\n        var showLoopback = params.showLoopback !== false,\n            curviness = params.curviness || 10,\n            margin = params.margin || 5,\n            proximityLimit = params.proximityLimit || 80,\n            clockwise = params.orientation && params.orientation === \"clockwise\",\n            loopbackRadius = params.loopbackRadius || 25,\n            isLoopbackCurrently = false,\n            _super;\n\n        this.overrideSetEditable = function() { return !isLoopbackCurrently; };\n\n        this._compute = function (paintInfo, p) {\n\n            var sp = p.sourcePos,\n                tp = p.targetPos,\n                _w = Math.abs(sp[0] - tp[0]),\n                _h = Math.abs(sp[1] - tp[1]);\n\n            if (!showLoopback || (p.sourceEndpoint.elementId !== p.targetEndpoint.elementId)) {\n                isLoopbackCurrently = false;\n                this._computeBezier(paintInfo, p, sp, tp, _w, _h);\n            } else {\n                isLoopbackCurrently = true;\n                // a loopback connector.  draw an arc from one anchor to the other.\n                var x1 = p.sourcePos[0], y1 = p.sourcePos[1] - margin,\n                    cx = x1, cy = y1 - loopbackRadius,\n                // canvas sizing stuff, to ensure the whole painted area is visible.\n                    _x = cx - loopbackRadius,\n                    _y = cy - loopbackRadius;\n\n                _w = 2 * loopbackRadius;\n                _h = 2 * loopbackRadius;\n\n                paintInfo.points[0] = _x;\n                paintInfo.points[1] = _y;\n                paintInfo.points[2] = _w;\n                paintInfo.points[3] = _h;\n\n                // ADD AN ARC SEGMENT.\n                _super.addSegment(this, \"Arc\", {\n                    loopback: true,\n                    x1: (x1 - _x) + 4,\n                    y1: y1 - _y,\n                    startAngle: 0,\n                    endAngle: 2 * Math.PI,\n                    r: loopbackRadius,\n                    ac: !clockwise,\n                    x2: (x1 - _x) - 4,\n                    y2: y1 - _y,\n                    cx: cx - _x,\n                    cy: cy - _y\n                });\n            }\n        };\n\n        _super = _jp.Connectors.AbstractConnector.apply(this, arguments);\n        return _super;\n    };\n    _ju.extend(_jp.Connectors.AbstractBezierConnector, _jp.Connectors.AbstractConnector);\n\n    var Bezier = function (params) {\n        params = params || {};\n        this.type = \"Bezier\";\n\n        var _super = _jp.Connectors.AbstractBezierConnector.apply(this, arguments),\n            majorAnchor = params.curviness || 150,\n            minorAnchor = 10;\n\n        this.getCurviness = function () {\n            return majorAnchor;\n        };\n\n        this._findControlPoint = function (point, sourceAnchorPosition, targetAnchorPosition, sourceEndpoint, targetEndpoint, soo, too) {\n            // determine if the two anchors are perpendicular to each other in their orientation.  we swap the control\n            // points around if so (code could be tightened up)\n            var perpendicular = soo[0] != too[0] || soo[1] == too[1],\n                p = [];\n\n            if (!perpendicular) {\n                if (soo[0] === 0) // X\n                    p.push(sourceAnchorPosition[0] < targetAnchorPosition[0] ? point[0] + minorAnchor : point[0] - minorAnchor);\n                else p.push(point[0] - (majorAnchor * soo[0]));\n\n                if (soo[1] === 0) // Y\n                    p.push(sourceAnchorPosition[1] < targetAnchorPosition[1] ? point[1] + minorAnchor : point[1] - minorAnchor);\n                else p.push(point[1] + (majorAnchor * too[1]));\n            }\n            else {\n                if (too[0] === 0) // X\n                    p.push(targetAnchorPosition[0] < sourceAnchorPosition[0] ? point[0] + minorAnchor : point[0] - minorAnchor);\n                else p.push(point[0] + (majorAnchor * too[0]));\n\n                if (too[1] === 0) // Y\n                    p.push(targetAnchorPosition[1] < sourceAnchorPosition[1] ? point[1] + minorAnchor : point[1] - minorAnchor);\n                else p.push(point[1] + (majorAnchor * soo[1]));\n            }\n\n            return p;\n        };\n\n        this._computeBezier = function (paintInfo, p, sp, tp, _w, _h) {\n\n            var geometry = this.getGeometry(), _CP, _CP2,\n                _sx = sp[0] < tp[0] ? _w : 0,\n                _sy = sp[1] < tp[1] ? _h : 0,\n                _tx = sp[0] < tp[0] ? 0 : _w,\n                _ty = sp[1] < tp[1] ? 0 : _h;\n\n            if ((this.hasBeenEdited() || this.isEditing()) && geometry != null && geometry.controlPoints != null && geometry.controlPoints[0] != null && geometry.controlPoints[1] != null) {\n                _CP = geometry.controlPoints[0];\n                _CP2 = geometry.controlPoints[1];\n            }\n            else {\n                _CP = this._findControlPoint([_sx, _sy], sp, tp, p.sourceEndpoint, p.targetEndpoint, paintInfo.so, paintInfo.to);\n                _CP2 = this._findControlPoint([_tx, _ty], tp, sp, p.targetEndpoint, p.sourceEndpoint, paintInfo.to, paintInfo.so);\n            }\n\n            _super.setGeometry({controlPoints:[_CP, _CP2]}, true);\n\n            _super.addSegment(this, \"Bezier\", {\n                x1: _sx, y1: _sy, x2: _tx, y2: _ty,\n                cp1x: _CP[0], cp1y: _CP[1], cp2x: _CP2[0], cp2y: _CP2[1]\n            });\n        };\n\n\n    };\n\n    _ju.extend(Bezier, _jp.Connectors.AbstractBezierConnector);\n    _jp.registerConnectorType(Bezier, \"Bezier\");\n\n}).call(typeof window !== 'undefined' ? window : this);\n/*\n * jsPlumb\n *\n * Title:jsPlumb 2.3.0\n *\n * Provides a way to visually connect elements on an HTML page, using SVG.\n *\n * This file contains the state machine connectors, which extend AbstractBezierConnector.\n *\n * Copyright (c) 2010 - 2017 jsPlumb (hello@jsplumbtoolkit.com)\n *\n * http://jsplumbtoolkit.com\n * http://github.com/sporritt/jsplumb\n * \n * Dual licensed under the MIT and GPL2 licenses.\n */\n;\n(function () {\n\n    \"use strict\";\n    var root = this, _jp = root.jsPlumb, _ju = root.jsPlumbUtil;\n\n    var _segment = function (x1, y1, x2, y2) {\n            if (x1 <= x2 && y2 <= y1) return 1;\n            else if (x1 <= x2 && y1 <= y2) return 2;\n            else if (x2 <= x1 && y2 >= y1) return 3;\n            return 4;\n        },\n\n    // the control point we will use depends on the faces to which each end of the connection is assigned, specifically whether or not the\n    // two faces are parallel or perpendicular.  if they are parallel then the control point lies on the midpoint of the axis in which they\n    // are parellel and varies only in the other axis; this variation is proportional to the distance that the anchor points lie from the\n    // center of that face.  if the two faces are perpendicular then the control point is at some distance from both the midpoints; the amount and\n    // direction are dependent on the orientation of the two elements. 'seg', passed in to this method, tells you which segment the target element\n    // lies in with respect to the source: 1 is top right, 2 is bottom right, 3 is bottom left, 4 is top left.\n    //\n    // sourcePos and targetPos are arrays of info about where on the source and target each anchor is located.  their contents are:\n    //\n    // 0 - absolute x\n    // 1 - absolute y\n    // 2 - proportional x in element (0 is left edge, 1 is right edge)\n    // 3 - proportional y in element (0 is top edge, 1 is bottom edge)\n    //\n        _findControlPoint = function (midx, midy, segment, sourceEdge, targetEdge, dx, dy, distance, proximityLimit) {\n            // TODO (maybe)\n            // - if anchor pos is 0.5, make the control point take into account the relative position of the elements.\n            if (distance <= proximityLimit) return [midx, midy];\n\n            if (segment === 1) {\n                if (sourceEdge[3] <= 0 && targetEdge[3] >= 1) return [ midx + (sourceEdge[2] < 0.5 ? -1 * dx : dx), midy ];\n                else if (sourceEdge[2] >= 1 && targetEdge[2] <= 0) return [ midx, midy + (sourceEdge[3] < 0.5 ? -1 * dy : dy) ];\n                else return [ midx + (-1 * dx) , midy + (-1 * dy) ];\n            }\n            else if (segment === 2) {\n                if (sourceEdge[3] >= 1 && targetEdge[3] <= 0) return [ midx + (sourceEdge[2] < 0.5 ? -1 * dx : dx), midy ];\n                else if (sourceEdge[2] >= 1 && targetEdge[2] <= 0) return [ midx, midy + (sourceEdge[3] < 0.5 ? -1 * dy : dy) ];\n                else return [ midx + dx, midy + (-1 * dy) ];\n            }\n            else if (segment === 3) {\n                if (sourceEdge[3] >= 1 && targetEdge[3] <= 0) return [ midx + (sourceEdge[2] < 0.5 ? -1 * dx : dx), midy ];\n                else if (sourceEdge[2] <= 0 && targetEdge[2] >= 1) return [ midx, midy + (sourceEdge[3] < 0.5 ? -1 * dy : dy) ];\n                else return [ midx + (-1 * dx) , midy + (-1 * dy) ];\n            }\n            else if (segment === 4) {\n                if (sourceEdge[3] <= 0 && targetEdge[3] >= 1) return [ midx + (sourceEdge[2] < 0.5 ? -1 * dx : dx), midy ];\n                else if (sourceEdge[2] <= 0 && targetEdge[2] >= 1) return [ midx, midy + (sourceEdge[3] < 0.5 ? -1 * dy : dy) ];\n                else return [ midx + dx , midy + (-1 * dy) ];\n            }\n\n        };\n\n    var StateMachine = function (params) {\n        params = params || {};\n        this.type = \"StateMachine\";\n\n        var _super = _jp.Connectors.AbstractBezierConnector.apply(this, arguments),\n            curviness = params.curviness || 10,\n            margin = params.margin || 5,\n            proximityLimit = params.proximityLimit || 80,\n            clockwise = params.orientation && params.orientation === \"clockwise\",\n            _controlPoint;\n\n        this._computeBezier = function(paintInfo, params, sp, tp, w, h) {\n            var _sx = params.sourcePos[0] < params.targetPos[0] ? 0 : w,\n                _sy = params.sourcePos[1] < params.targetPos[1] ? 0 : h,\n                _tx = params.sourcePos[0] < params.targetPos[0] ? w : 0,\n                _ty = params.sourcePos[1] < params.targetPos[1] ? h : 0;\n\n            // now adjust for the margin\n            if (params.sourcePos[2] === 0) _sx -= margin;\n            if (params.sourcePos[2] === 1) _sx += margin;\n            if (params.sourcePos[3] === 0) _sy -= margin;\n            if (params.sourcePos[3] === 1) _sy += margin;\n            if (params.targetPos[2] === 0) _tx -= margin;\n            if (params.targetPos[2] === 1) _tx += margin;\n            if (params.targetPos[3] === 0) _ty -= margin;\n            if (params.targetPos[3] === 1) _ty += margin;\n\n            //\n            // these connectors are quadratic bezier curves, having a single control point. if both anchors\n            // are located at 0.5 on their respective faces, the control point is set to the midpoint and you\n            // get a straight line.  this is also the case if the two anchors are within 'proximityLimit', since\n            // it seems to make good aesthetic sense to do that. outside of that, the control point is positioned\n            // at 'curviness' pixels away along the normal to the straight line connecting the two anchors.\n            //\n            // there may be two improvements to this.  firstly, we might actually support the notion of avoiding nodes\n            // in the UI, or at least making a good effort at doing so.  if a connection would pass underneath some node,\n            // for example, we might increase the distance the control point is away from the midpoint in a bid to\n            // steer it around that node.  this will work within limits, but i think those limits would also be the likely\n            // limits for, once again, aesthetic good sense in the layout of a chart using these connectors.\n            //\n            // the second possible change is actually two possible changes: firstly, it is possible we should gradually\n            // decrease the 'curviness' as the distance between the anchors decreases; start tailing it off to 0 at some\n            // point (which should be configurable).  secondly, we might slightly increase the 'curviness' for connectors\n            // with respect to how far their anchor is from the center of its respective face. this could either look cool,\n            // or stupid, and may indeed work only in a way that is so subtle as to have been a waste of time.\n            //\n\n            var _midx = (_sx + _tx) / 2,\n                _midy = (_sy + _ty) / 2,\n                segment = _segment(_sx, _sy, _tx, _ty),\n                distance = Math.sqrt(Math.pow(_tx - _sx, 2) + Math.pow(_ty - _sy, 2)),\n                cp1x, cp2x, cp1y, cp2y,\n                geometry = _super.getGeometry();\n\n            if ((this.hasBeenEdited() || this.isEditing()) && geometry != null) {\n                cp1x = geometry.controlPoints[0][0];\n                cp1y = geometry.controlPoints[0][1];\n                cp2x = geometry.controlPoints[1][0];\n                cp2y = geometry.controlPoints[1][1];\n            }\n            else {\n                // calculate the control point.  this code will be where we'll put in a rudimentary element avoidance scheme; it\n                // will work by extending the control point to force the curve to be, um, curvier.\n                _controlPoint = _findControlPoint(_midx,\n                    _midy,\n                    segment,\n                    params.sourcePos,\n                    params.targetPos,\n                    curviness, curviness,\n                    distance,\n                    proximityLimit);\n\n                cp1x = _controlPoint[0];\n                cp2x = _controlPoint[0];\n                cp1y = _controlPoint[1];\n                cp2y = _controlPoint[1];\n\n                _super.setGeometry({controlPoints:[_controlPoint, _controlPoint]}, true);\n            }\n\n            _super.addSegment(this, \"Bezier\", {\n                x1: _tx, y1: _ty, x2: _sx, y2: _sy,\n                cp1x: cp1x, cp1y: cp1y,\n                cp2x: cp2x, cp2y: cp2y\n            });\n        };\n    };\n\n    _ju.extend(StateMachine, _jp.Connectors.AbstractBezierConnector);\n    _jp.registerConnectorType(StateMachine, \"StateMachine\");\n\n}).call(typeof window !== 'undefined' ? window : this);\n/*\n * jsPlumb\n *\n * Title:jsPlumb 2.3.0\n *\n * Provides a way to visually connect elements on an HTML page, using SVG.\n *\n * This file contains the 'flowchart' connectors, consisting of vertical and horizontal line segments.\n *\n * Copyright (c) 2010 - 2017 jsPlumb (hello@jsplumbtoolkit.com)\n *\n * http://jsplumbtoolkit.com\n * http://github.com/sporritt/jsplumb\n *\n * Dual licensed under the MIT and GPL2 licenses.\n */\n;\n(function () {\n\n    \"use strict\";\n    var root = this, _jp = root.jsPlumb, _ju = root.jsPlumbUtil;\n    var STRAIGHT = \"Straight\";\n\n    var Straight = function (params) {\n        this.type = STRAIGHT;\n        var _super = _jp.Connectors.AbstractConnector.apply(this, arguments);\n\n        this._compute = function (paintInfo, _) {\n            _super.addSegment(this, STRAIGHT, {x1: paintInfo.sx, y1: paintInfo.sy, x2: paintInfo.startStubX, y2: paintInfo.startStubY});\n            _super.addSegment(this, STRAIGHT, {x1: paintInfo.startStubX, y1: paintInfo.startStubY, x2: paintInfo.endStubX, y2: paintInfo.endStubY});\n            _super.addSegment(this, STRAIGHT, {x1: paintInfo.endStubX, y1: paintInfo.endStubY, x2: paintInfo.tx, y2: paintInfo.ty});\n        };\n    };\n\n    _ju.extend(Straight, _jp.Connectors.AbstractConnector);\n    _jp.registerConnectorType(Straight, STRAIGHT);\n\n}).call(typeof window !== 'undefined' ? window : this);\n/*\n * jsPlumb\n * \n * Title:jsPlumb 2.3.0\n * \n * Provides a way to visually connect elements on an HTML page, using SVG.\n * \n * This file contains the SVG renderers.\n *\n * Copyright (c) 2010 - 2017 jsPlumb (hello@jsplumbtoolkit.com)\n * \n * http://jsplumbtoolkit.com\n * http://github.com/sporritt/jsplumb\n * \n * Dual licensed under the MIT and GPL2 licenses.\n */\n;\n(function () {\n\n// ************************** SVG utility methods ********************************************\t\n\n    \"use strict\";\n    var root = this, _jp = root.jsPlumb, _ju = root.jsPlumbUtil;\n\n    var svgAttributeMap = {\n            \"stroke-linejoin\": \"stroke-linejoin\",\n            \"stroke-dashoffset\": \"stroke-dashoffset\",\n            \"stroke-linecap\": \"stroke-linecap\"\n        },\n        STROKE_DASHARRAY = \"stroke-dasharray\",\n        DASHSTYLE = \"dashstyle\",\n        LINEAR_GRADIENT = \"linearGradient\",\n        RADIAL_GRADIENT = \"radialGradient\",\n        DEFS = \"defs\",\n        FILL = \"fill\",\n        STOP = \"stop\",\n        STROKE = \"stroke\",\n        STROKE_WIDTH = \"stroke-width\",\n        STYLE = \"style\",\n        NONE = \"none\",\n        JSPLUMB_GRADIENT = \"jsplumb_gradient_\",\n        LINE_WIDTH = \"strokeWidth\",\n        ns = {\n            svg: \"http://www.w3.org/2000/svg\",\n            xhtml: \"http://www.w3.org/1999/xhtml\"\n        },\n        _attr = function (node, attributes) {\n            for (var i in attributes)\n                node.setAttribute(i, \"\" + attributes[i]);\n        },\n        _node = function (name, attributes) {\n            attributes = attributes || {};\n            attributes.version = \"1.1\";\n            attributes.xmlns = ns.xhtml;\n            return _jp.createElementNS(ns.svg, name, null, null, attributes);\n        },\n        _pos = function (d) {\n            return \"position:absolute;left:\" + d[0] + \"px;top:\" + d[1] + \"px\";\n        },\n        _clearGradient = function (parent) {\n            var els = parent.querySelectorAll(\" defs,linearGradient,radialGradient\");\n            for (var i = 0; i < els.length; i++)\n                els[i].parentNode.removeChild(els[i]);\n        },\n        _updateGradient = function (parent, node, style, dimensions, uiComponent) {\n            var id = JSPLUMB_GRADIENT + uiComponent._jsPlumb.instance.idstamp();\n            // first clear out any existing gradient\n            _clearGradient(parent);\n            // this checks for an 'offset' property in the gradient, and in the absence of it, assumes\n            // we want a linear gradient. if it's there, we create a radial gradient.\n            // it is possible that a more explicit means of defining the gradient type would be\n            // better. relying on 'offset' means that we can never have a radial gradient that uses\n            // some default offset, for instance.\n            // issue 244 suggested the 'gradientUnits' attribute; without this, straight/flowchart connectors with gradients would\n            // not show gradients when the line was perfectly horizontal or vertical.\n            var g;\n            if (!style.gradient.offset)\n                g = _node(LINEAR_GRADIENT, {id: id, gradientUnits: \"userSpaceOnUse\"});\n            else\n                g = _node(RADIAL_GRADIENT, { id: id });\n\n            var defs = _node(DEFS);\n            parent.appendChild(defs);\n            defs.appendChild(g);\n\n            // the svg radial gradient seems to treat stops in the reverse\n            // order to how canvas does it.  so we want to keep all the maths the same, but\n            // iterate the actual style declarations in reverse order, if the x indexes are not in order.\n            for (var i = 0; i < style.gradient.stops.length; i++) {\n                var styleToUse = uiComponent.segment == 1 || uiComponent.segment == 2 ? i : style.gradient.stops.length - 1 - i,\n                    //stopColor = _ju.convertStyle(style.gradient.stops[styleToUse][1], true),\n                    stopColor = style.gradient.stops[styleToUse][1],\n                    s = _node(STOP, {\"offset\": Math.floor(style.gradient.stops[i][0] * 100) + \"%\", \"stop-color\": stopColor});\n\n                g.appendChild(s);\n            }\n            var applyGradientTo = style.stroke ? STROKE : FILL;\n            node.setAttribute(applyGradientTo, \"url(#\" + id + \")\");\n        },\n        _applyStyles = function (parent, node, style, dimensions, uiComponent) {\n\n            node.setAttribute(FILL, style.fill ? style.fill : NONE);\n            node.setAttribute(STROKE, style.stroke ? style.stroke : NONE);\n\n            if (style.gradient) {\n                _updateGradient(parent, node, style, dimensions, uiComponent);\n            }\n            else {\n                // make sure we clear any existing gradient\n                _clearGradient(parent);\n                node.setAttribute(STYLE, \"\");\n            }\n\n            if (style.strokeWidth) {\n                node.setAttribute(STROKE_WIDTH, style.strokeWidth);\n            }\n\n            // in SVG there is a stroke-dasharray attribute we can set, and its syntax looks like\n            // the syntax in VML but is actually kind of nasty: values are given in the pixel\n            // coordinate space, whereas in VML they are multiples of the width of the stroked\n            // line, which makes a lot more sense.  for that reason, jsPlumb is supporting both\n            // the native svg 'stroke-dasharray' attribute, and also the 'dashstyle' concept from\n            // VML, which will be the preferred method.  the code below this converts a dashstyle\n            // attribute given in terms of stroke width into a pixel representation, by using the\n            // stroke's lineWidth.\n            if (style[DASHSTYLE] && style[LINE_WIDTH] && !style[STROKE_DASHARRAY]) {\n                var sep = style[DASHSTYLE].indexOf(\",\") == -1 ? \" \" : \",\",\n                    parts = style[DASHSTYLE].split(sep),\n                    styleToUse = \"\";\n                parts.forEach(function (p) {\n                    styleToUse += (Math.floor(p * style.strokeWidth) + sep);\n                });\n                node.setAttribute(STROKE_DASHARRAY, styleToUse);\n            }\n            else if (style[STROKE_DASHARRAY]) {\n                node.setAttribute(STROKE_DASHARRAY, style[STROKE_DASHARRAY]);\n            }\n\n            // extra attributes such as join type, dash offset.\n            for (var i in svgAttributeMap) {\n                if (style[i]) {\n                    node.setAttribute(svgAttributeMap[i], style[i]);\n                }\n            }\n        },\n        _appendAtIndex = function (svg, path, idx) {\n            if (svg.childNodes.length > idx) {\n                svg.insertBefore(path, svg.childNodes[idx]);\n            }\n            else svg.appendChild(path);\n        };\n\n    /**\n     utility methods for other objects to use.\n     */\n    _ju.svg = {\n        node: _node,\n        attr: _attr,\n        pos: _pos\n    };\n\n    // ************************** / SVG utility methods ********************************************\n\n    /*\n     * Base class for SVG components.\n     */\n    var SvgComponent = function (params) {\n        var pointerEventsSpec = params.pointerEventsSpec || \"all\", renderer = {};\n\n        _jp.jsPlumbUIComponent.apply(this, params.originalArgs);\n        this.canvas = null;\n        this.path = null;\n        this.svg = null;\n        this.bgCanvas = null;\n\n        var clazz = params.cssClass + \" \" + (params.originalArgs[0].cssClass || \"\"),\n            svgParams = {\n                \"style\": \"\",\n                \"width\": 0,\n                \"height\": 0,\n                \"pointer-events\": pointerEventsSpec,\n                \"position\": \"absolute\"\n            };\n\n        this.svg = _node(\"svg\", svgParams);\n\n        if (params.useDivWrapper) {\n            this.canvas = _jp.createElement(\"div\", { position : \"absolute\" });\n            _ju.sizeElement(this.canvas, 0, 0, 1, 1);\n            this.canvas.className = clazz;\n        }\n        else {\n            _attr(this.svg, { \"class\": clazz });\n            this.canvas = this.svg;\n        }\n\n        params._jsPlumb.appendElement(this.canvas, params.originalArgs[0].parent);\n        if (params.useDivWrapper) this.canvas.appendChild(this.svg);\n\n        var displayElements = [ this.canvas ];\n        this.getDisplayElements = function () {\n            return displayElements;\n        };\n\n        this.appendDisplayElement = function (el) {\n            displayElements.push(el);\n        };\n\n        this.paint = function (style, anchor, extents) {\n            if (style != null) {\n\n                var xy = [ this.x, this.y ], wh = [ this.w, this.h ], p;\n                if (extents != null) {\n                    if (extents.xmin < 0) xy[0] += extents.xmin;\n                    if (extents.ymin < 0) xy[1] += extents.ymin;\n                    wh[0] = extents.xmax + ((extents.xmin < 0) ? -extents.xmin : 0);\n                    wh[1] = extents.ymax + ((extents.ymin < 0) ? -extents.ymin : 0);\n                }\n\n                if (params.useDivWrapper) {\n                    _ju.sizeElement(this.canvas, xy[0], xy[1], wh[0], wh[1]);\n                    xy[0] = 0;\n                    xy[1] = 0;\n                    p = _pos([ 0, 0 ]);\n                }\n                else\n                    p = _pos([ xy[0], xy[1] ]);\n\n                renderer.paint.apply(this, arguments);\n\n                _attr(this.svg, {\n                    \"style\": p,\n                    \"width\": wh[0] || 0,\n                    \"height\": wh[1] || 0\n                });\n            }\n        };\n\n        return {\n            renderer: renderer\n        };\n    };\n\n    _ju.extend(SvgComponent, _jp.jsPlumbUIComponent, {\n        cleanup: function (force) {\n            if (force || this.typeId == null) {\n                if (this.canvas) this.canvas._jsPlumb = null;\n                if (this.svg) this.svg._jsPlumb = null;\n                if (this.bgCanvas) this.bgCanvas._jsPlumb = null;\n\n                if (this.canvas && this.canvas.parentNode)\n                    this.canvas.parentNode.removeChild(this.canvas);\n                if (this.bgCanvas && this.bgCanvas.parentNode)\n                    this.canvas.parentNode.removeChild(this.canvas);\n\n                this.svg = null;\n                this.canvas = null;\n                this.path = null;\n                this.group = null;\n            }\n            else {\n                // if not a forced cleanup, just detach from DOM for now.\n                if (this.canvas && this.canvas.parentNode) this.canvas.parentNode.removeChild(this.canvas);\n                if (this.bgCanvas && this.bgCanvas.parentNode) this.bgCanvas.parentNode.removeChild(this.bgCanvas);\n            }\n        },\n        reattach:function(instance) {\n            var c = instance.getContainer();\n            if (this.canvas && this.canvas.parentNode == null) c.appendChild(this.canvas);\n            if (this.bgCanvas && this.bgCanvas.parentNode == null) c.appendChild(this.bgCanvas);\n        },\n        setVisible: function (v) {\n            if (this.canvas) {\n                this.canvas.style.display = v ? \"block\" : \"none\";\n            }\n        }\n    });\n\n    /*\n     * Base class for SVG connectors.\n     */\n    _jp.ConnectorRenderers.svg = function (params) {\n        var self = this,\n            _super = SvgComponent.apply(this, [\n                {\n                    cssClass: params._jsPlumb.connectorClass + (this.isEditable() ? \" \" + params._jsPlumb.editableConnectorClass : \"\"),\n                    originalArgs: arguments,\n                    pointerEventsSpec: \"none\",\n                    _jsPlumb: params._jsPlumb\n                }\n            ]);\n\n        var _superSetEditable = this.setEditable;\n        this.setEditable = function(e) {\n            var result = _superSetEditable.apply(this, [e]);\n            _jp[result ? \"addClass\" : \"removeClass\"](this.canvas, this._jsPlumb.instance.editableConnectorClass);\n        };\n\n        _super.renderer.paint = function (style, anchor, extents) {\n\n            var segments = self.getSegments(), p = \"\", offset = [0, 0];\n            if (extents.xmin < 0) offset[0] = -extents.xmin;\n            if (extents.ymin < 0) offset[1] = -extents.ymin;\n\n            if (segments.length > 0) {\n\n                p = self.getPathData();\n\n                var a = {\n                        d: p,\n                        transform: \"translate(\" + offset[0] + \",\" + offset[1] + \")\",\n                        \"pointer-events\": params[\"pointer-events\"] || \"visibleStroke\"\n                    },\n                    outlineStyle = null,\n                    d = [self.x, self.y, self.w, self.h];\n\n                // outline style.  actually means drawing an svg object underneath the main one.\n                if (style.outlineStroke) {\n                    var outlineWidth = style.outlineWidth || 1,\n                        outlineStrokeWidth = style.strokeWidth + (2 * outlineWidth);\n                    outlineStyle = _jp.extend({}, style);\n                    delete outlineStyle.gradient;\n                    outlineStyle.stroke = style.outlineStroke;\n                    outlineStyle.strokeWidth = outlineStrokeWidth;\n\n                    if (self.bgPath == null) {\n                        self.bgPath = _node(\"path\", a);\n                        _jp.addClass(self.bgPath, _jp.connectorOutlineClass);\n                        _appendAtIndex(self.svg, self.bgPath, 0);\n                    }\n                    else {\n                        _attr(self.bgPath, a);\n                    }\n\n                    _applyStyles(self.svg, self.bgPath, outlineStyle, d, self);\n                }\n\n                if (self.path == null) {\n                    self.path = _node(\"path\", a);\n                    _appendAtIndex(self.svg, self.path, style.outlineStroke ? 1 : 0);\n                }\n                else {\n                    _attr(self.path, a);\n                }\n\n                _applyStyles(self.svg, self.path, style, d, self);\n            }\n        };\n    };\n    _ju.extend(_jp.ConnectorRenderers.svg, SvgComponent);\n\n// ******************************* svg segment renderer *****************************************************\t\n\n\n// ******************************* /svg segments *****************************************************\n\n    /*\n     * Base class for SVG endpoints.\n     */\n    var SvgEndpoint = _jp.SvgEndpoint = function (params) {\n        var _super = SvgComponent.apply(this, [\n            {\n                cssClass: params._jsPlumb.endpointClass,\n                originalArgs: arguments,\n                pointerEventsSpec: \"all\",\n                useDivWrapper: true,\n                _jsPlumb: params._jsPlumb\n            }\n        ]);\n\n        _super.renderer.paint = function (style) {\n            var s = _jp.extend({}, style);\n            if (s.outlineStroke) {\n                s.strokeWidth = s.strokeWidth;\n                s.stroke = s.outlineStroke;\n            }\n\n            if (this.node == null) {\n                this.node = this.makeNode(s);\n                this.svg.appendChild(this.node);\n            }\n            else if (this.updateNode != null) {\n                this.updateNode(this.node);\n            }\n            _applyStyles(this.svg, this.node, s, [ this.x, this.y, this.w, this.h ], this);\n            _pos(this.node, [ this.x, this.y ]);\n        }.bind(this);\n\n    };\n    _ju.extend(SvgEndpoint, SvgComponent);\n\n    /*\n     * SVG Dot Endpoint\n     */\n    _jp.Endpoints.svg.Dot = function () {\n        _jp.Endpoints.Dot.apply(this, arguments);\n        SvgEndpoint.apply(this, arguments);\n        this.makeNode = function (style) {\n            return _node(\"circle\", {\n                \"cx\": this.w / 2,\n                \"cy\": this.h / 2,\n                \"r\": this.radius\n            });\n        };\n        this.updateNode = function (node) {\n            _attr(node, {\n                \"cx\": this.w / 2,\n                \"cy\": this.h / 2,\n                \"r\": this.radius\n            });\n        };\n    };\n    _ju.extend(_jp.Endpoints.svg.Dot, [_jp.Endpoints.Dot, SvgEndpoint]);\n\n    /*\n     * SVG Rectangle Endpoint\n     */\n    _jp.Endpoints.svg.Rectangle = function () {\n        _jp.Endpoints.Rectangle.apply(this, arguments);\n        SvgEndpoint.apply(this, arguments);\n        this.makeNode = function (style) {\n            return _node(\"rect\", {\n                \"width\": this.w,\n                \"height\": this.h\n            });\n        };\n        this.updateNode = function (node) {\n            _attr(node, {\n                \"width\": this.w,\n                \"height\": this.h\n            });\n        };\n    };\n    _ju.extend(_jp.Endpoints.svg.Rectangle, [_jp.Endpoints.Rectangle, SvgEndpoint]);\n\n    /*\n     * SVG Image Endpoint is the default image endpoint.\n     */\n    _jp.Endpoints.svg.Image = _jp.Endpoints.Image;\n    /*\n     * Blank endpoint in svg renderer is the default Blank endpoint.\n     */\n    _jp.Endpoints.svg.Blank = _jp.Endpoints.Blank;\n    /*\n     * Label overlay in svg renderer is the default Label overlay.\n     */\n    _jp.Overlays.svg.Label = _jp.Overlays.Label;\n    /*\n     * Custom overlay in svg renderer is the default Custom overlay.\n     */\n    _jp.Overlays.svg.Custom = _jp.Overlays.Custom;\n\n    var AbstractSvgArrowOverlay = function (superclass, originalArgs) {\n        superclass.apply(this, originalArgs);\n        _jp.jsPlumbUIComponent.apply(this, originalArgs);\n        this.isAppendedAtTopLevel = false;\n        var self = this;\n        this.path = null;\n        this.paint = function (params, containerExtents) {\n            // only draws on connections, not endpoints.\n            if (params.component.svg && containerExtents) {\n                if (this.path == null) {\n                    this.path = _node(\"path\", {\n                        \"pointer-events\": \"all\"\n                    });\n                    params.component.svg.appendChild(this.path);\n                    if (this.elementCreated) {\n                        this.elementCreated(this.path, params.component);\n                    }\n\n                    this.canvas = params.component.svg; // for the sake of completeness; this behaves the same as other overlays\n                }\n                var clazz = originalArgs && (originalArgs.length == 1) ? (originalArgs[0].cssClass || \"\") : \"\",\n                    offset = [0, 0];\n\n                if (containerExtents.xmin < 0) offset[0] = -containerExtents.xmin;\n                if (containerExtents.ymin < 0) offset[1] = -containerExtents.ymin;\n\n                _attr(this.path, {\n                    \"d\": makePath(params.d),\n                    \"class\": clazz,\n                    stroke: params.stroke ? params.stroke : null,\n                    fill: params.fill ? params.fill : null,\n                    transform: \"translate(\" + offset[0] + \",\" + offset[1] + \")\"\n                });\n            }\n        };\n        var makePath = function (d) {\n            return (isNaN(d.cxy.x) || isNaN(d.cxy.y)) ? \"\" : \"M\" + d.hxy.x + \",\" + d.hxy.y +\n                \" L\" + d.tail[0].x + \",\" + d.tail[0].y +\n                \" L\" + d.cxy.x + \",\" + d.cxy.y +\n                \" L\" + d.tail[1].x + \",\" + d.tail[1].y +\n                \" L\" + d.hxy.x + \",\" + d.hxy.y;\n        };\n        this.transfer = function(target) {\n            if (target.canvas && this.path && this.path.parentNode) {\n                this.path.parentNode.removeChild(this.path);\n                target.canvas.appendChild(this.path);\n            }\n        };\n    };\n    _ju.extend(AbstractSvgArrowOverlay, [_jp.jsPlumbUIComponent, _jp.Overlays.AbstractOverlay], {\n        cleanup: function (force) {\n            if (this.path != null) {\n                if (force)\n                    this._jsPlumb.instance.removeElement(this.path);\n                else\n                    if (this.path.parentNode)\n                        this.path.parentNode.removeChild(this.path);\n            }\n        },\n        reattach:function(instance) {\n            if (this.path && this.canvas && this.path.parentNode == null)\n                this.canvas.appendChild(this.path);\n        },\n        setVisible: function (v) {\n            if (this.path != null) (this.path.style.display = (v ? \"block\" : \"none\"));\n        }\n    });\n\n    _jp.Overlays.svg.Arrow = function () {\n        AbstractSvgArrowOverlay.apply(this, [_jp.Overlays.Arrow, arguments]);\n    };\n    _ju.extend(_jp.Overlays.svg.Arrow, [ _jp.Overlays.Arrow, AbstractSvgArrowOverlay ]);\n\n    _jp.Overlays.svg.PlainArrow = function () {\n        AbstractSvgArrowOverlay.apply(this, [_jp.Overlays.PlainArrow, arguments]);\n    };\n    _ju.extend(_jp.Overlays.svg.PlainArrow, [ _jp.Overlays.PlainArrow, AbstractSvgArrowOverlay ]);\n\n    _jp.Overlays.svg.Diamond = function () {\n        AbstractSvgArrowOverlay.apply(this, [_jp.Overlays.Diamond, arguments]);\n    };\n    _ju.extend(_jp.Overlays.svg.Diamond, [ _jp.Overlays.Diamond, AbstractSvgArrowOverlay ]);\n\n    // a test\n    _jp.Overlays.svg.GuideLines = function () {\n        var path = null, self = this, p1_1, p1_2;\n        _jp.Overlays.GuideLines.apply(this, arguments);\n        this.paint = function (params, containerExtents) {\n            if (path == null) {\n                path = _node(\"path\");\n                params.connector.svg.appendChild(path);\n                self.attachListeners(path, params.connector);\n                self.attachListeners(path, self);\n\n                p1_1 = _node(\"path\");\n                params.connector.svg.appendChild(p1_1);\n                self.attachListeners(p1_1, params.connector);\n                self.attachListeners(p1_1, self);\n\n                p1_2 = _node(\"path\");\n                params.connector.svg.appendChild(p1_2);\n                self.attachListeners(p1_2, params.connector);\n                self.attachListeners(p1_2, self);\n            }\n\n            var offset = [0, 0];\n            if (containerExtents.xmin < 0) offset[0] = -containerExtents.xmin;\n            if (containerExtents.ymin < 0) offset[1] = -containerExtents.ymin;\n\n            _attr(path, {\n                \"d\": makePath(params.head, params.tail),\n                stroke: \"red\",\n                fill: null,\n                transform: \"translate(\" + offset[0] + \",\" + offset[1] + \")\"\n            });\n\n            _attr(p1_1, {\n                \"d\": makePath(params.tailLine[0], params.tailLine[1]),\n                stroke: \"blue\",\n                fill: null,\n                transform: \"translate(\" + offset[0] + \",\" + offset[1] + \")\"\n            });\n\n            _attr(p1_2, {\n                \"d\": makePath(params.headLine[0], params.headLine[1]),\n                stroke: \"green\",\n                fill: null,\n                transform: \"translate(\" + offset[0] + \",\" + offset[1] + \")\"\n            });\n        };\n\n        var makePath = function (d1, d2) {\n            return \"M \" + d1.x + \",\" + d1.y +\n                \" L\" + d2.x + \",\" + d2.y;\n        };\n    };\n    _ju.extend(_jp.Overlays.svg.GuideLines, _jp.Overlays.GuideLines);\n}).call(typeof window !== 'undefined' ? window : this);\n\n/*\n * jsPlumb\n * \n * Title:jsPlumb 2.3.0\n * \n * Provides a way to visually connect elements on an HTML page, using SVG.\n * \n * This file contains the 'vanilla' adapter - having no external dependencies other than bundled libs.\n *\n * Copyright (c) 2010 - 2017 jsPlumb (hello@jsplumbtoolkit.com)\n * \n * http://jsplumbtoolkit.com\n * http://github.com/sporritt/jsplumb\n * \n * Dual licensed under the MIT and GPL2 licenses.\n */\n;\n(function () {\n\n    \"use strict\";\n    var root = this, _jp = root.jsPlumb, _ju = root.jsPlumbUtil,\n        _jk = root.Katavorio, _jg = root.Biltong;\n\n    var _getDragManager = function (instance, category) {\n\n        category = category || \"main\";\n        var key = \"_katavorio_\" + category;\n        var k = instance[key],\n            e = instance.getEventManager();\n\n        if (!k) {\n            k = new _jk({\n                bind: e.on,\n                unbind: e.off,\n                getSize: _jp.getSize,\n                getPosition: function (el, relativeToRoot) {\n                    // if this is a nested draggable then compute the offset against its own offsetParent, otherwise\n                    // compute against the Container's origin. see also the getUIPosition method below.\n                    var o = instance.getOffset(el, relativeToRoot, el._katavorioDrag ? el.offsetParent : null);\n                    return [o.left, o.top];\n                },\n                setPosition: function (el, xy) {\n                    el.style.left = xy[0] + \"px\";\n                    el.style.top = xy[1] + \"px\";\n                },\n                addClass: _jp.addClass,\n                removeClass: _jp.removeClass,\n                intersects: _jg.intersects,\n                indexOf: function(l, i) { return l.indexOf(i); },\n                scope:instance.getDefaultScope(),\n                css: {\n                    noSelect: instance.dragSelectClass,\n                    droppable: \"jtk-droppable\",\n                    draggable: \"jtk-draggable\",\n                    drag: \"jtk-drag\",\n                    selected: \"jtk-drag-selected\",\n                    active: \"jtk-drag-active\",\n                    hover: \"jtk-drag-hover\",\n                    ghostProxy:\"jtk-ghost-proxy\"\n                }\n            });\n            instance[key] = k;\n            instance.bind(\"zoom\", k.setZoom);\n        }\n        return k;\n    };\n\n    var _animProps = function (o, p) {\n        var _one = function (pName) {\n            if (p[pName] != null) {\n                if (_ju.isString(p[pName])) {\n                    var m = p[pName].match(/-=/) ? -1 : 1,\n                        v = p[pName].substring(2);\n                    return o[pName] + (m * v);\n                }\n                else return p[pName];\n            }\n            else\n                return o[pName];\n        };\n        return [ _one(\"left\"), _one(\"top\") ];\n    };\n\n    _jp.extend(root.jsPlumbInstance.prototype, {\n\n        animationSupported:true,\n        getElement: function (el) {\n            if (el == null) return null;\n            // here we pluck the first entry if el was a list of entries.\n            // this is not my favourite thing to do, but previous versions of\n            // jsplumb supported jquery selectors, and it is possible a selector\n            // will be passed in here.\n            el = typeof el === \"string\" ? el : el.length != null && el.enctype == null ? el[0] : el;\n            return typeof el === \"string\" ? document.getElementById(el) : el;\n        },\n        removeElement: function (element) {\n            _getDragManager(this).elementRemoved(element);\n            this.getEventManager().remove(element);\n        },\n        //\n        // this adapter supports a rudimentary animation function. no easing is supported.  only\n        // left/top properties are supported. property delta args are expected to be in the form\n        //\n        // +=x.xxxx\n        //\n        // or\n        //\n        // -=x.xxxx\n        //\n        doAnimate: function (el, properties, options) {\n            options = options || {};\n            var o = this.getOffset(el),\n                ap = _animProps(o, properties),\n                ldist = ap[0] - o.left,\n                tdist = ap[1] - o.top,\n                d = options.duration || 250,\n                step = 15, steps = d / step,\n                linc = (step / d) * ldist,\n                tinc = (step / d) * tdist,\n                idx = 0,\n                _int = setInterval(function () {\n                    _jp.setPosition(el, {\n                        left: o.left + (linc * (idx + 1)),\n                        top: o.top + (tinc * (idx + 1))\n                    });\n                    if (options.step != null) options.step(idx, Math.ceil(steps));\n                    idx++;\n                    if (idx >= steps) {\n                        window.clearInterval(_int);\n                        if (options.complete != null) options.complete();\n                    }\n                }, step);\n        },\n        // DRAG/DROP\n        destroyDraggable: function (el, category) {\n            _getDragManager(this, category).destroyDraggable(el);\n        },\n        destroyDroppable: function (el, category) {\n            _getDragManager(this, category).destroyDroppable(el);\n        },\n        initDraggable: function (el, options, category) {\n            _getDragManager(this, category).draggable(el, options);\n        },\n        initDroppable: function (el, options, category) {\n            _getDragManager(this, category).droppable(el, options);\n        },\n        isAlreadyDraggable: function (el) {\n            return el._katavorioDrag != null;\n        },\n        isDragSupported: function (el, options) {\n            return true;\n        },\n        isDropSupported: function (el, options) {\n            return true;\n        },\n        isElementDraggable: function (el) {\n            el = _jp.getElement(el);\n            return el._katavorioDrag && el._katavorioDrag.isEnabled();\n        },\n        getDragObject: function (eventArgs) {\n            return eventArgs[0].drag.getDragElement();\n        },\n        getDragScope: function (el) {\n            return el._katavorioDrag && el._katavorioDrag.scopes.join(\" \") || \"\";\n        },\n        getDropEvent: function (args) {\n            return args[0].e;\n        },\n        getUIPosition: function (eventArgs, zoom) {\n            // here the position reported to us by Katavorio is relative to the element's offsetParent. For top\n            // level nodes that is fine, but if we have a nested draggable then its offsetParent is actually\n            // not going to be the jsplumb container; it's going to be some child of that element. In that case\n            // we want to adjust the UI position to account for the offsetParent's position relative to the Container\n            // origin.\n            var el = eventArgs[0].el;\n            if (el.offsetParent == null) {\n                return null;\n            }\n            var finalPos = eventArgs[0].finalPos || eventArgs[0].pos;\n            var p = { left:finalPos[0], top:finalPos[1] };\n            if (el._katavorioDrag && el.offsetParent !== this.getContainer()) {\n                var oc = this.getOffset(el.offsetParent);\n                p.left += oc.left;\n                p.top += oc.top;\n            }\n            return p;\n        },\n        setDragFilter: function (el, filter, _exclude) {\n            if (el._katavorioDrag) {\n                el._katavorioDrag.setFilter(filter, _exclude);\n            }\n        },\n        setElementDraggable: function (el, draggable) {\n            el = _jp.getElement(el);\n            if (el._katavorioDrag)\n                el._katavorioDrag.setEnabled(draggable);\n        },\n        setDragScope: function (el, scope) {\n            if (el._katavorioDrag)\n                el._katavorioDrag.k.setDragScope(el, scope);\n        },\n        setDropScope:function(el, scope) {\n            if (el._katavorioDrop && el._katavorioDrop.length > 0) {\n                el._katavorioDrop[0].k.setDropScope(el, scope);\n            }\n        },\n        addToPosse:function(el, spec) {\n            var specs = Array.prototype.slice.call(arguments, 1);\n            var dm = _getDragManager(this);\n            _jp.each(el, function(_el) {\n                _el = [ _jp.getElement(_el) ];\n                _el.push.apply(_el, specs );\n                dm.addToPosse.apply(dm, _el);\n            });\n        },\n        setPosse:function(el, spec) {\n            var specs = Array.prototype.slice.call(arguments, 1);\n            var dm = _getDragManager(this);\n            _jp.each(el, function(_el) {\n                _el = [ _jp.getElement(_el) ];\n                _el.push.apply(_el, specs );\n                dm.setPosse.apply(dm, _el);\n            });\n        },\n        removeFromPosse:function(el, posseId) {\n            var specs = Array.prototype.slice.call(arguments, 1);\n            var dm = _getDragManager(this);\n            _jp.each(el, function(_el) {\n                _el = [ _jp.getElement(_el) ];\n                _el.push.apply(_el, specs );\n                dm.removeFromPosse.apply(dm, _el);\n            });\n        },\n        removeFromAllPosses:function(el) {\n            var dm = _getDragManager(this);\n            _jp.each(el, function(_el) { dm.removeFromAllPosses(_jp.getElement(_el)); });\n        },\n        setPosseState:function(el, posseId, state) {\n            var dm = _getDragManager(this);\n            _jp.each(el, function(_el) { dm.setPosseState(_jp.getElement(_el), posseId, state); });\n        },\n        dragEvents: {\n            'start': 'start', 'stop': 'stop', 'drag': 'drag', 'step': 'step',\n            'over': 'over', 'out': 'out', 'drop': 'drop', 'complete': 'complete',\n            'beforeStart':'beforeStart'\n        },\n        animEvents: {\n            'step': \"step\", 'complete': 'complete'\n        },\n        stopDrag: function (el) {\n            if (el._katavorioDrag)\n                el._katavorioDrag.abort();\n        },\n        addToDragSelection: function (spec) {\n            _getDragManager(this).select(spec);\n        },\n        removeFromDragSelection: function (spec) {\n            _getDragManager(this).deselect(spec);\n        },\n        clearDragSelection: function () {\n            _getDragManager(this).deselectAll();\n        },\n        trigger: function (el, event, originalEvent, payload) {\n            this.getEventManager().trigger(el, event, originalEvent, payload);\n        },\n        doReset:function() {\n            // look for katavorio instances and reset each one if found.\n            for (var key in this) {\n                if (key.indexOf(\"_katavorio_\") === 0) {\n                    this[key].reset();\n                }\n            }\n        }\n    });\n\n    var ready = function (f) {\n        var _do = function () {\n            if (/complete|loaded|interactive/.test(document.readyState) && typeof(document.body) != \"undefined\" && document.body != null)\n                f();\n            else\n                setTimeout(_do, 9);\n        };\n\n        _do();\n    };\n    ready(_jp.init);\n\n}).call(typeof window !== 'undefined' ? window : this);\n","window.requestAnimationFrame = window.requestAnimationFrame || window.webkitRequestAnimationFrame;\n\n\nexport const draw = function(scope) {  \n    if(scope) {\n        scope.draw();\n    }\n    requestAnimationFrame(function(){\n        draw(scope);\n    });\n};\n\nexport const htmlToElement = function(html) {\n    var template = document.createElement('template');\n    template.innerHTML = html;\n    return template.content.firstChild;\n};\n\nexport const initRepr = function(html, container) {\n    var element = htmlToElement(html);\n    if(container) {\n        container.appendChild(element);\n    } else {\n        document.body.appendChild(element);\n    }\n    return element;\n};\n\nvar audioContext = null;\nexport const getAudioContext = function() {\n    window.AudioContext = window.AudioContext || window.webkitAudioContext;\n    if(audioContext){\n        return audioContext;\n    }\n    audioContext = new AudioContext();\n    return audioContext;\n};","export const Marker = function(scope, type, level) {\n    this.scope = scope;\n    if(type == 'vertical'){\n        this.x = level;\n        this.y = null;\n    } else {\n        this.x = null;\n        this.y = level;\n    }\n};\n\nMarker.prototype.draw = function () {\n    // Make life easier with shorter variables\n    var context = this.scope.canvas.getContext('2d');\n    context.strokeWidth = 1;\n    context.strokeStyle = '#006644';\n    if (context.setLineDash)\n        context.setLineDash([5]);\n\n    if(this.x != null){\n        context.beginPath();\n        context.moveTo(this.x, 0);\n        context.lineTo(this.x, this.scope.canvas.height);\n        context.stroke();\n    } else if(this.y != null){\n        context.beginPath();\n        context.moveTo(0, 128 - this.y);\n        context.lineTo(this.scope.canvas.width, 128 - this.y);\n        context.stroke();\n    }\n};","import * as helpers from './helpers.js';\nimport * as marker from './marker.js';\n\nexport const Oscilloscope = function(container, width, height) {\n    var me = this;\n\n    // Create a new canvas to draw the scope onto\n    this.canvas = document.createElement('canvas');\n    this.canvas.style.width = width; \n    this.canvas.style.height = height; \n    this.canvas.id = 'scope';\n    // If a parent container was specified use it, otherwise just use the document body\n    if(container) {\n        container.appendChild(this.canvas);\n    } else {\n        document.body.appendChild(this.canvas);\n    }\n\n    // Create HTML representation\n    var tr = createOscilloscopeRepr('oscilloscope-title-' + 0, 'oscilloscope-switch-' + 0);\n    var repr = helpers.initRepr(tr, document.getElementById('node-tree-canvas')); // TODO: proper container selection\n    this.repr = repr;\n    repr.controller = this;\n    this.repr.id = 'oscilloscope-' + 0;\n\n    this.canvas.onmousedown = function(event){onMouseDown(event, me);};\n    this.canvas.onmouseup = function(event){onMouseUp(event, me);};\n    this.canvas.onmousemove = function(event){onMouseMove(event, me);};\n\n    this.triggerLevel = 50;\n    this.traces = [];\n\n    this.sources = [];\n\n    this.markers = [];\n    this.markers.push(\n        new marker.Marker(this, 'horizontal', 80),\n        new marker.Marker(this, 'vertical', 200)\n    );\n\n    this.markerMoving = false;\n\n    this.autoTriggering = true;\n    this.triggerMoving = false;\n    this.triggerTrace = 0;\n    this.triggerType = 'rising';\n};\n\nOscilloscope.prototype.draw = function() {\n    // Make life easier with shorter variables\n    var width = this.canvas.clientWidth;\n    var height = this.canvas.clientHeight;\n    var context = this.canvas.getContext('2d');\n\n    // Assign new scope properties\n    this.canvas.height = height;\n    this.canvas.width = width;\n    this.scaling = height / 256;\n    context.strokeWidth = 1;\n\n    // Draw background\n    context.fillStyle='#222222';\n    context.fillRect(0, 0, width, height);\n\n    // Draw trigger level\n    context.strokeStyle = '#278BFF';\n    context.beginPath();\n    context.moveTo(0, 128 - this.triggerLevel);\n    context.lineTo(width, 128 - this.triggerLevel);\n    context.stroke();\n\n    this.traces[this.triggerTrace].fetch();\n    var triggerLocation = getTriggerLocation(this.traces[this.triggerTrace].data, width, this.triggerLevel, this.triggerType);\n    if(triggerLocation === undefined && this.autoTriggering){\n        triggerLocation = 0;\n    }\n\n    this.traces.forEach(function(trace) {\n        if(trace.on && trace.source !== null && trace.source.ready){\n            trace.draw(triggerLocation);\n        }\n    });\n\n    this.markers.forEach(function(marker) {\n        marker.draw();\n    });\n};\n\nOscilloscope.prototype.addSource = function(source) {\n    this.sources.push(source);\n};\n\nOscilloscope.prototype.addTrace = function(trace) {\n    this.traces.push(trace);\n};\n\nOscilloscope.prototype.addMarker = function(marker) {\n    this.markers.push(marker);\n};\n\n// Instantiates the GUI representation\nfunction createOscilloscopeRepr(title_id) {\n    return `<div class=\"mdl-shadow--2dp trace-card\">\n        <div class=\"mdl-card__title\">\n            <i class=\"material-icons trace-card-icon\">keyboard_tab</i>&nbsp;\n            <div class=\"mdl-textfield mdl-js-textfield\">\n                <input class=\"mdl-textfield__input card-title\" type=\"text\" id=\"${ title_id }\">\n                <label class=\"mdl-textfield__label\" for=\"${ title_id }\">Oscilloscope</label>\n            </div>\n        </div>\n    </div>`;\n}\n\nfunction getTriggerLocation(buf, buflen, triggerLevel, type){\n    switch(type){\n    case 'rising':\n    default:\n        return risingEdgeTrigger(buf, buflen, triggerLevel);\n    case 'falling':\n        return fallingEdgeTrigger(buf, buflen, triggerLevel);\n    }\n}\n\nfunction risingEdgeTrigger(buf, buflen, triggerLevel) {\n    for(var i=1; i< buflen; i++){\n        if(buf[i] > 128 + triggerLevel && buf[i - 1] < 128 + triggerLevel){\n            return i;\n        }\n    }\n}\n\nfunction fallingEdgeTrigger(buf, buflen, triggerLevel) {\n    for(var i=1; i< buflen; i++){\n        if(buf[i] < 128 + triggerLevel && buf[i - 1] > 128 + triggerLevel){\n            return i;\n        }\n    }\n}\n\nfunction onMouseDown(event, scope){\n    // Start moving triggerlevel\n    if(128 - event.offsetY < scope.triggerLevel + 3 && 128 - event.offsetY > scope.triggerLevel - 3){\n        scope.triggerMoving = true;\n        return;\n    }\n\n    // Start moving markers\n    for(var i = 0; i < scope.markers.length; i++){\n        if(scope.markers[i].x != null){\n            if(event.offsetX < scope.markers[i].x + 3 && event.offsetX > scope.markers[i].x - 3){\n                scope.markerMoving = i;\n                return;\n            }\n        } else {\n            if(128 - event.offsetY < scope.markers[i].y + 3 && 128 - event.offsetY > scope.markers[i].y - 3){\n                scope.markerMoving = i;\n                return;\n            }\n        }\n    }\n}\n\nfunction onMouseUp(event, scope){\n    // End moving triggerlevel\n    if(scope.triggerMoving){\n        scope.triggerMoving = false;\n    }\n\n    // Start moving markers\n    if(scope.markerMoving !== false){\n        scope.markerMoving = false;\n    }\n}\n\nfunction onMouseMove(event, scope){\n    // Change cursor\n    if(128 - event.offsetY < scope.triggerLevel + 3 && 128 - event.offsetY > scope.triggerLevel - 3){\n        document.body.style.cursor = 'row-resize';\n    }\n    else{\n        var changed = false;\n        for(var i = 0; i < scope.markers.length; i++){\n            if(scope.markers[i].x != null){\n                if(event.offsetX < scope.markers[i].x + 3 && event.offsetX > scope.markers[i].x - 3){\n                    document.body.style.cursor = 'col-resize';\n                    changed = true;\n                    break;\n                }\n            } else {\n                if(128 - event.offsetY < scope.markers[i].y + 3 && 128 - event.offsetY > scope.markers[i].y - 3){\n                    document.body.style.cursor = 'row-resize';\n                    changed = true;\n                    break;\n                }\n            }\n        }\n        if(!changed){\n            document.body.style.cursor = 'initial';\n        }\n    }\n\n    // Move triggerlevel\n    if(scope.triggerMoving){\n\n        var triggerLevel = 128 - event.offsetY;\n        if(triggerLevel > 127){\n            triggerLevel = 127;\n        }\n        if(triggerLevel < -128){\n            triggerLevel = -128;\n        }\n        scope.triggerLevel = triggerLevel;\n        return;\n    }\n\n    // Move markers\n    if(scope.markerMoving !== false){\n        var markerLevel = 0;\n        if(scope.markers[scope.markerMoving].x != null){\n            markerLevel = event.offsetX;\n            if(markerLevel > scope.canvas.width){\n                markerLevel = scope.canvas.width;\n            }\n            if(markerLevel < 0){\n                markerLevel = 0;\n            }\n            scope.markers[scope.markerMoving].x = markerLevel;\n            return;\n        } else {\n            markerLevel = 128 - event.offsetY;\n            if(markerLevel > 127){\n                markerLevel = 127;\n            }\n            if(markerLevel < -128){\n                markerLevel = -128;\n            }\n            scope.markers[scope.markerMoving].y = markerLevel;\n            return;\n        }\n    }\n}\n","import * as helpers from './helpers.js';\n\n// Creates a new source\nexport const Waveform = function(container, scope) {\n    var me = this;\n\n    // Assign class variables\n    this.scope = scope;\n    this.ready = false;\n\n    // Create HTML representation\n    var tr = createWaveformRepr('source-title-' + scope.sources.length, 'source-switch-' + scope.sources.length);\n    this.repr = helpers.initRepr(tr, container);\n    this.repr.controller = this;\n    this.repr.id = 'source-' + scope.sources.length;\n\n    // Find on-off switch\n    this.on_off = this.repr.getElementsByClassName('trace-on-off')[0];\n    this.on_off.onchange = function(event) { me.onSwitch(me, event); };\n    this.on_off.checked = true;\n\n    // Find repr title\n    this.repr.getElementsByClassName('card-title')[0];\n\n    // Create source\n    var audioContext = helpers.getAudioContext();\n    this.osc = audioContext.createOscillator();\n    this.output = audioContext.createGain();\n    this.osc.type = 'sine';\n    this.osc.frequency.value = 1000;\n    this.osc.connect(this.output);\n    this.output.gain.value = 1;\n\n    this.start = startOsc;\n    this.stop = stopOsc;\n\n    // Create the analyzer\n    this.analyzer = audioContext.createAnalyser();\n    this.analyzer.fftSize = 4096;\n    // Connect the source output to the analyzer\n    this.output.connect(this.analyzer);\n    this.ready = true;\n\n    // Register with scope\n    scope.addSource(this);\n};\n\nfunction startOsc(time) {\n    this.osc.start(time);\n}\n\nfunction stopOsc(time) {\n    this.osc.stop(time);\n}\n\n// Instantiates the GUI representation\nfunction createWaveformRepr(title_id, switch_id) {\n    return `<div class=\"mdl-shadow--2dp trace-card\">\n            <div class=\"mdl-card__title\">\n                <i class=\"material-icons trace-card-icon\">keyboard_capslock</i>&nbsp;\n                <div class=\"mdl-textfield mdl-js-textfield\">\n                    <input class=\"mdl-textfield__input card-title\" type=\"text\" id=\"${ title_id }\">\n                    <label class=\"mdl-textfield__label\" for=\"${ title_id }\">Waveform</label>\n                </div>\n                <label class=\"mdl-switch mdl-js-switch mdl-js-ripple-effect\" for=\"${ switch_id }\">\n                    <input type=\"checkbox\" id=\"${ switch_id }\" class=\"mdl-switch__input trace-on-off\"/>\n                </label>\n            </div>\n        </div>`;\n}\n\n// Activates the source on the scope\nWaveform.prototype.onSwitch = function(source, event) {\n    if(event.target.checked){\n        this.osc.type = this.previousType;\n        this.osc.frequency.value = this.previousFrequency;\n    } else {\n        this.previousType = this.osc.type;\n        this.previousFrequency = this.osc.frequency.value;\n        var real = new Float32Array(1);\n        var imag = new Float32Array(1);\n        real[0] = 0;\n        imag[0] = 0;\n        var wave = helpers.getAudioContext().createPeriodicWave(real, imag);\n        this.osc.setPeriodicWave(wave);\n    }\n};\n\n// Creates a new source\nexport const Microphone = function(container, scope) {\n    var me = this;\n\n    // Assign class variables\n    this.scope = scope;\n    this.ready = false;\n    this.onactive = null;\n\n    // Create HTML representation\n    var tr = createMicrophoneRepr('source-title-' + scope.sources.length, 'source-switch-' + scope.sources.length);\n    var repr = helpers.initRepr(tr, container);\n    this.repr = repr;\n    repr.controller = this;\n    this.repr.id = 'source-' + scope.sources.length;\n\n     // Find on-off switch and store it\n    this.on_off = this.repr.getElementsByClassName('trace-on-off')[0];\n    this.on_off.onchange = function(event) { me.onSwitch(me, event); };\n    this.on_off.checked = false;\n\n    // Find repr title\n    this.repr.getElementsByClassName('card-title')[0];\n\n    // Initialize audio\n    initAudio(this);\n\n    // Register with scope\n    scope.addSource(this);\n};\n\n// Creates the actual audio source after a stream was found\nfunction gotStream(source, stream) {\n    console.log('Found a stream.');\n\n    var audioContext = helpers.getAudioContext();\n    // Create an AudioNode from the stream.\n    source.input = audioContext.createMediaStreamSource(stream);\n\n    // Connect to a gain from which the plots are derived\n    source.traceGain = audioContext.createGain();\n    source.input.connect(source.traceGain);\n\n    // Connect to a gain which can be sinked\n    source.sinkGain = audioContext.createGain();\n    source.sinkGain.gain.value = 0.0;\n    source.traceGain.connect(source.sinkGain);\n    source.sinkGain.connect(audioContext.destination);\n\n    // Create the analyzer\n    source.analyzer = audioContext.createAnalyser();\n    source.analyzer.fftSize = 4096;\n    // Connect the source output to the analyzer\n    source.traceGain.connect(source.analyzer);\n\n    // Create the data buffer\n    source.data = new Uint8Array(source.analyzer.frequencyBinCount);\n    source.onactive(source);\n    source.ready = true;\n    source.on_off.checked = true; \n}\n\n// Requests an audio source\nfunction initAudio(source) {\n    navigator.getUserMedia({\n        'audio': {\n            'mandatory': {\n                'googEchoCancellation': 'false',\n                'googAutoGainControl': 'false',\n                'googNoiseSuppression': 'false',\n                'googHighpassFilter': 'false'\n            },\n            'optional': []\n        },\n    }, function(stream) { gotStream(source, stream); }, function(e) {\n        console.log('Error getting audio!');\n        console.log(e);\n    });\n}\n\nMicrophone.prototype.constructSource = function() {\n    initAudio(this);\n};\n\n// Instantiates the GUI representation\nfunction createMicrophoneRepr(title_id, switch_id) {\n    return `<div class=\"mdl-shadow--2dp trace-card\">\n            <div class=\"mdl-card__title\">\n                <i class=\"material-icons trace-card-icon\">keyboard_tab</i>&nbsp;\n                <div class=\"mdl-textfield mdl-js-textfield\">\n                    <input class=\"mdl-textfield__input card-title\" type=\"text\" id=\"${ title_id }\">\n                    <label class=\"mdl-textfield__label\" for=\"${ title_id }\">Microphone</label>\n                </div>\n                <label class=\"mdl-switch mdl-js-switch mdl-js-ripple-effect\" for=\"${ switch_id }\">\n                    <input type=\"checkbox\" id=\"${ switch_id }\" class=\"mdl-switch__input trace-on-off\"/>\n                </label>\n            </div>\n        </div>`;\n}\n\n// Activates the source on the scope\nMicrophone.prototype.onSwitch = function(source, event) {\n    if(event.target.checked){\n        this.traceGain.gain.previousGain = this.previousGain;\n    } else {\n        this.previousGain = this.traceGain.gain.value;\n        this.traceGain.gain.value = 0.0000001;\n    }\n};","import * as helpers from './helpers.js';\n\n// Creates a new trace\nexport const  NormalTrace = function (container, scope, source) {\n    var me = this;\n\n    // Assign class variables\n    this.scope = scope;\n    this.source = source;\n    this.color = '#E8830C';\n    this.on = source !== null;\n    this.colorpicker = null;\n    this.title = null;\n    this.icon = null;\n\n    // Create HTML representation\n    var tr = this.createTraceRepr('trace-title-' + scope.traces.length, 'trace-switch-' + scope.traces.length);\n    this.repr = helpers.initRepr(tr, container);\n    this.repr.id = 'trace-' + scope.traces.length;\n    this.repr.controller = this;\n\n    // Find on-off switch\n    var on_off = this.repr.getElementsByClassName('trace-on-off')[0];\n    on_off.onchange = function(event) {\n        me.onSwitch(me, event);\n    };\n    on_off.checked = true;\n\n    // Find color storage and store it\n    var input = this.repr.getElementsByClassName('jscolor')[0];\n    // this.colorpicker = new jscolor(input,{\n    //     'value': this.color,\n    //     'hash': true\n    // }); TODO: new colorpicker\n    input.value = this.color;\n    input.onchange = function(event) { me.setColor(event.target.value);  };\n\n    // Find repr title and store it\n    this.title = this.repr.getElementsByClassName('card-title')[0];\n    this.title.style.color = this.color;\n\n    // Find repr icon and store it\n    this.icon = this.repr.getElementsByClassName('material-icons')[0];\n    this.icon.style.color = this.color;\n\n    // Create the data buffer\n    if(source && source.ready) {\n        this.data = new Uint8Array(this.source.analyzer.frequencyBinCount);\n    }\n    this.fetched = false;\n};\n\nNormalTrace.prototype.setSource = function(source){\n    this.source = source;\n    this.data = new Uint8Array(this.source.analyzer.frequencyBinCount);\n};\n\n// Instantiates the GUI representation\nNormalTrace.prototype.createTraceRepr = function(title_id, switch_id) {\n    return `<div class=\"mdl-shadow--2dp trace-card\">\n            <div class=\"mdl-card__title\">\n                <i class=\"material-icons trace-card-icon\">timeline</i>&nbsp;\n                <div class=\"mdl-textfield mdl-js-textfield\">\n                    <input class=\"mdl-textfield__input card-title\" type=\"text\" id=\"${ title_id }\">\n                    <label class=\"mdl-textfield__label\" for=\"${ title_id }\">Trace</label>\n                </div><input class=\"jscolor\">\n                <label class=\"mdl-switch mdl-js-switch mdl-js-ripple-effect\" for=\"${ switch_id }\">\n                    <input type=\"checkbox\" id=\"${ switch_id }\" class=\"mdl-switch__input trace-on-off\"/>\n                </label>\n            </div>\n        </div>`;\n};\n\n// Sets a new color for the trace, both in the UI and on the scope canvas\nNormalTrace.prototype.setColor = function(color) {\n    // this.colorpicker.fromString(color);\n    this.color = color;\n    this.icon.style.color = this.color;\n    this.title.style.color = this.color;\n};\n\n// Activates drawing of a trace on the scope\nNormalTrace.prototype.onSwitch = function(trace, event) {\n    trace.on = event.target.checked;\n};\n\n// Preemptively fetches a new sample set\nNormalTrace.prototype.fetch = function () {\n    if(!this.fetched && this.source && this.source.ready){\n        this.source.analyzer.getByteTimeDomainData(this.data);\n    }\n    this.fetched = true;\n};\n\n// Draws trace on the new frame\nNormalTrace.prototype.draw = function (triggerLocation) {\n    // Make life easier with shorter variables\n    var context = this.scope.canvas.getContext('2d');\n    context.strokeWidth = 1;\n\n    // Get a new dataset\n    this.fetch();\n\n    // Draw trace\n    context.strokeStyle = this.color;\n    context.beginPath();\n    // Draw samples\n    context.moveTo(0, (256 - this.data[triggerLocation]) * this.scope.scaling);\n    for (var i=triggerLocation, j=0; (j < this.scope.canvas.width) && (i < this.data.length); i++, j++){\n        context.lineTo(j, (256 - this.data[i]) * this.scope.scaling);\n    }\n    // Fix drawing on canvas\n    context.stroke();\n\n    // Mark data as deprecated\n    this.fetched = false;\n};\n\n// Creates a new source\nexport const FFTrace = function(container, scope, source) {\n    var me = this;\n\n    // Assign class variables\n    this.scope = scope;\n    this.source = source;\n    this.color = '#E8830C';\n    this.on = source !== null;\n\n    // Create HTML representation\n    var tr = this.createTraceRepr('trace-title-' + scope.traces.length, 'trace-switch-' + scope.traces.length);\n    this.repr = helpers.initRepr(tr, container);\n    this.repr.id = 'trace-' + scope.traces.length;\n    this.repr.controller = this;\n\n    // Find on-off switch\n    var on_off = this.repr.getElementsByClassName('trace-on-off')[0];\n    on_off.onchange = function(event) { me.onSwitch(me, event); };\n    on_off.checked = true;\n\n    // Find color storage and store it\n    var input = this.repr.getElementsByClassName('jscolor')[0];\n    // this.colorpicker = new jscolor(input,{\n    //     'value': this.color,\n    //     'hash': true\n    // }); TODO: new clorpicker\n    input.value = this.color;\n    input.onchange = function(event) { me.setColor(event.target.value);  };\n\n    // Find repr title and store it\n    this.title = this.repr.getElementsByClassName('card-title')[0];\n    this.title.style.color = this.color;\n\n    // Find repr icon and store it\n    this.icon = this.repr.getElementsByClassName('material-icons')[0];\n    this.icon.style.color = this.color;\n    // this.icon.onclick = this.colorpicker.show;\n    \n    // Create the data buffer\n    if(source && source.ready) {\n        this.data = new Uint8Array(this.source.analyzer.frequencyBinCount);\n    }\n    this.fetched = false;\n};\n\nFFTrace.prototype.setSource = function(source){\n    this.source = source;\n    this.data = new Uint8Array(this.source.analyzer.frequencyBinCount);\n};\n\n// Instantiates the GUI representation\nFFTrace.prototype.createTraceRepr = function(title_id, switch_id) {\n    return `<div class=\"mdl-shadow--2dp trace-card\">\n        <div class=\"mdl-card__title\">\n            <i class=\"material-icons trace-card-icon\">equalizer</i>&nbsp;\n            <div class=\"mdl-textfield mdl-js-textfield\">\n                <input class=\"mdl-textfield__input card-title\" type=\"text\" id=\"${ title_id }\">\n                <label class=\"mdl-textfield__label\" for=\"${ title_id }\">FFT</label>\n            </div><input class=\"jscolor\">\n            <label class=\"mdl-switch mdl-js-switch mdl-js-ripple-effect\" for=\"${ switch_id }\">\n                <input type=\"checkbox\" id=\"${ switch_id }\" class=\"mdl-switch__input trace-on-off\"/>\n            </label>\n        </div>\n    </div>`;\n};\n\n// Sets a new color for the trace, both in the UI and on the scope canvas\nFFTrace.prototype.setColor = function(color) {\n    // this.colorpicker.fromString(color);\n    this.color = color;\n};\n\n// Activates drawing of a trace on the scope\nFFTrace.prototype.onSwitch = function(trace, event) {\n    trace.on = event.target.checked;\n};\n\n// Preemptively fetches a new sample set\nFFTrace.prototype.fetch = function () {\n    if(!this.fetched && this.source && this.source.ready){\n        this.source.analyzer.getByteFrequencyData(this.data);\n    }\n    this.fetched = true;\n};\n\n// Draws trace on the new frame\nFFTrace.prototype.draw = function (triggerLocation) {\n    var SPACING = 1;\n    var BAR_WIDTH = 1;\n    var numBars = Math.round(this.scope.canvas.width / SPACING);\n    var multiplier = this.source.analyzer.frequencyBinCount / numBars;\n\n    var context = this.scope.canvas.getContext('2d');\n    context.lineCap = 'round';\n\n    // Get a new dataset\n    this.fetch();\n\n    // Draw rectangle for each frequency\n    for (var i = 0; i < numBars; ++i) {\n        var magnitude = 0;\n        var offset = Math.floor(i * multiplier);\n        // gotta sum/average the block, or we miss narrow-bandwidth spikes\n        for (var j = 0; j < multiplier; j++) {\n            magnitude += this.data[offset + j];\n        }\n        magnitude = magnitude / multiplier;\n        context.fillStyle = 'hsl(' + Math.round((i*360)/numBars) + ', 100%, 50%)';\n        context.fillRect(i * SPACING, this.scope.canvas.height, BAR_WIDTH, -magnitude);\n    }\n\n    // Mark data as deprecated\n    this.fetched = false;\n\n    return triggerLocation;\n};\n","export const nodeTreeCanvas = 'node-tree-canvas';","import m from 'mithril';\nimport { sourceNode } from './source.js';\n\nexport const app = {\n    oninit: function(vnode) {\n        // if(vnode.attrs.ctrl){\n        //     this.ctrl = vnode.attrs.ctrl;\n        // } else {\n        //     this.ctrl = {};\n        // }\n        this.nodes = [m('', 'KEK')];\n    },\n    view: function(vnode) {\n        return vnode.state.nodes;\n    },\n    add: function() {\n        console.log(this);\n        // this.state.nodes.push(\n        //     m(sourceNode, {\n        //         ctrl: {\n        //             type: 'KEK'\n        //         }\n        //     })\n        // );\n        // m.redraw();\n    }\n};","import m from 'mithril';\nimport { jsPlumb } from 'jsplumb';\nimport * as oscilloscope from './oscilloscope';\nimport * as source from './source.js';\nimport * as helpers from './helpers.js';\nimport * as trace from './trace.js';\nimport * as conf from './conf.js';\nimport { app } from './nodes/app.js';\n\nimport '../css/main.css';\nimport { traceNode } from './nodes/trace.js';\n\nfunction init() {\n    if (!navigator.getUserMedia)\n        navigator.getUserMedia = navigator.webkitGetUserMedia || navigator.mozGetUserMedia;\n    if (!navigator.cancelAnimationFrame)\n        navigator.cancelAnimationFrame = navigator.webkitCancelAnimationFrame || navigator.mozCancelAnimationFrame;\n    if (!navigator.requestAnimationFrame)\n        navigator.requestAnimationFrame = navigator.webkitRequestAnimationFrame || navigator.mozRequestAnimationFrame;\n\n    var audioContext = helpers.getAudioContext();\n    // osc1.output.connect(audioContext.destination);\n    // osc2.output.connect(audioContext.destination);\n    var scope = new oscilloscope.Oscilloscope(document.getElementById('scope-container'), '100%', '256px');\n\n    var osc1 = new source.Waveform(document.getElementById('node-tree-canvas'), scope);\n    osc1.osc.frequency.value = 500;\n    var osc2 = new source.Waveform(document.getElementById('node-tree-canvas'), scope);\n    var mic = new source.Microphone(document.getElementById('node-tree-canvas'), scope);\n\n    scope.addTrace(new trace.NormalTrace(\n        document.getElementById('node-tree-canvas'), scope, osc1\n    ));\n    scope.addTrace(new trace.NormalTrace(\n        document.getElementById('node-tree-canvas'), scope, osc2\n    ));\n    scope.traces[1].setColor('#E85D55');\n    var micTrace = new trace.NormalTrace(\n        document.getElementById('node-tree-canvas'), scope, mic\n    );\n    scope.addTrace(micTrace);\n    var micFFT = new trace.FFTrace(\n        document.getElementById('node-tree-canvas'), scope, mic\n    );\n    scope.addTrace(micFFT);\n    mic.onactive = function onMicActive(source){\n        micTrace.setSource(source);\n        micFFT.setSource(source);\n    };\n\n    osc1.start(audioContext.currentTime+0.05);\n    osc2.start(audioContext.currentTime+0.05);\n    helpers.draw(scope);\n\n    console.log(app);\n    m.mount(document.getElementById(conf.nodeTreeCanvas), { view: () =>\n       m(app)\n    });\n    app.add();\n\n    // var doneDraggables = [];\n    // jsPlumb.ready(function(){\n    //     var i = 0;\n\n    //     scope.repr.style.top = (200 + (1 * 150)) + 'px';\n    //     scope.repr.style.left = '800px';\n    //     jsPlumb.draggable(scope.repr.id, {\n    //         containment:true,\n    //         grid:[50,50]\n    //     });\n\n    //     jsPlumb.addEndpoint(scope.repr.id, { \n    //         anchor: ['Left', {shape: 'Rectangle'}],\n    //         isTarget: true,\n    //     });\n\n    //     // Make existing boxes draggable\n    //     scope.traces.forEach(function(trace) {\n    //         i++;\n\n    //         if(doneDraggables.indexOf(trace.source.repr.id) < 0){\n    //             trace.source.repr.style.top = (200 + (i * 150)) + 'px';\n    //             jsPlumb.draggable(trace.source.repr.id, {\n    //                 containment:true,\n    //                 grid:[50,50]\n    //             });\n\n    //             jsPlumb.addEndpoint(trace.source.repr.id, { \n    //                 anchor: ['Right', {shape: 'Rectangle'}],\n    //                 isSource: true,\n    //             });\n    //         }\n\n    //         if(doneDraggables.indexOf(trace.repr.id) < 0){\n    //             trace.repr.style.top = (200 + (i * 150)) + 'px';\n    //             trace.repr.style.left = '400px';\n                \n    //             jsPlumb.draggable(trace.repr.id, {\n    //                 containment:true,\n    //                 grid:[50,50]\n    //             });\n\n    //             jsPlumb.addEndpoint(trace.repr.id, {\n    //                 anchor: [['Left', {shape: 'Rectangle'}],['Right', {shape: 'Rectangle'}]],\n    //                 isTarget: true,\n    //                 isSource: true\n    //             });\n    //         }\n            \n    //         doneDraggables.push(trace.source.repr.id);\n    //         doneDraggables.push(trace.repr.id);\n\n    //         jsPlumb.connect({\n    //             source: trace.source.repr.id,\n    //             target: trace.repr.id,\n    //             endpoint: 'Dot',\n    //             anchors: [['Right', {shape:'Circle'}], ['Left', {shape:'Circle'}]]\n    //         });\n\n    //         jsPlumb.connect({\n    //             source: trace.repr.id,\n    //             target: scope.repr.id,\n    //             endpoint: 'Dot',\n    //             anchors: [['Right', {shape:'Circle'}], ['Left', {shape:'Circle'}]]\n    //         });\n    //     });\n\n    //     // Bind connection event\n    //     jsPlumb.bind('connection', function(info) {\n    //         info.target.controller.source = info.source.controller;\n    //     });\n\n    //     // Bind connectionDetached event\n    //     jsPlumb.bind('connectionDetached', function(info) {\n    //         info.target.controller.source = null;\n    //     });\n    // });\n    // TODO: Crosswindow stuff\n    // popup = window.open('http://fiddle.jshell.net');\n    // popup.console.log(1);\n    // popup.kek = 'KEK';\n    // popup.alert(popup.kek);\n}\n\nwindow.addEventListener('load', init);"],"names":["Vnode","tag","key","attrs0","children","text","dom","attrs","domSize","undefined","state","events","instance","skip","normalize","node","Array","isArray","normalizeChildren","i","length","selectorParser","selectorCache","hyperscript","selector","view","Error","match","classes","attributes","exec","type","value","id","push","attrValue","replace","className","join","hasAttrs","childList","class","childrenIndex","arguments","babelHelpers.typeof","trust","html","fragment","attrs1","m","PromisePolyfill","executor","TypeError","self","resolvers","rejectors","resolveCurrent","handler","rejectCurrent","_instance","callAsync","setImmediate","setTimeout","list","shouldAbsorb","execute","then","bind","console","error","retry","e","executeOnce","runs","run","fn","onerror","prototype","onFulfilled","onRejection","handle","callback","next","rejectNext","resolveNext","promise","resolve","reject","catch","all","total","count","values","consume","race","window","Promise","global","buildQueryString","object","Object","toString","call","args","key0","destructure","encodeURIComponent","_8","$window","callbackCount","oncompletion","setCompletionCallback","finalizer","complete","finalize","promise0","then0","apply","extra","url","request","method","toUpperCase","useBody","serialize","FormData","data","JSON","stringify","deserialize","extract","interpolate","assemble","xhr","XMLHttpRequest","open","async","user","password","setRequestHeader","withCredentials","headers","hasOwnProperty","config","onreadystatechange","status","readyState","response","cast","responseText","send","background","jsonp","callbackName","Math","round","random","script","document","createElement","parentNode","removeChild","callbackKey","src","documentElement","appendChild","tokens","slice","querystring","prefix","indexOf","parse","type0","requestService","coreRenderer","$doc","$emptyFragment","createDocumentFragment","onevent","setEventCallback","createNodes","parent","vnodes","start","end","hooks","nextSibling","ns","vnode","createNode","initLifecycle","createText","createHTML","createFragment","createComponent","createTextNode","match1","parent1","caption","thead","tbody","tfoot","tr","th","td","colgroup","col","temp","innerHTML","firstChild","childNodes","child","attrs2","is","element","createElementNS","contenteditable","textContent","create","reentrantLock","updateNodes","old","recycling","removeNodes","isUnkeyed","getNextSibling","updateNode","isRecyclable","concat","pool","oldStart","oldEnd","map","o","v","insertNode","toFragment","getKeyMap","oldIndex","movable","oldTag","shouldUpdate","updateComponent","updateText","nodeValue","updateHTML","updateFragment","updateElement","abs","oldChildrenLength","poolChildrenLength","vnodesChildrenLength","key2","count0","insertBefore","setContentEditable","content","context","removeNode","expected","called","onbeforeremove","result","continuation","hasIntegrationMethods","removeNodeFromDOM","onremove","setAttrs","setAttr","isFormAttribute","isLifecycleMethod","nsLastIndex","substr","setAttributeNS","updateEvent","updateStyle","isAttribute","isCustomElement","activeElement","setAttribute","removeAttribute","setLateAttrs","selectedIndex","updateAttrs","attr","source","oncreate","onupdate","style","cssText","eventName","removeEventListener","addEventListener","oninit","updateLifecycle","forceVnodeUpdate","forceComponentUpdate","onbeforeupdate","render","active","focus","throttle","time","last","pending","timeout","requestAnimationFrame","now","Date","_11","renderService","redraw","callbacks","subscribe","key1","unsubscribe","index","splice","redrawService","_16","redrawService0","root","component","run0","mount","parseQueryString","string","charAt","entries","split","data0","counters","entry","key5","decodeURIComponent","levels","cursor","pop","j","level","nextLevel","isNumber","isNaN","parseInt","isValue","coreRouter","supportsPushState","history","pushState","callAsync0","normalize1","fragment0","location","asyncId","debounceAsync","callback0","parsePath","path","queryData","hashData","queryIndex","hashIndex","pathEnd","queryEnd","queryParams","key4","hashParams","router","getPath","type2","setPath","options","match2","token","query","hash","title","onpopstate","replaceState","href","defineRoutes","routes","resolveRoute","params","pathname","k","route0","matcher","RegExp","test","keys","onhashchange","_20","routeService","identity","render1","attrs3","currentPath","lastUpdate","route","defaultRoute","run1","bail","payload","update","routeResolver","comp","onmatch","resolved","set","get","prefix0","link","vnode1","onclick","ctrlKey","metaKey","shiftKey","which","preventDefault","getAttribute","param","key3","withAttr","attrName","callback1","currentTarget","_28","version","module","sgn","x","subtract","v1","v2","y","dotProduct","square","sqrt","scale","s","maxRecursion","flatnessTolerance","pow","point","curve","w","_convertToBezier","degree","higherDegree","numSolutions","_findRoots","candidates","Vectors","dist","t","_bezier","newDist","distance","_distanceFromCurve","c","d","cdTable","z","row","column","parseFloat","n","max","ub","min","lb","depth","right","left_count","right_count","left_t","right_t","_getCrossingCount","_isFlatEnough","_computeXIntercept","left","sign","old_sign","n_crossings","intercept_1","intercept_2","left_intercept","right_intercept","a","b","det","dInv","a1","b1","c1","a2","b2","c2","max_distance_below","max_distance_above","YLK","XNM","YNM","XMK","YMK","XLK","detInv","S","order","_curveFunctionCache","fns","l_term","c_term","t_term","one_minus_t_term","_termFunc","terms","p","_getCurveFunctions","_x","_y","cc","p1","p2","_isPoint","_pointOnPath","tally","curLoc","direction","cur","_dist","prev","dy","dx","Infinity","atan","_pointAlongPath","_gradientAtPoint","_theta2","sin","cos","jsBezier","distanceFromCurve","gradientAtPoint","gradientAtPointAlongCurveFrom","_gradientAtPointAlongPathFrom","nearestPointOnCurve","_nearestPointOnCurve","pointOnCurve","pointAlongCurveFrom","_pointAlongPathFrom","perpendicularToCurveAt","_perpendicularToPathAt","locationAlongCurveFrom","_locationAlongPathFrom","getLength","_length","exports","this","Biltong","_pointHelper","_isa","_gradient","gradient","_p1","_p2","_normal","normal","_lineLength","lineLength","_quadrant","quadrant","_theta","theta","PI","_intersects","intersects","r1","r2","x2","y1","y2","h","x1","_encloses","encloses","allowSharedEdges","v3","v4","_segmentMultipliers","_inverseSegmentMultipliers","_pointOnLine","pointOnLine","fromPoint","toPoint","segmentMultiplier","_perpendicularLineTo","perpendicularLineTo","theta2","Sniff","android","navigator","userAgent","toLowerCase","matchesSelector","el","ctx","querySelectorAll","possibles","_gel","constructor","String","getElementById","_t","srcElement","target","_pi","obj","doCompute","_one","out","_d","l","guid","_store","event","__ta","g","__tauid","_unstore","__taExtra","_unbind","__taUnstore","_curryChildFilter","evt","_fn","pathInfo","registerExtraFunction","newFn","DefaultHandler","isTouchDevice","touchMap","_bind","tfn","SmartClickHandler","__taSmartClicks","__tad","_pageLocation","up","__tau","click","down","_tapProfiles","touches","taps","TapHandler","clickThreshold","dblClickThreshold","isMouseDevice","__taTapHandler","tap","dbltap","contextmenu","downSelectors","finished","tt","clearSingle","clearDouble","_touchCount","eventId","tc","pLoop","meeHelper","__tamee","MouseEnterExitHandler","over","mouseenter","mouseexit","activeElements","relatedTarget","toElement","touchstart","touchend","touchmove","iev","appName","re","ua","rv","$1","isIELT9","_genLoc","_touches","_getTouch","ts","clientX","scrollLeft","clientY","scrollTop","_screenLocation","_clientLocation","idx","item","changedTouches","targetTouches","originalFn","attachEvent","_each","_el","detachEvent","__taTouchProxy","top","tagName","Mottle","mouseEnterExitHandler","tapHandler","_smartClicks","smartClicks","_doBind","remove","on","_c","_e","_f","off","trigger","originalEvent","MouseEvent","bindingAMouseEvent","sl","cl","screenX","screenY","_evt","createTouch","pl","createTouchList","touch","initTouchEvent","eventToBind","initMouseEvent","createEvent","originalIsMouse","evtName","ite","eventGenerators","_decorate","dispatchEvent","createEventObject","eventType","fireEvent","doNotPreventDefault","stopPropagation","returnValue","pageLocation","setForceTouchEvents","setForceMouseEvents","head","unshift","l1","l2","f","elem","getBoundingClientRect","body","docElem","pageYOffset","pageXOffset","clientTop","clientLeft","box","DEFAULT_GRID_X","DEFAULT_GRID_Y","isIE9","_pl","pageX","pageY","_classes","draggable","droppable","drag","selected","hover","noSelect","ghostProxy","_defaultScope","_events","_devNull","_true","_foreach","from","_setDroppablesActive","dd","val","andHover","setActive","updatePosition","setHover","_isString","_consume","_defaultInputFilterSelector","_inputFilter","_katavorio","getInputFilterSelector","css","scope","addClass","_class","uuid","_uuid","setEnabled","enabled","isEnabled","toggleEnabled","setScope","scopes","addScope","removeScope","toggleScope","katavorio","Super","rightButtonCanDrag","posAtDown","pagePosAtDown","pageDelta","moving","consumeStartEvent","dragEl","clone","scroll","_multipleDrop","multipleDrop","isConstrained","useGhostProxy","TRUE","FALSE","cloneNode","snapThreshold","_snap","pos","thresholdX","thresholdY","floor","_dxl","_dx","_dxt","_dyl","_dy","_dyt","posses","posseRoles","toGrid","grid","snap","getPosition","setPosition","setUseGhostProxy","allowNegative","constrain","constrainRect","size","_setConstrain","containment","setConstrain","setRevert","revertFunction","_katavorioId","_filters","_testFilter","_setFilter","setFilter","_exclude","_assignId","_addFilter","addFilter","_removeFilter","removeFilter","clearAllFilters","canDrag","matchingDroppables","intersectingDroppables","downListener","button","isNotRightClick","position","getOffsetRect","downAt","moveListener","upListener","markSelection","markPosses","_dispatch","consumeFilteredEvents","_continue","mark","ignoreZoom","getZoom","moveBy","updateSelection","updatePosses","unbind","removeClass","unmark","unmarkSelection","unmarkPosses","stop","notifySelectionDragStop","notifyPosseDragStop","getFilters","abort","getDragElement","listeners","beforeStart","revert","notifyStart","force","sel","getSelection","dPos","positions","ghostProxyOffsets","finalPos","selection","andNotify","getSize","getMatchingDroppables","dragClass","cs","notifySelectionDragStart","doNotCheckDroppables","offsetLeft","offsetTop","sort","_rankSort","drop","retVal","cPos","desiredLoc","gp","pageRect","rect","focusDropElement","pagePosition","canDrop","isHover","destroy","filter","filterExclude","rank","_activeClass","activeClass","_hoverClass","hoverClass","allowLoopback","_katavorioDragHover","r","Katavorio","katavorioParams","_selectionMap","_dragsByScope","_dropsByScope","_reg","_obj","_unreg","_getMatchingDroppables","_m","_dd","_prepareParams","_p","_mistletoe","existingDrag","_css","overrideCss","_scope","inputFilterSelector","setInputFilterSelector","_katavorioDrag","_katavorioDrop","select","_selection","deselect","_s","deselectAll","_posses","members","_posseAction","setZoom","_zoom","kObj","_kObj","_scopeManip","Drag","Drop","snapToGrid","getDragsForScope","getDropsForScope","selIdx","elementRemoved","destroyDraggable","destroyDroppable","_destroy","reset","_spec","dontAddExisting","posseId","name","posse","_suggest","addToPosse","spec","_processOneSpec","setPosse","_difference","diff","removeFromPosse","_vanquish","removeFromAllPosses","setPosseState","_isnum","_iss","_isb","_isnull","_iso","_isd","_isf","_isNamedFunction","_ise","jsPlumbUtil","isString","isBoolean","isNull","isObject","isDate","isFunction","isEmpty","getTime","merge","collations","ar","cMap","inObj","q","term","lc","str","_getArray","array","functionChain","successValue","failValue","populate","model","functionPrefix","fromString","matches","substring","findWithFunction","removeWithFunction","addWithFunction","hashFunction","addToList","insertAtStart","suggest","insertAtHead","extend","_protoFn","protoFn","_makeFn","_oneSet","logEnabled","log","msg","wrap","wrappedFunction","newFunction","returnOnThisValue","EventGenerator","eventsSuspended","eventsToDieOn","listener","_listeners","__jsPlumb","fire","_gone","ret","shouldFireEvent","eventOrListener","getListener","forEvent","setSuspendEvents","isSuspendEvents","silently","cleanupListeners","cleanup","sizeElement","height","width","rendererTypes","_getOffset","relativeToRoot","getOffset","_timestamp","_updateHoverStyle","_jsPlumb","paintStyle","hoverPaintStyle","jsPlumb","mergedHoverStyle","fill","eventFilters","_updateAttachedElements","timestamp","sourceElement","getAttachedElements","affectedElements","_splitType","_mapType","typeId","_ju","_applyTypes","doNotRepaint","getDefaultType","getTypeDescriptor","defType","types","tid","getType","applyType","repaint","jsPlumbUIComponent","idPrefix","parameters","paintStyleInUse","beforeDetach","beforeDrop","overlayPlacements","Defaults","HoverClass","typeCache","cacheTypeItem","getCachedTypeItem","getId","overlays","oo","defaultOverlayKeys","convertToFullOverlaySpec","fo","getDefaultScope","appendToDefaultType","_defaultType","isDetachAllowed","connection","isDropAllowed","sourceId","targetId","dropEndpoint","checkCondition","bindAListener","boundListeners","domListeners","setListenerComponent","typeIndex","cssClass","canvas","getParameter","setParameter","getParameters","setParameters","getClass","hasClass","clazz","updateClasses","classesToAdd","classesToRemove","setType","clearTypes","reapplyTypes","hasType","addType","_cont","removeType","_removeTypeCssHelper","toggleType","setPaintStyle","setHoverPaintStyle","getPaintStyle","getHoverPaintStyle","ignoreAttachedElements","currentlyDragging","isHoverSuspended","isSuspendDrawing","recalc","getInstanceIndex","_jsPlumbInstanceIndex","jsPlumbInstance","_defaults","LogEnabled","_connectionTypes","_endpointTypes","_instanceIndex","_bb","_currentInstance","_initialDefaults","_info","nodeType","getElement","_getId","repaintEverything","_containerDelegations","unbindContainer","_container","setContainer","each","conn","moveParent","selectEndpoints","ep","componentType","jp","eventAliases","alias","_addOneDelegate","_oneDelegateHandler","_oneDelegate","managedElements","elId","previousContainer","getContainer","initialized","importDefaults","Container","restoreDefaults","connections","endpointsByElement","endpointsByUUID","offsets","offsetTimestamps","draggableStates","connectionBeingDragged","sizes","_suspendDrawing","_suspendedAt","DEFAULT_SCOPE","Scope","_curIdStamp","_idstamp","_appendElement","appendToRoot","_draw","ui","clearEdits","repaintEls","dm","getDragManager","getElementsForDraggable","_updateOffset","offset","anchorManager","_getEndpoint","_initDraggableIfNecessary","isDraggable","dragOptions","headless","_draggable","isDragSupported","DragOptions","isAlreadyDraggable","dragEvents","stopEvent","startEvent","_started","_manage","setHoverSuspended","elementDraggingClass","sourceElementDraggingClass","targetElementDraggingClass","setConnectionBeingDragged","dragEvent","getUIPosition","uip","dragEnded","elements","disabled","initDraggable","register","_scopeMatch","e1","e2","s2","s1","_prepareConnectionParams","referenceParams","endpoint","sourceEndpoint","targetEndpoint","uuids","isFull","connectionType","connectorOverlays","connectorPointerEvents","def","addEndpoint","_mergeOverrides","anchor","anchors","endpoints","endpointStyles","endpointStyle","endpointHoverStyles","endpointHoverStyle","defs","matchType","newConnection","tep","_addEndpoint","newEndpoint","_doNotDeleteOnDetach","_deleteOnDetach","uniqueEndpoint","finalEndpoint","_oneElementDef","sourceEndpointDefinitions","targetEndpointDefinitions","_newConnection","ConnectionType","getDefaultConnectionType","_newEndpoint","finaliseConnection","_finaliseConnection","con","isDetachable","jpc","doInformAnchorManager","suspendedEndpoint","isTemporarySource","doNotFireConnectionEvent","eventArgs","EndpointType","Endpoint","fireDetachEvent","elementId","endpointAdded","_operation","func","endpointFunc","ii","jj","_setDraggable","setElementDraggable","_setVisible","alsoChangeEndpoints","setVisible","info","oidx","isVisible","_toggleDraggable","setDraggable","_toggleVisible","changeEndpoints","_getCachedData","doNotCreateIfNotFound","isConnectionBeingDragged","getManagedElements","connectorClass","connectorOutlineClass","editableConnectorClass","connectedClass","endpointClass","endpointConnectedClass","endpointFullClass","endpointDropAllowedClass","endpointDropForbiddenClass","overlayClass","draggingClass","endpointAnchorClassPrefix","hoverSourceClass","hoverTargetClass","dragSelectClass","Anchors","Connectors","Endpoints","Overlays","ConnectorRenderers","SVG","EndpointStyle","inputs","_ensureContainer","paint","anchorLoc","compute","xy","myOffset","wh","results","addEndpoints","animate","properties","animationSupported","del","stepFunction","animEvents","step","completeFunction","revalidate","doAnimate","conditionName","connect","epDefs","_st","stTypes","cId","cEl","sid","sep","oldEndpoint","originalSourceId","newSourceId","originalTargetId","newTargetId","addConnection","makeEndpoint","detachFromConnection","evtParams","fireMoveEvent","setSource","_set","sourceChanged","setTarget","updateOtherEndpoint","deleteEndpoint","dontUpdateHover","deleteAttachedObjects","deleteObject","deleteEveryEndpoint","setSuspendDrawing","_is","doFireEvent","argIsConnection","connType","connectionDetached","unregisterEndpoint","newEndpoints","detach","firstArgIsConnection","forceDetach","ignoreTarget","detachFrom","detachAllConnections","detachAll","detachEveryConnection","batch","endpointCount","connectionCount","unravelEndpoint","unravelConnection","doNotCleanup","initDroppable","_getOperation","setter","getter","prepareList","input","doNotGetIds","filterList","missingIsFalse","getConnections","flat","sources","targets","_addOne","ss","proxies","originalEp","_curryGet","_curryEach","setters","getters","_makeCommonSelectHandler","_makeConnectionSelectHandler","common","setDetachable","setReattach","setConnector","isReattach","_makeEndpointSelectHandler","setAnchor","noElementFilters","sourceMatchExact","targetMatchExact","either","inner","_ep","isSource","noMatchTarget","isTarget","noMatchSource","getAllConnections","getEndpoint","getEndpoints","getDefaultEndpointType","Connection","appendElement","_hoverSuspended","hide","idstamp","connectorsInitialized","registerConnectorType","connector","connectorTypes","candidate","can","offsetParent","manage","_transient","updateOffset","bottom","centerx","centery","init","getRenderModes","renderer","_oneType","_getContainerFromDefaults","AnchorManager","makeAnchor","_a","DoNotThrowErrors","newAnchor","specimen","getOrientation","pp","DynamicAnchor","orientation","Anchor","anchorParams","makeAnchors","makeDynamicAnchor","anchorSelector","epIndex","negate","ok","getSelector","elInfo","dropOptions","EndpointDropHandler","maxConnections","targetCount","onDrop","locked","proxyComponent","isRedrop","suspendedElement","deriveEndpointAndAnchorSpec","eps","_mtNew","positionFinder","elPosition","elSize","ap","dropPosition","constructorParams","maybeCleanup","dropEvent","_drop","_drag","_jsPlumbRelatedElement","makeTarget","_setEndpointPaintStylesAndAnchor","_doOne","elid","_isJsPlumbGroup","_def","_makeElementDropHandler","targetDef","unmakeTarget","doNotClearArrays","makeSource","aae","onMaxConnections","_del","existingStop","endpointAddedButNoDragYet","oldAnchor","oldConnection","anchorDef","selectorFilter","sourceCount","getPositionOnElement","tempEndpointParams","elxy","_delTempEndpoint","att","mouseDownListener","setDragFilter","unmakeSource","eldefs","unmakeEverySource","getScope","getSourceScope","getTargetScope","setSourceScope","setTargetScope","_setScope","setDragScope","setDropScope","unmakeEveryTarget","toggle","originalState","newState","toggleSourceEnabled","_setEnabled","isSourceEnabled","setSourceEnabled","toggleTargetEnabled","isTargetEnabled","setTargetEnabled","ready","isIdAlready","removeAllEndpoints","recurse","ebe","clearFor","removeFloatingConnection","floatingConnections","removeElement","ae","_doRemove","empty","dontRemoveFocus","removeAllGroups","removeGroupManager","doReset","clear","_clearObject","setDefaultScope","dontPrependDefault","as","bits","setId","newId","doNotSetAttribute","tConns","setElementId","setReferenceElement","changeId","epIdx","_conns","sConns","setDebugLog","debugLog","repaintAfterwards","getSuspendedAt","doNotRepaintAfterwards","_wasSuspended","doWhileSuspended","getCachedData","show","toggleVisible","toggleDraggable","addListener","registerConnectionType","to","registerConnectionTypes","registerEndpointType","registerEndpointTypes","typeDescriptor","setIdChanged","oldId","setParent","newParent","_id","_dom","_pdom","_pid","o1","o2","names","getFloatingAnchorIndex","isFloating","ConnectionsDetachable","ConnectionOverlays","Connector","DropOptions","EndpointOverlays","EndpointStyles","EndpointHoverStyle","EndpointHoverStyles","HoverPaintStyle","LabelStyle","color","MaxConnections","PaintStyle","stroke","ReattachConnections","RenderMode","getInstance","overrideFns","ovf","_dlist","_delements","_elementsWithEndpoints","_draggablesForElements","parentOffset","_draggables","cid","cOff","_oneLevel","updateOffsets","childOffsetOverrides","domEl","cel","pid","cLoc","pLoc","endpointDeleted","ancestor","pId","currentChildLocation","current","clearParent","revalidateParent","childOffset","co","getDragAncestor","de","aid","_setClassName","cn","trim","baseVal","_getClassName","_classManip","curClasses","add","screenLocation","clientLocation","dragManager","recalculateOffsets","atts","attName","setAttributes","classList","contains","toAdd","toRemove","setClass","prop","getStyle","getComputedStyle","getPropertyValue","currentStyle","container","op","_maybeAdjustScroll","zoom","pst","psl","offsetWidth","offsetHeight","getAbsolutePosition","setAbsolutePosition","animateFrom","animateOptions","getWidth","getHeight","getRenderMode","_jp","_makeLabelOverlay","labelStyle","_internalLabelOverlayId","mergedParams","_params","Label","_processOverlay","_newOverlay","OverlayCapableJsPlumbUIComponent","overlayPositions","label","labelLocation","defaultLabelLocation","existing","updateFrom","keep","reattach","addOverlay","removeOverlay","overlay","getOverlay","getOverlays","hideOverlay","hideOverlays","showOverlay","showOverlays","removeAllOverlays","overlayId","dontCleanup","removeOverlays","bgCanvas","isAppendedAtTopLevel","getLabel","lo","getLabelOverlay","setLabel","Function","setLocation","setAbsoluteOverlayPosition","getAbsoluteOverlayPosition","_clazzManip","action","dontUpdateOverlays","placeholder","stopped","_ui","anchorPoint","getCurrentLocation","stopDrag","ipco","ips","referenceAnchor","referenceCanvas","FloatingAnchor","reference","floatingAnchor","elementWithPrecedence","connectorStyle","connectorHoverStyle","connectorHoverClass","connectorTooltip","visible","floatingEndpoint","dragProxy","connectionCost","connectionsDirected","currentAnchorClass","getCssClass","oldAnchorClass","anchorClass","prepareAnchor","currentAnchor","_updateAnchorClass","setPreparedAnchor","continuousAnchorFactory","internalHover","prepareEndpoint","rm","tooltip","endpointArgs","setEndpoint","setPreparedEndpoint","typeParameters","reattachConnections","connectionsDetachable","detachable","dragAllowedWhenFull","_forceDeleteOnDetach","connectionIndex","endpointBeingDeleted","actuallyDetached","_forceDetach","unaffectedConns","setElement","curId","rehomeEndpoint","parentId","makeInPlaceCopy","acc","inPlaceAnchor","loc","hideOnDrag","connectorSelector","setStyle","connectorPaintStyle","dimensions","isDynamic","findConnectionToUseForDynamicAnchor","oIdx","oId","oInfo","oOffset","oWH","txy","twh","tElement","draw","draggingInitialised","existingJpc","existingJpcParams","_dragHandler","_makeConnectionDragHandler","placeholderInfo","defaultOpts","beforeStartEvent","beforeStartParams","startParams","beforeDrag","canvasElement","_makeDraggablePlaceholder","endpointToFloat","centerAnchor","_makeFloatingEndpoint","_savedAnchor","getDragScope","dragScope","anchorIdx","suspendedElementId","suspendedElementType","referenceEndpoint","getDropEvent","deleteConnectionNow","floatingElement","floatingId","floatingIndex","_forceReattach","fe","deleteAfterDragStop","inPlaceCopy","visibility","anchorParamsToUse","isTransient","isDropSupported","overEvent","outEvent","dhParams","getDragObject","_jpc","bb","_initDropTarget","doNotChangeConnections","doNotNotifyOtherEndpoint","display","isConnectedTo","found","getConnectionCost","setConnectionCost","areConnectionsDirected","setConnectionsDirected","_elId","setDragAllowedWhenFull","allowed","equals","getUuid","computeAnchor","existingConnection","_doContinue","optionalData","aParam","originalSourceEndpoint","newSourceEndpoint","originalTargetEndpoint","newTargetEndpoint","_toDelete","mergeData","continueFunction","dontContinueFunction","renderMode","connectorName","connectorArgs","forComponent","_makeAnchor","_updateConnectedClass","_jsPlumbConnections","previousConnection","editable","editorParams","lastPaintedAt","editableRequested","setEditable","isEditable","isEditing","eT","eS","deleteEndpointsOnDetach","_detachable","_reattach","myInfo","myWH","otherInfo","otherOffset","otherWH","initialTimestamp","cost","directed","geometry","setGeometry","getData","setData","_types","updateConnectedClass","typeMap","_anchors","informEndpoints","getUuids","getCost","setCost","isDirected","getConnector","getGeometry","prepareConnector","connectorSpec","makeConnector","setPreparedConnector","doNotChangeListenerComponent","previousClasses","previous","transfer","swap","tId","sId","tIdx","sIdx","targetInfo","sE","tE","sourceInfo","tAnchorP","resetBounds","sourcePos","sAnchorP","targetPos","strokeWidth","minX","minY","maxX","maxY","overlayExtents","outlineWidth","extents","xmin","bounds","lineWidth","ymin","xmax","ymax","es","outlineStroke","ehs","u","drawEndpoints","continuousAnchorLocations","userDefinedContinuousAnchorLocations","continuousAnchorOrientations","Orientation","HORIZONTAL","VERTICAL","DIAGONAL","IDENTITY","axes","connectionsByElementId","anchorLists","calculateOrientation","sd","sourceAnchor","targetAnchor","atan2","midpoints","dim","sf","tf","targetEdge","isContinuous","isEdgeSupported","sourceEdge","placeAnchorsOnLine","desc","elementDimensions","elementPosition","horizontal","otherMultiplier","reverse","other","xp","yp","currySort","reverseAngles","leftSort","edgeSortFunctions","_sortHelper","_array","placeAnchors","_anchorLists","sS","cd","sO","placeSomeAnchors","unsortedConnections","isHorizontal","sc","anchorPos","weAreSource","weAreTarget","_setAnchorLocation","_amEndpoints","addFloatingConnection","doRegisterTarget","registerConnection","otherIndex","otherEndpoint","otherAnchor","eId","connInfo","doNotRedraw","removeConnection","removeEndpointFromAnchorLists","getConnectionsFor","getEndpointsFor","lists","aBoolean","otherElId","edgeId","connsToPaint","endpointsToPaint","firstMatchingElIdx","endpointId","listToAddTo","listToRemoveFrom","_continuousAnchorEdge","rIdx","exactIdx","insertIdx","sourceElId","oldTargetId","tIndex","sIndex","originalId","newElement","currentId","offsetToUI","doNotRecalcEndpoint","endpointConnections","connectionsToPaint","anchorsToUpdate","orientationCache","sourceContinuous","targetContinuous","oKey","_updateAnchorList","getDefaultFace","fc","faces","clockwise","availableFaces","opposites","clockwiseOptions","antiClockwiseOptions","secondBest","lastChoice","verifyEdge","edge","clearUserDefinedLocation","setUserDefinedLocation","userDefinedLocation","lastReturnValue","ao","getUserDefinedLocation","refCanvas","xDir","yDir","_lastResult","_endpoint","ref","_convertAnchor","getAnchors","_lastAnchor","_curAnchor","_distance","cx","cy","ay","acx","acy","ax","_anchorSelector","minDist","minIdx","udl","ox","oy","fnInit","_curryAnchor","DynamicAnchors","AutoDefault","Continuous","_curryContinuousAnchor","pf","AnchorPositionFinders","dp","gx","gy","mx","my","Perimeter","anchorCount","shape","_path","segments","_computeFace","fractionalLength","anchorsPerFace","_shape","_rectangle","_circle","points","tl","_rotate","amountInDegrees","_shapes","rotation","da","_jg","Segments","AbstractSegment","findClosestPointOnPath","getBounds","Straight","m2","_recalc","getGradient","getCoordinates","setCoordinates","coords","pointOnPath","absolute","_","pointAlongPathFrom","farAwayPoint","within","closest","_x1","_y1","fractionInSegment","Arc","_calcAngle","_calcAngleForLocation","segment","anticlockwise","startAngle","endAngle","TWO_PI","sa","ea","radius","ac","sweep","frac","circumference","gentleRound","ceil","VERY_SMALL_VALUE","angle","arcSpan","dir","startX","startY","Bezier","cp1x","cp1y","cp2x","cp2y","_curve","_translateLocation","SegmentRenderer","laf","AbstractConnector","AbstractComponent","totalLength","segmentProportions","segmentProportionalLengths","stub","sourceStub","targetStub","gap","sourceGap","targetGap","userProvidedSegments","edited","paintInfo","ConnectorEditors","internallyComputed","getPathData","hasBeenEdited","editor","isActive","overrideSetEditable","findSegmentForPoint","_findSegmentForLocation","inSegmentProportion","proportion","_addSegment","updateBounds","_clearSegments","setSegments","_segs","swapX","swapY","lw","so","oIndex","sy","tx","ty","oProduct","sx","xSpan","ySpan","startStubX","startStubY","endStubX","endStubY","isXGreaterThanStubTimes2","isYGreaterThanStubTimes2","opposite","perpendicular","orthogonal","sourceAxis","anchorOrientation","getSegments","segBounds","seg","_prepareCompute","_compute","_updateSegmentProportions","addSegment","prepareCompute","maxStub","maxGap","_setGeometry","_getGeometry","AbstractEndpoint","Dot","defaultOffset","defaultInnerRadius","Rectangle","displayElements","DOMElementEndpoint","getDisplayElements","appendDisplayElement","Image","onload","img","deleted","widthToUse","heightToUse","_onload","setImage","_img","margin","padding","outline","actuallyPaint","Blank","Triangle","AbstractOverlay","endpointLoc","endpointLocation","incrementLocation","amount","getLocation","Arrow","foldback","computeMaxSize","elementCreated","currentConnectionPaintStyle","mid","tail","cxy","fromLoc","hxy","__","PlainArrow","Diamond","forceRefresh","cachedDimensions","getDimensions","detached","div","initialised","initiallyInvisible","webkitTransform","mozTransform","msTransform","oTransform","transform","absolutePosition","_getDimensions","locToUse","miny","minx","AbstractDOMOverlay","clearCachedDimensions","containerExtents","Custom","GuideLines","tailLine","headLine","labelHeight","labelText","labelPadding","font","borderWidth","borderStyle","border","dStyle","lt","_mottle","getEventManager","_jpi","_connectionSourceMap","_connectionTargetMap","GROUP","group","_cleanupDetachedConnection","connMap","addGroup","getEl","GROUP_EXPANDED_CLASS","_managedGroups","manager","_updateConnectionsForGroup","EVT_GROUP_ADDED","addToGroup","doNotFireEvent","getGroup","_jsPlumbGroup","currentGroup","collapsed","groupEl","getDragArea","updateConnectionsForGroup","expandConnection","collapseConnection","handleDroppedConnections","elpos","cpos","newPosition","EVT_CHILD_ADDED","removeFromGroup","groupId","getGroups","removeGroup","deleteMembers","manipulateDOM","expandGroup","_groups","EVT_GROUP_REMOVED","getMembers","groupElId","originalElementId","otherEl","shouldProxy","proxyEp","getAnchor","isProxyEndpoint","collapseGroup","conns","_collapseConnection","_collapseSet","GROUP_COLLAPSED_CLASS","EVT_COLLAPSE","originalElement","_expandConnection","_expandSet","repaintGroup","EVT_EXPAND","processed","oneSet","refreshAllGroups","GROUP_CONTAINER_SELECTOR","ghost","orphan","prune","dropOverride","proxied","internal","endpointIndex","GROUP_DRAG_SCOPE","opts","overrideDrop","getGroupManager","els","targetGroup","__el","_bindDragHandlers","dragArea","doNotUpdateConnections","_unbindDragHandlers","EVT_CHILD_REMOVED","removeAll","orphanAll","_orphan","ELEMENT_DRAGGABLE_EVENT","dragParams","_findParent","leftEdge","rightEdge","topEdge","bottomEdge","_isInsideParent","STOP","_pruneOrOrphan","REVERT","_revalidate","toggleGroup","GROUP_MANAGER","mgr","getGroupFor","_super","midpoint","alwaysRespectStubs","lastx","lasty","lastOrientation","cornerRadius","loopbackRadius","isLoopbackCurrently","ly","lx","sgnx","sgny","segLength","_cloneArray","writeSegments","radiusToUse","sgnEqual","stubCalculators","commonStubCalculator","axis","areInProximity","pi","stubs","oss","oes","midy","lineCalculators","sis","midLines","midx","linesToEnd","startToEnd","startToMidToEnd","otherStubs","soIdx","orientations","toIdx","_so","_to","otherFlipped","stub1","stub2","segmentIndexes","startStub","otherStartStub","endStub","otherEndStub","extent","otherAxis","comparator","_val","Flowchart","AbstractBezierConnector","showLoopback","curviness","proximityLimit","tp","_w","sp","_h","_computeBezier","loopback","majorAnchor","minorAnchor","getCurviness","_findControlPoint","sourceAnchorPosition","targetAnchorPosition","soo","too","_CP","_CP2","_sx","_sy","_tx","_ty","controlPoints","_controlPoint","_midy","_segment","_midx","StateMachine","STRAIGHT","STROKE_DASHARRAY","DASHSTYLE","LINEAR_GRADIENT","RADIAL_GRADIENT","DEFS","FILL","STROKE","STROKE_WIDTH","STYLE","NONE","JSPLUMB_GRADIENT","LINE_WIDTH","svg","xhtml","_attr","_node","xmlns","_pos","_clearGradient","_updateGradient","uiComponent","gradientUnits","stops","stopColor","styleToUse","applyGradientTo","_applyStyles","parts","forEach","svgAttributeMap","_appendAtIndex","pointerEventsSpec","originalArgs","svgParams","useDivWrapper","SvgComponent","_superSetEditable","outlineStyle","outlineStrokeWidth","bgPath","SvgEndpoint","makeNode","superclass","makePath","AbstractSvgArrowOverlay","p1_1","p1_2","attachListeners","d1","d2","_jk","category","pName","enctype","_getDragManager","_animProps","ldist","tdist","duration","steps","linc","tinc","_int","setInterval","clearInterval","isElementDraggable","oc","specs","addToDragSelection","removeFromDragSelection","clearDragSelection","_do","webkitRequestAnimationFrame","htmlToElement","template","initRepr","audioContext","getAudioContext","AudioContext","webkitAudioContext","Marker","getContext","strokeStyle","setLineDash","beginPath","moveTo","lineTo","Oscilloscope","me","createOscilloscopeRepr","repr","helpers","controller","onmousedown","onmouseup","onmousemove","triggerLevel","traces","markers","marker","markerMoving","autoTriggering","triggerMoving","triggerTrace","triggerType","clientWidth","clientHeight","scaling","fillStyle","fillRect","fetch","triggerLocation","getTriggerLocation","trace","addSource","addTrace","addMarker","title_id","buf","buflen","risingEdgeTrigger","fallingEdgeTrigger","onMouseDown","offsetY","offsetX","onMouseUp","onMouseMove","changed","markerLevel","Waveform","createWaveformRepr","on_off","getElementsByClassName","onchange","onSwitch","checked","osc","createOscillator","output","createGain","frequency","gain","startOsc","stopOsc","analyzer","createAnalyser","fftSize","switch_id","previousType","previousFrequency","real","Float32Array","imag","wave","createPeriodicWave","setPeriodicWave","Microphone","onactive","createMicrophoneRepr","gotStream","stream","createMediaStreamSource","traceGain","sinkGain","destination","Uint8Array","frequencyBinCount","initAudio","getUserMedia","constructSource","previousGain","NormalTrace","colorpicker","icon","createTraceRepr","setColor","fetched","getByteTimeDomainData","FFTrace","getByteFrequencyData","SPACING","BAR_WIDTH","numBars","multiplier","lineCap","magnitude","nodeTreeCanvas","app","nodes","webkitGetUserMedia","mozGetUserMedia","cancelAnimationFrame","webkitCancelAnimationFrame","mozCancelAnimationFrame","mozRequestAnimationFrame","oscilloscope","osc1","osc2","mic","micTrace","micFFT","onMicActive","currentTime","conf"],"mappings":"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"}